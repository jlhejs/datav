// env=undefined => env=publish 
Cube("datav:/com/iframe/1.2.8/template.html",[],function(t,e,n,i,r,o){return t.exports=function(){return'<iframe src="" scrolling="" width="<%= width %>" height="<%= height %>" style="border:none;"></iframe>\n<% if (closeButton) { %>\n  <i class="close-button"></i>\n<% } %>\n'},t.exports});;
Cube("datav:/com/iframe/1.2.8",["datav:/npm/bcore/0.0.18/event","datav:/npm/jquery/2.1.4","datav:/npm/lodash/4.6.1"],function(t,n,i,o,e,s){var a=i("datav:/npm/bcore/0.0.18/event"),A=i("datav:/npm/jquery/2.1.4"),h=i("datav:/npm/lodash/4.6.1"),r=i("datav:/com/iframe/1.2.8/template.html")();return t.exports=a.extend(function(t,n){this.config={alwaysShowCloseButton:!1,theme:{}},this.container=A(t),this.template=h.template(r),this.apis=null,this._data=null,this.chart=null,this.init(n)},{init:function(t){this.updateOptions(t)},render:function(t,n){t=this.data(t);var i=this.mergeConfig(n);i.closeButton&&this.container.show();n=this.container.find("iframe"),t=t&&t[0]&&t[0].url||i.url;/^(http|https):\/\//.test(t)||(t=""),n.attr({src:t,scrolling:i.noScrolling?"no":"auto"})},resize:function(t,n){this.container.find("iframe").attr({width:t,height:n})},setColors:function(){},data:function(t){return t&&(this._data=h.clone(t)),this._data},updateOptions:function(t){var e=this,n=this.mergeConfig(t),i=this.container;i.find("iframe").off(),i.find(".close-button").off(),i.off(),i.html(this.template({cfg:n,width:i.width(),height:i.height(),closeButton:n.closeButton})).show();var o,s=i.find("iframe");s.on("load",function(){var t,n=s.attr("src"),i=n.indexOf("?"),o={};-1<i&&(t=n.substr(i+1).split("&"),h.map(t,function(t){1<(t=t.split("=")).length&&(o[t[0]]=unescape(t[1]))})),e.emit("url-changed",o)}),n.closeButton&&((o=i.find(".close-button")).css({position:"absolute",top:0,right:0,"background-image":"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAQAAADZc7J/AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QAAKqNIzIAAAAHdElNRQfgDBQPDy0JAJtsAAAAnElEQVRIx+2Uyw2DMBBE90IHKYEK4OIDFEEhcU2kNCp5OSSQxUQaR3uK5HfzyDu29mfWaHwBYwUgF3oG4IE0GNhZnLoc6qgMJj6kt5acNiuDjs1d783o3Xmj01m44SlOdYk8v3n6T20tEldSdXiR90tNai2yC8+/h8d+EMxBsArBPgh3opyFSRmMYhoHZbDvg3uhv7pilfug8Y88AejGcLnU1zXYAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDE2LTEyLTIwVDE1OjE1OjQ1KzA4OjAweSbnbAAAACV0RVh0ZGF0ZTptb2RpZnkAMjAxNi0xMi0yMFQxNToxNTo0NSswODowMAh7X9AAAAAASUVORK5CYII=')","font-style":"normal",display:n.alwaysShowCloseButton?null:"none",width:32,height:32,"background-color":"#999",opacity:.8,cursor:"pointer",transition:"opacity .2s","border-radius":2}).on("mouseenter",function(){A(this).css("opacity",1)}).on("mouseleave",function(){A(this).css("opacity",.8)}).on("click",function(){i.hide()}),i.on("mouseenter",function(){s.attr("src")&&o.show()}).on("mouseleave",function(){n.alwaysShowCloseButton||o.hide()})),this.render()},mergeConfig:function(t){return t&&(this.config.theme=h.defaultsDeep(t.theme||{},this.config.theme),this.setColors(),this.config=h.defaultsDeep(t||{},this.config),this.config.url=/^(http|https):\/\//.test(this.config.url)?this.config.url:""),this.config},destroy:function(){this.container.empty(),this._data=null,this.off&&this.off()},setIframeUrl:function(t){t&&this.container.find("iframe").attr({src:t.url})}}),t.exports});