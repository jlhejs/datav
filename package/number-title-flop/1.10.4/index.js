// env=undefined => env=publish 
Cube("datav:/com/number-title-flop/1.10.4/style.css", [], function(m){m.exports=".counter-container .prefix{margin-right:var(--prefix-num-margin-right)}.counter-container .suffix{margin-left:var(--num-suffix-margin-left)}.counter-container span{line-height:1!important}";return m.exports});;
Cube("datav:/com/number-title-flop/1.10.4/template.html",[],function(t,e,n,i,r,o){return t.exports=function(){return'<div class="title-container"></div>\n<div class="counter-container"></div>'},t.exports});;
Cube("datav:/com/number-title-flop/1.10.4",["datav:/com/main-title/1.3.8","datav:/com/counter/1.3.23","datav:/npm/bcore/0.0.9/event","datav:/npm/lodash/4.6.1","datav:/npm/jquery/2.1.4"],function(t,e,n,i,o,r){function a(e,t){var n,i=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)),i}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach(function(t){b(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function b(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var l=n("datav:/npm/bcore/0.0.9/event"),s=n("datav:/com/main-title/1.3.8"),c=n("datav:/com/counter/1.3.23"),u=n("datav:/com/number-title-flop/1.10.4/template.html")(),p=n("datav:/npm/lodash/4.6.1"),f=n("datav:/npm/jquery/2.1.4");return n("datav:/com/number-title-flop/1.10.4/style.css",""),t.exports=l.extend(function(t,e){this.config={theme:{},global:{abnormalData:0,initShowData:0},title:{textStyle:{textAlign:"flex-start"}},counter:{numbers:{animation:!0,backgroundColor:{type:"flat",value:"rgba(51,51,51,0)"}},suffix:{suffixArrange:"baseline"}},interaction:{cursor:!1}},this.container=f(t),this.template=u,this.apis=null,this._data=null,this.init(e)},{init:function(t){var e=this,t=(this.apis=t.apis,this.mergeConfig(t));this.container.append(p.template(this.template)),this.titleDom=this.container.find(".title-container"),this.counterDom=this.container.find(".counter-container"),this.title=new s(this.titleDom[0],this._formatTitleConfig(t)),this.counter=new c(this.counterDom[0],this._formatCounterConfig(t)),this.counter.on("counter-change",function(){e.globalEvent()}),this.separatorClassName=null,this.initShow(t)},render:function(t,e){var n=this,i=(this.dataChange=!1,t=this.data(t),this.mergeConfig(e)),o=null!==p.get(t,["0","value"],null)?Number(t[0].value):null,o=(this.updateLayout(),Number.isNaN(o)),r=i.global.abnormalData,e=(t&&this.dataChange?(this.counter.render(o?[{value:0}]:t,this._formatCounterConfig(i,t)),o&&this.showCustomStr(r)):e&&(this.counter.render(null,this._formatCounterConfig(i,t)),o&&this.showCustomStr(r)),t&&t[0]&&t[0].name?t[0].name:""),o=(this.title.render([{value:e}],this._formatTitleConfig(i)),this.updateLayout(),this.config.interaction.cursor);this.container.off("click").on("click",function(){n.handleClick()}),this.container.css({cursor:o?"pointer":"default"})},initShow:function(t){t=t.global.initShowData;this.showCustomStr(t)},showCustomStr:function(t){this.counterDom.find("span.number.real-number").html(t)},resize:function(t,e){this.updateLayout()},globalEvent:function(){this.config;var t=this.data();this.emit("number-changed",t&&t[0])},handleClick:function(){var t=this.data();this.emit("number-click",t&&t[0])},getColorStops:function(n){var i;if(Array.isArray(n))return i="",p.map(p.sortBy(n,function(t){return t.offset}),function(t,e){e=e<n.length-1?",":"";i+="".concat(t.color," ").concat(t.offset,"%").concat(e)}),i},linearGradientBackground:function(){var t,e=this.config.counter.numbers.backgroundColor;null!=this.config.counter.numbers.textStyle.color&&("flat"===e.type?(this.config.counter.numbers.backgroundColor=e.value,this.config.counter.numbers.backgroundImage=null):"linearGradient"===e.type&&(t=this.getColorStops(e.value.stops),this.config.counter.numbers.backgroundColor=null,this.config.counter.numbers.backgroundImage="-webkit-linear-gradient(".concat(e.value.angle,"deg, ").concat(t,")")))},mergeConfig:function(t){if(!t)return this.config;this.config.theme=p.defaultsDeep(t.theme||{},this.config.theme),this.config=p.defaultsDeep(t||{},this.config);var e,t=this.config.counter.numbers.textStyle.color;return"flat"===t.type?(this.config.counter.numbers.textStyle.color=t.value,this.config.counter.numbers.textStyle.backgroundImage=null):"linearGradient"===t.type&&(e=this.getColorStops(t.value.stops),this.config.counter.numbers.textStyle.color=null,this.config.counter.numbers.textStyle.backgroundImage="-webkit-linear-gradient(".concat(t.value.angle,"deg, ").concat(e,")")),this.linearGradientBackground(),this.config},updateStyle:function(){var t,e,n=this.config;n&&this.counterDom&&(t=(n=n.counter&&n.counter.margin||{preNum:0,numSuff:0}).preNum,n=n.numSuff,(e=this.counterDom.context&&this.counterDom.context.style).setProperty("--prefix-num-margin-right","".concat(t,"px")),e.setProperty("--num-suffix-margin-left","".concat(n,"px")))},updateLayout:function(){var t=this.config,e=this.container.width(),n=this.container.height();switch(t.global.arrangement){case"top":this.titleDom.css({display:"flex","line-height":"normal",margin:0,"margin-bottom":t.global.distance||0,"justify-content":t.title.textStyle.textAlign,width:"100%"}),this.container.css({display:"block",alignItems:"start","flex-direction":"column"}),this.counterDom.width(e);var i=n-this.titleDom.height()-(t.global.distance||0);this.counterDom.height(i),this.counter.resize(e,i);break;case"bottom":this.titleDom.css({display:"flex",margin:0,"margin-top":t.global.distance||0,overflow:"visible","justify-content":t.title.textStyle.textAlign,width:"100%"}),this.container.css({display:"flex","flex-direction":"column-reverse"}),this.counterDom.width(e);i=n-this.titleDom.height()-(t.global.distance||0);this.counterDom.height(i),this.counter.resize(e,i);break;case"left":this.titleDom.css({display:"flex",margin:0,"margin-right":t.global.distance||0,overflow:"visible","justify-content":t.title.textStyle.textAlign,width:"auto"}),this.container.css({display:"flex",alignItems:"baseline","flex-direction":"row"}),this.counterDom.height(n);i=e-this.titleDom.width()-(t.global.distance||0);this.counterDom.width(i),this.counter.resize(i,n)}this.updateStyle()},data:function(t){if(!t||!Array.isArray(t))return this._data;var e=!0;return t&&t[0]&&this._data&&this._data[0]&&((p.isEqual(t[0],this._data[0])||p.isEqualWith(t[0],this._data[0],function(t,e){t=p.clone(t),e=p.clone(e);return delete t.value,delete e.value,p.isEqual(t,e)})&&this.config.counter.numbers.rounding&&this._data&&Math.round(t[0].value)===Math.round(this._data[0].value))&&!this.config.counter.numbers.sameDataFlip||p.isUndefined(t[0].value))&&(e=!1),this._data=t,this.dataChange=e,this._data},_formatCounterConfig:function(t,e){var n=JSON.parse(JSON.stringify(t)),i=n.counter,t=p.get(t,"counter.suffix","baseline").suffixArrange;return i.global={align:{justifyContent:i.justifyContent,alignItems:t},textStyle:{fontFamily:i.fontFamily||n.global.textStyle.fontFamily}},i.prefix.content=e&&e[0]&&e[0].prefix||i.prefix.content,i.suffix.content=e&&e[0]&&e[0].suffix||i.suffix.content,i.interaction=n.interaction,delete i.justifyContent,i},_formatTitleConfig:function(t){var t=JSON.parse(JSON.stringify(t)),e=t.title;return e.textStyle.fontFamily=t.global.textStyle.fontFamily,delete e.width,e},getColorableConfig:function(t){if(!t||p.isEmpty(t))return{};t.textColor,t.axisColor;var e=t.palette,t=t.bgColor,n="rgb(10, 115, 255)",i="rgb(10, 115, 255)";return e&&0<e.length&&(n=e[p.floor(e.length/2)],i=e[0],e[e.length-1]),{title:{textStyle:{color:i}},counter:{prefix:{textStyle:{color:n}},numbers:{textStyle:{color:{type:"flat",value:n}},backgroundColor:{value:t}},suffix:{textStyle:{color:n}}}}},getThemableConfig:function(t,e){var n,i,o,r,a,l,s,c=this.config,u=c.title.textStyle,c=c.counter,f=c.prefix.textStyle,h=c.numbers.textStyle,c=c.suffix.textStyle,e=e||{},g=e.color,m=e.font,e=(e.complexity,this.getColorableConfig(g||t)),g={};m&&(t=function(t,e){return void 0===p.get(m,t)?{}:b({},e,p.get(m,t))},i="family",o="fontFamily",r="weight",a="fontWeight",l="color.secondary",s="color",g={title:{textStyle:d(d(d({fontSize:p.get(m,n="size",0)+u.fontSize},t(i,o)),t(r,a)),t(l,s))},counter:{prefix:{textStyle:d(d(d({fontSize:p.get(m,n,0)+f.fontSize},t(i,o)),t(r,a)),t(l,s))},numbers:{textStyle:d(d(d({fontSize:p.get(m,n,0)+h.fontSize},t(i,o)),t(r,a)),t(l,s))},suffix:{textStyle:d(d(d({fontSize:p.get(m,n,0)+c.fontSize},t(i,o)),t(r,a)),t(l,s))}}});return p.defaultsDeep({},{},g,e)},destroy:function(){this.titleDom=null,this.counterDom=null,this.title=null,this.counter.off(),this.counter=null,this.container.empty(),this.off&&this.off()},clear:function(){this._data[0].value=0,this.counter.forceUpdate()}}),t.exports});