Cube('datav:/com/map2d-layer-bubbles/0.0.18',['datav:/npm/bcore/0.0.21/event','datav:/npm/bcore/0.0.21/utils','datav:/npm/ldmap/0.1.29/layer/bubbles'],function(i,n,e,m,l,k){function j(a){return b[a]?b[a]:b[a]=c[a]()}function a(){var b=arguments[arguments.length-1];this.options=f.deepMergeWithoutArray(a.options,b),this.loop()}var c={},b={};c['coms/map2d-layer-bubbles/0.0.18/color_config']=c['coms/map2d-layer-bubbles/0.0.18/color_config.js']=function(){var b={},a={exports:b};return a.exports={类型一:[{percent:0,opacity:1},{percent:.35,opacity:1},{percent:.35,opacity:.3},{percent:1,opacity:.3}],类型二:[{percent:0,opacity:.99},{percent:.4,opacity:.99},{percent:.4,opacity:.7},{percent:.6,opacity:.7},{percent:.6,opacity:.5},{percent:.8,opacity:.5},{percent:.8,opacity:.2},{percent:1,opacity:.2}],类型三:[{percent:0,opacity:.99},{percent:.65,opacity:.99},{percent:.65,opacity:.7},{percent:.75,opacity:.7},{percent:.75,opacity:.5},{percent:.85,opacity:.5},{percent:.85,opacity:.2},{percent:1,opacity:.2}],类型四:[{percent:0,opacity:.99},{percent:.55,opacity:.99},{percent:.55,opacity:0},{percent:.62,opacity:0},{percent:.63,opacity:.8},{percent:.65,opacity:.8},{percent:.72,opacity:0},{percent:.73,opacity:.7},{percent:.75,opacity:.7},{percent:.82,opacity:0},{percent:.83,opacity:.6},{percent:.85,opacity:.6},{percent:.92,opacity:0},{percent:.93,opacity:.5},{percent:.95,opacity:.5}],类型五:[{percent:0,opacity:1},{percent:1,opacity:1}],类型六:[{percent:0,opacity:.99},{percent:.1,opacity:.9},{percent:.3,opacity:.9},{percent:.3,opacity:.11},{percent:.7,opacity:.2},{percent:.7,opacity:.2},{percent:1,opacity:.7}],类型七:[{percent:0,opacity:.1},{percent:.6,opacity:.1},{percent:.6,opacity:.2},{percent:.75,opacity:.3},{percent:.75,opacity:.99},{percent:.85,opacity:.7},{percent:1,opacity:.3}]},a.exports};var h=e('datav:/npm/bcore/0.0.21/event'),f=e('datav:/npm/bcore/0.0.21/utils'),d=j('coms/map2d-layer-bubbles/0.0.18/color_config'),g=e('datav:/npm/ldmap/0.1.29/layer/bubbles');return a.options={},a=h.extend(a,{addTo:function(a){a._map&&(a=a._map),this._map=a,this.initCom()},getOptions:function(){var a=this.options;if(a&&a.typeSeries&&a.typeSeries.length)for(var b=0;b<a.typeSeries.length;b++){var c=a.typeSeries[b],e=c.bubbleKey;d[e]?c.colorSeries=d[e]:c.colorSeries=[]}return a},initCom:function(){var a=this.getOptions(this.options),b=this.layer=new g(a);b.addTo(this._map)},updateOptions:function(a){a=this.options=f.deepMergeWithoutArray(this.options,a),this.layer.updateOptions(this.getOptions(a))},remove:function(){this.layer.remove&&this.layer.remove(),window.cancelAnimationFrame(this.loopId)},render:function(a){if(!a||a.length<1)return console.log('地图组件Map2dBubbles未收到数据...');this.layer&&this.layer.render(a)},loop:function(){this.layer&&this.layer.update(),this.loopId=window.requestAnimationFrame(this.loop.bind(this))}}),i.exports=a,i.exports})