// env=undefined => env=publish 
Cube("datav:/com/datavmap-3d-layer-directionallight/0.0.3/directional_light.js",["datav:/npm/eventemitter3/2.0.3","datav:/npm/safely-merge/1.0.1"],function(a,b,c){const d=c("datav:/npm/eventemitter3/2.0.3"),e=c("datav:/npm/safely-merge/1.0.1");return a.exports=function(a){let b=a.datavgl,c=b.THREE,f=a.glLayer||a;const g={lightColor:"#ffffff",lightIntensity:0.5,px:1,py:-1,pz:1,enableHelper:!1,helperSize:5};return class extends d{constructor(a){super(),a=e(g,a),this.options=e(this.options,a),this.init()}init(){this.directionalLight=new c.DirectionalLight(new c.Color(this.options.lightColor),this.options.lightIntensity),this.directionalLight.position.set(this.options.px,this.options.py,this.options.pz).normalize(),this.helper=new c.DirectionalLightHelper(this.directionalLight,this.options.helperSize),f.scene.add(this.directionalLight),this.options.enableHelper&&f.scene.add(this.helper)}setData(){}updateOptions(a){this.options.enableHelper&&f.scene.remove(this.helper),this.options=e(g,a),this.directionalLight.color=new c.Color(this.options.lightColor),this.directionalLight.intensity=this.options.lightIntensity,this.directionalLight.position.set(this.options.px,this.options.py,this.options.pz).normalize(),this.options.enableHelper&&f.scene.add(this.helper),this.options.enableHelper||f.scene.remove(this.helper)}show(){this.directionalLight&&(this.directionalLight.visibility=!0)}hide(){this.directionalLight&&(this.directionalLight.visibility=!1)}remove(){f.scene.remove(this.directionalLight),f.scene.remove(this.helper)}}},a.exports});;
Cube("datav:/com/datavmap-3d-layer-directionallight/0.0.3",["datav:/npm/eventemitter3/2.0.3","datav:/npm/safely-merge/1.0.1"],function(a,b,c){const d=c("datav:/npm/eventemitter3/2.0.3"),e=c("datav:/npm/safely-merge/1.0.1"),f=c("datav:/com/datavmap-3d-layer-directionallight/0.0.3/directional_light.js"),g={};return a.exports=class extends d{constructor(a,b){super(),this.container="string"===typeof a?document.querySelector(a):a,this.apis=b.apis,this.map=null,this._data=null,this.config=b}initLayer(){let a=this.getOptions(),b=f(this.map);this.layer=new b(a)}addTo(a){this.map=a,this.resetID&&clearTimeout(this.resetID),this.init(),this.endID=setTimeout(()=>{this.resetID&&clearTimeout(this.resetID)},100000)}init(){this.map.loaded()&&this.map.isStyleLoaded()?(this.resetID&&clearTimeout(this.resetID),this.initLayer(),this.data&&this.render(this.data)):(this.resetID&&clearTimeout(this.resetID),this.resetID=setTimeout(()=>{this.init()},100))}getOptions(){return this.config=e(g,this.config),this.config}show(){this.layer&&this.layer.show&&this.layer.show()}hide(){this.layer&&this.layer.hide&&this.layer.hide()}remove(){this.endID&&clearTimeout(this.endID),this.resetID&&clearTimeout(this.resetID),this.layer&&this.layer.remove&&this.layer.remove(),this.layer=null,this._data=null}render(a){a&&(this.data=a)}updateOptions(a){this.config=e(this.config,a),a=this.getOptions(),this.layer&&this.layer.updateOptions(a)}},a.exports});