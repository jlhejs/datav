// env=undefined => env=publish 
Cube("datav:/com/ml-pie-multi-radius/3.0.11/defaultConfig",[],function(a){return a.exports={chart:{pie:{outerBorderColor:"rgba(255,255,255,0.1)"},numericalLabel:{textStyle:{fontFamily:"Microsoft Yahei",fontWeight:"normal",fontSize:12,color:"rgba(255,255,255,0.8)"},real:!1,decimal:2},categoryLabel:{show:!0,textStyle:{fontFamily:"Microsoft Yahei",fontWeight:"normal",fontSize:12,color:"rgba(255,255,255,0.8)"}},labelLine:{dx:.7,dr:.8},legend:{show:!0,textarea:{fontFamily:"Microsoft Yahei",fontWeight:"normal",fontSize:10,color:"rgba(255,255,255,0.5)"},layout:{margin:{horiInterval:8,vertiInterval:0},loc:"bottom-center"}}},axis:{radiusAxis:{radius:.6,grid:{show:!1,color:"rgba(170,170,170,0.5)"}}},series:{series:[{color:"#00baff",radius:{innerRadius:.7,outerRadius:1}},{color:"#3de7c9",radius:{innerRadius:.75,outerRadius:.95}}]},others:{animation:{show:!0,setting:{animationEasing:"cubicInOut",animationAfterPreviousSeries:!1,animationAllFromZero:!0},enter:{animationDuration:1e3},update:{animationDurationUpdate:300,animationUpdateFromPrevious:!0}},tooltip:{show:!0,hideDelay:100,trigger:{action:"hover"},textStyle:{fontFamily:"Microsoft Yahei",fontWeight:"normal",fontSize:14,color:"#fff"},bgBox:{backgroundColor:"rgba(0, 0, 0, 0.65)",customSize:{show:!1,width:150,height:50},padding:10,offset:{xOffset:6,yOffset:10},border:{borderWidth:0,borderColor:"#333"}}}}},a.exports});;
Cube("datav:/com/ml-pie-multi-radius/3.0.11/pie",["datav:/com/maliang-utils/0.0.22","datav:/npm/bcore/0.0.22/event","datav:/npm/dchart-pie-multi-radius/0.5.8","datav:/npm/jquery/2.1.4","datav:/npm/lodash/4.17.11","datav:/npm/lodash/4.17.11/cloneDeep"],function(a,b,c){function d(a,b,c,d){var g=j.cloneDeep(a),h=Math.min(c,d);g.width=c,g.height=d;var i=a.chart,k=a.axis,l=a.series,m=a.others;g.paxis={dr:h*i.labelLine.dr/2,dx:c*i.labelLine.dx/2},g.label={},g.label.dx=i.labelLine.dx,g.label.dr=i.labelLine.dr,g.xaxis=null,g.yaxis=null,g.arc={},g.arc.radius=h*k.radiusAxis.radius/2-3,g.arc.net=k.radiusAxis.grid.show,g.arc.netColor=k.radiusAxis.grid.color,g.colors=j.map(l.series,"color"),g.innerArr=j.map(l.series,"radius.innerRadius"),g.outerArr=j.map(l.series,"radius.outerRadius");var n=i.numericalLabel,o=i.categoryLabel,p=n.textStyle,q=o.textStyle;g.paxis.nlabel=function(a){var c=j.sumBy(b,"y.value"),d=a.y&&a.y.value,e="<tspan x=\"0\" dy=\"1em\" style=\"font-size: "+q.fontSize+"px; font-weight:"+q.fontWeight+"; fill: "+q.color+"\">"+a.x+"</tspan>",f="<tspan dy=\""+(o.show?-3:3)+"\" x=\"0\" style=\"font-size: "+p.fontSize+"px; font-weight:"+p.fontWeight+"; fill: "+p.color+"; font-family: "+p.fontFamily+"\">"+(n.real&&d.toFixed(n.decimal)||(c?(100*(d/c)).toFixed(n.decimal):0)+"%")+"</tspan>",g=n.show||j.isUndefined(n.show);return(g&&f||"")+(o.show&&e||"")};var r=m.animation,s=r.enter,t=r.update,u=r.setting;return Object.assign(g,f({},s)),Object.assign(g,f({},t)),Object.assign(g,f({},u)),g.animation=m.animation.show,g.tooltip=e(a.others.tooltip,b,a),g}function e(a,b,c){if(!a)return{};var d=k(a),e=a.trigger,f=a.textStyle,g=a.bgBox;e&&e.action&&(d.triggerMethod=e.action),d.trigger="item",a.beforeFormat&&(d.beforeFormat=a.beforeFormat);var h=c.series.series;if(d.formatter=function(a,d){var e="<div class=\"dchart-tooltip\">",f=c.chart.numericalLabel,g=h[d],i=b.map(function(a){return a.y.value}).reduce(function(c,a){return c+a},0),j=(i?(100*(a.y.value/i)).toFixed(f.decimal):0)+"%";return a.y&&(e+=n({color:g.color&&(g.color.gradientValue||g.color.value),key:a.x,value:a.y.value+" ("+j+")"})),e},void 0!==a.enterFocus&&(d.enterFocus=a.enterFocus),void 0!==a.hideDelay&&(d.hideDelay=a.hideDelay),f&&(d.color=f.color,d.fontSize=f.fontSize+"px",d.fontFamily=f.fontFamily,d.fontWeight=f.fontWeight),g){var i=g.offset,j=g.border,l=g.customSize;d.backgroundColor=g.backgroundColor,i&&void 0!==i.xOffset&&(d.xOffset=i.xOffset),i&&void 0!==i.yOffset&&(d.yOffset=i.yOffset),l&&(d.autoSize=!l.show,d.width=l.width,d.height=l.height),j&&(j.borderColor&&(d.borderColor=j.borderColor),void 0!==j.borderWidth&&(d.borderWidth=j.borderWidth))}return d}var f=Object.assign||function(a){for(var b,c=1;c<arguments.length;c++)for(var d in b=arguments[c],b)Object.prototype.hasOwnProperty.call(b,d)&&(a[d]=b[d]);return a},g=c("datav:/npm/bcore/0.0.22/event"),h=c("datav:/npm/dchart-pie-multi-radius/0.5.8"),i=c("datav:/npm/jquery/2.1.4"),j=c("datav:/npm/lodash/4.17.11"),k=c("datav:/npm/lodash/4.17.11/cloneDeep"),l=c("datav:/com/maliang-utils/0.0.22"),m=Math.PI,n=function(a){var b=a.serie,c=a.color,d=a.value,e=a.key;return"<div><span style=\"display:inline-block; margin-right:5px; border-radius:2px; width:10px; height:10px;\n        background:"+(c||b&&b.color&&b.color.value||"#ccc")+"\"></span>\n        "+(e?e+": ":"")+d+"</div>"};return a.exports=g.extend(function(a,b){this.config={theme:{},chart:{background:"transparent"},legend:{},series:[{value:"1",color:"#2F8FBE"}],tooltip:{show:!0,trigger:"item",triggerMethod:"hover",beforeFormat:null,enterFocus:!0,hideDelay:300,textStyle:{color:"#fff",fontSize:14,fontFamily:"Microsoft Yahei",fontWeight:"normal"},bgBox:{color:"rgba(0, 0, 0, 0.65)",padding:10,xOffset:6,yOffset:10,customSize:{show:!1,width:300,height:150},borderColor:"#333",borderWidth:0}}},this.container=i(a),this._width=this.container.width(),this.init(b)},{init:function(a){this.apis=a.apis;var b=this.mergeConfig(a);this.chart=new h(this.container[0],b)},isSafeNumber:function(a){return j.isNumber(a)&&!j.isNaN(a)&&j.isFinite(a)?a:null},render:function(a,b){var c=this.mergeConfig(b);a=this.data(a),a&&a.length&&(a&&this.chart.render(a,d(c,a,this._width,c.height)),this.updateStyle())},updateStyle:function(){var a=this.config,b=this.chart.el;if(b){var c=j.sumBy(this._data,"y");0===c&&b.select(".series-cords").selectAll(".serie-cord").style("stroke","none"),b.selectAll(".serie-bg").style("stroke","none"),b.select(".con-svg").style("background","transparent"),b.select(".bg-outer-circle").style("stroke-width","2px"),b.selectAll(".bg-outer-circle, .bg-inner-circle").style({fill:"none",stroke:a.chart.pie.outerBorderColor||"#fff"}),b.selectAll(".series-pies .serie").style("stroke","none");var d=a.chart.labelLine.show;b.select(".series-cords").style("display",(d||j.isUndefined(d))&&"block"||"none")}},setColors:function(){},hasS:function(a){var b=0;return j.map(a,function(a){void 0!==a.s&&b++}),b===a.length||0!==b&&!1},data:function(a){return a&&(this.__data=j.clone(a)),this._data=this.hasS(this.__data)?l.threeD2Two(this.__data,"x","y","s",l.getSeriesValue(this.config.series.series,"value")):j.cloneDeep(this.__data).map(function(a){return a.y={value:a.y,data:j.clone(a)},a}),this._data},mergeConfig:function(a){return a?(this.config.theme=j.defaultsDeep(a.theme||{},this.config.theme),this.setColors(),a.series&&(this.config.series=a.series),this.config=j.defaultsDeep(a||{},this.config),this.config):this.config},resize:function(a,b){this._width=a,this.config.height=b,this.render()},clear:function(){this.chart&&this.chart.empty()},destroy:function(){this.chart&&this.chart.off(),this.chart&&this.chart.destroy(),this._data=this.__data=null}}),a.exports});;
Cube("datav:/com/ml-pie-multi-radius/3.0.11",["datav:/com/legend/0.1.5","datav:/com/maliang-utils/0.0.22","datav:/npm/bcore/0.0.22/event","datav:/npm/jquery/2.1.4","datav:/npm/lodash/4.17.11","datav:/npm/lodash/4.17.11/cloneDeep"],function(a,b,c){var d=c("datav:/npm/bcore/0.0.22/event"),e=c("datav:/npm/jquery/2.1.4"),f=c("datav:/npm/lodash/4.17.11"),g=c("datav:/npm/lodash/4.17.11/cloneDeep"),h=c("datav:/com/ml-pie-multi-radius/3.0.11/pie"),i=c("datav:/com/legend/0.1.5"),j=c("datav:/com/maliang-utils/0.0.22"),k=c("datav:/com/ml-pie-multi-radius/3.0.11/defaultConfig");return a.exports=d.extend(function(a,b){this.config=g(k),this.container=e(a).css("padding","10px 0"),this.chart=null,this.legend=null,this.init(b)},{init:function(a){var b=a&&a.options||a;this.apis=b.apis;var c=this.mergeConfig(b),d=c.chart.legend,g=d.layout.loc.split("-")[0];this.chartDom=e("<div class=\"dchart-pie-multi-radius\" style=\"width: 100%;\"></div>"),this.legendDom=e("<div class=\"dchart-legend\" style=\"left: 0;width: 100%;\"></div>"),"bottom"===g?(this.container.append(this.chartDom),this.container.append(this.legendDom)):(this.container.append(this.legendDom),this.container.append(this.chartDom)),this.legend=new i(this.legendDom[0],d),this.chartDom.height(this.container.height()-(d.show&&this.legendDom.height()||0)),this.chart=new h(this.chartDom[0],f.cloneDeep(c)),this.legendDom.css("display",d.show&&"block"||"none"),this._bindEvent()},render:function(a,b){var c=b&&b.options||b,d=this.mergeConfig(c);if(a=this.data(a),a&&a.length){d.series.series=j.fixArray4cycle(d.series.series,a.length),f.map(d.series.series,function(b,c){b.showName=a[c]?a[c].x:null});var e=d.chart.legend;this.legend.render(d.series.series,e);var g=this.container.height()-(e.show&&this.legendDom.height()||0);this.chartDom.height(g),this.config.height=g,a&&this.chart.render(a,d),this._cfg=d}},updateStyle:function(){},setColors:function(){},data:function(a){return a&&(this._data=f.clone(a),this._data.length&&this._data.forEach(function(a){a.y=f.toNumber(a.y)})),this._data},mergeConfig:function(a){return a?(this.config.theme=f.defaultsDeep(a.theme||{},this.config.theme),this.setColors(),a.series&&(this.config.series=a.series),this.config=f.defaultsDeep(a||{},this.config),this.config):this.config},resize:function(a,b){this.chart.resize(a,b-(this.config.chart.legend.show&&this.legendDom.outerHeight()||0)-20)},updateLegendLayout:function(a){var b=this.config.chart.legend;if(b.show!==a.show&&(this.legendDom.css("display",a.show&&"block"||"none"),this.config.chart.height=this.container.height()-(a.show&&this.legendDom.height()||0)),b.textarea.fontSize!==a.textarea.fontSize&&(this.legendDom.find(".legend-item").css("fontSize",a.textarea.fontSize),this.config.chart.height=this.container.height()-(a.show&&this.legendDom.height()||0)),JSON.stringify(b.layout.margin)!==JSON.stringify(a.layout.margin)){var c=a.layout.margin;this.legendDom.find(".legend-item").css("margin",c.vertiInterval+"px "+c.horiInterval+"px"),this.config.chart.height=this.container.height()-(a.show&&this.legendDom.height()||0)}var d=b.layout.loc.split("-")[0],e=a.layout.loc.split("-")[0];d!==e&&("top"===e?this.container[0].appendChild(this.chartDom[0]):"bottom"===e&&this.container[0].appendChild(this.legendDom[0])),this.render(null,{chart:{legend:a}})},clear:function(){this.chart&&this.chart.clear(),this.legend&&f.isFunction(this.legend.clear)&&this.legend.clear()},destroy:function(){this.chart&&this.chart.destroy(),this.chart=null,this.legend&&this.legend.destroy(),this.legend=null,this.chartDom=null,this.legendDom=null,this.container&&this.container.empty(),this._data=null},startAnimate:function(){if(!(this.chart&&this.chart.chart))return!1;if(this._cfg){this.chart.chart.clearAllAnimation();var a=this._cfg.others.animation,b=a.update,c=a.enter,d=b.animationUpdateFromPrevious;b.animationUpdateFromPrevious=!1;var e=b.animationDurationUpdate;b.animationDurationUpdate=c.animationDuration,this.chart.render(),b.animationDurationUpdate=e,b.animationUpdateFromPrevious=d}},clearAnimate:function(){this.chart&&this.chart.chart&&this.chart.chart.resumeToAnimationEnd()},_bindEvent:function(){var a=this;if(this.chart&&this.chart.chart){var b=this.chart.chart;["click"].forEach(function(c){b.on(c,function(b){var d=b.data;return a.emit(c,d)})})}},highlight:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},b=a.data,c=a.options,d=void 0===c?{}:c;return this.chart?void(d.hasOwnProperty("selectMode")&&(d.mode=d.selectMode,delete d.selectMode),d.hasOwnProperty("cancelHighlightFirst")&&d.cancelHighlightFirst&&this.cancelHighlight(),this.chart.chart&&this.chart.chart.highlight({targetData:b,options:d})):null},cancelHighlight:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},b=a.data,c=a.options,d=void 0===c?{}:c;return this.chart?void(d.hasOwnProperty("selectMode")&&(d.mode=d.selectMode,delete d.selectMode),this.chart&&this.chart.chart&&this.chart.chart.cancelHighlight({targetData:b,options:d})):null}}),a.exports});