// env=undefined => env=publish 
Cube("datav:/com/@datav-mobile/goblin-utils/0.2.1",["datav:/npm/lodash/4.17.15"],function(a,b,c){function d(a,b){var c=e(a),d=g(c,b),f=i(d);return f.defs.forEach(function(a){a.nice&&(a.min=null,a.max=null)}),f}function e(a){var b=a.series.series;return b.forEach(function(a){n.forIn(a,function(a,b){if(n.includes(o,b)){var c=a.color;n.includes(r,b)&&c&&c.type&&("flat"===c.type?a.color=c.value:a.color=f(c.value))}})}),a}function f(a){var b="l("+a.angle+")";return a.stops.forEach(function(a){var c=a.color.replace(/\s+/g,""),d=" "+a.offset/100+":"+c;b+=d}),b}function g(a,b){var c=b.geomNames,d=b.enableHideGeom,e=b.seriesAttr,f=b.axis,g=b.seriesDataKey,i=b.dataNoS,j={defs:[],axis:[],series:[],animate:{},coord:{},legend:{},tooltip:{}},k=a.chart,l=a.axis,o=a.series,p=a.others,q={};n.forIn(k,function(a,b){"chart"===b?j.chart=a:"coord"===b?j.coord=a:"legend"===b?j.legend=a:q[b]=a}),n.forIn(f,function(a,b){var c=l[b+"Axis"],d=h(c),e={dataKey:a},f={dataKey:a};n.defaultsDeep(e,d.defs),n.defaultsDeep(f,d.axis),j.defs.push(e),j.axis.push(f)});var r={};c.forEach(function(a){r[a]=m({geom:a},q[a]),n.includes(d,a)||e.forEach(function(b){r[a][b]=i?null:[g,[]]})}),n.forIn(o,function(a,b){"series"===b&&a.forEach(function(a){n.forIn(a,function(a,b){n.forIn(a,function(a,c){i?r[b][c]=a:r[b][c][1].push(a)})})})}),n.forIn(r,function(a,b){(!n.includes(d,b)||a.show)&&(n.includes(d,b)&&(a.color=r.line&&r.line.color||g),j.series.push(a))}),j.tooltip=p.tooltip;var t=p.animate,u=t.easing,v=t.enterDuration,w=t.updateDuration,x=t.show;return s.forEach(function(a){j.animate[a]=!1}),c.forEach(function(a){j.animate[a]={appear:{easing:u,duration:v},enter:{easing:u,duration:v},update:{easing:u,duration:w}}}),j.animate.show=x,j}function h(a){var b={},c={};return n.forIn(a,function(a,d){n.includes(p,d)?b[d]=a:n.includes(q,d)&&("label"===d&&a&&"justify"===a.textAlign?c[d]=l(a):c[d]=a)}),{defs:b,axis:c}}function i(a){return j({},"root","",a)}function j(a,b,c,d){if("lineDash"===b)return w[d];if(k(d,b)){var e=d.replace("%function%","");return v[e]}return n.includes(t,c)&&void 0!==d.show&&!d.show?!1:"/legend/show"===c&&d?void 0:n.isObjectLike(d)?(n.forIn(d,function(b,d){var e="_"===d[0]?d.substring(1):d;a[e]=n.isArray(b)?j([],d,c+"/"+d,b):j({},e,c+"/"+e,b)}),a):d}function k(a,b){return"formatter"===b&&"string"===typeof a&&a.includes("%function%")}function l(a){return function(b,c,d){var e=n.clone(a);return e.textAlign=0===c?"left":c===d-1?"right":"center",e}}var m=Object.assign||function(a){for(var b,c=1;c<arguments.length;c++)for(var d in b=arguments[c],b)Object.prototype.hasOwnProperty.call(b,d)&&(a[d]=b[d]);return a},n=c("datav:/npm/lodash/4.17.15"),o=["interval","line","area","point","path","polygon","schema"],p=["_type","tickCount","formatter","_range","nice","min","max","tickInterval","mask"],q=["_show","labelOffset","grid","label","line","tickLine"],r=["area","interval","point"],s=["axis-label","axis-grid","axis-line","axis-tick"],t=["/animate","/tooltip","/legend","/axis/0/grid","/axis/0/tickLine","/axis/0/line","/axis/0/label","/axis/1/grid","/axis/1/tickLine","/axis/1/line","/axis/1/label"],u={};u.config2goblinBar=function(a,b){var c=a.options,e=c.chart.coord,f=e.startAngle,g=e.endAngle;c.chart.coord.startAngle=f&&f*Math.PI/180,c.chart.coord.endAngle=g&&g*Math.PI/180;var h=d(c,{geomNames:["interval"],enableHideGeom:null,seriesAttr:["color","size"],axis:{x:"x",y:"y"},seriesDataKey:"s",dataNoS:b});return h},u.config2goblinLine=function(a,b){var c=a.options;return d(c,{geomNames:["line","point"],enableHideGeom:["point"],seriesAttr:["color","size","shape"],axis:{x:"x",y:"y"},seriesDataKey:"s",dataNoS:b})},u.config2goblinArea=function(a,b){var c=a.options,e=c.series.series;return e.forEach(function(a){a.shape?(a.area.shape="smooth",a.line.shape="smooth"):(a.area.shape="area",a.line.shape="line")}),d(c,{geomNames:["line","area","point"],enableHideGeom:["point"],seriesAttr:["color","size","shape"],axis:{x:"x",y:"y"},seriesDataKey:"s",dataNoS:b})},u.config2goblinRadar=function(a,b){var c=a.options,e=c.series.series;e.forEach(function(a){a.shape?(a.area.shape="smooth",a.line.shape="smooth"):(a.area.shape="area",a.line.shape="line")});var f=c.chart.coord,g=f.startAngle,h=f.endAngle;return c.chart.coord.startAngle=g*Math.PI/180,c.chart.coord.endAngle=h*Math.PI/180,d(c,{geomNames:["line","area","point"],enableHideGeom:["point"],seriesAttr:["color","size","shape"],axis:{angle:"angle",r:"r"},seriesDataKey:"s",dataNoS:b})},u.config2goblinScatter=function(a,b){var c=a.options;return d(c,{geomNames:["point"],enableHideGeom:null,seriesAttr:["color","size","shape"],axis:{x:"x",y:"y"},seriesDataKey:"s",dataNoS:b})},u.config2goblinBubble=function(a,b){var c=a.options,e=c.chart.point.size;return c.chart.point.size=["r",[e.min,e.max]],d(c,{geomNames:["point"],enableHideGeom:null,seriesAttr:["color","shape"],axis:{x:"x",y:"y"},seriesDataKey:"s",dataNoS:b})},u.config2goblinPie=function(a){var b=a.options,c=b.chart.coord,e=c.startAngle,f=c.endAngle;return b.chart.coord.startAngle=e*Math.PI/180,b.chart.coord.endAngle=f*Math.PI/180,d(b,{geomNames:["interval"],enableHideGeom:null,seriesAttr:["color"],axis:{},seriesDataKey:"name"})},u.config2goblinPieMulti=function(a){var b=a.options,c=b.chart.coord,e=c.startAngle,f=c.endAngle;return b.chart.coord.startAngle=e*Math.PI/180,b.chart.coord.endAngle=f*Math.PI/180,d(b,{geomNames:["interval"],enableHideGeom:null,seriesAttr:["color"],axis:{r:"s"},seriesDataKey:"name"})},u.config2goblinRose=function(a){var b=a.options,c=b.chart.coord,e=c.startAngle,f=c.endAngle;return b.chart.coord.startAngle=e*Math.PI/180,b.chart.coord.endAngle=f*Math.PI/180,d(b,{geomNames:["interval"],enableHideGeom:null,seriesAttr:["color"],axis:{r:"value"},seriesDataKey:"name"})},a.exports=u;var v={round:function(a){return Math.round(a)},float_1:function(a){return a.toFixed(1)},float_2:function(a){return a.toFixed(2)}},w={line:null,dash:[4,2],dot:[2,4]};return a.exports});