// env=undefined => env=publish 
Cube("datav:/com/@datav-city-pro-v2-cim/datav-engine-terrain-heightmap-raster/2.0.0/MapLayer",[],function(e,t,r,i,a,s){function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(r){var i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=n(r),t=(e=i?(e=n(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return f(t)}}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function n(e){return(n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}return e.exports=function(e){var t=e.Utils,i=e.VG,o=e.viewer,e=i.Layer,r=s;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&l(r,e);var n,a=c(s);function s(e){var r;if(!(this instanceof s))throw new TypeError("Cannot call a class as a function");return p(f(r=a.call(this)),"isInitial",!0),p(f(r),"pick",function(){o.addEventListener(i.CLICK,r._pick,!0)}),p(f(r),"_pick",function(e){var t;r.options.options.status.enableInteractive&&((t=o.picker.gpupicker.pick(o.surface.surfaceLayer.group,e.originalEvent))?r.emit("leftClick",{clickPosition:{x:e.originalEvent.offsetX,y:e.originalEvent.offsetY},geo:[t.coordinates.longitude,t.coordinates.latitude,t.coordinates.altitude]}):r.emit("leftClick",{clickPosition:{x:e.originalEvent.offsetX,y:e.originalEvent.offsetY}}))}),r.options=e,r.visible=!0,r.type="TerrainRaster",r}return r=s,(e=[{key:"enableInteractive",get:function(){return!!this.layer&&this.layer.enableInteractive}},{key:"checkEventValid",value:function(e){return e&&("click"===e.type||"dblclick"===e.type)&&0==+e.button}},{key:"initLayer",value:function(){var e=this._getMapLayerConfig();if(e.tileWidth&&e.tileHeight&&e.url)return this.layer=o.getLayer("rasterTerrainLayer"),this.layer?this.layer.updateOptions({projType:e.projType,url:[e.url],minZoom:e.minZoom,maxZoom:e.maxZoom,zoomOffset:e.zoomOffset},"heightmap",!1):(this.layer=new i.RasterTerrainLayer({options:{projType:e.projType,url:[e.url],minZoom:e.minZoom,maxZoom:e.maxZoom,zoomOffset:e.zoomOffset},type:"heightmap",allowPicking:!1}),o.addLayer("rasterTerrainLayer",this.layer)),this.isInitial&&(this.pick(),this.isInitial=!1),this.layer}},{key:"_getMapLayerConfig",value:function(){var e=this.options.options;return{projType:e.data.projType,url:e.data.url,tileWidth:e.data.useTiles.tileWidth,tileHeight:e.data.useTiles.tileHeight,enablePickFeatures:e.status.enableInteractive,minZoom:e.data.useTiles.minZoom,maxZoom:e.data.useTiles.maxZoom,zoomOffset:e.data.useTiles.zoomOffset}}},{key:"setData",value:function(){}},{key:"updateOptions",value:function(e){this.options.options.status.enableInteractive===e.options.status.enableInteractive?(this.remove(),this.options=t.mergeOptions(this.options,e||{}),this.layer||this.initLayer()):this.options=t.mergeOptions(this.options,e||{})}},{key:"remove",value:function(){o.getLayer("rasterTerrainLayer")&&o.getLayer("rasterTerrainLayer").updateOptions({},"grid"),o.removeEventListener(i.CLICK,this._pick),this.layer=null,this.isInitial=!0}},{key:"show",value:function(){o.surface.surfaceLayer.group.visible=!0}},{key:"hide",value:function(){o.surface.surfaceLayer.group.visible=!1}},{key:"destroy",value:function(){this.layer&&(this.remove(),this.layer=null)}}])&&u(r.prototype,e),n&&u(r,n),Object.defineProperty(r,"prototype",{writable:!1}),s},e.exports});;
Cube("datav:/com/@datav-city-pro-v2-cim/datav-engine-terrain-heightmap-raster/2.0.0",["datav:/npm/eventemitter3/3.0.0"],function(e,r,t,c,f,p){function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(r){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=a(r),t=(e=n?(e=a(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return l(t)}}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var y=t("datav:/npm/eventemitter3/3.0.0"),s=t("datav:/com/@datav-city-pro-v2-cim/datav-engine-terrain-heightmap-raster/2.0.0/MapLayer"),t=function(){var e=c,t=y;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&i(e,t);var r,a=u(c);function c(e,t){var r,n,o,i;if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");return r=a.call(this),n=l(r),i=!0,(o="isInitial")in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i,r.options=t,r.visible=!0,r.comId="",r.type="TerrainRaster",r}return e=c,(t=[{key:"addTo",value:function(e,t){return this.cityproCore=e,this.comId=t,this.initLayer()}},{key:"enableInteractive",get:function(){return!!this.layer&&this.layer.enableInteractive}},{key:"checkEventValid",value:function(e){return e&&("click"===e.type||"dblclick"===e.type)&&0==+e.button}},{key:"initLayer",value:function(){var e=s(this.cityproCore);this.layer=new e(this.options),this.cityproCore.viewer.addLayer(this.comId,this.layer),this.visible?this.layer.show():this.layer.hide()}},{key:"setData",value:function(){}},{key:"updateOptions",value:function(e){this.layer&&this.layer.updateOptions(e)}},{key:"remove",value:function(){this.layer&&this.layer.remove()}},{key:"show",value:function(){this.visible=!0,this.layer&&this.layer.show()}},{key:"hide",value:function(){this.visible=!1,this.layer&&this.layer.hide()}},{key:"destroy",value:function(){this.layer&&(this.layer.destroy(),this.layer=null)}}])&&n(e.prototype,t),r&&n(e,r),Object.defineProperty(e,"prototype",{writable:!1}),c}();return e.exports=t,e.exports});