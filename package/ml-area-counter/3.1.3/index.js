// env=undefined => env=publish 
Cube("datav:/com/ml-area-counter/3.1.3/defaultConfig",[],function(a){return a.exports={chart:{margin:{top:0,bottom:20,left:40,right:20},emptyData:!1,loadAmount:2000,counter:{left:25,right:25,margin:12},legend:{show:!0,textarea:{fontFamily:"Microsoft Yahei",fontWeight:"normal",fontSize:10,color:"rgba(255,255,255,0.5)"},layout:{margin:{horiInterval:8,vertiInterval:0},loc:"bottom-center"}}},axis:{xaxis:{isShow:!0,type:"time",dataFormat:"%Y/%m/%d %H:%M:%S",boundaryGap:0,interval:1,extent:{min:"auto",max:"auto"},label:{show:!0,format:"%m\u6708",textarea:{fontFamily:"Microsoft Yahei",fontWeight:"normal",fontSize:10,color:"rgba(255,255,255,0.6)"},display:{dy:8,angle:"0",amount:5,unit:""}},axisLine:{show:!0,color:"rgba(255,255,255,0.5)"},grid:{show:!1,color:"#fff"}},yaxis:{isShow:!0,extent:{min:"0",max:"dataMax"},label:{show:!0,format:".0f",textarea:{fontFamily:"Microsoft Yahei",fontWeight:"normal",fontSize:10,color:"rgba(255,255,255,0.6)"},display:{angle:"0",amount:6,unit:"\u5355\u4F4D"}},axisLine:{show:!0,color:"rgba(255,255,255,0.5)"},grid:{show:!1,color:"#434343"}}},series:{series:[{serieName:"\u7CFB\u52171",line:{color:"#00baff",style:"solid",width:1,curve:"polyline"},point:{show:!0,radius:4,color:"#00baff"},area:{show:!0,color:{type:"linearGradient",value:{angle:90,stops:[{color:"#00baff",offset:0},{color:"rgba(0,186,255,0)",offset:100}]}}},numericalLabel:{show:!1,textStyle:{fontFamily:"Microsoft Yahei",fontWeight:"normal",fontSize:10,color:"#fff"}},counter:{presufContent:{prefix:"$",suffix:"\u5143"},prefix:{textStyle:{fontFamily:"Microsoft Yahei",fontWeight:"normal",fontSize:20,color:"rgba(255,255,255,0.6)"}},numbers:{textStyle:{fontFamily:"Microsoft Yahei",fontWeight:"normal",fontSize:20,color:"RGBA(255,255,255,0.6)"},display:{marginRight:0,backgroundColor:"rgba(51,51,51,0)"},digit:0,separating:{separatingSymbol:","},decimals:{rounding:!0,decimal:2,decimalSymbol:"."}},suffix:{textStyle:{fontFamily:"Microsoft Yahei",fontWeight:"normal",fontSize:20,color:"rgba(255,255,255,0.6)"}}}},{serieName:"\u7CFB\u52172",line:{color:"#3de7c9",style:"solid",width:1,curve:"polyline"},point:{show:!0,radius:4,color:"#3de7c9"},area:{show:!0,color:{type:"linearGradient",value:{angle:90,stops:[{color:"#3de7c9",offset:0},{color:"rgba(61,231,201,0)",offset:100}]}}},numericalLabel:{show:!1,textStyle:{fontFamily:"Microsoft Yahei",fontWeight:"normal",fontSize:10,color:"#fff"}},counter:{presufContent:{prefix:"$",suffix:"\u5143"},prefix:{textStyle:{fontFamily:"Microsoft Yahei",fontWeight:"normal",fontSize:20,color:"rgba(255,255,255,0.6)"}},numbers:{textStyle:{fontFamily:"Microsoft Yahei",fontWeight:"normal",fontSize:20,color:"RGBA(255,255,255,0.6)"},display:{marginRight:0,backgroundColor:"rgba(51,51,51,0)"},digit:0,separating:{separatingSymbol:","},decimals:{rounding:!0,decimal:2,decimalSymbol:"."}},suffix:{textStyle:{fontFamily:"Microsoft Yahei",fontWeight:"normal",fontSize:20,color:"rgba(255,255,255,0.6)"}}}}]},others:{animation:{show:!0,setting:{animationEasing:"cubicInOut",animationAfterPreviousSeries:!1},enter:{animationDuration:1000},update:{animationDurationUpdate:300,animationUpdateFromPrevious:!0}},tooltip:{show:!0,trigger:{type:"item",action:"hover"},textStyle:{fontFamily:"Microsoft Yahei",fontWeight:"normal",fontSize:14,color:"#fff"},hideDelay:100,axisPointer:{show:!0,_type:"line",lineStyle:{width:1,_type:"solid",color:"#f00"}},bgBox:{backgroundColor:"rgba(0, 0, 0, 0.65)",customSize:{show:!1,width:150,height:50},padding:10,offset:{xOffset:6,yOffset:10},border:{borderWidth:0,borderColor:"#333"}}}}},a.exports});;
Cube("datav:/com/ml-area-counter/3.1.3/line",["datav:/com/maliang-utils/0.0.24","datav:/npm/bcore/0.0.22/event","datav:/npm/jquery/2.1.4","datav:/npm/lodash/4.17.11","datav:/npm/lodash/4.17.11/merge","datav:/npm/lodash/4.17.11/cloneDeep","datav:/npm/dchart-area-stack-with-line-point/0.2.2","datav:/npm/d3/3.5.12/d3"],function(a,b,c){function d(a){return m.isNumber(a)&&!m.isNaN(a)&&m.isFinite(a)?a:null}function e(a,b){var c=o(a);c.show=a.isShow;var e=a.label;Object.assign(c,j({},e.textarea,{fontColor:e.textarea.color})),c.textShow=e.show,"time"===c.type?c.tickFormat=r.time.format(a.label.format):"defaults"===c.type?c.tickFormat=a.label.format:(c.tickFormat=null,c.ticks=c.ticks||b&&b.length||null),c.padding="category"===c.type?[a.interval,a.boundaryGap]:null,c.format=a.dataFormat,c.blank=0!==+a.boundaryGap,c.blankDis=a.boundaryGap;var f=a.extent;c.max=null===f.max?null:f.max,c.min=null===f.min?null:f.min;var g=f.max,h=f.min;if("time"===c.type&&(c.max=c.max&&"auto"!==c.max?f.max:null,c.min=c.min&&"auto"!==c.min?f.min:null),"defaults"===c.type)if(c.blank&&b){var i=m.map(b,"x"),k=m.max(i),l=m.min(i),n=(k-l)*c.blankDis;c.max=c.max&&"auto"!==c.max?m.toNumber(g)+n:k+n,c.min=c.min&&"auto"!==c.min?m.toNumber(h)-n:l-n}else c.max=c.max?d(m.toNumber(f.max)):null,c.min=c.min?d(m.toNumber(f.min)):null;var p=e.display;return c.ticks=p.amount,c.dy=p.dy,c.rotate=m.toNumber(p.angle),c.label=c.textShow&&""!==p.unit?p.unit:null,c.assistLine=a.axisLine.show,c.assistLineColor=a.axisLine.color,c.net=a.grid.show,c.netColor=a.grid.color,c}function f(a){var b=o(a);b.show=a.isShow;var c=a.extent;null===d(m.toNumber(c.max))?"dataMax"===c.max?(b.max=null,b.maxNeedNice=!1):(b.max=null,b.maxNeedNice=!0):(b.max=+c.max,b.maxAmount=+c.max,b.maxNeedNice=!1),null===d(m.toNumber(c.min))?"dataMin"===c.min?(b.min=null,b.minNeedNice=!1):(b.min=0,b.minNeedNice=!0):(b.min=+c.min,b.minAmount=+c.min,b.minNeedNice=!1);var e=a.label;if(Object.assign(b,j({},e.textarea,{fontColor:e.textarea.color})),b.textShow=e.show,a.format&&a.format.includes("%")){switch(a.format){case"%":b.tickFormat=".0f";break;case".1%":b.tickFormat=".2f";break;case".2%":default:b.tickFormat=".4f";}b.format=a.format}else b.format=null,b.tickFormat=a.format||function(a){return a};b.assistLine=a.axisLine.show,b.assistLineColor=a.axisLine.color;var f=e.display;return b.ticks=f.amount||null,b.dy=f.dy,b.rotate=m.toNumber(f.angle),b.label=b.textShow&&f.unit||null,b.net=a.grid.show,b.netColor=a.grid.color,b}function g(a,b){return a=o(a),a&&a.length&&a.forEach(function(a){if(a.color=a.area.color,m.set(a,"line.colorWidth",a.line["stroke-width"]||a.line.width),a.style=a.line.style,a.point.hide=!a.point.show,a.area.hide=!a.area.show,a.line&&"smooth"===a.line.curve&&(a.interpolate=q.getCustomSmoothSpline),a.label=j({show:a.numericalLabel.show},a.numericalLabel.textStyle),b.format&&b.format.includes("%")){var c=r.format(b.format);a.label&&(a.label.format=function(a,b){return c(a.y[b]&&a.y[b].value)})}}),a}function h(a){if(!a)return{};var b=o(a),c=a.trigger,d=a.axisPointer,e=a.textStyle,f=a.bgBox;if(c&&c.action&&(b.triggerMethod=c.action),c&&c.type&&(b.trigger=c.type),a.beforeFormat&&(b.beforeFormat=a.beforeFormat),b.formatter="xyAxisChart",void 0!==a.enterFocus&&(b.enterFocus=a.enterFocus),void 0!==a.hideDelay&&(b.hideDelay=a.hideDelay),d&&d._type&&(b.axisPointer=d._type),d&&d.lineStyle&&(b.lineStyle=d.lineStyle),e&&(b.color=e.color,b.fontSize=e.fontSize+"px",b.fontFamily=e.fontFamily,b.fontWeight=e.fontWeight),f){var g=f.offset,h=f.border,i=f.customSize;b.backgroundColor=f.backgroundColor,g&&void 0!==g.xOffset&&(b.xOffset=g.xOffset),g&&void 0!==g.yOffset&&(b.yOffset=g.yOffset),i&&(b.autoSize=!i.show,b.width=i.width,b.height=i.height),h&&(h.borderColor&&(b.borderColor=h.borderColor),void 0!==h.borderWidth&&(b.borderWidth=h.borderWidth))}return b}function i(a){var b={},c=a.setting,d=a.enter,e=a.update,f=a.show;return b.animation=f,Object.assign(b,j({},c)),Object.assign(b,j({},e)),Object.assign(b,j({},d)),b}var j=Object.assign||function(a){for(var b,c=1;c<arguments.length;c++)for(var d in b=arguments[c],b)Object.prototype.hasOwnProperty.call(b,d)&&(a[d]=b[d]);return a},k=c("datav:/npm/bcore/0.0.22/event"),l=c("datav:/npm/jquery/2.1.4"),m=c("datav:/npm/lodash/4.17.11"),n=c("datav:/npm/lodash/4.17.11/merge"),o=c("datav:/npm/lodash/4.17.11/cloneDeep"),p=c("datav:/npm/dchart-area-stack-with-line-point/0.2.2"),q=c("datav:/com/maliang-utils/0.0.24"),r=c("datav:/npm/d3/3.5.12/d3"),s=Symbol();return a.exports=k.extend(function(a,b){this.config={theme:{},chart:{},tooltip:{show:!0,trigger:"item",triggerMethod:"hover",beforeFormat:null,formatter:"xyAxisChart",enterFocus:!0,axisPointer:{show:!0,_type:"line",lineStyle:{color:"#f00",width:1,_type:"solid"}},hideDelay:300,textStyle:{color:"#fff",fontSize:14,fontFamily:"Microsoft Yahei",fontWeight:"normal"},bgBox:{color:"rgba(0, 0, 0, 0.65)",padding:10,xOffset:6,yOffset:10,customSize:{show:!1,width:300,height:150},borderColor:"#333",borderWidth:0}}},this.container=l(a),this.apis=b.apis,this._data=null,this.chart=null,this.init(b)},{init:function(a){this.mergeConfig(a),this.updateLayout(),this.chart=new p(this.container[0],this._getChartOptions()),this.chart.updateBeforeRender=this.chart.beforeRender},_getChartOptions:function(a){var b=m.cloneDeep(this.config);a=a||this._data;var c=b.axis,d=b.chart,j=b.series,k=b.others,l={};l.chart=n(b.chart,d),d.height&&(l.height=d.height),d.width&&(l.width=d.width);var o=c.xaxis,p=c.yaxis;return l.xaxis=e(o,a),l.yaxis=f(p),l.series=g(j.series,p),l.legend=d.legend,l.legend.show=!1,l.beforeLayout=null,l.margin=d.margin,q.setAutoMargin(l),l.hiddenEmptyData=!d.emptyData,Object.assign(l,i(k.animation)),l.tooltip=h(k.tooltip),l},render:function(a,b){b=this.mergeConfig(b),a=this.data(a,b),a&&a.length&&(this.chart.render(m.clone(a),this._getChartOptions(a)),this.updateStyle())},resize:function(a,b){this.updateLayout(a,b),this.chart.render(m.clone(this.data()),{width:a,height:b}),this.updateStyle()},setColors:function(){},setOriginalData:function(a){this[s]=a},getOriginalData:function(){return this[s]},data:function(a,b){b=this.mergeConfig(b),a&&this.setOriginalData(a),a||(a=this.getOriginalData());var c=b&&b.chart&&b.chart.loadAmount||2e3;return c&&(a=a.slice(0,c)),a&&a.length&&(this._data=this.__data=m.cloneDeep(a)),this._data},mergeConfig:function(a){return a?(this.config.theme=m.defaultsDeep(a.theme||{},this.config.theme),this.setColors(),a.series&&(this.config.series=a.series),this.config=m.defaultsDeep(a||{},this.config),this.config):this.config},updateLayout:function(){},updateStyle:function(){var a=this.chart.el;if(a){a.select(".con-svg").style("background","transparent");var b=m.get(this.config,"axis.yaxis.format");if(b&&b.includes("%")){var c=r.format(""+b);a.selectAll(".axis2 .tick text").text(function(a){return c(a)})}}},clear:function(){this.chart&&this.chart.empty()},destroy:function(){this.chart&&this.chart.off(),this.chart&&this.chart.destroy(),this._data=this.__data=null},updateOptions:function(a){this.mergeConfig(a),this.render()}}),a.exports});;
Cube("datav:/com/ml-area-counter/3.1.3",["datav:/com/legend/0.1.4","datav:/com/counter/1.3.18","datav:/com/maliang-utils/0.0.21","datav:/npm/bcore/0.0.22/event","datav:/npm/jquery/2.1.4","datav:/npm/lodash/4.17.11","datav:/npm/lodash/4.17.11/cloneDeep"],function(a,b,c){function d(a){var b=a.numbers,c=a.prefix,d=a.suffix,e=a.presufContent;return{global:{textStyle:{fontFamily:b.textStyle.fontFamily},align:"flex-start",alignItems:"flex-end"},prefix:{content:e.prefix,textStyle:c.textStyle},numbers:{textStyle:b.textStyle,marginRight:b.display.marginRight,backgroundColor:b.display.backgroundColor,digit:+b.digit,rounding:b.decimals.rounding,decimal:b.decimals.decimal,separatingChart:b.separating.separatingSymbol,duration:1e3,increment:!1},suffix:{content:e.suffix,textStyle:d.textStyle},interaction:{}}}function e(a){if(!a||!a.series||!a.series.series)return null;var b=i(a.series.series);return b.forEach(function(a){return a.color=a.area.color}),b}var f=c("datav:/npm/bcore/0.0.22/event"),g=c("datav:/npm/jquery/2.1.4"),h=c("datav:/npm/lodash/4.17.11"),i=c("datav:/npm/lodash/4.17.11/cloneDeep"),j=c("datav:/com/ml-area-counter/3.1.3/line"),k=c("datav:/com/legend/0.1.4"),l=c("datav:/com/counter/1.3.18"),m=c("datav:/com/maliang-utils/0.0.21"),n=c("datav:/com/ml-area-counter/3.1.3/defaultConfig");return a.exports=f.extend(function(a,b){this.config=i(n),this.container=g(a).css("padding","10px 0"),this.chart=null,this.legend=null,this.counters=[],this.init(b)},{init:function(a){var b=a&&(a.options||a),c=this;this.apis=b.apis;var d=this.mergeConfig(b),f=d.chart.legend,i=f.layout.loc.split("-")[0];this.titleDom=g("<div class=\"titles\"></div>").css({padding:"0 "+d.chart.counter.right+"px 0 "+d.chart.counter.left+"px",display:"inline-flex"}),this.chartsDom=g("<div class=\"charts\"></div>"),this.container.append(this.titleDom).append(this.chartsDom),d.series.length&&d.series.forEach(function(a){c.createCounter(a.counter)}),this.chartDom=g("<div class=\"dchart-bar-basic\" style=\"width: 100%;\"></div>"),this.legendDom=g("<div class=\"dchart-legend\" style=\"left: 0;width: 100%;\"></div>"),"bottom"===i?(this.chartsDom.append(this.chartDom),this.chartsDom.append(this.legendDom)):(this.chartsDom.append(this.legendDom),this.chartsDom.append(this.chartDom)),this.legend=new k(this.legendDom[0],f),this.legend.render(e(d),f),this.chartDom.height(this.container.height()-this.titleDom.height()-(f.show&&this.legendDom.height()||0)),this.chart=new j(this.chartDom[0],h.cloneDeep(d)),this.legendDom.css("display",f.show&&"block"||"none"),this._bindEvent()},createCounter:function(a,b){var c=this.config,e=g("<div class=\"counter title-counter\"></div>").css({"margin-right":c.chart.counter.margin+"px"});this.titleDom.append(e);var f=new l(e[0],d(a,c));f.container.css("display","inline-flex"),f.render([{value:b&&b.value||b||0}]),this.counters.push(f)},render:function(a,b){var c=b&&(b.options||b),f=this,g=this.mergeConfig(c);if(a=this.data(a),a&&a.length){this.titleDom.css({padding:"0 "+g.chart.counter.right+"px 0 "+g.chart.counter.left+"px"}).find(".title-counter").css({"margin-right":g.chart.counter.margin+"px"}),g.series.series.length&&g.series.series.forEach(function(b,c){var e=a[a.length-1]?a[a.length-1].y&&a[a.length-1].y[c]:0;e=e&&e.value||e,f.counters[c]?f.counters[c].render([{value:e}],d(b.counter,g)):f.createCounter(b.counter,e)});var h=m.conflictConfigWithData(g,this.__data,[{configField:{type:"array",field:"serieName",parent:"series.series"},dataField:"s",priority:"config",newConfigField:"showName"}]),i=h.chart.legend;this.legend.render(e(h),i),h.chart.height=this.container.height()-this.titleDom.height()-(i.show&&this.legendDom.height()||0),this.chartDom.height(h.chart.height),a&&this.chart.render(a,h),this._cfg=g}},updateOptions:function(a){var b=a&&(a.options||a),c=b.chart.legend,d=this.config.chart.legend;h.isEqual(d,c)||this.updateLegendLayout(c),this.render(null,a)},updateStyle:function(){},setColors:function(){},data:function(a){return a&&a.length&&(this.__data=h.cloneDeep(a),this.__data.length&&this.__data.forEach(function(a){a.y=h.toNumber(a.y)})),this._data=this.hasS(this.__data)?m.threeD2Two(this.__data,"x","y","s",m.getSeriesValue(this.__data,"s"),"time"===this.config.axis.xaxis.type&&function(c,a){return c<a?-1:1}):h.cloneDeep(this.__data).map(function(a){return a.y={value:a.y,data:h.clone(a)},a}),this._data},mergeConfig:function(a){return a?(this.config.theme=h.defaultsDeep(a.theme||{},this.config.theme),this.setColors(),a.series&&(this.config.series=a.series),this.config=h.defaultsDeep(a||{},this.config),this.config):this.config},resize:function(a,b){var c=b-this.titleDom.outerHeight()-(this.config.chart.legend.show&&this.legendDom.outerHeight()||0)-20;this.mergeConfig({chart:{width:a,height:c}}),this.chart.resize(a,c)},updateLegendLayout:function(a){var b=this.config.chart.legend;if(b.show!==a.show&&(this.legendDom.css("display",a.show&&"block"||"none"),this.config.chart.height=this.container.height()-this.titleDom.height()-(a.show&&this.legendDom.height()||0)),b.textarea.fontSize!==a.textarea.fontSize&&(this.legendDom.find(".legend-item").css("fontSize",a.textarea.fontSize),this.config.chart.height=this.container.height()-this.titleDom.height()-(a.show&&this.legendDom.height()||0)),JSON.stringify(b.layout.margin)!==JSON.stringify(a.layout.margin)){var c=a.layout.margin;this.legendDom.find(".legend-item").css("margin",c.vertiInterval+"px "+c.horiInterval+"px"),this.config.chart.height=this.container.height()-this.titleDom.height()-(a.show&&this.legendDom.height()||0)}var d=b.layout.loc.split("-")[0],e=a.layout.loc.split("-")[0];d!==e&&("top"===e?this.chartsDom[0].appendChild(this.chartDom[0]):"bottom"===e&&this.chartsDom[0].appendChild(this.legendDom[0])),this.render(null,{chart:{legend:a}})},clear:function(){this.chart&&this.chart.clear(),this.legend&&h.isFunction(this.legend.clear)&&this.legend.clear(),this.counters&&this.counters.forEach(function(a){a&&a.flip&&a.flip.reset()})},destroy:function(){this.chart&&this.chart.destroy(),this.chart=null,this.legend&&this.legend.destroy(),this.legend=null,this.chartDom=null,this.legendDom=null,this.container&&this.container.empty(),this._data=null},hasS:function(a){var b=0;return h.map(a,function(a){void 0!==a.s&&b++}),b===a.length||0!==b&&!1},startAnimate:function(){if(!(this.chart&&this.chart.chart))return!1;if(this._cfg){this.chart.chart.clearAllAnimation();var a=this._cfg.others.animation,b=a.update,c=a.enter,d=b.animationUpdateFromPrevious;b.animationUpdateFromPrevious=!1;var e=b.animationDurationUpdate;b.animationDurationUpdate=c.animationDuration,this.chart.render(this._data,this._cfg),b.animationDurationUpdate=e,b.animationUpdateFromPrevious=d}},clearAnimate:function(){this.chart&&this.chart.chart&&this.chart.chart.resumeToAnimationEnd()},_bindEvent:function(){var a=this;if(this.chart&&this.chart.chart){var b=this.chart.chart;["click"].forEach(function(c){b.on(c,function(b){var d=b.data;return a.emit(c,d)})})}},highlight:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},b=a.data,c=a.options,d=void 0===c?{}:c;return this.chart?void(d.hasOwnProperty("selectMode")&&(d.mode=d.selectMode,delete d.selectMode),d.hasOwnProperty("cancelHighlightFirst")&&d.cancelHighlightFirst&&this.cancelHighlight(),this.chart.chart&&this.chart.chart.highlight({targetData:b,options:d})):null},cancelHighlight:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},b=a.data,c=a.options,d=void 0===c?{}:c;return this.chart?void(d.hasOwnProperty("selectMode")&&(d.mode=d.selectMode,delete d.selectMode),this.chart&&this.chart.chart&&this.chart.chart.cancelHighlight({targetData:b,options:d})):null}}),a.exports});