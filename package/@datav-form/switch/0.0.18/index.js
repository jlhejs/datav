Cube("datav:/com/@datav-form/switch/0.0.18",["datav:/npm/bcore/0.0.18/event","datav:/npm/jquery/2.1.4","datav:/npm/lodash/4.6.1"],function(t,i,n,o,s,e){var a=Object.assign||function(t){for(var i=1;i<arguments.length;i++){var n,o=arguments[i];for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n])}return t},h=n("datav:/npm/bcore/0.0.18/event"),r=n("datav:/npm/jquery/2.1.4"),c=n("datav:/npm/lodash/4.6.1");return t.exports=h.extend(function(t,i){this.config={},this.container=r(t),this.apis=i.apis,this._data=null,this.init(i)},{init:function(t){var i=this;this.mergeConfig(t),this.container.append('<div class="switch-box"><span class="switch-dot"></span></div>'),this.switchBox=this.container.find(".switch-box"),this.switchDot=this.switchBox.find(".switch-dot"),this.initStyle(),this.updateStyle(this.config),this.buttonOn=this.config.global.defaultStatus,this.switchBox.off().click(function(){i.buttonClick()})},initStyle:function(){this.switchBox.css({"box-sizing":"border-box","vertical-align":"middle",cursor:"pointer",transition:"all .36s",position:"relative","background-color":this.config.switch.background.offColor}),this.switchDot.css({"box-sizing":"border-box"})},updateStyle:function(t){var i=this.container.width(),n=this.container.height(),o=t.switch.border,s=t.dot.border,e=i<n?Math.max(n,i):Math.min(n,i);this.switchBox.css({height:n,width:i,"line-height":n+"px","border-radius":o.borderRadius+"px",border:o.borderWidth+"px "+o.borderStyle+" "+o.borderColor}),this.switchDot.css({display:"block",height:e-2*o.borderWidth+"px",width:Math.min(n,i)-2*o.borderWidth+"px","border-radius":s.borderRadius+"px",border:s.borderWidth+"px "+s.borderStyle+" "+s.borderColor,"background-color":t.dot.background,position:"absolute",transition:"all .36s",top:"50%","margin-top":-n/2+o.borderWidth+"px"}),this.buttonOn?this.buttonOnStyle():this.buttonOffStyle()},buttonClick:function(){this.buttonOn=!this.buttonOn,this.buttonOn?this.buttonOnStyle():this.buttonOffStyle(),this.eventEmit(this._data[0][this.buttonOn?"onValue":"offValue"])},buttonOnStyle:function(){var t=this.container.width(),i=this.container.height(),t=t-Math.min(i,t);this.switchBox.css({background:this.config.switch.background.onColor}),this.switchDot.css({transform:"translateX("+t+"px)"})},buttonOffStyle:function(){this.switchBox.css({background:this.config.switch.background.offColor}),this.switchDot.css({transform:"translate(0px)"})},eventEmit:function(t){t=a({value:t},this._data[0]),t=c.omit(t,["onValue","offValue","state"]);this.emit("switch-changed",t)},getFieldValue:function(){return{value:this._data[0][this.buttonOn?"onValue":"offValue"]}},setFieldValue:function(t){this.render([{onValue:1,offValue:0,state:t.value}])},resetField:function(){this.render()},render:function(t,i){t=this.data(t);i=this.mergeConfig(i);this.buttonOn=i.global.defaultStatus;t=t&&t[0]&&t[0].state;this.buttonOn=!!t,this.updateStyle(i),this.eventEmit(this._data[0][this.buttonOn?"onValue":"offValue"])},updateOptions:function(t){t=this.mergeConfig(t),this.updateStyle(t)},resize:function(t,i){this.render(null,{width:t,height:i})},data:function(t){return t&&(this._data=t),this._data},mergeConfig:function(t){return t&&(this.config=c.defaultsDeep(t||{},this.config)),this.config},destroy:function(){this.switchBox.off(),this.container.empty()}}),t.exports});