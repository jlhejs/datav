// env=undefined => env=publish 
Cube("datav:/com/@echarts/ml-echarts-gauge/2.0.13",["datav:/com/maliang-echarts-utils/0.0.18","datav:/npm/bcore/0.0.18/event","datav:/npm/jquery/2.1.4","datav:/npm/lodash/4.6.1","datav:/npm/echarts/4.4.0"],function(a,b,c){var d=c("datav:/npm/bcore/0.0.18/event"),e=c("datav:/npm/jquery/2.1.4"),f=c("datav:/npm/lodash/4.6.1"),g=c("datav:/npm/echarts/4.4.0"),h=c("datav:/com/maliang-echarts-utils/0.0.18");return a.exports=d.extend(function(a,b){this.config={tooltip:{formatter:"{a} <br/>{b} : {c}%"},_series:{type:"gauge",title:{horiOffset:0,vertiOffset:40},detail:{horiOffset:0,vertiOffset:-40}}},this.container=e(a),this.apis=b.apis,this._data=null,this.chart=null,this.initCfg=null,this.init(b)},{init:function(a){a=this.mergeConfig(a),this.chart=g.init(this.container[0]),this.chart.setOption(h.config2echartsOptions(a)),this.updateStyle(),this.initCfg=f.cloneDeep(h.config2echartsOptions(a))},render:function(a,b){var c=this;if(a&&a.length){a=this.data(a),b&&this.mergeConfig(b);var d=this.mergeConfig(h.data2echartsGauge(a,this.config)),e=h.config2echartsOptions(d);if(e&&e.series){var f=d.chart||{centerX:50,centerY:80},g=f.centerX,i=f.centerY;e.series.forEach(function(a,b){a.center=[g+"%",i+"%"],a.radius=2*c.initCfg.series[b].radius+"%"})}this.chart.setOption(e),this.updateStyle()}},resize:function(a,b){this.chart.resize({width:a,height:b})},setColors:function(){},data:function(a){return a&&(a[0].value&&"number"!==typeof a[0].value&&f.isNaN(f.toNumber(a[0].value))&&(a[0].value=this.config._series.min),this._data=a),this._data},mergeConfig:function(a){return a?(a.series&&(this.config._series=f.defaultsDeep(a.series[0]||{},this.config._series)),a._series&&this.config._series.axisLine&&a._series.axisLine.lineStyle&&a._series.axisLine.lineStyle._color&&(this.config._series.axisLine.lineStyle._color=a._series.axisLine.lineStyle._color),this.config=f.defaultsDeep(a||{},this.config),this.config._series.axisLine.lineStyle.color=f.map(this.config._series.axisLine.lineStyle._color,function(a){return[a.pos,a.color]}),this.config.tooltip.formatter="{a} <br/>{b} : {c}"+(this.config._series.detail.unit||""),this.config._series.detail.formatter="{value}"+(this.config._series.detail.unit||""),this.config._series.detail.offsetCenter=[this.config._series.detail.horiOffset+"%",this.config._series.detail.vertiOffset+"%"],this.config._series.title.offsetCenter=[this.config._series.title.horiOffset+"%",this.config._series.title.vertiOffset+"%"],this.config.series=[this.config._series],this.config.tooltip.showContent=this.config.tooltip.show,this.config):this.config},updateStyle:function(){this.config},updateOptions:function(a){a=this.mergeConfig(a);var b=h.config2echartsOptions(a);if(b&&b.series){var c=a.chart||{centerX:50,centerY:80},d=c.centerX,e=c.centerY;b.series.forEach(function(a){a.center=[d+"%",e+"%"],a.radius=2*a.radius+"%"})}this.chart.setOption(b)},clear:function(){this.chart&&this.chart.clear&&this.chart.clear()},destroy:function(){this.chart&&this.chart.dispose&&this.chart.dispose()}}),a.exports});