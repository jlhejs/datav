// env=undefined => env=publish 
Cube("datav:/com/flowsheet/0.0.10/components/util.js",["datav:/npm/lodash/4.17.20"],function(a,b,c){Object.defineProperty(b,"__esModule",{value:!0});var d=c("datav:/npm/lodash/4.17.20"),e=function(a){return a&&a.__esModule?a:{default:a}}(d);return b.default={connect:function(a,b,c,e,f,g){var h=a.bbox(),k=this.getDomPos(a.style()),l=b.bbox(),m=this.getDomPos(b.style()),n=Object.assign({},h,k),o=Object.assign({},l,m),q=[{x:n.x+n.width/2,y:n.y-1},{x:n.x+n.width/2,y:n.y+n.height+1},{x:n.x-1,y:n.y+n.height/2},{x:n.x+n.width+1,y:n.y+n.height/2},{x:o.x+o.width/2,y:o.y-1},{x:o.x+o.width/2,y:o.y+o.height+1},{x:o.x-1,y:o.y+o.height/2},{x:o.x+o.width+1,y:o.y+o.height/2}];g&&(q[3].x+=14);for(var p={},d=[],r=0;4>r;r++)for(var i=4;8>i;i++){var j=Math.abs(q[r].x-q[i].x),s=Math.abs(q[r].y-q[i].y);(r==i-4||(3!=r&&6!=i||q[r].x<q[i].x)&&(2!=r&&7!=i||q[r].x>q[i].x)&&(0!=r&&5!=i||q[r].y>q[i].y)&&(1!=r&&4!=i||q[r].y<q[i].y))&&(d.push(j+s),p[d[d.length-1]]=[r,i])}if(0==d.length)var t=[0,4];else t=p[Math.min.apply(Math,d)];var u=q[t[0]].x,v=q[t[1]].x,w=q[t[0]].x+4,x=q[t[0]].y,y=q[t[1]].x-4,z=q[t[1]].y,A=Math.max(Math.abs(w-y)/2,10),B=Math.max(Math.abs(x-z)/2,10),C=[w,w,w-A,w+A][t[0]].toFixed(3),D=[x-B,x+B,x,x][t[0]].toFixed(3),E=[0,0,0,0,y,y,y-A,y+A][t[1]].toFixed(3),F=[0,0,0,0,x+B,x-B,z,z][t[1]].toFixed(3),G=null;switch(f||"line"){case"line":G=["M",u.toFixed(3),x.toFixed(3),"L",v.toFixed(3),z.toFixed(3)].join(" ");break;case"bezier":G=["M",u.toFixed(3),x.toFixed(3),"L",w.toFixed(3),x.toFixed(3),"C",C,D,E,F,y.toFixed(3),z.toFixed(3),"L",v.toFixed(3),z.toFixed(3)].join(" ");break;case"rightAngle":G=["M",q[3].x.toFixed(3),q[3].y.toFixed(3),"L",((q[3].x+q[6].x)/2).toFixed(3),q[3].y.toFixed(3),"L",((q[3].x+q[6].x)/2).toFixed(3),q[6].y.toFixed(3),"L",q[6].x.toFixed(3),q[6].y.toFixed(3)].join(" ");}if(c){var H=c.split("|"),I=H[0]||"#000",J=parseFloat(H[1])||1,K=e.path(G).attr({stroke:I,"stroke-width":J,fill:"none"});return K.marker("end",20,20,function(a){a.path("M0 0 L6 3 L0 6"),this.fill("none"),this.stroke({color:I,width:1}),this.ref(6,3)}),{line:K,from:a,to:b}}},getDomPos:function(a){if(!a)return{x:0,y:0};var b=a.replace(/\s/g,"").split(";"),c={};b.forEach(function(a){if(a){var b=a.split(":");b&&2==b.length&&(c[b[0]]=b[1])}});var d=c.left?parseFloat(c.left.replace("px","")):0,e=c.top?parseFloat(c.top.replace("px","")):0;return{x:d,y:e}},calculatePosData:function(a,b,c,d){if(!a||!b)return{nodes:a,max_x:0,max_y:0};var f=this.arrToObj(a,"id"),g=e.default.cloneDeep(f),h=null,i=0,j=0;if(Object.values(f).forEach(function(a){a.child&&(a.child=[]),a.parent&&(a.parent=[]),a.x=0,a.y=0}),b.forEach(function(a){var b=a.from,c=a.to;f[b]&&(!f[b].child&&(f[b].child=[]),f[b].child.push(c)),f[c]&&(!f[c].parent&&(f[c].parent=[]),f[c].parent.push(b)),g&&delete g[a.to]}),a.forEach(function(a){a.show=!(a.parent&&a.parent.every(function(a){return!f[a].isExpand||!f[a].show}))}),c){var k=e.default.cloneDeep(c);h=this.arrToObj(k,"key"),a.forEach(function(a){if(h[a.group]){var b=h[a.group];b&&a.show&&(!Array.isArray(b._list)&&(b._list=[]),b._list.push(a.id))}})}else{h={};var l=Object.keys(g)[0],m=function a(b,c){var d=b.child,e=h["group"+c];e||(e=h["group"+c]={_index:c,_list:[]}),b.show&&e._list.push(b.id),b.group="group"+c,Array.isArray(d)&&d.map(function(b){a(f[b],c+1)})};m(f[l],0)}var n=function(a){var b=0;return a.map(function(a,c){var d=f[a];0==c&&(b=d.y),d.y<b&&(b=d.y)}),b},o=function(a){var b=0;return a.map(function(a,c){var d=f[a],e=h[d.group],g=e._list&&e._list.indexOf(a);0==c&&(b=Math.max(g,d.y)),g<b&&(b=g)}),b},p=function(b){return a.forEach(function(a){var c=h[a.group],d=c._list&&c._list.indexOf(a.id),e=d&&c._list[d-1],g=0;a.parent&&a.parent.length&&(g=o(a.parent));var k=Math.max(d,g,e?f[e].y+1:0),l=k;switch(b){case"child":var m=l=k=a.y,p=a.child&&a.child.length&&a.isExpand;p&&(m=n(a.child)),m>k&&(l=m);break;case"parent":var q=k,r=a.parent&&a.parent.length&&a.show;r&&(q=o(a.parent)),q>k&&1==r&&(l=q);break;default:}a.x=c._index,a.y=l,a.x>i&&(i=a.x),a.y>j&&(j=a.y)})};return d?(p("parent"),a.reverse(),p("child"),p("parent"),a.reverse()):p(),{nodes:a,max_x:i,max_y:j}},getLeafIds:function(a,b){var c=b.map(function(a){return a.from}),d=a.filter(function(a){return c.includes(a.id)}).map(function(a){return a.id});return d},calculateNetDeep:function(a){if(!a)return{max_x:0,max_y:0};var b=0,c=0;return a.forEach(function(a){a.x>b&&(b=a.x),a.y>c&&(c=a.y)}),{nodes:a,max_x:b,max_y:c}},arrToObj:function(a,b){if(!Array.isArray(a))return null;var c={};return a.forEach(function(a,d){a._index=d,c[a[b]]=a}),c},getLine:function(a,b){var c=this.arrToObj(b,"id"),d=a.originSource,f=[d.id],g=[],h=[],i="";return d.parent&&(function a(d){return d.map(function(d){g.push(d);var e=c[d];e.parent?a(e.parent):i=b.find(function(a){return a.id===d})})}(d.parent),g=e.default.uniq(g)),d.child&&(function a(b){return b.map(function(b){h.push(b);var d=c[b];d.child&&a(d.child)})}(d.child),h=e.default.uniq(h)),f=f.concat(g,h),b.forEach(function(a){var b=a.id;a.activeStatus=0>f.indexOf(b)?"fade":a.status}),{nodes:b,activeLine:f,originParent:i,allParents:g}}},a.exports});;
Cube("datav:/com/flowsheet/0.0.10/components/Net.jsx",["datav:/npm/react/16.13.1","datav:/npm/prop-types/15.5.8","datav:/npm/svg.js/2.7.1"],function(a,b,c){function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){var c={};for(var d in a)0<=b.indexOf(d)||Object.prototype.hasOwnProperty.call(a,d)&&(c[d]=a[d]);return c}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&("object"===typeof b||"function"===typeof b)?b:a}function h(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var i=function(){function a(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),j=c("datav:/npm/react/16.13.1"),k=d(j),l=c("datav:/npm/prop-types/15.5.8"),m=d(l),n=c("datav:/npm/svg.js/2.7.1"),o=d(n),p=c("datav:/com/flowsheet/0.0.10/components/FlowItem.jsx"),q=d(p),r=c("datav:/com/flowsheet/0.0.10/components/util.js"),s=d(r),t=function(a){function b(a){return f(this,b),g(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a))}return h(b,a),i(b,[{key:"componentDidMount",value:function(){this.renderEdges()}},{key:"renderEdges",value:function(){var a=this,b=this.props,c=b.data,d=e(b,["data"]),f=c.nodes,g=c.edges,h=(0,o.default)(this.refs.container);g.forEach(function(b){var c=b.from,d=b.to,e=o.default.adopt(a.refs[c].getInstance()),f=o.default.adopt(a.refs[d].getInstance());s.default.connect(e,f,a.props.lineColor,h)})}},{key:"render",value:function(){var a=this.props,b=a.rect,c=a.margin,d=a.data,f=e(a,["rect","margin","data"]),g=s.default.calculateNetDeep(d.nodes),h=(b[0]+c[1])*g.max_x+b[0],i=(b[1]+c[0])*g.max_y+b[1];return k.default.createElement("div",{className:"cn-flow-container",ref:"container",style:{width:h+"px",height:i+"px"}},Array.isArray(g.nodes)&&function(a){return a.map(function(a,d){var e=(b[0]+c[1])*a.x,f=(b[1]+c[0])*a.y;return k.default.createElement(q.default,{ref:a.id,key:d,x:e,y:f,width:b[0],height:b[1],title:a.title,content:a.content,status:a.status,color:a.color})})}(g.nodes))}}]),b}(j.Component);return t.propTypes={paper:m.default.array,rect:m.default.array,radius:m.default.number},t.defaultProps={rect:[200,100],margin:[40,60],lineColor:"#666"},b.default=t,a.exports});;
Cube("datav:/com/flowsheet/0.0.10/components/SwimBands.jsx",["datav:/npm/react/16.13.1","datav:/npm/prop-types/15.5.8"],function(a,b,c){function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){var c={};for(var d in a)0<=b.indexOf(d)||Object.prototype.hasOwnProperty.call(a,d)&&(c[d]=a[d]);return c}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&("object"===typeof b||"function"===typeof b)?b:a}function h(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var i=Object.assign||function(a){for(var b,c=1;c<arguments.length;c++)for(var d in b=arguments[c],b)Object.prototype.hasOwnProperty.call(b,d)&&(a[d]=b[d]);return a},j=function(){function a(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),k=c("datav:/npm/react/16.13.1"),l=d(k),m=c("datav:/npm/prop-types/15.5.8"),n=d(m),o=c("datav:/com/flowsheet/0.0.10/components/Flow.jsx"),p=d(o),q=function(a){function b(a){f(this,b);var c=g(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a));return c.onGroupClick.bind(c),c}return h(b,a),j(b,[{key:"componentDidMount",value:function(){}},{key:"onGroupClick",value:function(a){var b=this.props.groupClick;b&&b(a)}},{key:"render",value:function(){var a=this,b=this.props,c=b.data,d=b.groupClick,f=e(b,["data","groupClick"]),g=c.groups,h=c.data,j=100/g.length+"%",k={padding:"20px "+f.margin[1]/2+"px"},m={width:(f.rect[0]+f.margin[1])*g.length+"px"};return l.default.createElement("div",{className:"cn-swim-bands",ref:"bands",style:m},l.default.createElement("div",{className:"bands-banner"},Array.isArray(g)&&function(b){return b.map(function(b,c){return l.default.createElement("div",{key:c,className:d?"band-item band-item-enable":"band-item",style:{width:j},onClick:function(){return a.onGroupClick(b)}},b.text)})}(g)),l.default.createElement("div",{className:"bands-flow",style:k},Array.isArray(g)&&function(a){return a.map(function(a,b){var c={width:j,left:b*(f.rect[0]+f.margin[1])};return l.default.createElement("div",{key:b,className:"band-bg",style:c})})}(g),function(a){return a.map(function(a,b){return l.default.createElement(p.default,i({key:b,data:a,groups:g},f))})}(h)))}}]),b}(k.Component);return q.propTypes={rect:n.default.array,margin:n.default.array,handleClick:n.default.func},q.defaultProps={rect:[200,100],margin:[40,60]},b.default=q,a.exports});;
Cube("datav:/com/flowsheet/0.0.10/components/FlowItem.jsx",["datav:/npm/react/16.13.1","datav:/npm/prop-types/15.5.8"],function(a,b,c){function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){var c={};for(var d in a)0<=b.indexOf(d)||Object.prototype.hasOwnProperty.call(a,d)&&(c[d]=a[d]);return c}function f(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function g(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function h(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&("object"===typeof b||"function"===typeof b)?b:a}function i(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var j="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"===typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},k=function(){function a(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),l=c("datav:/npm/react/16.13.1"),m=d(l),n=c("datav:/npm/prop-types/15.5.8"),o=d(n),p=function(a){function b(a){g(this,b);var c=h(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a));return c.expandHandler=function(a){a.stopPropagation();var b=c.props,d=b.expandClick,e=b.originSource;e.isExpand=!e.isExpand,d&&d(e)},c}return i(b,a),k(b,[{key:"componentDidMount",value:function(){}},{key:"getInstance",value:function(){return this.refs.itself}},{key:"onClick",value:function(){this.props.handleClick&&this.props.handleClick(this.props)}},{key:"onDoubleClick",value:function(){this.props.handleDoubleClick&&this.props.handleDoubleClick(this.props)}},{key:"render",value:function(){var a,b,c=m.default.createElement("svg",(a={className:"expansion-icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},f(a,"xmlns","http://www.w3.org/1999/xlink"),f(a,"width","200"),f(a,"height","200"),a),m.default.createElement("defs",null,m.default.createElement("style",{type:"text/css"})),m.default.createElement("path",{d:"M516.2 719h-0.5c-8-0.3-14.2-6.9-14-14.9L512 373.3c0.3-8 6.9-14.1 14.9-14 8 0.3 14.2 6.9 14 14.9L530.7 705c-0.3 7.8-6.7 14-14.5 14z",fill:"#1296db"}),m.default.createElement("path",{d:"M681.3 552.9h-0.5l-330.9-10.3c-8-0.3-14.2-6.9-14-14.9 0.3-8 7.3-14.4 14.9-14L681.7 524c8 0.3 14.2 6.9 14 14.9-0.3 7.8-6.7 14-14.4 14z",fill:"#1296db"}),m.default.createElement("path",{d:"M509.7 955c-243.2 0-441-197.8-441-441s197.8-441 441-441 441 197.8 441 441-197.9 441-441 441z m0-838.6C290.4 116.4 112 294.8 112 514s178.4 397.6 397.6 397.6S907.3 733.2 907.3 514 728.9 116.4 509.7 116.4z",fill:"#1296db"})),d=m.default.createElement("svg",(b={className:"expansion-icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},f(b,"xmlns","http://www.w3.org/1999/xlink"),f(b,"width","200"),f(b,"height","200"),b),m.default.createElement("defs",null,m.default.createElement("style",{type:"text/css"})),m.default.createElement("path",{d:"M683.8 554.7h-0.5L354 544.4c-7.9-0.3-14.2-6.9-13.9-14.8 0.3-7.9 7-14.3 14.8-13.9l329.4 10.2c7.9 0.3 14.2 6.9 13.9 14.8-0.3 7.8-6.7 14-14.4 14z",fill:"#1296db"}),m.default.createElement("path",{d:"M513 955C270.9 955 74 758.1 74 516S270.9 77 513 77s439 196.9 439 439-196.9 439-439 439z m0-834.8c-218.2 0-395.8 177.6-395.8 395.8S294.8 911.8 513 911.8 908.8 734.2 908.8 516 731.2 120.2 513 120.2z",fill:"#1296db"})),g=this.props,h=g.className,i=g.width,k=g.height,l=g.x,n=g.y,o=g.title,p=g.content,q=g.status,r=g.activeStatus,s=g.isLeaf,t=g.originSource,u=g.enableExpand,v=e(g,["className","width","height","x","y","title","content","status","activeStatus","isLeaf","originSource","enableExpand"]),w=v.color&&{background:v.color};return m.default.createElement("div",{ref:"itself",className:"cn-flow-item item-"+(r||q||"default")+" "+(h||""),style:{width:i+"px",height:k+"px",left:l+"px",top:n+"px"},onDoubleClick:this.onDoubleClick.bind(this),onClick:this.onClick.bind(this)},v.renderNodes?v.renderNodes(this.props):m.default.createElement("div",null,m.default.createElement("div",{className:"flow-item-title",style:w},o),m.default.createElement("div",{className:"flow-item-content"},"string"==typeof p&&m.default.createElement("div",{className:"str-content"},p),"object"==("undefined"===typeof p?"undefined":j(p))&&m.default.createElement("div",{className:"kv-content"},function(a){return a.map(function(a,b){return m.default.createElement("div",{className:"kv-row",key:b},m.default.createElement("span",{className:"kv-label"},a.label),"\uFF1A",a.value)})}(p)))),s&&u?m.default.createElement("div",{onClick:this.expandHandler,className:"expansion-icon-wrap",style:{left:i,top:k/2-8}},t.isExpand?d:c):null)}}]),b}(l.Component);return p.propTypes={status:o.default.oneOf(["default","warning","success","error"]),title:o.default.string.isRequired,width:o.default.number,height:o.default.number,x:o.default.number,y:o.default.number,content:o.default.any,color:o.default.string,handleClick:o.default.func},p.defaultProps={title:"\u6D41\u7A0B\u56FE",width:200,height:100,x:0,y:0},b.default=p,a.exports});;
Cube("datav:/com/flowsheet/0.0.10/components/Flow.jsx",["datav:/npm/react/16.13.1","datav:/npm/prop-types/15.5.8","datav:/npm/lodash/4.17.20","datav:/npm/svg.js/2.7.1"],function(a,b,c){function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){var c={};for(var d in a)0<=b.indexOf(d)||Object.prototype.hasOwnProperty.call(a,d)&&(c[d]=a[d]);return c}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&("object"===typeof b||"function"===typeof b)?b:a}function h(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var i=Object.assign||function(a){for(var b,c=1;c<arguments.length;c++)for(var d in b=arguments[c],b)Object.prototype.hasOwnProperty.call(b,d)&&(a[d]=b[d]);return a},j=function(){function a(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),k=c("datav:/npm/react/16.13.1"),l=d(k),m=c("datav:/npm/prop-types/15.5.8"),n=d(m),o=c("datav:/npm/lodash/4.17.20"),p=d(o),q=c("datav:/npm/svg.js/2.7.1"),r=d(q),s=c("datav:/com/flowsheet/0.0.10/components/FlowItem.jsx"),t=d(s),u=c("datav:/com/flowsheet/0.0.10/components/util.js"),v=d(u),w=function(a){function b(a){f(this,b);var c=g(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a));x.call(c);var d=c.props,e=d.data,h=d.groups,i=d.autoAdjust;return e.nodes.forEach(function(a){a.isExpand=!0,a.show=!0}),c.state={posData:v.default.calculatePosData(e.nodes,e.edges,h,i),leafIds:v.default.getLeafIds(e.nodes,e.edges),activeLine:[]},c}return h(b,a),j(b,[{key:"componentDidMount",value:function(){this.renderEdges();var a=this.props.ginsengAmericanID;a&&this.ginsengAmericanFn(a)}},{key:"componentDidUpdate",value:function(a){var b=this.props.ginsengAmericanID;!p.default.isEqual(b,a.ginsengAmericanID)&&b&&this.ginsengAmericanFn(b)}},{key:"onItemClick",value:function(a){var b=this,c=this.props,d=c.data,f=c.handleClick,g=c.autoHighlight,h=e(c,["data","handleClick","autoHighlight"]),i=this.state.posData,j=v.default.getLine(a,i.nodes),k=j.originParent;if(g){var l=v.default.getLine(a,i.nodes);i.nodes=l.nodes,this.setState({posData:i,activeLine:l.activeLine,originParent:k},function(){b.renderEdges()})}f&&f(a)}},{key:"onItemDoubleClick",value:function(a){var b=this,c=this.props,d=c.data,f=c.handleDoubleClick,g=c.autoHighlight,h=e(c,["data","handleDoubleClick","autoHighlight"]),j=this.state.posData;if(g){var k=v.default.getLine(a,j.nodes),l=k.originParent;l=i({},l,{originSource:l});var m=v.default.getLine(l,j.nodes);j.nodes=m.nodes,p.default.get(a,["originSource","id"])!==p.default.get(j,["nodes",[0],"id"])&&this.setState({posData:j,activeLine:m.activeLine,originParent:l},function(){b.renderEdges()})}f&&f(a)}},{key:"handleBlankAreaClick",value:function(a){var b=this,c=this.props,d=c.autoHighlight,e=c.handleBlankAreaClick,f=this.state,g=f.posData,h=f.sourcePosData,j=this.state.originParent,k=a.target.tagName.toUpperCase();if(d&&!p.default.isEmpty(j)&&"SVG"===k){j=i({},j,{originSource:j});var l=v.default.getLine(j,g.nodes);this.setState({posData:g,activeLine:l.activeLine,originParent:j},function(){b.renderEdges()})}"SVG"===k&&e&&e()}},{key:"ginsengAmericanFn",value:function(a){var b=this,c=this.state,d=c.posData,e=c.sourcePosData,f={originSource:e.nodes.find(function(b){return b.id===a})},g=v.default.getLine(f,d.nodes),h=g.activeLine,j=g.nodes,k=v.default.getLine(f,d.nodes),l=k.originParent;this.setState({posData:i({},d,{nodes:j}),activeLine:h,originParent:l},function(){b.renderEdges()})}},{key:"renderEdges",value:function(){var a=this,b=this.props,c=b.data,d=b.type,f=b.enableExpand,g=e(b,["data","type","enableExpand"]),h=this.state.activeLine,i=p.default.cloneDeep(c.edges);this.draw?this.draw.clear():this.draw=(0,r.default)(this.refs.container),i.forEach(function(b){var c=b.from,e=b.to,i=a.props.lineColor;if(0<h.length&&(0>h.indexOf(c)||0>h.indexOf(e)?i=g.nonLineColor:i=(a.props.lineColor||"#000")+"|1"),a.refs[c]&&a.refs[c].props.originSource.isExpand)var j=r.default.adopt(a.refs[c].getInstance());if(a.refs[e])var k=r.default.adopt(a.refs[e].getInstance());j&&k&&v.default.connect(j,k,i,a.draw,d,f)})}},{key:"render",value:function(){var a=this,b=this.props,c=b.data,d=b.rect,f=b.margin,g=b.groups,h=b.handleClick,i=b.autoAdjust,j=b.enableExpand,k=e(b,["data","rect","margin","groups","handleClick","autoAdjust","enableExpand"]),m=this.state,n=m.posData,o=m.leafIds,p=(d[0]+f[1])*n.max_x+d[0],q=(d[1]+f[0])*n.max_y+d[1];return l.default.createElement("div",{className:"cn-flow-container",ref:"container",onClick:this.handleBlankAreaClick.bind(this),style:{width:p+"px",height:q+"px"}},Array.isArray(n.nodes)&&function(b){return b.filter(function(a){return a.show}).map(function(b,c){var e=(d[0]+f[1])*b.x,g=(d[1]+f[0])*b.y;return l.default.createElement(t.default,{ref:b.id,key:c,x:e,y:g,width:d[0],height:d[1],title:b.title,content:b.content,status:b.status,activeStatus:b.activeStatus,color:b.color,className:k.nodeClass,renderNodes:k.renderNodes,handleClick:a.onItemClick.bind(a),originSource:b,isLeaf:o.includes(b.id),expandClick:a.expandClick,enableExpand:void 0!==j&&j,handleDoubleClick:a.onItemDoubleClick.bind(a)})})}(n.nodes))}}]),b}(k.Component);w.propTypes={rect:n.default.array,margin:n.default.array,handleClick:n.default.func,type:n.default.string},w.defaultProps={rect:[200,100],margin:[40,60],lineColor:"#666",type:"bezier"};var x=function(){var a=this;this.expandClick=function(){var b=a.props,c=b.data,d=b.groups,e=b.autoAdjust;a.setState({posData:v.default.calculatePosData(c.nodes,c.edges,d,e)},function(){a.renderEdges()})}};return b.default=w,a.exports});;
Cube("datav:/com/flowsheet/0.0.10/cn-flowsheet.less", [], function(m){m.exports="@charset \"UTF-8\";.datav-flowsheet{background:0 0}.datav-flowsheet .cn-flow-container{position:relative}.datav-flowsheet .cn-flow-container .cn-flow-item{position:absolute;background:#fff;cursor:pointer;box-shadow:0 0 5px 1px rgba(0,0,0,.1)}.datav-flowsheet .cn-flow-container .cn-flow-item.item-default .flow-item-title{background-color:#ff6a00}.datav-flowsheet .cn-flow-container .cn-flow-item.item-warning .flow-item-title{background-color:#ffa033}.datav-flowsheet .cn-flow-container .cn-flow-item.item-success .flow-item-title{background-color:#1dc11d}.datav-flowsheet .cn-flow-container .cn-flow-item.item-error .flow-item-title{background-color:#f33}.datav-flowsheet .cn-flow-container .cn-flow-item.item-fade .flow-item-title{color:#fff;background-color:#ebecf0}.datav-flowsheet .cn-flow-container .cn-flow-item.item-fade .flow-item-content{color:#ebecf0}.datav-flowsheet .cn-flow-container .cn-flow-item.item-fade .flow-item-content .kv-label,.datav-flowsheet .cn-flow-container .cn-flow-item.item-fade .flow-item-content .kv-row,.datav-flowsheet .cn-flow-container .cn-flow-item.item-fade .flow-item-content .str-content{color:#ebecf0}.datav-flowsheet .cn-flow-container .cn-flow-item.item-fade .flow-item-wrap{background-color:#fff}.datav-flowsheet .cn-flow-container .cn-flow-item.item-fade .flow-item-wrap .kv-label,.datav-flowsheet .cn-flow-container .cn-flow-item.item-fade .flow-item-wrap .kv-row,.datav-flowsheet .cn-flow-container .cn-flow-item.item-fade .flow-item-wrap .str-content{color:#ebecf0}.datav-flowsheet .cn-flow-container .cn-flow-item.item-fade .flow-item-content .kv-content .kv-row .kv-label{color:#ebecf0}.datav-flowsheet .cn-flow-container .cn-flow-item .flow-item-title{width:100%;height:28px;line-height:28px;padding:0 10px;color:#fff;font-size:14px}.datav-flowsheet .cn-flow-container .cn-flow-item .flow-item-content{padding:8px 10px;line-height:1.5em;font-size:12px;color:#666;white-space:pre-line}.datav-flowsheet .cn-flow-container .cn-flow-item .flow-item-content .kv-content .kv-row{padding:4px 0;word-break:break-all;line-height:1.2em}.datav-flowsheet .cn-flow-container .cn-flow-item .flow-item-content .kv-content .kv-row .kv-label{font-weight:700;color:#999}.datav-flowsheet .cn-swim-bands{display:inline-block;position:relative;border:1px solid #e6e7eb}.datav-flowsheet .cn-swim-bands .bands-banner{width:100%;height:50px;line-height:50px;font-size:18px;background:#fff0e6}.datav-flowsheet .cn-swim-bands .bands-banner .band-item{display:inline-block;text-align:center}.datav-flowsheet .cn-swim-bands .bands-banner .band-item.band-item-enable:hover{cursor:pointer}.datav-flowsheet .cn-swim-bands .bands-flow{position:relative;padding:10px;overflow:hidden}.datav-flowsheet .cn-swim-bands .bands-flow .band-bg{position:absolute;top:0;width:100%;height:100%;background:#f8f8f8}.datav-flowsheet .cn-swim-bands .bands-flow .band-bg:nth-child(even){background:#fff}.datav-flowsheet .cn-swim-bands .bands-flow .cn-flow-container{margin-bottom:20px}";return m.exports});;
Cube("datav:/com/flowsheet/0.0.10/components/index.jsx",["datav:/npm/react/16.13.1","datav:/npm/prop-types/15.5.8"],function(a,b,c){function d(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(b,"__esModule",{value:!0});var e=c("datav:/npm/react/16.13.1"),f=d(e),g=c("datav:/npm/prop-types/15.5.8"),h=d(g),i=c("datav:/com/flowsheet/0.0.10/components/Flow.jsx"),j=d(i),k=c("datav:/com/flowsheet/0.0.10/components/Net.jsx"),l=d(k),m=c("datav:/com/flowsheet/0.0.10/components/SwimBands.jsx"),n=d(m),o=c("datav:/com/flowsheet/0.0.10/components/FlowItem.jsx"),p=d(o),q=j.default;return q.Flow=j.default,q.Net=l.default,q.SwimBands=n.default,q.FlowItem=p.default,b.default=q,a.exports});;
Cube("datav:/com/flowsheet/0.0.10/flow.jsx",["datav:/npm/react/16.13.1","datav:/npm/prop-types/15.5.8","datav:/npm/lodash/4.17.20"],function(a,b,c){function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&("object"===typeof b||"function"===typeof b)?b:a}function g(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function h(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function i(a,b){var c={};for(var d in a)0<=b.indexOf(d)||Object.prototype.hasOwnProperty.call(a,d)&&(c[d]=a[d]);return c}function j(a){var b=i(a,[]),c=["width","height","lineHeight","fontSize"];return r.default.reduce(b,function(a,b,d){return b&&l({},a,h({},d,c.includes(d)?b+"px":b))},{})}Object.defineProperty(b,"__esModule",{value:!0});var k=function(){function a(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),l=Object.assign||function(a){for(var b,c=1;c<arguments.length;c++)for(var d in b=arguments[c],b)Object.prototype.hasOwnProperty.call(b,d)&&(a[d]=b[d]);return a},m=c("datav:/npm/react/16.13.1"),n=d(m),o=c("datav:/npm/prop-types/15.5.8"),p=d(o),q=c("datav:/npm/lodash/4.17.20"),r=d(q),s=c("datav:/com/flowsheet/0.0.10/components/index.jsx"),t=d(s);c("datav:/com/flowsheet/0.0.10/cn-flowsheet.less","");var u=n.default.Component,v="#ff6a00",w="#333",x=function(a){function b(){return e(this,b),f(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return g(b,a),k(b,[{key:"getHexFromStatus",value:function(a,b){var c="";return r.default.forEach(a,function(a){var d=a.columnName,e=a.displayName;d===b&&(c=e)}),c}},{key:"isFade",value:function(a,b,c){return"fade"===a?c:b}},{key:"setTitle",value:function(a,b,c,d){var e=a.title,f=void 0===e?"":e,g=a.status,h=void 0===g?"default":g,i=a.activeStatus,k=void 0===i?"":i,l=b.nodesGroup.nodes.title,m=l.height,o=l.textAlign,p=l.font,q=p.fontFamily,r=p.fontWeight,s=p.fontSize,t=p.color,u=l.backgroundColor,w=this.getHexFromStatus(u,h)||v;return n.default.createElement("div",{className:"flow-item-title",style:j({height:m,lineHeight:m,textAlign:o,fontFamily:q,fontSize:s,fontWeight:r,color:this.isFade(k,t,d),backgroundColor:this.isFade(k,w,c)})},f)}},{key:"setContents",value:function(a,b,c){var d=this,e=a.content,f=void 0===e?"":e,g=a.activeStatus,h=void 0===g?"":g,i=b.lineHeight,k=b.contentFont,m=k.fontFamily,o=k.fontWeight,p=k.fontSize,q=k.color,s=b.labelFont,t=s.fontFamily,u=s.fontWeight,v=s.fontSize,w=s.color,x="";return x=r.default.isArray(f)&&0<=f.length?r.default.map(f,function(a,b){var e=a.label,f=void 0===e?"":e,g=a.value,k=void 0===g?"":g;return n.default.createElement("div",{className:"kv-content",key:"label_"+b},n.default.createElement("div",{className:"kv-row",style:j({lineHeight:i,fontFamily:m,fontSize:p,fontWeight:o,color:d.isFade(h,q,c)})},n.default.createElement("div",{className:"kv-label",style:l({},j({fontFamily:t,fontWeight:u,fontSize:v,color:"fade"===h?c:w}),{float:"left"})},f,"\uFF1A"),n.default.createElement("div",{className:"kv-describe",style:{overflow:"hidden"}},k)))}):n.default.createElement("div",{className:"str-content",style:j({lineHeight:i,fontFamily:m,fontSize:p,fontWeight:o,color:"fade"===h?c:q})},f),n.default.createElement("div",{className:"flow-item-content"},x)}},{key:"setCustomNodes",value:function(a,b){var c=b.nodesGroup.nodes,d=c.title,e=c.content,f=c.autoHighlightContent,g=void 0===f?{}:f,h=a.activeStatus,i=void 0===h?"":h,j=r.default.get(g,["autoTitle","titleBackgroundColor"],""),k=r.default.get(g,["autoTitle","titleColor"],""),l=r.default.get(e,"backgroundColor"),m=r.default.get(g,["autoContent","contentBackgroundColor"],""),o=r.default.get(g,["autoContent","contentColor"],""),p=this.isFade(i,l,m);return n.default.createElement("div",{className:"flow-item-wrap",style:{width:"100%",height:"100%",overflow:"hidden",backgroundColor:p}},d&&this.setTitle(a,b,j,k),e&&this.setContents(a,e,o))}},{key:"handleClickNodes",value:function(a){var b=this.props.handleClick,c=a.width,d=a.height,e=a.title,f=a.content,g=a.status,h=a.originSource.id;b&&b({id:h,width:c,height:d,title:e,content:f,status:g})}},{key:"handleDoubleClick",value:function(a){var b=a.width,c=a.height,d=a.title,e=a.content,f=a.status,g=a.originSource.id,h=this.props.handleDoubleClick;h&&h({id:g,width:b,height:c,title:d,content:e,status:f})}},{key:"handleBlankAreaClick",value:function(a){var b=this.props.handleBlankAreaClick;b&&b(a)}},{key:"render",value:function(){var a=this,b=this.props,c=b.data,d=b.nodesGroup,e=d.nodes,f=e.size,g=f.width,h=f.height,i=e.margin,j=i.topBottom,k=i.leftRight,l=e.autoHighlight,m=d.cableLine,o=m.cableLineTypes,p=m.cableLineColor,q=b.ginsengAmericanID,s=r.default.get(this.props,"data.nodes");if(r.default.isEmpty(s[0])&&1>=s.length)return null;var u=new Date().getTime(),v=r.default.cloneDeep(c),w=r.default.get(this.props,["nodesGroup","nodes","autoHighlightContent","nonCableLineColor"]);return n.default.createElement("div",{className:"datav-flowsheet"},n.default.createElement(t.default,{data:v,key:u,rect:[g,h],margin:[j,k],autoHighlight:l,type:o,lineColor:p,nonLineColor:w,renderNodes:function(b){return a.setCustomNodes(b,a.props)},handleClick:function(b){return r.default.isFunction(a.handleClickNodes)&&a.handleClickNodes(b)},handleDoubleClick:function(b){return r.default.isFunction(a.handleDoubleClick)&&a.handleDoubleClick(b)},handleBlankAreaClick:function(b){return r.default.isFunction(a.handleBlankAreaClick)&&a.handleBlankAreaClick(b)},ginsengAmericanID:q}))}}]),b}(u);return b.default=x,x.propTypes={data:p.default.shape({nodes:p.default.array,edges:p.default.array}),nodesGroup:p.default.shape({nodes:p.default.shape({size:p.default.shape({width:p.default.number,height:p.default.number}),margin:p.default.shape({leftRight:p.default.number,topBottom:p.default.number}),autoHighlight:p.default.bool,title:p.default.shape({height:p.default.number,textAlign:p.default.string,font:p.default.shape({fontFamily:p.default.string,fontWeight:p.default.string,fontSize:p.default.number,color:p.default.string}),backgroundColor:p.default.arrayOf(p.default.object)}),content:p.default.shape({lineHeight:p.default.number,backgroundColor:p.default.string,contentFont:p.default.shape({fontFamily:p.default.string,fontWeight:p.default.string,fontSize:p.default.number,color:p.default.string}),labelFont:p.default.shape({fontFamily:p.default.string,fontWeight:p.default.string,fontSize:p.default.number,color:p.default.string})})}),cableLine:p.default.shape({cableLineTypes:p.default.string,cableLineColor:p.default.string})}),handleClick:p.default.func.isRequired,handleDoubleClick:p.default.func.isRequired,handleBlankAreaClick:p.default.func.isRequired},x.defaultProps={data:{nodes:[],edges:[]},nodesGroup:{nodes:{size:{width:150,height:150},margin:{leftRight:60,topBottom:40},autoHighlight:!0,title:{font:{fontFamily:"Microsoft Yahei",fontWeight:"normal",fontSize:14,color:w},height:28,textAlign:"left",backgroundColor:[{columnName:"success",displayName:"#1dc11d"},{columnName:"warning",displayName:"#ffa033"},{columnName:"error",displayName:"#ff3333"},{columnName:"default",displayName:v}]},content:{lineHeight:14,backgroundColor:"#fff",contentFont:{fontFamily:"Microsoft Yahei",fontWeight:"normal",fontSize:12,color:w},labelFont:{fontFamily:"Microsoft Yahei",fontWeight:"normal",fontSize:12,color:w}}},cableLine:{cableLineTypes:"bezier",cableLineColor:"#666"}}},a.exports});;
Cube("datav:/com/flowsheet/0.0.10",["datav:/npm/bcore/0.0.18/event","datav:/npm/lodash/4.17.20","datav:/npm/react/16.13.1","datav:/npm/react-dom/16.13.1"],function(a,b,c){var d=Object.assign||function(a){for(var b,c=1;c<arguments.length;c++)for(var d in b=arguments[c],b)Object.prototype.hasOwnProperty.call(b,d)&&(a[d]=b[d]);return a},e=c("datav:/npm/bcore/0.0.18/event"),f=c("datav:/npm/lodash/4.17.20"),g=c("datav:/npm/react/16.13.1"),h=c("datav:/npm/react-dom/16.13.1"),i=c("datav:/com/flowsheet/0.0.10/flow.jsx").default;return a.exports=e.extend(function(a,b){this.config={theme:{}},this.container=a,this.apis=b.apis,this._data=null,this.chart=null,this.id=null,this.init(b)},{init:function(a){this.mergeConfig(a),this.updateLayout(),this.updateStyle()},getThemableConfig:function(a){if(!a)return null;var b=a.palette,c=a.textColor,d=b[Math.floor(b.length/2)];return{nodesGroup:{nodes:{content:{contentFont:{color:c},labelFont:{color:d}}},cableLine:{cableLineColor:d}}}},render:function(a,b){a=this.data(a);var c=this.mergeConfig(b);h.render(g.createElement(i,d({},c,{data:a[0],handleClick:this.handleClick.bind(this),handleDoubleClick:this.handleDoubleClick.bind(this),handleBlankAreaClick:this.handleBlankAreaClick.bind(this),ginsengAmericanID:this.id})),this.container),this.updateStyle()},handleClick:function(a){this.emit("handleClick",a)},handleDoubleClick:function(a){this.emit("handleDoubleClick",a)},handleBlankAreaClick:function(a){this.emit("handleBlankAreaClick",a)},ginsengAmericanFn:function(a){var b=a.id;this.id=b,this.render(this._data,this.config)},resize:function(a,b){this.updateLayout(a,b)},setColors:function(){},data:function(a){return a&&(this._data=a),this._data},mergeConfig:function(a){return a?(this.config.theme=f.defaultsDeep(a.theme||{},this.config.theme),this.setColors(),this.config=f.defaultsDeep(a||{},this.config),this.config):this.config},updateLayout:function(){},updateStyle:function(){},destroy:function(){return!!this.container&&void(h.unmountComponentAtNode(this.container),this.container.innerHTML="")}}),a.exports});