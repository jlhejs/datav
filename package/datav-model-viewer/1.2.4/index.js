// env=undefined => env=publish 
Cube("datav:/com/datav-model-viewer/1.2.4/ModelViewer/shader/circle.frag.glsl",[],function(n,e,a,i,t,r){return n.exports="#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvarying vec3 vertex;\nuniform float u_alpha;\n\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\n\t// #include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, (1.0 - length(vertex) * u_alpha) * opacity);\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",n.exports});;
Cube("datav:/com/datav-model-viewer/1.2.4/ModelViewer/shader/circle.vert.glsl",[],function(e,n,t,r,i,l){return e.exports="#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec3 vertex;\n\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n\tvertex = position;\n}",e.exports});;
Cube("datav:/com/datav-model-viewer/1.2.4/Graphic/datav-engine-postprocessing/postprocessing",[],function(e,t,o,n,s,r){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,o){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=f(e)););return e}(e,t);if(n)return n=Object.getOwnPropertyDescriptor(n,t),n.get?n.get.call(arguments.length<3?e:o):n.value}).apply(this,arguments)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(o){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=f(o),t=(e=n?(e=f(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(e&&("object"===i(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}return e.exports=function(e){var o=e.Utils,e=e.Layer,t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&p(t,e);var n,s=u(r);function r(e){var t;if(this instanceof r)return(t=s.call(this)).options=o.mergeOptions({renderMode:"normalMode",postprocessing:{volumetricLight:{enabled:!1,light:{position:{x:0,y:0,z:0}}}},crossfade:{nextScenes:[]},isSceneGroup:!1,sceneNames:[{sceneName:"scene1"}]},e||{}),t.classNameAlias="PostprocessingLayer",t;throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"addTo",value:function(e){a(f(r.prototype),"addTo",this).call(this,e),this.init()}},{key:"init",value:function(){var e,t=this.viewer.engine;this.resetPostProcessingOptions(),t.createEffectComposer(this.options.postprocessing),t.setAdvancedRender(!0),this.effectComposer=t.composer.effectComposer,this.updatePostprocessingOptions(),void 0!==this.viewer.sceneEditor&&((t=this.viewer.sceneEditor.globeNode.globe.atmospherePass).setDepthTexture(this.effectComposer.composer.getDepthTexture()),e=this.effectComposer.getPassIndex("ssr")+1,this.effectComposer.composer.addPass(t,e))}},{key:"setSkybox",value:function(e){var t=this.effectComposer.getPass("cubeTexture");void 0===t?(this.skyboxConfig=e,this.effectComposer.addCubeTexturePass(e,!1)):o.easyObjDiff(this.skyboxConfig,e)||(t.updateOptions(e),this.skyboxConfig=e)}},{key:"resetPostProcessingOptions",value:function(){var e=this.options.postprocessing,t=e.sharpenVignetteGrain,o=e.ssr,n=e.ssao,s=e.bokeh,r=e.ueBloom,i=e.motionBlur,e=e.bloom;t.enabled=t.show,o.enabled=o.show,n.enabled=n.show,s.enabled=s.show,r.enabled=r.show,i.enabled=i.show,e.enabled=e.show}},{key:"updatePostprocessingOptions",value:function(){var e=this.options.postprocessing,t=e.ssr,o=e.ssao,n=e.bokeh,s=e.ueBloom,e=e.bloom,r=!1;(t.show||o.show||n.show||s.show||e.show)&&(r=!0),this.effectComposer.gBuffer.enabled=r}},{key:"startSceneTransition",value:function(e,t){var o=this.options,n=o.postprocessing,o=o.crossfade;(n.crossfade=o).enabled&&-1!==o.nextScenes.indexOf(t)&&this.viewer.engine.setSwitchScene({enabled:o.enabled,curSceneName:e,nextSceneName:t,duration:o.duration,delay:o.delay})}},{key:"show",value:function(){this.viewer&&this.viewer.engine.setAdvancedRender(!0)}},{key:"hide",value:function(){this.viewer&&this.viewer.engine.setAdvancedRender(!1)}},{key:"setData",value:function(){}},{key:"updateOptions",value:function(e){var t;this.options=o.mergeOptions(this.options,e||{}),this.viewer&&(t=(e=this.options).postprocessing,e=e.crossfade,t.crossfade=e,this.resetPostProcessingOptions(),this.updatePostprocessingOptions(),this.viewer.engine.setEffectComposer(this.options.postprocessing),this.viewer.engine.setAdvancedRender(!0))}},{key:"remove",value:function(){this.hide()}}])&&c(t.prototype,e),n&&c(t,n),Object.defineProperty(t,"prototype",{writable:!1}),r},e.exports});;
Cube("datav:/com/datav-model-viewer/1.2.4/immerseHook/style.css", [], function(m){m.exports=".datav-fab-immerse-toolbox{padding-top:6px}.datav-fab-immerse-toolbox .toolbox-control{display:flex;height:35px;padding:4px 0;align-items:center}.datav-fab-immerse-toolbox .toolbox-control label{width:76px;color:#fff}.datav-fab-immerse-toolbox .toolbox-control .toolbox-control-content{flex:1}.datav-fab-immerse-toolbox .toolbox-control .toolbox-control-content .animation-option{display:flex;align-items:center;padding-right:4px}.datav-fab-immerse-toolbox .toolbox-control .toolbox-control-content .animation-option .animation-option-copy{color:var(--datav-font-color);cursor:pointer}.datav-fab-immerse-toolbox .toolbox-control .toolbox-control-content .animation-option .animation-option-copy.--selected{color:var(--datav-main-color)}.datav-fab-immerse-toolbox .toolbox-control .toolbox-control-content .animation-option .animation-option-copy.--selected:hover,.datav-fab-immerse-toolbox .toolbox-control .toolbox-control-content .animation-option .animation-option-copy:hover{color:var(--datav-main-hover-color)}.datav-fab-immerse-toolbox .toolbox-control .toolbox-control-preview{width:22px;height:22px;line-height:22px;padding:0 3px}.datav-fab-immerse-toolbox .toolbox-control .toolbox-control-preview .datav-icon{font-size:12px}";return m.exports});;
Cube("datav:/com/datav-model-viewer/1.2.4/Layer",["datav:/npm/eventemitter3/3.0.0"],function(e,t,r,o,n,i){function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(r){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=f(r),t=(e=o?(e=f(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(e&&("object"===u(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var l=r("datav:/npm/eventemitter3/3.0.0"),r=function(){var e=n,t=l;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t);var r,o=a(n);function n(){var e;if(this instanceof n)return(e=o.call(this)).needsWait=!1,e.comId="",e;throw new TypeError("Cannot call a class as a function")}return e=n,(t=[{key:"addTo",value:function(e,t){if(!e)return console.log("Layer needs viewer");this.comId=t,this.viewer=e,this.proj=e.proj,this.Utils=e.Utils,this.sceneMgr=e.engine.sceneMgr,this.scene=this.sceneMgr.getScene("main"),this.group=new this.viewer.THREE.Group,this.scene.add(this.group),this.sceneMgr.addObjectToList(this.group)}},{key:"addObject",value:function(e){e.userData&&(e.userData.comId=this.comId),this.group.add(e),this.sceneMgr.addObjectToList(e)}},{key:"removeObject",value:function(e){this.group.remove(e),this.sceneMgr.remove(e)}},{key:"getProjPos",value:function(e,t,r){return this.proj&&this.proj.tansformToWorld([e,t,r])}},{key:"getProjNormal",value:function(e,t,r){return this.proj&&this.proj.normalFromCoords([e,t,r]).normalize()}},{key:"setRenderOrder",value:function(e){void 0!==e&&(this.group.renderOrder=e)}},{key:"setDate",value:function(e,t){}},{key:"getParsedData",value:function(e){return this.viewer.decode&&e instanceof ArrayBuffer?this.viewer.decode(e):e}},{key:"getParsedAssetData",value:function(e){return this.viewer.decodeAsset&&e instanceof ArrayBuffer?this.viewer.decodeAsset(e):e}},{key:"updatePostions",value:function(){}},{key:"freeze",value:function(){}},{key:"release",value:function(){}},{key:"show",value:function(){this.group&&(this.group.visible=!0)}},{key:"hide",value:function(){this.group&&(this.group.visible=!1)}},{key:"clear",value:function(){var t=this;this.group&&this.group.children&&this.group.children.forEach(function(e){t.removeObject(e),t.Utils.disposeNode(e)}),this.group.children=[]}},{key:"traverse",value:function(t){var r=this;this.group&&this.group.traverse(function(e){e instanceof r.viewer.THREE.Mesh&&t&&t(e)})}},{key:"remove",value:function(){this.clear(),this.sceneMgr.remove(this.group),this.proj.off("projChanged",this.updatePostions)}},{key:"destroy",value:function(){this.remove()}},{key:"clearAnimate",value:function(){}},{key:"startAnimate",value:function(){}},{key:"updateOptions",value:function(){}}])&&s(e.prototype,t),r&&s(e,r),Object.defineProperty(e,"prototype",{writable:!1}),n}();return e.exports=r,e.exports});;
Cube("datav:/com/datav-model-viewer/1.2.4/Graphic/datav-engine-postprocessing",["datav:/npm/eventemitter3/3.0.0"],function(e,t,r,n,o,i){function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(r){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=f(r),t=(e=n?(e=f(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(e&&("object"===a(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var l=r("datav:/npm/eventemitter3/3.0.0"),y=r("datav:/com/datav-model-viewer/1.2.4/Graphic/datav-engine-postprocessing/postprocessing"),r=function(){var e=o,t=l;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t);var r,n=s(o);function o(e,t){var r;if(this instanceof o)return(r=n.call(this)).options=t,r;throw new TypeError("Cannot call a class as a function")}return e=o,(t=[{key:"addTo",value:function(e){this.viewer=e,this.initLayer()}},{key:"initLayer",value:function(){var e=y(this.viewer);this.layer=new e(this.options),this.layer.addTo(this.viewer)}},{key:"startSceneTransition",value:function(e,t){this.layer&&this.layer.startSceneTransition(e,t)}},{key:"setData",value:function(){}},{key:"show",value:function(){this.layer&&this.layer.show()}},{key:"hide",value:function(){this.layer&&this.layer.hide()}},{key:"updateOptions",value:function(e){this.layer&&this.layer.updateOptions(e)}},{key:"remove",value:function(){this.layer&&(this.layer.remove(),this.layer=null)}},{key:"destroy",value:function(){this.remove()}}])&&u(e.prototype,t),r&&u(e,r),Object.defineProperty(e,"prototype",{writable:!1}),o}();return e.exports=r,e.exports});;
Cube("datav:/com/datav-model-viewer/1.2.4/ModelViewer",[],function(e,t,o,i,a,n){function s(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var r,l,O=null,h=null,m=null,d=(r=u,(d=[{key:"addTo",value:function(e){var t=this;O=e.THREE,m=e.Utils,h=new O.Box3,this.viewer=e,this.light=e.light,this.initOptions(e.options),this.groundConfig=e.options.lights.groundShadow,this.camera=e.engine.camera,this.layer=new e.VG.Layer.ModelViewer(this.options),this.layer.addTo(e),this.currentAnimation={loopMode:"LoopRepeat",weight:1},this.viewer.engine.on("animationFrame",this.animation.bind(this)),this.globalMatrix=new O.Matrix4,this.globalAnimateMatrix=new O.Matrix4,this.globalWorldMatrix=new O.Matrix4,this.rotateMatrix=new O.Matrix4,this.enableGlobalAnimation=!1,this.isUpdateModel=!1,this.layer.on("loaded",function(){null!=t.layer.model&&(t.model=t.layer.model.scene,t.animationNames=t.layer.animationNames,0<t.animationNames.length&&(t.currentAnimation.name=t.animationNames[0]),t.autoFitModel(),t.setAnimation(t.options.animation),t.setOpacity(t.options.renderEffect.opacity),t.setGlobalAnimation())})}},{key:"fitTo",value:function(e,t){var i=this.camera.position.x-this.camera.position.z;(Math.abs(this.camera.position.x-this.camera.userData.pos.px)<1e-5&&Math.abs(this.camera.position.y-this.camera.userData.pos.py)<1e-5&&Math.abs(this.camera.position.z-this.camera.userData.pos.pz)<1e-5||Math.abs(i-(e.x-e.z))<1e-5||this.isUpdateModel)&&(this.viewer.engine.cameraControl.fitToScene(e,t),this.viewer.engine.cameraControl.update(),this.isUpdateModel=!1)}},{key:"updateBoundingBoxOfSkinningMesh",value:function(e){var t=e.geometry,e=e.skeleton,t=t.attributes,i=t.position,a=t.skinIndex,n=t.skinWeight,o=e.bones,s=e.boneInverses,r=i.count,l=new O.Vector3(1/0,1/0,1/0),h=new O.Vector3(-1/0,-1/0,-1/0),m=new O.Vector3,d=new O.Vector3;for(var u,c,y,p,f,g=0;g<r;++g){var v=[i.array[3*g],i.array[3*g+1],i.array[3*g+2]],x=[a.array[4*g],a.array[4*g+1],a.array[4*g+2],a.array[4*g+3]],M=[n.array[4*g],n.array[4*g+1],n.array[4*g+2],n.array[4*g+3]];m.set(0,0,0);for(var w,b=0;b<4;++b)0<=x[b]&&1e-6<=M[b]&&void 0!==o[x[b]]&&(w=o[x[b]].matrixWorld.clone().multiply(s[x[b]]),u=d,c=v,w=w.elements,f=p=y=void 0,y=c[0],p=c[1],c=c[2],f=w[3]*y+w[7]*p+w[11]*c+w[15],u.x=(w[0]*y+w[4]*p+w[8]*c+w[12])/(f=f||1),u.y=(w[1]*y+w[5]*p+w[9]*c+w[13])/f,u.z=(w[2]*y+w[6]*p+w[10]*c+w[14])/f,m.addScaledVector(d,M[b]));l.min(m),h.max(m)}return new O.Box3(l,h)}},{key:"autoFitModel",value:function(){var e,t,i,a=this,n=new O.Box3;this.resetModelStatus(this.options),this.model.traverse(function(e){e.isMesh&&(e.isSkinnedMesh?n.union(a.updateBoundingBoxOfSkinningMesh(e)):n.union(e.geometry.boundingBox.clone().applyMatrix4(e.matrixWorld)))}),n.max.length()!==1/0&&n.min.length()!==1/0?(this.layer.updateBoundingBox(n),i=(new O.Vector3).copy(n.max),e=(new O.Vector3).copy(n.min),(t=new O.Vector3).addVectors(e,i),t.multiplyScalar(.5),i=i.sub(e).length()/2,i=Math.min(i,999999),i=Math.max(i,1),this.fitTo(t,i),this.initGround(i,n),this.light.updateDistance(i),this.light.updateDirectionalLightShadowCameraParameters()):this.initGround(1,new O.Box3)}},{key:"resetModelStatus",value:function(){var e=this.options.transform,t=e.scale,i=e.rotation,e=e.position,a=new O.Vector3,i=(h.setFromObject(this.model).getCenter(a),(new O.Quaternion).setFromEuler(new O.Euler(i.rotationX/180*Math.PI,i.rotationY/180*Math.PI,i.rotationZ/180*Math.PI,"XYZ"))),e=(new O.Matrix4).compose(new O.Vector3(e.offsetX-a.x,e.offsetY-a.y,e.offsetZ-a.z),i,new O.Vector3(t.scaleX,t.scaleY,t.scaleZ));this.globalMatrix.copy(e),this.model.applyMatrix4(e),this.globalWorldMatrix.copy(this.model.matrix)}},{key:"setData",value:function(e){this.layer&&this.layer.setData(e)}},{key:"initOptions",value:function(e){var t=e.model,e=e.animate,t=(this.options=Object.assign({},t),this.options.scanner=Object.assign({},t.scanner),this.options.animation=Object.assign({},t.animation),e&&(this.options.scanner=Object.assign(this.options.scanner,e.scanner),this.options.animation=Object.assign(this.options.animation,e.modelAnimate)),this.animateOpts=Object.assign({autoRotate:{enable:!1,axis:"y",showAxis:!1,randomAxis:{x:0,y:1,z:0},direction:1,speed:.01}},e),this.animateOpts.autoRotate.randomAxis);this.rotateAxis={x:new O.Vector3(1,0,0),y:new O.Vector3(0,1,0),z:new O.Vector3(0,0,1),random:new O.Vector3(t.x,t.y,t.z).normalize()}}},{key:"initGround",value:function(e,t){var i,a,n=this;this.ground?(a=10*e/this.ground.geometry.parameters.radius,this.ground.scale.set(a,a,a),this.ground.position.set((t.min.x+t.max.x)/2,t.min.y,(t.min.z+t.max.z)/2)):(a=new O.CircleBufferGeometry(10*e,32),i=new O.MeshPhongMaterial({color:16777215,depthWrite:!1}),this.boundary={value:.1/e},i.transparent=!0,i.onBeforeCompile=function(e){e.vertexShader=o("datav:/com/datav-model-viewer/1.2.4/ModelViewer/shader/circle.vert.glsl"),e.fragmentShader=o("datav:/com/datav-model-viewer/1.2.4/ModelViewer/shader/circle.frag.glsl"),e.uniforms.u_alpha=n.boundary},(a=new O.Mesh(a,i)).rotation.x=.5*-Math.PI,a.position.set((t.min.x+t.max.x)/2,t.min.y,(t.min.z+t.max.z)/2),a.receiveShadow=!0,this.ground=a,this.viewer.engine.scene.add(this.ground)),this.ground.userData.initAlpha=.1/e,this.ground.userData.initRadius=10*e*this.ground.scale.x,this.ground.userData.initPos=t.min.y,this.updateGround()}},{key:"updateGround",value:function(){this.groundConfig=m.mergeOptions(this.groundConfig,(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{})||{});var e=this.groundConfig,t=e.show,i=e.boundary,a=e.height,n=e.size,e=e.opacity,o=this.ground.geometry.parameters.radius;t?(this.ground.visible=!0,this.boundary.value=0===i?0:this.ground.userData.initAlpha*i,this.ground.scale.set(n/(o/this.ground.userData.initRadius),n/(o/this.ground.userData.initRadius),n/(o/this.ground.userData.initRadius)),this.ground.position.y=this.ground.userData.initPos+a,this.ground.material.opacity=e):this.ground.visible=!1}},{key:"setChannel",value:function(e){this.layer&&this.layer.setChannel(e)}},{key:"setEnvMap",value:function(e){this.layer&&this.layer.setEnvMap(e)}},{key:"getModelInfo",value:function(){if(this.layer)return this.layer.getModelInfo()}},{key:"getChannelName",value:function(){var i=this,a={ao:!1,metalness:!1,roughness:!1,normal:!1,emissive:!1,albedo:!1};return this.layer&&this.layer.model&&this.layer.model.scene&&this.layer.traverse(function(e){i.layer.Utils.materialTraverse(e.material,function(e,t){e=i.layer.Utils.getCurrentMaterial(e,t);e.aoMap&&(a.ao=!0),e.map&&(a.albedo=!0),e.metalnessMap&&(a.metalness=!0),e.roughnessMap&&(a.roughness=!0),e.emissiveMap&&(a.emissive=!0),e.normalMap&&(a.normal=!0)})}),a}},{key:"colorify",value:function(){var i=this,a=this.options.viewMode.wireframe;this.layer&&this.layer.model&&this.layer.model.scene&&this.layer.traverse(function(e){i.layer.Utils.materialTraverse(e.material,function(e,t){i.layer.Utils.getCurrentMaterial(e,t).wireframe=a})})}},{key:"enhanceMaterial",value:function(e){this.layer&&this.layer.enhanceMaterial(e)}},{key:"updateScannerOpts",value:function(e){this.layer&&this.layer.updateScannerOpts(e)}},{key:"scanner",value:function(){this.options.scanner.show?(this.layer&&this.layer.enableScannerAnimation(!0),this.layer&&this.layer.updateScannerOpts(this.options.scanner)):this.layer&&this.layer.enableScannerAnimation(!1)}},{key:"setAnimation",value:function(e){var t=e.autoPlay,e=e.defaultAnimation;-1<this.animationNames.indexOf(e)&&(this.currentAnimation.name=e),this.layer&&this.layer.setAnimation(t,this.currentAnimation)}},{key:"setGlobalAnimation",value:function(){this.updateRotateParameters()}},{key:"setOpacity",value:function(e){this.layer&&this.layer.setOpacity(1-e)}},{key:"animation",value:function(){this.layer&&this.layer.animation(),this.model&&this.updateGlobalAnimation()}},{key:"updateGlobalAnimation",value:function(){this.enableGlobalAnimation&&(this.globalAnimateMatrix.multiplyMatrices(this.globalMatrix,this.rotateMatrix),this.model.applyMatrix4(this.globalAnimateMatrix))}},{key:"updateRotateParameters",value:function(){var e=this.animateOpts.autoRotate,t=e.enable,i=e.axis,a=e.randomAxis,n=e.direction,e=e.speed;"random"===i&&(this.rotateAxis.random.x=a.x,this.rotateAxis.random.y=a.y,this.rotateAxis.random.z=a.z,this.rotateAxis.random.normalize()),t&&this.rotateMatrix.makeRotationAxis(this.rotateAxis[i],n*e),this.enableGlobalAnimation=t}},{key:"resetModelWorldMatrix",value:function(){this.model.scale.setFromMatrixScale(this.globalWorldMatrix),this.model.setRotationFromMatrix(this.globalWorldMatrix),this.model.position.setFromMatrixPosition(this.globalWorldMatrix)}},{key:"enableScanner",value:function(e){this.layer&&this.layer.enableScannerAnimation(e)}},{key:"updateOptions",value:function(e){var t=m.deepClone(this.options);this.options=m.mergeOptions(this.options,e||{}),this.options.scanner=m.mergeOptions(this.options.scanner,t.scanner),this.options.animation=m.mergeOptions(this.options.animation,t.animation),m.easyDiff(t.url,e.url)||(this.isUpdateModel=!0,this.setData(e)),m.easyObjDiff(t.viewMode.channel,e.viewMode.channel)||this.layer&&this.layer.setChannel(e.viewMode.channel),m.easyDiff(t.viewMode.wireframe,e.viewMode.wireframe)&&m.easyDiff(t.viewMode.wireframeColor,e.viewMode.wireframeColor)&&m.easyDiff(t.viewMode.wireframeWidth,e.viewMode.wireframeWidth)||this.layer&&this.layer.setWireframe(e.viewMode),m.easyObjDiff(t.renderEffect.shadow,e.renderEffect.shadow)||this.layer&&this.layer.checkShadow(e.renderEffect.shadow),m.easyDiff(t.renderEffect.opacity,e.renderEffect.opacity)||this.setOpacity(e.renderEffect.opacity),m.easyObjDiff(t.transform.scale,e.transform.scale)||(this.layer&&this.layer.updateScales(e.transform.scale),this.globalWorldMatrix.makeScale(this.model.scale.x,this.model.scale.y,this.model.scale.z)),m.easyObjDiff(t.transform.position,e.transform.position)||(this.layer&&this.layer.updatePositions(e.transform.position,"position"),this.globalWorldMatrix.makeTranslation(this.model.position.x,this.model.position.y,this.model.position.z)),m.easyObjDiff(t.transform.rotation,e.transform.rotation)||(this.layer&&this.layer.updatePositions(e.transform.rotation),this.globalWorldMatrix.makeRotationFromQuaternion(this.model.quaternion))}},{key:"updateAnimateOptions",value:function(e){m.easyObjDiff(this.options.scanner,e.scanner)||(this.options.scanner=m.mergeOptions(this.options.scanner,e.scanner),this.scanner()),m.easyDiff(this.options.animation,e.modelAnimate)||(this.options.animation=m.mergeOptions(this.options.animation,e.modelAnimate||{}),this.setAnimation(this.options.animation)),m.easyDiff(this.animateOpts.autoRotate.axis,e.autoRotate.axis)||this.resetModelWorldMatrix(),this.animateOpts=m.mergeOptions(this.animateOpts,e),this.updateRotateParameters(),this.enableGlobalAnimation||this.resetModelWorldMatrix()}},{key:"destroy",value:function(){this.viewer.engine.scene.remove(this.ground),this.ground=null,this.layer&&this.layer.remove()}}])&&s(r.prototype,d),l&&s(r,l),Object.defineProperty(r,"prototype",{writable:!1}),u);function u(){if(!(this instanceof u))throw new TypeError("Cannot call a class as a function")}return e.exports=d,e.exports});;
Cube("datav:/com/datav-model-viewer/1.2.4/Projection",["datav:/npm/eventemitter3/3.0.0"],function(t,e,r,n,o,u){function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(r){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=l(r),e=(t=n?(t=l(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),this);if(t&&("object"===i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var p=r("datav:/npm/eventemitter3/3.0.0"),s=null,r=function(){var t=o,e=p;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&f(t,e);var r,n=a(o);function o(t){var e;if(!(this instanceof o))throw new TypeError("Cannot call a class as a function");e=n.call(this),s=t.THREE;t=t.Utils.simple;return e.proj=t,e.inverseProj=t,e.getNormal=function(){return new s.Vector3(0,1,0)},e.getTfMat4=function(){return new s.Matrix4},e}return t=o,(e=[{key:"tansformToWorld",value:function(t){return this.proj(t)}},{key:"inverseWorldCoords",value:function(t){return this.inverseProj(t)}},{key:"normalFromCoords",value:function(t){return this.getNormal(t)}},{key:"transformMatrix4",value:function(t){return this.getTfMat4(t)}}])&&c(t.prototype,e),r&&c(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}();return t.exports=r,t.exports});;
Cube("datav:/com/datav-model-viewer/1.2.4/Light",[],function(i,t,e,h,a,n){function s(i,t){for(var e=0;e<t.length;e++){var h=t[e];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(i,h.key,h)}}var o,r,l=null,c=null,g=(o=d,(g=[{key:"updateDistance",value:function(i){this.distance=i}},{key:"init",value:function(){this.lights=new l.Group,this.ambientLight=new l.AmbientLight(16777215,0),this.ambientLight.visible=!1,this.directionalLight1=new l.DirectionalLight(16777215,0),this.directionalLight1.visible=!1,this.directionalLight2=new l.DirectionalLight(16777215,0),this.directionalLight2.visible=!1,this.directionalLight3=new l.DirectionalLight(16777215,0),this.directionalLight3.visible=!1,this.lights.add(this.ambientLight),this.lights.add(this.directionalLight1),this.lights.add(this.directionalLight2),this.lights.add(this.directionalLight3),this.setAmbientLight(),this.setDirectionalLight()}},{key:"setAmbientLight",value:function(){var i,t=this.options.ambientLight;0<t.length?(i=(t=t[0]).color,t=t.intensity,i=c.Chroma(i).gl(),this.ambientLight.visible=!0,this.ambientLight.color.r=i[0],this.ambientLight.color.g=i[1],this.ambientLight.color.b=i[2],this.ambientLight.intensity=t):this.ambientLight.visible=!1}},{key:"setDirectionalLight",value:function(){var i,t,e=this.options.directionalLight;0<e.length&&void 0!==e[0]?(t=(e=e[0]).color,i=e.intensity,e=e.position,t=c.Chroma(t).gl(),this.directionalLight1.visible=!0,this.directionalLight1.color.r=t[0],this.directionalLight1.color.g=t[1],this.directionalLight1.color.b=t[2],this.directionalLight1.intensity=i,this.directionalLight1.position.set(e.x,e.y,e.z),this.directionalLight1.castShadow=!0,this.updateDirectionalLightShadowCameraParameters()):this.directionalLight1.visible=!1}},{key:"updateDirectionalLightShadowCameraParameters",value:function(){this.directionalLight1.shadow.camera.top=this.distance,this.directionalLight1.shadow.camera.bottom=-this.distance,this.directionalLight1.shadow.camera.left=-this.distance,this.directionalLight1.shadow.camera.right=this.distance,this.directionalLight1.shadow.camera.far=1e3,this.directionalLight1.shadow.mapSize.width=2048,this.directionalLight1.shadow.mapSize.height=2048,this.directionalLight1.shadow.camera.updateProjectionMatrix()}},{key:"updateOptions",value:function(i){var t=c.deepClone(this.options);this.options=c.mergeOptions(this.options,i),c.easyObjDiff(t.ambientLight,i.ambientLight)&&c.deepDiff(t.ambientLight,i.ambientLight)||this.setAmbientLight(),c.easyObjDiff(t.directionalLight,i.directionalLight)&&c.deepDiff(t.directionalLight,i.directionalLight)||this.setDirectionalLight()}},{key:"destroy",value:function(){this.lights=null}}])&&s(o.prototype,g),r&&s(o,r),Object.defineProperty(o,"prototype",{writable:!1}),d);function d(i,t){if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");this.viewer=i,this.options=t,this.distance=100,l=i.THREE,c=i.Utils,this.init()}return i.exports=g,i.exports});;
Cube("datav:/com/datav-model-viewer/1.2.4/Camera",[],function(e,t,i,a,n,r){function o(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var s,v,l=null,p=null,m=(s=c,(m=[{key:"init",value:function(){var e=this.options,t=e.fov,i=e.position,a=e.target,e=e.type;this.viewer.engine.createCamera({name:"main",type:e,fov:t,near:.01,far:1e4}),this.viewer.engine.createCameraController(),this.viewer.engine.camera.up.set(0,1,0),Object.defineProperty(this.viewer.engine.cameraControl.ctls,"hasMoved",{value:!1,writable:!1}),this.viewer.engine.cameraControl.minPolarAngle=0,this.viewer.engine.cameraControl.maxPolarAngle=1/0,this.viewer.engine.cameraControl.minDistance=.1,this.viewer.engine.cameraControl.maxDistance=1e5,this.setCameraPosition(i),this.setCameraTarget(a),this.viewer.engine.camera.userData.pos={px:100,py:60,pz:100}}},{key:"setCameraPosition",value:function(e){e=new l.Vector3(e.px,e.py,e.pz);this.viewer.engine.setCamera({position:e})}},{key:"setCameraTarget",value:function(e){e=new l.Vector3(e.tx,e.ty,e.tz);this.viewer.engine.setCameraTarget(e)}},{key:"setCamera",value:function(e,t){this.viewer.engine.setCamera({position:e}),this.viewer.engine.setCameraTarget(t)}},{key:"updateOptions",value:function(e){var t=p.deepClone(this.options);this.options=p.mergeOptions(this.options,e),p.easyDiff(t.type,e.type)||this.updateCamera(),p.easyDiff(t.fov,e.fov)||(this.viewer.engine.camera.fov=e.fov,this.viewer.engine.camera.updateProjectionMatrix()),p.easyObjDiff(t.position,e.position)||this.setCameraPosition(e.position),p.easyObjDiff(t.target,e.target)||this.setCameraTarget(e.target)}},{key:"destroy",value:function(){this.viewer.engine.cameraControl&&this.viewer.engine.cameraControl.remove()}}])&&o(s.prototype,m),v&&o(s,v),Object.defineProperty(s,"prototype",{writable:!1}),c);function c(e,t){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");this.viewer=e,this.options=t,l=e.THREE,p=e.Utils,this.init()}return e.exports=m,e.exports});;
Cube("datav:/com/datav-model-viewer/1.2.4/immerseHook",["datav:/npm/react/16.14.0","datav:/npm/react-dom/16.14.0"],function(t,e,n,o,a,r){function l(t){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var m=i(n("datav:/npm/react/16.14.0")),c=i(n("datav:/npm/react-dom/16.14.0"));function i(t){return t&&t.__esModule?t:{default:t}}function s(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var o,a,r=[],l=!0,i=!1;try{for(n=n.call(t);!(l=(o=n.next()).done)&&(r.push(o.value),!e||r.length!==e);l=!0);}catch(t){i=!0,a=t}finally{try{l||null==n.return||n.return()}finally{if(i)throw a}}return r}}(t,e)||function(t,e){if(t){if("string"==typeof t)return u(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(n="Object"===n&&t.constructor?t.constructor.name:n)||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function d(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function y(t,e){return(y=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function b(n){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=f(n),e=(t=o?(t=f(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),this);if(t&&("object"===l(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return v(e)}}function v(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function h(t,e,n){e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}function p(t){function o(t){var e=t.children,n=t.value,o=t.isSelected;return m.default.createElement("div",{className:"animation-option"},m.default.createElement(s.Option,t,e),m.default.createElement(l,{className:"animation-option-copy ".concat(o?"--selected":""),type:"copy",onClick:function(){var t=n,e=document.createElement("textarea");e.style.position="fixed",e.style.left=0,e.style.top=0,e.style.height="2em",e.style.width="2em",e.style.border="none",e.style.outline="none",e.style.boxShadow="none",e.style.userSelect="auto",e.style.background="transparent",e.value=t,document.body.appendChild(e),e.focus(),e.select();try{document.execCommand("copy")}catch(t){console.warn("Copy failed:",t)}e.remove(),i.success("动画名复制成功")}}))}var a=t.Select,e=t.Radio,r=t.Switch,l=t.Icon,i=t.Notify,u=e.Button,c=e.Group,s=a.components,t=m.default.PureComponent,e=p;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y(e,t);var n,f=b(p);function p(t){var e;if(!(this instanceof p))throw new TypeError("Cannot call a class as a function");h(v(e=f.call(this,t)),"setAutoplay",function(t){e.setState({autoPlay:t})}),h(v(e),"setDefaultAnimation",function(t){e.setState({defaultAnimation:t.value},function(){e.state.playing&&(e.stop(),e.play())})}),h(v(e),"togglePlay",function(t){e.setState({playing:t},function(){t?e.play():e.stop()})}),h(v(e),"play",function(){e.state.defaultAnimation&&e.props.play&&e.props.play(e.state.defaultAnimation)}),h(v(e),"stop",function(){e.props.stop&&e.props.stop()});var n=t.autoPlay,o=t.defaultAnimation,t=t.animationList,t=void 0===t?[]:t;return e.state={autoPlay:n,defaultAnimation:o,playing:!1},e.animationListOptions=t.map(function(t){return{label:t,value:t}}),e}return e=p,(t=[{key:"render",value:function(){var t=this.state,e=t.autoPlay,n=t.defaultAnimation,t=t.playing;return m.default.createElement("div",{className:"datav-fab-immerse-toolbox"},m.default.createElement("div",{className:"toolbox-control"},m.default.createElement("label",null,"自动播放"),m.default.createElement(r,{className:"toolbox-control-content",checked:e,onChange:this.setAutoplay})),m.default.createElement("div",{className:"toolbox-control"},m.default.createElement("label",null,"默认动画"),m.default.createElement(a,{outerClassName:"toolbox-control-content",height:"22px",isClearable:!1,isSearchable:!1,placeholder:"当前模型无动画",value:this.animationListOptions.find(function(t){return t.value===n}),onChange:this.setDefaultAnimation,options:this.animationListOptions,components:{Option:o}})),m.default.createElement("div",{className:"toolbox-control"},m.default.createElement("label",null,"动画预览"),m.default.createElement(c,{className:"toolbox-control-content",value:t,onChange:this.togglePlay},m.default.createElement(u,{className:"toolbox-control-preview",title:"播放",value:!0},m.default.createElement(l,{type:"play-new"})),m.default.createElement(u,{className:"toolbox-control-preview",title:"停止",value:!1},m.default.createElement(l,{type:"stop-new"})))))}}])&&d(e.prototype,t),n&&d(e,n),Object.defineProperty(e,"prototype",{writable:!1}),p}function g(t,e,n){var t=t.componentData,o=t.instance,t=t.config,a=e.quitCallback,r=e.toolboxContainer,e=p(n.UI),l=o.getAnimationList(),n=void 0!==t.options.animate&&void 0!==t.options.animate.modelAnimate?t.options.animate.modelAnimate:t.options.model.animation,t=n.autoPlay,n=n.defaultAnimation,i=null,u=(l&&l.length&&(i=n&&l.includes(n)?n:s(l,1)[0]),null);return c.default.render(m.default.createElement(e,{ref:function(t){u=t},autoPlay:t,defaultAnimation:i,animationList:l,play:o.play.bind(o),stop:o.stop.bind(o)}),r),function(){var t=o.getCameraInfo(),e={autoPlay:u.state.autoPlay,defaultAnimation:u.state.defaultAnimation,animationList:l};return c.default.unmountComponentAtNode(r),a&&a(),{config:{options:{camera:t,animate:{modelAnimate:e}}}}}}return n("datav:/com/datav-model-viewer/1.2.4/immerseHook/style.css",""),g.config={enterText:"位置及动画设置",quitText:"退出并保存设置",toolbox:{width:300,title:"动画设置"}},t.exports=g,t.exports});;
Cube("datav:/com/datav-model-viewer/1.2.4/Config/Default",[],function(e,a,o,t,i,r){return e.exports={camera:{fov:60,px:100,py:50,pz:100,tx:0,ty:0,tz:0},channel:"default",basic:{preserveDrawingBuffer:!0,isGammaInput:!1,isGammaOutput:!0,outputEncoding:"sRGBEncoding",isPhysicallyCorrect:!1,isShadowMap:!0,logarithmicDepthBuffer:!1,clearColor:"rgba(0,0,0,0.0)",toneMapping:{tmType:"ACESFilmicToneMapping",exposure:1},fogColor:"#fff",fogDensity:0,maxFPS:60}},e.exports});;
Cube("datav:/com/datav-model-viewer/1.2.4/Viewer",["datav:/npm/@ali/datav-vangogh/0.0.118","datav:/npm/eventemitter3/3.0.0"],function(e,t,s,i,n,o){function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(i){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=r(i),t=(e=n?(e=r(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(e&&("object"===a(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return u(t)}}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function r(e){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var p=null,d=null,f=null,g=s("datav:/npm/@ali/datav-vangogh/0.0.118"),v=s("datav:/npm/eventemitter3/3.0.0"),y=s("datav:/com/datav-model-viewer/1.2.4/Camera"),m=s("datav:/com/datav-model-viewer/1.2.4/Light"),b=s("datav:/com/datav-model-viewer/1.2.4/Projection"),w=s("datav:/com/datav-model-viewer/1.2.4/ModelViewer"),k=s("datav:/com/datav-model-viewer/1.2.4/Graphic/datav-engine-postprocessing"),M=function(){var e=r,t=v;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t);var i,a=c(r);function r(e,t,i,n){var o;if(this instanceof r)return(o=a.call(this)).options=Object.assign({background:{type:"color",color:"RGBA(255, 0, 0, 1.0)",hdrUrl:"//sh-conf.oss-cn-shanghai.aliyuncs.com/datav-citypro/envmap/sky_citypro_001.hdr"}},t),o.container=e,o.mode=i.env,o.subComs=n,o.envMap={properties:1,value:null,angle:0},d=o.Utils=g.Utils,p=o.THREE=g.THREE,f=new p.RGBELoader,o.VG=g,o.three=g.THREE,o.Layer=s("datav:/com/datav-model-viewer/1.2.4/Layer"),o.engine=new g.Engine,o.proj=new b(g),o.initEngine(),o.engine.setCameraLayer("scene1"),o.modelViewer=new w,o.modelViewer.addTo(u(o)),o.initPostProcessing(),o;throw new TypeError("Cannot call a class as a function")}return e=r,(t=[{key:"initEngine",value:function(){this.initRenderer(),this.initScene(),this.initCamera(),this.initLights(),this.engine.setAdvancedRender(!1),this.engine.startRendering(),this.updateGlobalStyle(),this.updateFog()}},{key:"initRenderer",value:function(){this.engine.createRenderer({alpha:!0,antialias:!0,preserveDrawingBuffer:this.options.basic.preserveDrawingBuffer},this.container)}},{key:"initScene",value:function(){this.engine.createScene("main")}},{key:"initCamera",value:function(){this.camera=new y(this,this.options.camera)}},{key:"initLights",value:function(){this.light=new m(this,this.options.lights),this.engine.scene.add(this.light.lights),this.setEnvironmentLight()}},{key:"initInteractive",value:function(){this.interactive=this.engine.createInteractive(),this.interactiveGPU=this.engine.createInteractiveGPU()}},{key:"initPostProcessing",value:function(){this.postprocessing=new k(null,this.options),this.postprocessing.addTo(this)}},{key:"resize",value:function(e,t){this.engine&&this.engine.resize(e,t)}},{key:"mouseUpEvent",value:function(){}},{key:"getCameraInfo",value:function(){var e=this.engine.cameraControl,t=e.camera,e=e.target,t=[t.position.x,t.position.y,t.position.z],e=[e.x,e.y,e.z],t=this.proj.inverseWorldCoords(t),e=this.proj.inverseWorldCoords(e);return{position:{px:t[0],py:t[1],pz:t[2]},target:{tx:e[0],ty:e[1],tz:e[2]}}}},{key:"getHDRMap",value:function(e){var o=this;return new Promise(function(n){f.load(e,function(e){var t=new p.PMREMGenerator(o.engine.renderer),i=(t.compileEquirectangularShader(),t.fromEquirectangular(e).texture);t.dispose(),e.dispose(),n(i)})})}},{key:"setEnvironmentLight",value:function(){var t=this,e=this.options.lights.environmentLight,i=e.show,n=e.hdrUrl,o=e.hdrOrientation,a=e.hdrIntensity;i?""!==n?this.getHDRMap(n).then(function(e){t.envMap.properties=a,t.envMap.value=e,t.envMap.angle=o,t.updateModelViewEnvMap(),t.updateSkybox()}):console.log("当前未提供环境贴图"):(this.envMap.value=null,this.updateModelViewEnvMap(),this.updateSkybox())}},{key:"updateSkybox",value:function(){var t,i,n=this,e=this.options.lights.background,o=e.type,a=e.show,e=e.color,e=d.Chroma(e).gl();this.skyboxColor=(new p.Color).fromArray(e),this.skyboxConfig={enabled:a&&"black"!==o,envMap:this.envMap.value,angle:this.envMap.angle,color:this.skyboxColor,opacity:e[3],type:o},null===this.envMap.value?(e=(a=this.options.lights.environmentLight).hdrUrl,t=a.hdrOrientation,i=a.hdrIntensity,""!==e&&this.getHDRMap(e).then(function(e){n.envMap.properties=i,n.envMap.value=e,n.envMap.angle=t,n.skyboxConfig.envMap=e,n.skyboxConfig.angle=t,n.postprocessing.layer.setSkybox(n.skyboxConfig),n.engine.setEffectComposer({render:{clear:!n.skyboxConfig.enabled}})})):(this.postprocessing.layer.setSkybox(this.skyboxConfig),this.engine.setEffectComposer({render:{clear:!this.skyboxConfig.enabled}}))}},{key:"updateSkyboxEnvMap",value:function(e){this.skyboxConfig.envMap=e.value,this.skyboxConfig.angle=e.angle,this.postprocessing.layer.setSkybox(this.skyboxConfig),this.engine.setEffectComposer({render:{clear:!this.skyboxConfig.enabled}})}},{key:"updateModelViewEnvMap",value:function(){this.modelViewer&&this.modelViewer.setEnvMap(this.envMap)}},{key:"updateGlobalStyle",value:function(){var e=this.options.basic,t=e.clearColor,i=e.isShadowMap,e=e.toneMapping,n=e.tmType,e=e.exposure;this.engine.setClearColor(t),this.engine.setToneMapping(p[n],e),this.engine.setShadow(p.PCFSoftShadowMap,i,!0),this.engine.sceneMgr.updateAllMaterialsBySceneName("main",!0)}},{key:"setData",value:function(e){this.modelViewer&&this.modelViewer.setData(e)}},{key:"updateFog",value:function(){var e=this.options.basic,t=e.fogColor,e=e.fogDensity;this.engine.setFog(t,e)}},{key:"updateAnimateOptions",value:function(e){this.modelViewer.updateAnimateOptions(e)}},{key:"updateOptions",value:function(e){var t=d.deepClone(this.options);this.options=d.mergeOptions(this.options,e||{}),d.easyObjDiff(t.lights.background,e.lights.background)||this.updateSkybox(),d.easyObjDiff(t.lights.environmentLight,e.lights.environmentLight)||this.setEnvironmentLight(),d.easyObjDiff(t.lights.ambientLight,e.lights.ambientLight)&&d.easyObjDiff(t.lights.directionalLight,e.lights.directionalLight)&&d.deepDiff(t.lights.ambientLight,e.lights.ambientLight)&&d.deepDiff(t.lights.directionalLight,e.lights.directionalLight)||this.light&&this.light.updateOptions(e.lights),d.easyObjDiff(t.lights.groundShadow,e.lights.groundShadow)||this.modelViewer.updateGround(e.lights.groundShadow),d.easyObjDiff(t.model,e.model)||this.modelViewer.updateOptions(e.model),d.easyObjDiff(t.animate,e.animate)||this.modelViewer.updateAnimateOptions(e.animate),d.easyObjDiff(t.camera,e.camera)||this.camera.updateOptions(e.camera),d.easyObjDiff(t.postprocessing,e.postprocessing)||this.postprocessing.updateOptions(e)}},{key:"colorify",value:function(){var e=this.options.style.isWireFrame;this.modelViewer&&this.modelViewer.colorifyGlobal(e)}},{key:"enhanceMaterial",value:function(){this.modelViewer&&this.modelViewer.enhanceMaterial(this.options.enableEnhanceMaterial)}},{key:"getAnimationList",value:function(){if(this.modelViewer)return this.modelViewer.animationNames}},{key:"play",value:function(e){this.modelViewer&&this.modelViewer.setAnimation({autoPlay:!0,defaultAnimation:e})}},{key:"stop",value:function(){this.modelViewer&&this.modelViewer.setAnimation({autoPlay:!1})}},{key:"destroy",value:function(){this.engine&&this.engine.off("animationFrame"),this.engine.camera&&this.engine.camera.remove(),this.modelViewer&&this.modelViewer.destroy(),this.light=null}}])&&l(e.prototype,t),i&&l(e,i),Object.defineProperty(e,"prototype",{writable:!1}),r}();return e.exports=M,e.exports});;
Cube("datav:/com/datav-model-viewer/1.2.4",["datav:/npm/eventemitter3/3.0.0","datav:/npm/safely-merge/1.0.1"],function(e,t,o,r,n,i){function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(o){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=s(o),t=(e=r?(e=s(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(e&&("object"===a(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return e.url||(e.url=t.model.url),v(d,e)}var p=o("datav:/npm/eventemitter3/3.0.0"),v=o("datav:/npm/safely-merge/1.0.1"),y=o("datav:/com/datav-model-viewer/1.2.4/Viewer"),h=o("datav:/com/datav-model-viewer/1.2.4/Config/Default"),o=o("datav:/com/datav-model-viewer/1.2.4/immerseHook"),d={name:"demo1",url:"https://workspace2427069.oss-cn-beijing.aliyuncs.com/%E6%A8%A1%E5%9E%8B%E4%B8%8A%E4%BC%A0%E5%88%B0%E8%BF%99%E9%87%8C/%E6%B8%AF%E5%8F%A3_%E8%B4%A7%E8%BD%AE_%E4%BB%A5%E8%B7%AF_2020.8.28/%E8%B4%A7%E8%BD%AE.glb",position:{x:0,y:0,z:0},rotation:{x:0,y:0,z:0},scale:{x:1,y:1,z:1},animationNames:[],lod:"L3",groups:[]},m=function(){var e=s,t=p;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t);var o,a=l(s);function s(e,t){var o,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{env:"editor"},n=this,i=s;if(n instanceof i)return(o=a.call(this)).apis=t.apis,o.container="string"==typeof e?document.querySelector(e):e,o.options=v(h,t.options),o.data={},o.url="",o.status=r,o.viewer=new y(o.container,o.options,r),o.viewer.modelViewer.layer.on("loaded",function(){o.emit("model-loaded")}),o;throw new TypeError("Cannot call a class as a function")}return e=s,(t=[{key:"resize",value:function(e,t){this.viewer&&this.viewer.resize(e,t)}},{key:"setViewerData",value:function(e){this.url=e.url,this.viewer&&this.viewer.setData(e)}},{key:"setData",value:function(e){this.data=e,this.setViewerData(f(this.data,this.options))}},{key:"updateAnimateOptions",value:function(e){this.viewer&&this.viewer.updateAnimateOptions(e)}},{key:"updateOptions",value:function(e){this.options=v(this.options,e.options||{}),this.viewer&&this.viewer.updateOptions(this.options);e=f(this.data,this.options);this.url!==e.url&&this.setViewerData(e)}},{key:"getCameraInfo",value:function(){if(this.viewer)return this.viewer.getCameraInfo()}},{key:"getAnimationList",value:function(){if(this.viewer)return this.viewer.getAnimationList()}},{key:"play",value:function(e){this.viewer&&this.viewer.play(e)}},{key:"stop",value:function(){this.viewer&&this.viewer.stop()}},{key:"getSnapshot",value:function(){return this.container.querySelector("canvas").toDataURL()}},{key:"getBlob",value:function(e){return this.container.querySelector("canvas").toBlob(e)}},{key:"destroy",value:function(){this.viewer&&this.viewer.destroy&&this.viewer.destroy(),this.container&&(this.container.innerHTML="")}}])&&u(e.prototype,t),o&&u(e,o),Object.defineProperty(e,"prototype",{writable:!1}),s}();return m.editOnImmerse=o,e.exports=m,e.exports});