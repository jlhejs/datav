// env=undefined => env=publish 
Cube("datav:/com/map3d-sphere-markers/0.3.5",["datav:/npm/eventemitter3/3.0.0","datav:/npm/safely-merge/1.0.1","datav:/npm/dmap/0.2.9/layer/addons/markers"],function(a,b,c){function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&("object"===typeof b||"function"===typeof b)?b:a}function f(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var g=function(){function a(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=c("datav:/npm/eventemitter3/3.0.0"),i=c("datav:/npm/safely-merge/1.0.1"),j=c("datav:/npm/dmap/0.2.9/layer/addons/markers"),k=function(a){function b(a,c){d(this,b);var f=e(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return f.options=i({isAble:!0,markerN:30,background:"rgba(120,0,50,0.99)",color:"#0ff",ratio:1.2,marker:{scaleSize:5.5e6,style:{type:"text",fontSize:20,opacity:function(a){var b=Math.max(Math.min(3-1.5*a,1),0);return b}}},quality:5,REarth:1.06,offsetLeft:30,visibility:!0,texture:function(a){return a.content||""},lat:function(a){return a.latlngs.lat||0},lng:function(a){return a.latlngs.lng||0},width:function(a){return a.content.width||900},height:function(a){return a.content.height||300},id:function(a){return a.id}},c),f}return f(b,a),g(b,[{key:"addTo",value:function(a){a._map&&(a=a._map),this._map=a;var b=this.getLayerOptions(this.options),c=this.layer=new j(b);c.addTo(this._map)}},{key:"getLayerOptions",value:function(){var a=this.options,b=a.marker.scaleSize;return 1e3<b&&(b/=1e5),a.marker.scaleSize=1e5*b,a}},{key:"updateOptions",value:function(a){a&&(this.options=i(this.options,a)),this.layer.updateOptions(this.getLayerOptions())}},{key:"data",value:function(a){a&&(this._data=a)}},{key:"render",value:function(a){return a?void(this.layer.render(a),this.options.isAble?this.show():this.hide()):console.log("\u5730\u56FE\u7EC4\u4EF6Map3dMarkers\u672A\u6536\u5230\u6570\u636E...")}},{key:"show",value:function(){this.options.isAble=!0,this.layer.updateOptions(this.getLayerOptions())}},{key:"hide",value:function(){this.options.isAble=!1,this.layer.updateOptions(this.getLayerOptions())}},{key:"remove",value:function(){this.layer&&this.layer.remove()}}]),b}(h);return a.exports=k,a.exports});