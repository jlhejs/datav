// env=undefined => env=publish 
Cube("datav:/com/@echarts/ml-echarts-pictorialBar-velocity/2.0.11",["datav:/com/maliang-echarts-utils/0.0.18","datav:/npm/bcore/0.0.18/event","datav:/npm/jquery/2.1.4","datav:/npm/lodash/4.6.1","datav:/npm/echarts/3.5.4"],function(a,b,c){var d=c("datav:/npm/bcore/0.0.18/event"),e=c("datav:/npm/jquery/2.1.4"),f=c("datav:/npm/lodash/4.6.1"),g=c("datav:/npm/echarts/3.5.4"),h=c("datav:/com/maliang-echarts-utils/0.0.18");return a.exports=d.extend(function(a,b){this.config={series:[{type:"pictorialBar"},{type:"pictorialBar"}],color:["#e54035"]},this.container=e(a),this.apis=b.apis,this._data=null,this.chart=null,this.init(b)},{init:function(a){var b=this;a=this.mergeConfig(f.defaultsDeep(a,{xAxis:{data:[],type:"category"}})),this.chart=g.init(this.container[0]),this.chart.setOption(h.config2echartsOptions(a)),this.updateStyle(),this.chart.off(),this.chart.on("click",function(a){var c=b._data.filter(function(b){return b.y===a.data.value&&b.x===a.name});b.emit("click",c.length&&c[0])})},highlight:function(a){a=f.merge(a||{},{type:"highlight"}),this.chart.dispatchAction(a)},downplay:function(a){a=f.merge(a||{},{type:"downplay"}),this.chart.dispatchAction(a)},showTip:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};a=f.merge(a,{type:"showTip"}),this.chart.dispatchAction(a)},hideTip:function(){this.chart.dispatchAction({type:"hideTip"})},render:function(a){a=this.data(a);var b=h.config2echartsOptions(this.mergeConfig(this.data2echartsPictorialBar(a,this.config)));this.chart.setOption(b),this.updateStyle()},data2echartsPictorialBar:function(a,b){var c={series:[]},d="category"===(b.yAxis._type||b.yAxis.type)?"yAxis":"xAxis";return c[d]={data:f.uniq(f.map(f.clone(a),"x"))},f.map(f.groupBy(a,"s"),function(a){c.series.push({data:f.map(a,function(a){return a.value=a.y,delete a.s,a})})}),c},resize:function(a,b){this.chart.resize({width:a,height:b})},setColors:function(){},data:function(a){return a&&(this._data=a),this._data},mergeConfig:function(a){return a?(a.series&&(this.config.series=a.series),this.config=f.defaultsDeep(a||{},this.config),this.config.tooltip.showContent=this.config.tooltip.show,this.config):this.config},updateStyle:function(){this.config},updateOptions:function(a){a=this.mergeConfig(a),this.chart.setOption(h.config2echartsOptions(a))},clear:function(){this.chart&&this.chart.clear&&this.chart.clear()},destroy:function(){this.chart&&this.chart.dispose&&this.chart.dispose()}}),a.exports});