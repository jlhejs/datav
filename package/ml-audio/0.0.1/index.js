// env=undefined => env=publish 
Cube("datav:/com/ml-audio/0.0.1/utils",[],function(r,o,t,a,n,u){return r.exports={randomWord:function(r,o,t){var a="",n=o,u=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];r&&(n=Math.round(Math.random()*(t-o))+o);for(var d=0;d<n;d++)a+=u[Math.round(Math.random()*(u.length-1))];return a}},r.exports});;
Cube("datav:/com/ml-audio/0.0.1",["datav:/npm/bcore/0.0.18/event","datav:/npm/jquery/2.1.4","datav:/npm/lodash/4.6.1"],function(t,i,o,n,e,a){var s=o("datav:/npm/bcore/0.0.18/event"),h=o("datav:/npm/jquery/2.1.4"),d=o("datav:/npm/lodash/4.6.1"),u=o("datav:/com/ml-audio/0.0.1/utils").randomWord;return t.exports=s.extend(function(t,i){this.config={theme:{}},this.container=h(t),this.containSize={boxWidth:this.container&&this.container.width(),boxHeight:this.container&&this.container.height()},this.apis=i.apis,this._data=null,this.chart=null,this.audio=null,this.id=null,this.init(i)},{init:function(t){this.mergeConfig(t),this.updateLayout();t="aliAudio-"+u(!1,5);this.id=t,this.updateStyle()},render:function(t,i){t=this.data(t);var o=this.mergeConfig(i),n=o.source,e=o.playSet,a=e.autoPlay,s=e.isLoop,h=e.playbackRate,u=e.currentTime,i=o.volumeSet,e=i.isMuted,i=i.volume,o=o.download,n=d.get(t,[0,"source"])||n;this.container.html("<audio\n                          id="+this.id+'\n                          style="width: '+this.containSize.boxWidth+"px;height: "+this.containSize.boxHeight+'px;"\n                          src='+n+"\n                          controls\n                        ></audio>"),this.audio=document.getElementById(this.id),this.audio.loop=s,this.audio.muted=e,this.audio.autoplay=a,this.audio.preload="auto",this.audio.volume=i/100,this.audio.playbackRate=h,this.audio.controlsList=o?"":"nodownload",this.audio.currentTime=u,this.updateStyle()},play:function(){this.audio.play()},pause:function(){this.audio.pause()},end:function(){this.audio.currentTime=0,this.audio.pause()},resize:function(t,i){this.containSize={boxWidth:t,boxHeight:i},this.render(this._data,this.config)},setColors:function(){},data:function(t){return t&&(this._data=t),this._data},mergeConfig:function(t){return t&&(this.config.theme=d.defaultsDeep(t.theme||{},this.config.theme),this.setColors(),this.config=d.defaultsDeep(t||{},this.config)),this.config},updateLayout:function(){},updateStyle:function(){var t=this.config;this.container.css({"font-size":t.size+"px",color:t.color||"#fff"})},destroy:function(){this.audio=null,this._data=null,this.container.empty()}}),t.exports});