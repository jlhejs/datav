// env=undefined => env=publish 
Cube("datav:/com/datavmap-canvas2d-scatter-mix/2.0.24/src/libs/geojson-bbox",[],function(a){function b(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)}function c(a){var d;return"Point"==a.type?d=[a.coordinates]:"LineString"==a.type||"MultiPoint"==a.type?d=a.coordinates:"Polygon"==a.type||"MultiLineString"==a.type?d=a.coordinates.reduce(function(a,c){return a.push.apply(a,b(c)),a},[]):"MultiPolygon"==a.type?d=a.coordinates.reduce(function(a,c){return a.push.apply(a,b(c.reduce(function(a,c){return a.push.apply(a,b(c)),a},[]))),a},[]):"Feature"==a.type?d=c(a.geometry):"GeometryCollection"==a.type?d=a.geometries.reduce(function(a,d){return a.push.apply(a,b(c(d))),a},[]):"FeatureCollection"==a.type&&(d=a.features.reduce(function(a,d){return a.push.apply(a,b(c(d))),a},[])),d}return a.exports=function(a){var b;if(a.hasOwnProperty("type"))return b=c(a),b.reduce(function(a,b){return[Math.min(b[0],a[0]),Math.min(b[1],a[1]),Math.max(b[0],a[2]),Math.max(b[1],a[3])]},[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY])},a.exports});;
Cube("datav:/com/datavmap-canvas2d-scatter-mix/2.0.24/src/mixScatterLayer",["datav:/npm/eventemitter3/3.0.0","datav:/npm/safely-merge/1.0.1","datav:/npm/chroma-js/1.3.3","datav:/npm/rbush/3.0.0"],function(a,b,c){function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&("object"===typeof b||"function"===typeof b)?b:a}function f(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var g=function(){function a(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=c("datav:/npm/eventemitter3/3.0.0"),i=c("datav:/npm/safely-merge/1.0.1"),j=c("datav:/npm/chroma-js/1.3.3"),k=c("datav:/npm/rbush/3.0.0"),l=c("datav:/com/datavmap-canvas2d-scatter-mix/2.0.24/src/libs/geojson-bbox"),m=function(a){function b(a,c){d(this,b);var f=e(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return f.options=i({zoomRange:[0,18],minZoom:0,maxZoom:22,scatterStyle:{scatterType:"default",radius:5,radius2:{radiusRange:[5,10],defaultValue:5},fillColor:"rgba(212,20,159,0.8)",fill:{minFillColor:"RGBA(197, 214, 126, 1.00)",maxFillColor:"RGBA(71, 107, 38, 1.00)",fillColor:"rgba(212,20,159,0.8)"},lineStyle:{strokeColor:"#fff",weight:1},iconUrl:"https://img.alicdn.com/tfs/TB1u94apQP2gK0jSZPxXXacQpXa-200-200.png",iconSize:{width:32,height:26},position:"bottom",labelOffset:{x:0,y:0}},series:[],seriesOptions:{},labelStyle:{show:!1,fieldName:"name",textStyle:{fontFamily:"Microsoft Yahei",fontSize:12,color:"#FFFFFF",fontWeight:"normal",shadowColor:"rgba(0, 0, 0, 0)"},position:"top"},popupStyle:{isBorderShadow:!0,show:!0,infoField:!1,eventType:"click",styleType:"parent",textStyle:{fontFamily:"Microsoft Yahei",fontSize:12,color:"#FFFFFF",fontWeight:"normal"},lineHeight:1.4,borderRadius:5,margin:{top:10,bottom:10,left:10,right:10},backgroundColor:"rgba(22,138,214,0.73)",closeBtn:{color:"#fff",size:16,top:0,right:0}},interactive:{isHover:{show:!0,hoverScale:1.5}}},c),f.options.minZoom=c.zoomRange[0],f.options.maxZoom=c.zoomRange[1],f.options.visibility=!0,f.map=a,f.init(),f}return f(b,a),g(b,[{key:"init",value:function(){var a=this.padding=this.map.canvasLayer&&this.map.canvasLayer.options&&this.map.canvasLayer.options.padding?this.map.canvasLayer.options.padding:0.1,b=this.map.getSize();this.offset=b.multiplyBy(-a).round();var c=this.map.L,d=this.randomKeyframesCode=this.getRandomCode(10),e=this.mixScatterPane="mixScatter_"+d+"Pane";this.pane=this.map.createPane(e);var f=this.map.getZoom();this.pane.style.display=f<this.options.minZoom||f>this.options.maxZoom?"none":"block",this.renderer=c.canvas({pane:e}),this.renderer.addTo(this.map),this.renderer._container.style.zIndex=-1;var g=this.featureGroup=c.layerGroup([],{pane:e});g.addTo(this.map);var h=this.labelLayer=c.layerGroup([],{pane:e});h.addTo(this.map);var i=this._featureGroup=c.layerGroup([],{pane:e});i.addTo(this.map),this.data=null,this.dataRanges={},this.geojson=null,this.rbush=new k,this.rbush.dirty=0,this.rbush.total=0,this.rbushInBounds=new k,this.featuresInBounds=[],this.popups={},this.initSeriesOptions()}},{key:"initSeriesOptions",value:function(){var a=this,b=Object.assign({},a.options),c=b.series,d=b.seriesOptions,e=void 0,f=void 0;if(c.length)for(e=0;e<c.length;e++)f=c[e].type,f&&(d[f]=Object.assign({},c[e]))}},{key:"setZIndex",value:function(a){this.pane&&(this.pane.style.zIndex=400+a)}},{key:"onRender",value:function(a){a&&"needUpdata"===a&&this.getFeaturesInBounds()}},{key:"render",value:function(a){var b=this;this.data=[],a&&0<a.length&&(this.data=a),this.group={},this.data.forEach(function(a){b.group[a.type]||(b.group[a.type]=[]),b.group[a.type].push(a)}),Object.keys(this).forEach(function(a){-1!==a.indexOf("-range")&&(b[a]=null)}),Object.keys(this.group).forEach(function(a){b.dataRanges[a+"-range"]=b.getRange(b.group[a])}),this.dataRanges["all-range"]=this.getRange(this.data);var c=this.map.L.datavUtils.arr2geojson(this.data),d=this.geojson=JSON.parse(JSON.stringify(c));this.options.visibility&&(this.drawGeoJson(d),this.initRBush(),this.getFeaturesInBounds())}},{key:"initRBush",value:function(){var a=this.featureList;this.rbush.dirty=a.length,this.rbush.total=a.length,this.rbush.clear(),this.rbush.load(a)}},{key:"getFeaturesInBounds",value:function(){var a=this.map.getBounds(),b=a.pad(this.padding),c={minX:b.getWest(),minY:b.getSouth(),maxX:b.getEast(),maxY:b.getNorth()},d=this.queryFeaturesInBounds(this.rbush,c);this.rbushInBounds.clear(),this.rbushInBounds.load(d),this.featuresInBounds=d}},{key:"queryFeaturesInBounds",value:function(a,b){var c=this;c._featureGroup.clearLayers();var d=Object.assign({},this.options),e=a.search(b),f=void 0,g=void 0,h=void 0,i=void 0,j=void 0,k=void 0,l=void 0,m=void 0,n=void 0,o=void 0,p=void 0,q=void 0;for(f=0;g=e.length,f<g;f++){if(h=e[f].feature,properties=h.properties,i=h.geometry.coordinates,l=properties.type,l&&d.mappingSeries&&d.mappingSeries[l]?m=d.mappingSeries[l]:l&&d.seriesOptions&&d.seriesOptions[l]?m=d.seriesOptions[l]:(m=d.scatterStyle,"default"===m.scatterType),h.properties.drawStyle=Object.assign({},m),"default"===m.scatterType)h.properties.radius=m.radius,h.properties.fillColor=m.fillColor;else if("dataBind"===m.scatterType){var r=this.calculateStyle(properties.type,properties.value,m);h.properties.radius=r.radius,h.properties.drawStyle.fillColor=r.fillColor}var s={x:0,y:0};if("iconConfig"===m.scatterType)switch(n=m.iconSize.width,o=m.iconSize.height,m.position){case"bottom":s.x=0,s.y=-o/2;break;case"center":s.x=0,s.y=0;break;default:}else n=2*properties.radius||5,o=2*properties.radius||5;j=this.map.latLngToContainerPoint([i[1],i[0]]),k=[],j&&(k=[j.x-this.offset.x+s.x,j.y-this.offset.y+s.y]),h.geometry._coordinates=k,p=this.map.L.point(j.x+s.x-n/2,j.y+s.y+o/2),q=this.map.L.point(j.x+s.x+n/2,j.y+s.y-o/2);var t=this.map.containerPointToLatLng(p),u=this.map.containerPointToLatLng(q);e[f].minX=t.lng,e[f].minY=t.lat,e[f].maxX=u.lng,e[f].maxY=u.lat}return e}},{key:"drawGeoJson",value:function(a){var b=this,c=this,d=c.map.L;this.featureList=[],this.geojsonLayer&&this.geojsonLayer.clearLayers(),this.labelLayer&&this.labelLayer.clearLayers(),this.geojsonLayer=this.map.L.geoJSON(a,{useSimpleStyle:!1,style:function(a){var b=a.properties.drawStyle;return{renderer:c.renderer,radius:b.radius,stroke:!0,color:b.strokeColor,weight:b.weight,opacity:1,fill:!0,fillColor:b.fillColor,fillOpacity:1}},pointToLayer:function(a,e){var f=a.properties,g=f.type,h=c.options.scatterStyle,i=void 0;if(f.iconUrl&&!f.type)i={drawType:"Marker",iconUrl:f.iconUrl,iconSize:h.iconSize,position:h.position,labelOffset:h.labelOffset};else switch(g&&c.options.seriesOptions[g]&&(h=c.options.seriesOptions[g]),h.scatterType){case"default":i={drawType:"CircleMarker",radius:h.radius,fillColor:h.fillColor,strokeColor:h.lineStyle.strokeColor,weight:h.lineStyle.weight};break;case"dataBind":var j=b.calculateStyle(g,f.value,h);i={drawType:"CircleMarker",radius:j.radius,fillColor:j.fillColor,strokeColor:h.lineStyle.strokeColor,weight:h.lineStyle.weight};break;case"iconConfig":i={drawType:"Marker",iconUrl:f.iconUrl||h.iconUrl,iconSize:h.iconSize,position:h.position,labelOffset:h.labelOffset};break;default:}if(f.drawStyle=i,"CircleMarker"===i.drawType)return d.circleMarker(e,{renderer:c.renderer,radius:i.radius,stroke:!0,color:i.strokeColor,weight:i.weight,opacity:1,fill:!0,fillColor:i.fillColor});if("Marker"===i.drawType){var k=i.iconSize,l="bottom"===i.position?[k.width/2,k.height]:[k.width/2,k.height/2],m="center"===i.position?"leaflet-marker-icon-hover":"leaflet-marker-icon-bottom-hover",n=i.iconUrl||"data:image/png;base64,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",o=f.rotationAngle||0,p=i.opacity||1,q="<div style=\"transform: rotateZ("+o+"deg); opacity: "+p+"\">\n            <img class="+m+" style=\"position: relative; width: "+k.width+"px; height: "+k.height+"px;\" src="+n+">\n          </div>",r=d.divIcon({className:"",iconSize:null,iconAnchor:l,html:q});return d.marker(e,{icon:r,pane:b.mixScatterPane,zIndexOffset:0,riseOffset:0})}return d.circleMarker(e,{renderer:c.renderer,radius:i.radius,stroke:!0,color:i.strokeColor,weight:i.weight,opacity:0.6,fill:!0,fillColor:i.fillColor})},onEachFeature:function(a,e){var f=l(a);b.featureList.push({minX:f[0],minY:f[1],maxX:f[2],maxY:f[3],feature:a,layer:e});var g=c.options.labelStyle;if(g.show){var h=e.feature.properties.drawStyle,i=a.properties[g.fieldName]||"";if(a.properties[g.fieldName]&&0!==a.properties[g.fieldName].length){var j=a.properties[g.fieldName].length||1,k=g.textStyle,m=k.fontSize,n=m*j,o=m,p=0,q=0;if(e instanceof d.CircleMarker){var r=h.radius;switch(g.position){case"left":p=-n-r,q=3*-o/4;break;case"center":p=-n/2,q=3*-o/4;break;case"right":p=r,q=3*-o/4;break;case"top":p=-n/2,q=-o-r-8;break;case"bottom":p=-n/2,q=r;break;default:}}else{var s=h.iconSize,t=h.labelOffset;switch(h.position){case"center":p+=0,q+=0;break;case"bottom":p+=0,q+=-s.height/2;}switch(g.position){case"left":p+=-n-s.width/2,q+=3*-o/4;break;case"center":p+=-n/2,q+=3*-o/4;break;case"right":p+=s.width/2,q+=3*-o/4;break;case"top":p+=-n/2,q+=-o-s.height/2-8;break;case"bottom":p+=-n/2,q+=s.height/2;break;default:}p+=t.x,q+=-t.y}var u="<div style=\"pointer-events: none;\n          width: "+n+"px;\n          position: relative;\n          text-align: center;\n          color: "+k.color+"; \n          font-size:"+m+"px;\n          font-family:"+k.fontFamily+";\n          text-shadow: 0px 2px 1px "+k.shadowColor+";\">"+i+"</div>",v=d.divIcon({iconSize:null,className:"",iconAnchor:[-p,-q],html:u}),w=d.marker(e._latlng,{pane:b.mixScatterPane,clickable:!1,keyboard:!1,interactive:!1,icon:v});w.feature=a,w.addTo(b.labelLayer)}}}}).addTo(this.featureGroup)}},{key:"onClick",value:function(a){this.options.popupStyle.show&&"click"===this.options.popupStyle.eventType&&this.openPopup(a)}},{key:"onMouseOver",value:function(a){this.options.popupStyle.show&&"mouseover"===this.options.popupStyle.eventType&&this.openPopup(a)}},{key:"openPopup",value:function(a){var b=a.feature,c=b.properties,d=b.geometry.coordinates,e={lat:d[1],lng:d[0]},f=void 0,g=void 0,h=void 0;"custom"===this.options.popupStyle.styleType?(g=this.options.popupStyle,c.type&&this.popups[c.type]&&(g=i(g,this.popups[c.type].popupStyle))):g=this.map.popupStyle;var j=g.margin,k=j.top+"px "+j.right+"px "+j.bottom+"px "+j.left+"px";if(c.type&&this.popups[c.type]){var l=this.popups[c.type].clientWidth,m=this.popups[c.type].clientHeight;f=this.popups[c.type].popup,h=this.popups[c.type].container,h.style.display="block",h.style.width=l+"px",h.style.height=m+"px",h.style.margin=k}else{if(g.infoField&&void 0===c.info)return;var n="";if(void 0!=c.info)n=""+c.info;else if(void 0!=c.name&&void 0!=c.value)n="\u540D\u79F0\uFF1A"+c.name+"<br/>\u6570\u503C\uFF1A"+c.value;else if(void 0!=c.name)n="\u540D\u79F0\uFF1A"+c.name;else if(void 0!=c.value)n="\u6570\u503C\uFF1A"+c.value;else return;var o=g.textStyle,p=g.lineHeight;h="<div style=\"\n        margin: "+k+";\n        padding: 0px;\n        font-family: "+o.fontFamily+";\n        font-size: "+o.fontSize+"px;\n        color: "+o.color+"; \n        font-weight: "+o.fontWeight+"; \n        line-height: "+p+";\n        white-space: nowrap;\n        display: inline-table;\n        text-align: left;\n      \"> "+n+"</div>";var q=[0,0],r=c.type;a instanceof L.CircleMarker?q=[0,-drawStyle.radius]:a instanceof L.Marker&&(q="bottom"===drawStyle.position?[0,-drawStyle.iconSize.height]:[0,-drawStyle.iconSize.height/2]),f=this.map.L.popup({maxWidth:1200,maxHeight:1200,isCustomPopup:!0,offset:q})}f.setLatLng(e),f.setContent(h),f.openOn(this.map),this.map.L.customPopup.updatePopupStyle(f,g),this.map._popup.minZoom=this.options.minZoom,this.map._popup.maxZoom=this.options.maxZoom}},{key:"bindGroup",value:function(a,b,c){var d=+b.clientWidth,e=+b.clientHeight;b.style.transform="",b.style.position="",b.style.display="none";var f=this.map.L.popup({maxWidth:1200,maxHeight:1200,isCustomPopup:!0});this.popups[a]={popup:f,container:b,clientWidth:d,clientHeight:e,popupStyle:c}}},{key:"calculateStyle",value:function(a,b,c){var d=this.dataRanges[a+"-range"];return{radius:void 0!=b&&d?this.map.L.datavUtils.linearScale(d,[c.radius2.radiusRange[0],c.radius2.radiusRange[1]])(b):c.radius2.defaultValue,fillColor:void 0!=b&&d?j.scale([c.fill.minFillColor,c.fill.maxFillColor]).domain(d)(b).css():c.fill.fillColor}}},{key:"getRange",value:function(a){if(!a.length)return null;var b=a.filter(function(a){return void 0!=a.value&&!isNaN(+a.value)&&""!==a.value});if(2>b.length)return null;var c=b.reduce(function(c,a){return+c.value<=+a.value?c:a},{}),d=b.reduce(function(c,a){return+c.value>=+a.value?c:a},{});return[+c.value,+d.value]}},{key:"containsLatLng",value:function(a){var b=void 0,c=void 0,d={minX:a.lng,minY:a.lat,maxX:a.lng,maxY:a.lat},e=this.rbushInBounds.search(d);if(0===e.length)return{flag:!1,feature:null};var f=[];b=e[e.length-1].feature,c=e[e.length-1].layer;var g=e[e.length-1].minX,h=e[e.length-1].minY,i=e[e.length-1].maxX,j=e[e.length-1].maxY;return f=[[h,g],[j,i]],{flag:!0,feature:b,layer:c,featureBounds:f}}},{key:"onResize",value:function(){}},{key:"updateOptions",value:function(a){this.options=i(this.options,a),this.options.minZoom=a.zoomRange[0],this.options.maxZoom=a.zoomRange[1];var b=this.map.getZoom();this.pane.style.display=b<this.options.minZoom||b>this.options.maxZoom?"none":"block",this.initSeriesOptions(),this.geojson&&this.drawGeoJson(this.geojson),this.getFeaturesInBounds()}},{key:"show",value:function(){this.options.visibility=!0,this.data&&this.data.length&&this.render(this.data)}},{key:"hide",value:function(){this.options.visibility=!1,this.featureGroup&&this.featureGroup.clearLayers(),this.labelLayer&&this.labelLayer.clearLayers()}},{key:"destroy",value:function(){this.options=null,this.geojson=null,this.data=null,this.dataRanges=null,this.group=null,this.ctx=null,this.container=null,delete this.options,this.geojson,this.data,this.dataRanges,this.group,this.id}},{key:"getRandomCode",value:function(a){if(0<a){for(var b,c=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],d="",e=0;e<a;e++)b=parseInt(61*Math.random()),d+=c[b];return d}return!1}}]),b}(h);return a.exports=m,a.exports});;
Cube("datav:/com/datavmap-canvas2d-scatter-mix/2.0.24",["datav:/npm/eventemitter3/3.0.0","datav:/npm/safely-merge/1.0.1"],function(a,b,c){function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&("object"===typeof b||"function"===typeof b)?b:a}function f(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var g=function(){function a(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=c("datav:/npm/eventemitter3/3.0.0"),i=c("datav:/npm/safely-merge/1.0.1"),j=c("datav:/com/datavmap-canvas2d-scatter-mix/2.0.24/src/mixScatterLayer"),k=function(a){function b(a,c){d(this,b);var f=e(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return f.options=i({renderer:"topinfo",interactive:{isHover:{show:!0,hoverScale:1.5}}},c),f.options.minZoom=c.zoomRange[0],f.options.maxZoom=c.zoomRange[1],f.options.visibility=!0,f}return f(b,a),g(b,[{key:"addTo",value:function(a,b){return this.options.id=b,this.layer=new j(a,this.options),this}},{key:"setZIndex",value:function(a){this.layer&&this.layer.setZIndex&&this.layer.setZIndex(a)}},{key:"onRender",value:function(){this.layer&&this.layer.onRender&&this.layer.onRender()}},{key:"onResize",value:function(a,b){this.layer&&this.layer.onResize&&this.layer.onResize(a,b)}},{key:"render",value:function(a){this.layer&&this.layer.render&&this.layer.render(a)}},{key:"updateOptions",value:function(a){this.options=i(this.options,a),this.options.minZoom=a.zoomRange[0],this.options.maxZoom=a.zoomRange[1],this.layer&&this.layer.updateOptions&&this.layer.updateOptions(a)}},{key:"onClick",value:function(a){var b=a.feature;this.emit("click",b.properties),this.layer&&this.layer.onClick&&this.layer.onClick(a)}},{key:"onMouseOver",value:function(a){var b=a.feature;b&&b.properties&&this.emit("mouseover",b.properties),this.layer&&this.layer.onMouseOver&&this.layer.onMouseOver(a)}},{key:"bindGroup",value:function(a){var b=a.type||"",c=a.container||"<div></div>",d=a.popupStyle||{};this.layer&&this.layer.bindGroup&&this.layer.bindGroup(b,c,d)}},{key:"show",value:function(){this.options.visibility=!0,this.layer&&this.layer.show&&this.layer.show()}},{key:"hide",value:function(){this.options.visibility=!1,this.layer&&this.layer.hide&&this.layer.hide()}},{key:"containsLatLng",value:function(a){var b=this.options,c=b.interactive,d=b.popupStyle;return(c.isHover.show||d.show)&&this.layer.containsLatLng(a)}},{key:"destroy",value:function(){this.layer&&this.layer.destroy&&this.layer.destroy(),this.layer=null,delete this.layer}}]),b}(h);return a.exports=k,a.exports});