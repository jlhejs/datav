// env=undefined => env=publish 
Cube("datav:/com/ml-treemap/0.0.2/transform",["datav:/npm/lodash/4.17.11","datav:/npm/datav-g2plot-util/0.2.4"],function(a,b,c){var d=Object.assign||function(a){for(var b,c=1;c<arguments.length;c++)for(var d in b=arguments[c],b)Object.prototype.hasOwnProperty.call(b,d)&&(a[d]=b[d]);return a},e=c("datav:/npm/lodash/4.17.11"),f=e.get,g=e.cloneDeep,h=e.isArray,i=c("datav:/npm/datav-g2plot-util/0.2.4"),j=i.transformGUI2Props,k=i.getMarginOptions,l=i.getLegendOptions,m=i.getNumericalLabelOptions,n=i.getTooltipOptions,o=i.getAnimationOptions,p=i.getLineDash,q=d({},k(),l(),m(),n(),o(),function(){return{"options.others.tooltip.offset":"tooltip.offset","options.chart.maxLevel":"maxLevel","options.chart.label.show":"label.visible","options.chart.label.textStyle.fontSize":"label.style.fontSize","options.chart.label.textStyle.color":"label.style.fill","options.chart.label.textStyle.fontWeight":"label.style.fontWeight","options.chart.label.textStyle.fontFamily":"label.style.fontFamily"}}()),r=function(a){var b=a.seriesConfig,c=a.propsConfig,d=a.dataSeries,e=a.data;if(b){var f=b.isSeriesMapping,g=b.series,h=g.map(function(a){return a.color});c.color=h,c.label.formatter=function(a){return a},c.__name=e.type&&"nested"===e.type?"brand":"name",c.data=e}},s=function(a){var b=a.guiConfig,c=a.propsConfig,d=b.options.rectStyle.series,e=void 0===d?[]:d,f={stroke:"rgba(0, 0, 0, 0.65)",lineWidth:1,opacity:1};c.rectStyle=function(a){var b=e.map(function(b,c){if(a===c+1)return b.mapping});return b[a-1]||f}};return a.exports={transOptionKey:function(a,b,c){var e=g(b)||{};j({guiConfig:a,guiOptPropMap:q,res:e}),s({guiConfig:a,propsConfig:e});var h=f(a,"options.series");return r({seriesConfig:h,propsConfig:e,dataSeries:[],data:c}),e.colorField=e.__name,e.tooltip&&e.tooltip.domStyles&&(e.tooltip.domStyles["g2-tooltip"].boxShadow="none"),d({},e)},defaultProps:{pixelRatio:3,title:{visible:!0},description:{visible:!0},padding:"auto",maxLevel:2,forceFit:!0,legend:{position:"bottom-center"}}},a.exports});;
Cube("datav:/com/ml-treemap/0.0.2",["datav:/npm/lodash/4.17.11","datav:/npm/bcore/0.0.22/event","datav:/npm/datav-g2plot-adaptor/1.2.2/g2plot.js","datav:/npm/datav-g2plot-util/0.2.4"],function(a,b,c){var d=Object.assign||function(a){for(var b,c=1;c<arguments.length;c++)for(var d in b=arguments[c],b)Object.prototype.hasOwnProperty.call(b,d)&&(a[d]=b[d]);return a},e=c("datav:/npm/lodash/4.17.11"),f=c("datav:/npm/bcore/0.0.22/event"),g=c("datav:/npm/datav-g2plot-adaptor/1.2.2/g2plot.js"),h=c("datav:/npm/datav-g2plot-util/0.2.4"),i=h.getTransform,j=h.convertData,k=c("datav:/com/ml-treemap/0.0.2/transform"),l=k.transOptionKey,m=k.defaultProps,n=e.get,o=e.isUndefined,p=e.clone,q=e.cloneDeep;return a.exports=f.extend(function(a,b){this.container=a,this.chart=null,this.guiConfig={options:{chart:{legend:{marker:{shape:"circle",show:!0,size:4},textStyle:{color:"rgb(144, 160, 174)",fontFamily:"Microsoft Yahei",fontSize:12,fontWeight:"normal"}}}},others:{tooltip:{textStyleList:{color:"#fff",fontFamily:"Microsoft Yahei",fontSize:14,fontWeight:"normal"},textStyleValue:{color:"#fff",fontFamily:"Microsoft Yahei",fontSize:14,fontWeight:"normal"}}}},this.propsConfig=m,this.chartConfig={},this.init(b)},{init:function(a){this.mergeConfig(a)},initChart:function(a){var b=a.chartConfig;this.chart=new g.Treemap(this.container,b),this.chart.render();var c=i(this.container);Object.values(c).length&&this.chart&&this.chart.canvas&&(this.chart.canvas.set("containerTransform",c),this.chart.canvas.set("supportCSSTransform",!0))},render:function(a,b){if(this.guiConfig=this.mergeConfig(b),a=this.data(a),!a)return console.warn("--------- \u540C\u5B66\u4F60\u597D, \u8BF7\u786E\u4FDD\"\u77E9\u5F62\u6811\u56FE\"\u7EC4\u4EF6, data\u6570\u636E\u4E0D\u80FD\u4E3A\u7A7A ---------"),void console.warn("--------- Hello classmates, please make sure that the data can not be empty ---------");this.propsConfig=l(this.guiConfig,this.propsConfig,q(a)),this._bindEvent(this.propsConfig);var c=d({data:a},this.propsConfig);this.chartConfig=c,this.chart?(this.chart&&this.chart.destroy(),this.initChart({chartConfig:c})):this.initChart({chartConfig:c}),this.updateStyle()},updateStyle:function(){},setColors:function(){},data:function(a){if(a){if(this._data=p(a),1===this._data.length){var b=0;return this._data[0].children&&this._data[0].children.forEach(function(a){return b+=a.value}),this._data[0].value=b,this._data[0]}if(1<this._data.length)return this._data=this.processData(this._data),this._data}else return this._data?this._data[0]||this._data:void 0},processData:function(a){var b=0;return a.forEach(function(a){return b+=a.value}),{name:"root",value:b,children:a,type:"nested"}},mergeConfig:function(a){if(!a)return this.guiConfig;var b=e.cloneDeep(e.get(a,"options.series.series"));return this.guiConfig=e.defaultsDeep(a||{},this.guiConfig),b&&e.set(this.guiConfig,"options.series.series",b),this.setColors(),this.guiConfig},getThemableConfig:function(a){if(!a)return{};var b=a.textColor,c=a.palette,d=a.bgColor,e=a.axisColor,f=(n(this.guiConfig,"options.series.series")||[]).map(function(a,b){return{color:c[b]||c[b%c.length]}});return{options:{chart:{numericalLabel:{textStyle:{color:b}}},series:{series:f},axis:{radiusAxis:{axisLabel:{color:b},axisLine:{stroke:e}}},others:{tooltip:{textStyle:{color:b},bgBox:{backgroundColor:d}}}}}},resize:function(a,b){this.chart&&this.chart.updateConfig({width:a,height:b}),this.chart&&this.chart.render()},destroy:function(){this.chart&&this.chart.destroy(),this.chart=null,this._data=null},_bindEvent:function(a){var b=this;a.events={onRectClick:function(a){var c=e.pick(n(a,"target.cfg.origin.data"),["name","value","children"]);o(c)||b.emit("click",c)},onLegendClick:function(c){var d=n(a,"data"),f=e.pick(n(c,"target.cfg"),["id"]),g=f.id,h=void 0===g?"":g,i=h.split("-")[3],j=n(d,"children"),k=j.find(function(a){return a.name===i||a.brank===i}),l=e.pick(k,["name","value","children","brank"]);o(c)||b.emit("onLegendClick",l)}}}}),a.exports});