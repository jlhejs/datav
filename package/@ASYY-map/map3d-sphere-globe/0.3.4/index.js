// env=undefined => env=publish 
Cube("datav:/com/map3d-sphere-globe/0.3.4",["datav:/npm/eventemitter3/3.0.0","datav:/npm/safely-merge/1.0.1","datav:/npm/dmap/0.2.9"],function(a,b,c){function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&("object"===typeof b||"function"===typeof b)?b:a}function f(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var g=function(){function a(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=c("datav:/npm/eventemitter3/3.0.0"),i=c("datav:/npm/safely-merge/1.0.1"),j=c("datav:/npm/dmap/0.2.9"),k=j.Globe,l=function(a){function b(a,c){d(this,b);var f=e(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return f.options=i({globe:{textureType:"\u5730\u5F62",color:"#222",emissive:"#203864",specular:"#0a121b",normalScale:2.4},atmosphere:{color:"#0ff",ratio:1.05,maxOpacity:1,intensity:2,isAtmosphere:!1},visibility:!0},c),f}return f(b,a),g(b,[{key:"addTo",value:function(a){a._map&&(a=a._map),this._map=a;var b=this.layer=new k(this.getLayerOptions());b.addTo(this._map)}},{key:"getLayerOptions",value:function(){var a=this.options,b=a.globe,c=a.atmosphere,d=a.defaultSpecularMapUrl,e=a.defaultNormalMapUrl,f=a.defaultBumpMapUrl,g=void 0;switch(b.textureType){case"\u5730\u5F62":g=b.optionsDEM;break;case"\u536B\u661F":g=b.optionsDay;break;case"\u7C92\u5B50":g=b.optionsParticle;break;case"\u884C\u653F\u533A":g=b.optionsZone;break;case"\u81EA\u5B9A\u4E49":g=b.optionsCustom;}return{globe:{textureType:b.textureType,ratio:g.ratio,mapUrl:g.mapUrl,specularMapUrl:d,normalMapUrl:e,bumpMapUrl:f,material:{color:g.color,normalScale:{x:g.normalScale,y:g.normalScale},emissive:g.emissive,specular:g.specular}},atmosphere:{color:c.color,ratio:c.ratio,maxOpacity:c.maxOpacity,intensity:c.intensity,isAtmosphere:c.isAtmosphere}}}},{key:"updateOptions",value:function(a){a&&(this.options=Utils.deepMerge(this.options,a)),this.layer.updateOptions(this.getLayerOptions())}},{key:"render",value:function(){}},{key:"show",value:function(){if(this.visibility=!0,this.layer){var a=Object.assign({},this.getLayerOptions());a.globe.material.opacity=1,this.layer.updateOptions(a)}}},{key:"hide",value:function(){if(this.visibility=!1,this.layer){var a=Object.assign({},this.getLayerOptions());a.globe.material.opacity=0,this.layer.updateOptions(a)}}},{key:"remove",value:function(){this.layer&&this.layer.remove()}}]),b}(h);return a.exports=l,a.exports});