// env=undefined => env=publish 
Cube("datav:/com/@datav-city-pro-v2-cim/datav-engine-terrain-raster/2.0.0/MapLayer",[],function(e,t,r,i,o,s){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(r){var i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=a(r),t=(e=i?(e=a(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return y(t)}}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}return e.exports=function(e){var t=e.Utils,i=e.VG,n=e.viewer,e=i.Layer,r=s;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&c(r,e);var a,o=l(s);function s(e){var r;if(!(this instanceof s))throw new TypeError("Cannot call a class as a function");return f(y(r=o.call(this)),"isInitial",!0),f(y(r),"pick",function(){n.addEventListener(i.CLICK,r._pick,!0)}),f(y(r),"_pick",function(e){var t;r.options.options.status.enableInteractive&&((t=n.picker.raycaster.pick(n.surface.surfaceLayer.selectedTiles)[0])?r.emit("leftClick",{clickPosition:{x:e.originalEvent.offsetX,y:e.originalEvent.offsetY},geo:[t.coordinates.longitude,t.coordinates.latitude,t.coordinates.altitude]}):r.emit("leftClick",{clickPosition:{x:e.originalEvent.offsetX,y:e.originalEvent.offsetY}}))}),r.options=e,r.visible=!0,r.type="TerrainRaster",r}return r=s,(e=[{key:"enableInteractive",get:function(){return!!this.layer&&this.layer.enableInteractive}},{key:"checkEventValid",value:function(e){return e&&("click"===e.type||"dblclick"===e.type)&&0==+e.button}},{key:"initLayer",value:function(){var e=this._getMapLayerConfig();if((e.isCesiumLike||e.url)&&(!e.isCesiumLike||e.token&&e.assetId))return this.layer=n.getLayer("rasterTerrainLayer"),this.layer?this.layer.updateOptions(e.isCesiumLike?{cesiumLike:{assetId:e.assetId,token:e.token},water:e.water}:{baseUrl:e.url,water:e.water},"quantized",!1):(this.layer=new i.RasterTerrainLayer({options:e.isCesiumLike?{cesiumLike:{assetId:e.assetId,token:e.token},water:e.water}:{baseUrl:e.url,water:e.water},type:"quantized",allowPicking:!1}),n.addLayer("rasterTerrainLayer",this.layer)),this.isInitial&&(this.pick(),this.isInitial=!1),this.layer}},{key:"_getMapLayerConfig",value:function(){var e=this.options.options;return{projType:e.data.projType,url:e.data.url,enablePickFeatures:e.status.enableInteractive,isCesiumLike:"cesiumLike"===e.data.isCesiumLike,assetId:e.data.assetId,token:e.data.token,type:e.data.type,water:{normalMap:e.data.normalMap}}}},{key:"setData",value:function(){}},{key:"updateOptions",value:function(e){this.options.options.status.enableInteractive===e.options.status.enableInteractive?(this.remove(),this.options=t.mergeOptions(this.options,e||{}),this.layer||this.initLayer()):this.options=t.mergeOptions(this.options,e||{})}},{key:"updateSceneId",value:function(){this.group.layers.enableAll()}},{key:"remove",value:function(){n.getLayer("rasterTerrainLayer")&&n.getLayer("rasterTerrainLayer").updateOptions({},"grid"),n.removeEventListener(i.CLICK,this._pick),this.layer=null,this.isInitial=!0}},{key:"show",value:function(){this.initLayer()}},{key:"hide",value:function(){n.getLayer("rasterTerrainLayer")&&n.getLayer("rasterTerrainLayer").updateOptions({},"grid")}},{key:"destroy",value:function(){this.layer&&(this.remove(),this.layer=null)}}])&&u(r.prototype,e),a&&u(r,a),Object.defineProperty(r,"prototype",{writable:!1}),s},e.exports});;
Cube("datav:/com/@datav-city-pro-v2-cim/datav-engine-terrain-raster/2.0.0",["datav:/npm/eventemitter3/3.0.0"],function(e,r,t,c,f,p){function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(r){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=a(r),t=(e=n?(e=a(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return l(t)}}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var y=t("datav:/npm/eventemitter3/3.0.0"),s=t("datav:/com/@datav-city-pro-v2-cim/datav-engine-terrain-raster/2.0.0/MapLayer"),t=function(){var e=c,t=y;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&i(e,t);var r,a=u(c);function c(e,t){var r,n,o,i;if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");return r=a.call(this),n=l(r),i=!0,(o="isInitial")in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i,r.options=t,r.visible=!0,r.comId="",r.type="TerrainRaster",r}return e=c,(t=[{key:"addTo",value:function(e,t){return this.cityproCore=e,this.comId=t,this.initLayer()}},{key:"enableInteractive",get:function(){return!!this.layer&&this.layer.enableInteractive}},{key:"checkEventValid",value:function(e){return e&&("click"===e.type||"dblclick"===e.type)&&0==+e.button}},{key:"initLayer",value:function(){var e=s(this.cityproCore);this.layer=new e(this.options),this.cityproCore.viewer.addLayer(this.comId,this.layer),this.layer.initLayer(),this.visible?this.layer.show():this.layer.hide()}},{key:"setData",value:function(){}},{key:"updateOptions",value:function(e){this.layer&&this.layer.updateOptions(e)}},{key:"remove",value:function(){this.layer&&this.layer.remove()}},{key:"show",value:function(){this.visible=!0,this.layer&&this.layer.show()}},{key:"hide",value:function(){this.visible=!1,this.layer&&this.layer.hide()}},{key:"destroy",value:function(){this.layer&&(this.layer.destroy(),this.layer=null)}}])&&n(e.prototype,t),r&&n(e,r),Object.defineProperty(e,"prototype",{writable:!1}),c}();return e.exports=t,e.exports});