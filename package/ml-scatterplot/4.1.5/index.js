// env=undefined => env=publish 
Cube("datav:/com/ml-scatterplot/4.1.5/transform",["datav:/npm/lodash/4.17.11","datav:/npm/datav-g2plot-util/0.2.4"],function(a,b,c){var d=Object.assign||function(a){for(var b,c=1;c<arguments.length;c++)for(var d in b=arguments[c],b)Object.prototype.hasOwnProperty.call(b,d)&&(a[d]=b[d]);return a},e=c("datav:/npm/lodash/4.17.11"),f=e.get,g=e.cloneDeep,h=c("datav:/npm/datav-g2plot-util/0.2.4"),i=h.transformGUI2Props,j=h.getMarginOptions,k=h.getLegendOptions,l=h.getNumericalLabelOptions,m=h.getXAxisOptions,n=h.getYAxisOptions,o=h.getTooltipOptions,p=h.getAnimationOptions,q=h.getInteractionOptions,r=h.getAxisExtentOptions,s=h.getCustomS,t=h.setBasicSeriesColor,u=h.hasS,v=h.getLineDash,w=h.getXAxisTypeOptions,x=d({},j(),k(),l(),q(),m(),n(),o(),p(),function(){return{"options.chart.pointStyle.size":"pointSize","options.chart.pointStyle.opacity":"pointStyle.fillOpacity","options.chart.pointStyle.strokeColor":"pointStyle.stroke","options.chart.pointStyle.strokeWidth":"pointStyle.lineWidth","options.chart.pointStyle.strokeDash":{key:"pointStyle.lineDash",handler:function(a){return v(a)}}}}(),{"options.others.tooltip.axisPointer.type":"tooltip.crosshairs.type","options.chart.numericalLabel.position":"label.position"},r("yaxis","yAxis","y"),w()),y="rgba(0,0,0,0)",z=function(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}({title:{visible:!1},description:{visible:!1},xField:"x",yField:"y",colorField:"s",groupField:"s",padding:"auto",forceFit:!0,yAxis:{label:{formatter:function(a){return(""+a).replace(/\d{1,3}(?=(\d{3})+$)/g,function(a){return a+","})},style:{stroke:y}},grid:{style:{lineDash:[4,4]}},tickLine:{visible:!1},title:{visible:!1,text:"",style:{stroke:y}}},xAxis:{grid:{style:{lineDash:[4,4]}},tickLine:{visible:!1},title:{visible:!1,text:"",style:{stroke:y}},label:{style:{stroke:y}}},legend:{position:"bottom-center"},label:{position:"middle",adjustColor:!1,adjustPosition:!0,style:{stroke:y}},pointStyle:{},connectedArea:{triggerOn:!1,lineStyle:{opacity:1},areaStyle:{opacity:1}},tooltip:{crosshairs:{}}},"tooltip",{}),A=function(a){var b=a.seriesConfig,c=a.propsConfig,d=a.dataSeries,f=a.data;if(b){var g=b.series,h=b.seriesMapping;if(h&&u(f)){var j={},k=[],i={};g.forEach(function(a){var b=a.mapping,c=b.fieldValue,d=b.serieName;e.isNull(c)||e.isUndefined(c)||""===c?k.push(a.color):(j[d||c]=a.color,i[c]=d)});var l=g.map(function(a){return e.get(a,"mapping.fieldValue")});f=f.sort(function(c,a){var b=l.indexOf(c.s),d=l.indexOf(a.s);return(-1===b?Infinity:b)-(-1===d?Infinity:d)}),f.forEach(function(a){a.__s=i[a.s]||a.s});var m=s(f);m.forEach(function(a,b){j[a]||(k.length?j[a]=k.shift():j[a]=g[b%g.length].color)});var n=Object.values(j)[0];c.color=Object.keys(j).length?function(a){return j[a]||n}:k,c.colorField="__s"}else{var o=g.map(function(a){return a.color});t({dataSeries:d,allColors:o,propsConfig:c}),c.colorField="s"}c.data=f}};return a.exports={transOptionKey:function(a,b,c){var d=g(b)||{},h=e.cloneDeep(x);"linear"===f(a,"options.axis.xaxis.type")&&delete h["options.axis.xaxis.label.timeFormat"],i({guiConfig:a,guiOptPropMap:h,res:d,data:c}),f(a,"options.others.tooltip.axisPointer.show")||delete d.tooltip.crosshairs;var j=[].concat(c).filter(function(a){return a}).map(function(a){return a.s});d.tooltip&&d.tooltip.domStyles&&(d.tooltip.domStyles["g2-tooltip"].boxShadow="none");var k=f(a,"options.series");A({seriesConfig:k,propsConfig:d,dataSeries:j,data:c}),f(a,"options.others.tooltip.axisPointer.show")||delete d.tooltip.crosshairs,d.xAxis.type="dateTime"===d.xAxis.type?"time":d.xAxis.type;var l=e.set(d,"xAxis.type","cat");return e.set(l,"legend.marker.style.lineWidth",0),e.get(a,"options.axis.yaxis.extent.show")||(l=e.omit(l,["yAxis.min","yAxis.max"])),e.get(a,"options.axis.xaxis.label.customTickCount.show")||e.set(l,"xAxis.tickCount",4),l},defaultProps:z},a.exports});;
Cube("datav:/com/ml-scatterplot/4.1.5",["datav:/npm/lodash/4.17.11","datav:/npm/bcore/0.0.22/event","datav:/npm/datav-g2plot-adaptor/1.1.6/g2plot.js","datav:/npm/datav-g2plot-util/0.2.4"],function(a,b,c){var d=Object.assign||function(a){for(var b,c=1;c<arguments.length;c++)for(var d in b=arguments[c],b)Object.prototype.hasOwnProperty.call(b,d)&&(a[d]=b[d]);return a},e=c("datav:/npm/lodash/4.17.11"),f=c("datav:/npm/bcore/0.0.22/event"),g=c("datav:/npm/datav-g2plot-adaptor/1.1.6/g2plot.js"),h=c("datav:/npm/datav-g2plot-util/0.2.4"),i=h.getTransform,j=h.convertData,k=c("datav:/com/ml-scatterplot/4.1.5/transform"),l=k.transOptionKey,m=k.defaultProps,n=e.get,o=e.isUndefined,p=e.clone,q=e.cloneDeep,r=e.toNumber;return a.exports=f.extend(function(a,b){this.container=a,this.chart=null,this.guiConfig={options:{chart:{legend:{marker:{shape:"circle",show:!0,size:4},textStyle:{color:"rgb(144, 160, 174)",fontFamily:"Microsoft Yahei",fontSize:12,fontWeight:"normal"}}},others:{tooltip:{textStyleList:{color:"#fff",fontFamily:"Microsoft Yahei",fontSize:14,fontWeight:"normal"},textStyleValue:{color:"#fff",fontFamily:"Microsoft Yahei",fontSize:14,fontWeight:"normal"}}}}},this.propsConfig=m,this.init(b)},{init:function(a){this.mergeConfig(a)},initChart:function(a){var b=a.chartConfig;this.chart=new g.Scatter(this.container,b),this.chart.render();var c=i(this.container);Object.values(c).length&&this.chart&&this.chart.canvas&&(this.chart.canvas.set("containerTransform",c),this.chart.canvas.set("supportCSSTransform",!0))},render:function(a,b){var c=this;return this.guiConfig=this.mergeConfig(b),a=this.data(a),a&&a.length?void j(e.cloneDeep(a),this.guiConfig,!1,{x:"x",y:"y"}).then(function(a){c.propsConfig=l(c.guiConfig,c.propsConfig,q(a)),c._bindEvent(c.propsConfig);var b=d({data:a},c.propsConfig);c.chart?(c.chart.updateConfig(b),c.chart.render()):c.initChart({chartConfig:b})}):(console.warn("--------- \u540C\u5B66\u4F60\u597D, \u8BF7\u786E\u4FDD\"\u57FA\u672C\u6563\u70B9\u56FE\"\u7EC4\u4EF6, data\u6570\u636E\u7C7B\u578B\u4E3A\u6570\u7EC4 && \u6570\u636E\u5927\u4E8E\u7B49\u4E8E1\u6761 ---------"),void console.warn("--------- Hello, classmates, please ensure that the \"Basic Scatter Chart\" component, the data type is array && data is greater than or equal to 1 ---------"))},updateStyle:function(){},setColors:function(){},data:function(a){return a&&(this._data=p(a)),this._data},mergeConfig:function(a){if(!a)return this.guiConfig;var b=e.cloneDeep(e.get(a,"options.series.series"));return this.guiConfig=e.defaultsDeep(a||{},this.guiConfig),b&&e.set(this.guiConfig,"options.series.series",b),this.setColors(),this.guiConfig},getThemableConfig:function(a){if(!a)return{};var b=a.textColor,c=a.axisColor,f=a.palette,d=a.bgColor,g=(e.get(this.guiConfig,"options.series.series")||[]).map(function(a,b){return{color:f[b]||f[b%f.length]}}),h={label:{textarea:{color:b}},title:{textarea:{color:b}},axisLine:{color:c},tickLine:{stroke:c},grid:{color:c}};return{options:{chart:{numericalLabel:{textStyle:{color:b}}},axis:{xaxis:h,yaxis:h},series:{series:g},others:{tooltip:{textStyle:{color:b},bgBox:{backgroundColor:d}}}}}},resize:function(a,b){this.chart&&this.chart.updateConfig({width:a,height:b}),this.chart&&this.chart.render()},destroy:function(){this.chart&&this.chart.destroy(),this.chart=null,this._data=null},_bindEvent:function(a){var b=this;a.events={onPointClick:function(a){var c=n(a,"target.cfg.origin.data");c&&b.emit("click",c)},onLegendClick:function(a){var c=e.get(a,"target.cfg.delegateObject.item.value");c&&b.emit("onLegendClick",{value:c})}}},highlight:function(a){var b=a.data,c=a.style;if(this.chart&&b){var d=function(a){return Object.keys(b).every(function(c){return a[c]===b[c]})};this.chart.setActive(d,c)}},cancelHighlight:function(){this.chart&&this.chart.setActive({},{})}}),a.exports});