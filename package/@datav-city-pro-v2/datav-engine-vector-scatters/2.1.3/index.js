// env=undefined => env=publish 
Cube("datav:/com/@datav-city-pro-v2/datav-engine-vector-scatters/2.1.3/shader/frag.glsl",[],function(n,e,t,i,a,r){return n.exports="#define GLSLIFY 1\n #define STANDARD\n\n#ifdef PHYSICAL\n\t#define REFLECTIVITY\n\t#define CLEARCOAT\n\t// #define TRANSPARENCY\n#endif\n\n// uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\n// uniform float opacity;\n\n#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform vec3 attenuationColor;\n\tuniform float attenuationDistance;\n#endif\n\n// #ifdef TRANSPARENCY\n// \tuniform float transparency;\n// #endif\n#ifdef REFLECTIVITY\n\tuniform float reflectivity;\n#endif\n#ifdef CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheen;\n#endif\n\nvarying vec3 vViewPosition;\n\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <transmission_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\n// flat varying float picked;\n// uniform vec3 activeColor;\n\n#if defined (colorPerFeature)\n  varying vec4 v_color;\n\n#else\n  uniform vec4 u_color;\n#endif\n\nvoid main() {\n\t#include <clipping_planes_fragment>\n\n\t// vec4 diffuseColor = vec4( diffuse, opacity );\n\n\tvec4 diffuseColor = vec4(0.0, 0.0, 0.0, 0.0);\n\n\t#if defined (colorPerFeature)\n\t\tdiffuseColor = v_color;\n\t#else\n\t\tdiffuseColor = u_color;\n\t#endif\n\n\t// 后期渲染模块会统一做gamma校正，\n    // 为了图元渲染颜色和配置项设置颜色保持一致，需要做以下处理以抵消\n\tdiffuseColor = vec4(pow(diffuseColor.r, 2.2), pow(diffuseColor.g, 2.2),pow(diffuseColor.b, 2.2), diffuseColor.a);\n\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\n\t// vec3 totalEmissiveRadiance = emissive;\n    // 避免背光面过暗 by GZ\n\tvec3 totalEmissiveRadiance = diffuseColor.xyz * 0.1;\n\n\t#ifdef USE_TRANSMISSION\n\t\tfloat totalTransmission = transmission;\n\t\tfloat thicknessFactor = thickness;\n\t#endif\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\n\tvec3 rawDiffuseColor = diffuseColor.rgb;\n\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t// #ifdef TRANSPARENCY\n\t// \tdiffuseColor.a *= saturate( 1. - transparency + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) );\n\t// #endif\n\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n\n}\n",n.exports});;
Cube("datav:/com/@datav-city-pro-v2/datav-engine-vector-scatters/2.1.3/shader/vert.glsl",[],function(n,e,r,i,t,a){return n.exports="#define GLSLIFY 1\n#define STANDARD\nvarying vec3 vViewPosition;\n\n#ifndef FLAT_SHADED\n  varying vec3 vNormal;\n\n  #ifdef USE_TANGENT\n    varying vec3 vTangent;\n    varying vec3 vBitangent;\n  #endif\n\n#endif\n\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n\n// uniform int pickedInstanceId;\n\n// flat varying float picked;\n\n#include <clipping_planes_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <skinning_pars_vertex>\n\n#if defined (colorPerFeature)\n  attribute vec4 instanceColor;\n  varying vec4 v_color;\n#endif\n\nvoid main() {\n\n  #if defined (colorPerFeature)\n    v_color = instanceColor;\n  #endif\n\n  // if(pickedInstanceId == gl_InstanceID){\n  //   picked = 1.0;\n  // }else{\n  //   picked = 0.0;\n  // }\n\n  #include <uv_vertex>\n\n#include <beginnormal_vertex>\n#include <color_vertex>\n#include <morphnormal_vertex>\n#include <skinbase_vertex>\n#include <skinnormal_vertex>\n#include <uv2_vertex>\n\n// #include <defaultnormal_vertex>\n\n  vec3 transformedNormal = objectNormal;\n\n  transformedNormal = normalMatrix * transformedNormal;\n\n#ifdef FLIP_SIDED\n\n  transformedNormal = -transformedNormal;\n\n#endif\n\n#ifdef USE_TANGENT\n\n  vec3 transformedTangent = (modelViewMatrix * vec4(objectTangent, 0.0)).xyz;\n\n#ifdef FLIP_SIDED\n\n  transformedTangent = -transformedTangent;\n\n#endif\n\n#endif\n#ifndef FLAT_SHADED\n  vNormal = normalize(transformedNormal);\n#ifdef USE_TANGENT\n  vTangent = normalize(transformedTangent);\n  vBitangent = normalize(cross(vNormal, vTangent) * tangent.w);\n#endif\n#endif\n\n#include <begin_vertex>\n#include <displacementmap_vertex>\n#include <morphtarget_vertex>\n#include <skinning_vertex>\n#include <project_vertex>\n\n#include <clipping_planes_vertex>\n#include <logdepthbuf_vertex>\n\nvViewPosition = -mvPosition.xyz;\n\n#include <worldpos_vertex>\n\n#include <shadowmap_vertex>\n\n#include <fog_vertex>\n\n}",n.exports});;
Cube("datav:/com/@datav-city-pro-v2/datav-engine-vector-scatters/2.1.3/vector-scatters",[],function(e,t,r,a,i,n){function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t,r){return(f=h()?Reflect.construct:function(e,t,r){var a=[null];a.push.apply(a,t);t=new(Function.bind.apply(e,a));return r&&b(t,r.prototype),t}).apply(null,arguments)}function d(e){return function(e){if(Array.isArray(e))return l(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||s(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function D(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var a,i,n=[],o=!0,s=!1;try{for(r=r.call(e);!(o=(a=r.next()).done)&&(n.push(a.value),!t||n.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==r.return||r.return()}finally{if(s)throw i}}return n}}(e,t)||s(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){if(e){if("string"==typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(r="Object"===r&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(e,t):void 0}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function c(t,e){var r,a=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),a.push.apply(a,r)),a}function m(a){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?c(Object(i),!0).forEach(function(e){var t,r;t=a,r=i[e=e],e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(i)):c(Object(i)).forEach(function(e){Object.defineProperty(a,e,Object.getOwnPropertyDescriptor(i,e))})}return a}function y(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function v(){return(v="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var a=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=w(e)););return e}(e,t);if(a)return a=Object.getOwnPropertyDescriptor(a,t),a.get?a.get.call(arguments.length<3?e:r):a.value}).apply(this,arguments)}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(r){var a=h();return function(){var e,t=w(r),t=(e=a?(e=w(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}function h(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var O=r("datav:/com/@datav-city-pro-v2/datav-engine-vector-scatters/2.1.3/shader/vert.glsl"),M=r("datav:/com/@datav-city-pro-v2/datav-engine-vector-scatters/2.1.3/shader/frag.glsl");return e.exports=function(e){var I=e.THREE,c=e.Utils,r=e.VG,a=e.FormatTransformer,S=e.coordHelper,e=r.Layer,A=new I.Vector3,i=new I.Matrix4,n=new I.Vector3,o=new I.Quaternion,s=new I.Vector3,h=new I.TextureLoader,t=(h.setCrossOrigin("anonymous"),p);if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&b(t,e);var l,u=g(p);function p(e){var t;if(this instanceof p)return(t=u.call(this)).classNameAlias="VectorScattersLayer",t.layerName=t.classNameAlias,t.renderQueue=r.Geometry,t.needsAutoUpdate=!1,t.options=Object.assign({visible:!0},e||{}),t.enableInteractive=e.options.interaction.enableInteractive,t.formatTransformer=new a,t.defaultValue=10,t.defaultAltitude=0,t._fileCache=new Map,t._data=[],t.mesh4acitve=null,t;throw new TypeError("Cannot call a class as a function")}return t=p,(e=[{key:"allowPicking",get:function(){return this.enableInteractive}},{key:"addTo",value:function(e){v(w(p.prototype),"addTo",this).call(this,e)}},{key:"checkVisible",value:function(){this.options.visible?this.show():this.hide()}},{key:"show",value:function(){this.options.visible=!0,v(w(p.prototype),"show",this).call(this)}},{key:"hide",value:function(){this.options.visible=!1,this.mesh4acitve&&(this.mesh4acitve.visible=!1),v(w(p.prototype),"hide",this).call(this)}},{key:"setData",value:function(e){if(this.clear(),this._data.length=0,!e)return this.emit("rendered"),console.error("".concat(this.classNameAlias,": no data."));var t=e,r=[];if(!Array.isArray(e)){if("FeatureCollection"!==e.type)return this.emit("rendered"),console.error("".concat(this.classNameAlias,": invalid data format, ").concat(e,"."));t=this.formatTransformer.geojson2datav(e)}if(!t.length)return this.emit("rendered"),console.warn("".concat(this.classNameAlias,": the length of data is 0."));for(var a=0,i=t.length;a<i;a++){var n,o,s=t[a],l=parseFloat(s.lng),c=parseFloat(s.lat);n=parseFloat(s.altitude),o=parseFloat(s.value),isNaN(l)||isNaN(c)||(n=isNaN(n)?this.defaultAltitude:n,o=isNaN(o)?this.defaultValue:o,s=m(m({},s),{},{lng:l,lat:c,altitude:n,value:o}),r.push(s))}this._data=r,this.render()}},{key:"render",value:function(){this.clear();for(var e=this.options.options,t=e.general,e=e.graph,r=t.verticalOffset,a=t.rotate,t=t.scale,i=a.rotateX,n=a.rotateY,o=a.rotateZ,s=t.scaleX,l=t.scaleY,c=t.scaleZ,a=e.geometryType,t=e.geometryOpt,e=this.genGeometry(a,t),h=(this.initMaterial(),this.mesh4acitve=new I.Mesh(e,this.material4active),this.add(this.mesh4acitve),new I.InstancedMesh(e,this.material,this._data.length)),u=(this.mesh=h,new I.Object3D),p=1/0,f=1/0,d=1/0,m=-1/0,y=-1/0,v=-1/0,b=[],g=0,w=this._data.length;g<w;g++)var O=this._data[g],O=(S.setFromValues(O.lng,O.lat,O.altitude+r),S.toXYZ(A),b.push([A.x,A.y,A.z]),D(b[b.length-1],3)),M=O[0],x=O[1],O=O[2],p=Math.min(M,p),f=Math.min(x,f),d=Math.min(O,d),m=Math.max(M,m),y=Math.max(x,y),v=Math.max(O,v);this.projPositions=b;var a=.5*(p+m),t=.5*(f+y),e=.5*(d+v),P=(this.center=[a,t,e],new I.Vector3(a,t,e));this.centerVec3=P;for(var j=0,k=this._data.length;j<k;j++){var _=this._data[j];S.setFromValues(_.lng,_.lat,_.altitude+r),u.setRotationFromMatrix(S.transform),u.position.copy(S.toXYZ().sub(P)),u.scale.set(_.value*s,_.value*l,_.value*c),u.rotateX(i*Math.PI/180),u.rotateY(n*Math.PI/180),u.rotateZ(o*Math.PI/180),u.updateMatrix(),u.matrixNeedsUpdate=!0,h.setMatrixAt(j,u.matrix)}h.instanceMatrix.needsUpdate=!0,h.position.set(a,t,e),this.add(h),this.checkVisible(),this.emit("rendered")}},{key:"dataErrorHandler",value:function(){this.emit("rendered")}},{key:"initMaterial",value:function(){var t=this,e=(this.material&&(this.material.dispose(),this.material.map&&this.material.map.dispose()),this.material4active&&this.material4active.dispose(),this.options.options),r=e.general,a=e.graph,e=e.interaction,i=r.blending,n=r.depthTest,r=r.depthWrite,o=a.color,s=a.textureUrl,a=a.wireframe,l=null,s=(s&&0<s.length&&(l=h.load(s)),c.Chroma(o).gl()),n=new I.MeshStandardMaterial({transparent:!0,opacity:s[3],depthTest:n,depthWrite:r,metalness:0,roughness:1,side:I.FrontSide,color:o,blending:I[i],wireframe:"wireframe"===a,map:l}),r=(n.defines.colorPerFeature=!1,this.u_color={value:f(I.Vector4,d(s))},n.onBeforeCompile=function(e){e.vertexShader=O,e.fragmentShader=M,e.uniforms.u_color=t.u_color},this.material=n,e.activeColor),o=e.activeOpacity,i=new I.MeshBasicMaterial({color:r,transparent:!0,opacity:o,wireframe:"wireframe"===a});this.material4active=i}},{key:"updateMaterial",value:function(e){var t,r,a,i,n,o,s,l=this;this.material&&(a=(o=this.options.options).general,o=o.graph,t=a.blending,r=a.depthTest,a=a.depthWrite,i=o.color,n=o.wireframe,o=o.textureUrl,s=c.Chroma(i).gl(),this.material.color=new I.Color(i),(i=this.u_color.value).set.apply(i,d(s)),this.material.opacity=s[3],this.material.wireframe="wireframe"===n,this.material.blending=I[t],this.material.depthWrite=a,this.material.depthTest=r,this.material4active.wireframe="wireframe"===n,c.easyDiff(e,o)||(this.material.map&&this.material.map.dispose(),this.material.map=null,o&&this.fetchTexture(o).then(function(e){e.encoding=I.sRGBEncoding,e.anisotropy=32,l.material.map=e,l.material.needsUpdate=!0})),this.material.needsUpdate=!0)}},{key:"updateScaleAndRotate",value:function(){if(this.mesh){for(var e=this.options.options.general,t=e.verticalOffset,r=e.scale,e=e.rotate,a=e.rotateX,i=e.rotateY,n=e.rotateZ,o=r.scaleX,s=r.scaleY,l=r.scaleZ,c=new I.Object3D,h=0,u=this._data.length;h<u;h++){var p=this._data[h];S.setFromValues(p.lng,p.lat,p.altitude+t),c.setRotationFromMatrix(S.transfrom),c.position.copy(S.toXYZ().sub(this.centerVec3)),c.scale.set(p.value*o,p.value*s,p.value*l),c.rotateX(a*Math.PI/180),c.rotateY(i*Math.PI/180),c.rotateZ(n*Math.PI/180),c.updateMatrix(),c.matrixNeedsUpdate=!0,this.mesh.setMatrixAt(h,c.matrix)}this.mesh.instanceMatrix.needsUpdate=!0}}},{key:"fetchTexture",value:function(r){var e=this._fileCache.get(r);return e||(e=new Promise(function(e,t){h.load(r,e,null,t)}),this._fileCache.set(r,e)),e}},{key:"updateOptions",value:function(e){var t,r,a,i=c.deepClone(this.options),n=(this.options=c.mergeOptions(this.options,e||{}),!0);c.easyDiff(i.options.graph.color,e.options.graph.color)&&c.easyDiff(i.options.graph.wireframe,e.options.graph.wireframe)&&c.easyDiff(i.options.general.blending,e.options.general.blending)&&c.easyDiff(i.options.general.depthWrite,e.options.general.depthWrite)&&c.easyDiff(i.options.general.depthTest,e.options.general.depthTest)&&c.easyDiff(i.options.graph.textureUrl,e.options.graph.textureUrl)||(n=!1,this.updateMaterial(i.options.graph.textureUrl)),c.deepDiff(i.options.general.scale,e.options.general.scale)&&c.deepDiff(i.options.general.rotate,e.options.general.rotate)||(n=!1,this.updateScaleAndRotate()),c.deepDiff(i.options.interaction,e.options.interaction)||(t=(a=e.options.interaction).activeColor,r=a.activeOpacity,a=a.enableInteractive,this.material4active.color=new I.Color(t),this.material4active.opacity=r,this.enableInteractive=a,this.enableInteractive||this.inactive(),n=!1),n&&this._data&&this._data.length&&this.render(),c.easyDiff(i.sceneId.length,e.sceneId.length)&&c.deepDiff(i.sceneId,e.sceneId)||this.updateSceneId(),this.checkVisible()}},{key:"genGeometry",value:function(e,t){var r=t.radius,a=t.width,i=t.height,n=t.depth,o=t.radialSegments,s=null;switch(e){case"tetrahedron":var l=Math.tan(Math.PI/6),c=Math.cos(Math.PI/6),s=new I.PolyhedronGeometry([0,1,0,1,0,l,-1,0,l,0,0,-c],[2,1,0,1,3,0,3,2,0,2,3,1],r,0);break;case"cone":s=new I.ConeBufferGeometry(r,i,o);break;case"box":s=new I.BoxBufferGeometry(a,i,n);break;case"cylinder":s=new I.CylinderBufferGeometry(r,r,i,o);break;case"hexahedron":l=Math.tan(Math.PI/6),c=Math.cos(Math.PI/6);s=new I.PolyhedronGeometry([0,1,0,1,0,l,-1,0,l,0,0,-c,0,-1,0],[2,1,0,1,3,0,3,2,0,2,4,1,1,4,3,3,4,2],r,0);break;case"octahedron":s=new I.OctahedronBufferGeometry(r,0);break;case"dodecahedron":s=new I.DodecahedronBufferGeometry(r,0);break;case"icosahedron":s=new I.IcosahedronBufferGeometry(r,0);break;case"sphere":s=new I.SphereBufferGeometry(r,32,32)}return s}},{key:"active",value:function(e,t){var r=this._data[e],a=(this.mesh4acitve.visible=!0,this.options.options.interaction.activeScale);return this.mesh.getMatrixAt(e,i),i.decompose(n,o,s),this.mesh4acitve.setRotationFromQuaternion(o),this.mesh4acitve.position.copy(n.add(this.centerVec3)),s.multiplyScalar(a),this.mesh4acitve.scale.copy(s),this.mesh4acitve.updateMatrix(),this.mesh4acitve.matrixNeedsUpdate=!0,r}},{key:"inactive",value:function(){this.mesh4acitve.scale.set(0,0,0),this.mesh4acitve.updateMatrix(),this.mesh4acitve.matrixNeedsUpdate=!0,this.mesh4acitve.visible=!1}},{key:"clear",value:function(){v(w(p.prototype),"clear",this).call(this),this.material4active&&this.material4active.dispose(),this.material=null,this.mesh=null,this.mesh4acitve=null}},{key:"destroy",value:function(){this.clear(),v(w(p.prototype),"destroy",this).call(this),this._data.length=0}}])&&y(t.prototype,e),l&&y(t,l),Object.defineProperty(t,"prototype",{writable:!1}),p},e.exports});;
Cube("datav:/com/@datav-city-pro-v2/datav-engine-vector-scatters/2.1.3",["datav:/npm/eventemitter3/3.0.0"],function(t,e,r,i,o,n){function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function u(r){var i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=l(r),e=(t=i?(t=l(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),this);if(t&&("object"===a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var y=r("datav:/npm/eventemitter3/3.0.0"),f=r("datav:/com/@datav-city-pro-v2/datav-engine-vector-scatters/2.1.3/vector-scatters"),r=function(){var t=o,e=y;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e);var r,i=u(o);function o(t,e){var r;if(this instanceof o)return(r=i.call(this)).options=e,r.comId="",r.type="VectorScatters",r.isActived=!1,r;throw new TypeError("Cannot call a class as a function")}return t=o,(e=[{key:"addTo",value:function(t,e){this.cityproCore=t,this.comId=e,this.initLayer()}},{key:"initLayer",value:function(){var t=f(this.cityproCore);this.layer=new t(this.options),this.cityproCore.viewer.addLayer(this.comId,this.layer)}},{key:"setData",value:function(t){this.layer&&this.layer.setData(t)}},{key:"errorRender",value:function(){console.error("矢量散点组件数据错误"),this.layer&&this.layer.dataErrorHandler()}},{key:"enableInteractive",get:function(){return!!this.layer&&this.layer.enableInteractive}},{key:"active",value:function(t,e){var r={clickPosition:{x:t.offsetX,y:t.offsetY},data:{}},e=e.instanceId;return void 0===e?this.isActived=!1:0===t.button&&(e=this.layer.active(e,t),r.data=e,this.emit("leftClick",r),this.isActived=!0),this.isActived}},{key:"inactive",value:function(){this.isActived&&this.layer&&this.layer.inactive&&this.layer.inactive(),this.isActived=!1}},{key:"updateOptions",value:function(t){this.layer&&this.layer.updateOptions&&this.layer.updateOptions(t)}},{key:"show",value:function(){this.layer&&this.layer.show&&this.layer.show()}},{key:"hide",value:function(){this.layer&&this.layer.hide&&this.layer.hide()}},{key:"clear",value:function(){this.layer&&this.layer.clear&&this.layer.clear()}},{key:"destroy",value:function(){this.layer&&(this.layer.destroy&&this.layer.destroy(),this.layer=null)}}])&&c(t.prototype,e),r&&c(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}();return t.exports=r,t.exports});