// env=undefined => env=publish 
Cube("datav:/com/@xhzy-anime/double-barchart_2axis/0.0.4",["datav:/npm/bcore/0.0.18/event","datav:/npm/jquery/3.5.1","datav:/npm/lodash/4.17.20","datav:/npm/vizz/0.2.56"],function(a,b,c){var d=Object.assign||function(a){for(var b,c=1;c<arguments.length;c++)for(var d in b=arguments[c],b)Object.prototype.hasOwnProperty.call(b,d)&&(a[d]=b[d]);return a},e=c("datav:/npm/bcore/0.0.18/event"),f=c("datav:/npm/jquery/3.5.1"),g=c("datav:/npm/lodash/4.17.20"),h=c("datav:/npm/vizz/0.2.56"),i=function(a){var b=a.angle/180*Math.PI,c="single"===a.style?a.value:{x:b<=Math.PI?0:Math.sin(b-Math.PI),y:b>Math.PI/2&&b<3*Math.PI/2?Math.sin(b-Math.PI/2):0,x2:b<=Math.PI?Math.sin(b):0,y2:b>Math.PI/2&&b<3*Math.PI/2?0:Math.cos(b),colorStops:[{offset:0,color:a.from},{offset:1,color:a.to}]};return c};return a.exports=e.extend(function(a,b){var c=this;this.config={theme:{}},this.container=f(a),this.apis=b.apis,this._data=null,this.chart=null,this.option=null,this.init(b),this.finish=function(a){var b=a.data,d=a.duration,e=new Date().getTime();c.myReq=requestAnimationFrame(function a(){var f=new Date().getTime();f-e<d?c.myReq=requestAnimationFrame(a):(c.emit("finish",{data:b}),cancelAnimationFrame(c.myReq))})}},{init:function(a){this.mergeConfig(a),this.updateLayout(),this.updateStyle()},render:function(a,b){a=this.data(a);var c=this.mergeConfig(b);this.chart=h.init(this.container[0]);var d=1e3*c.options.others.animation.animationDuration,e=0<a.length?d/a.length:d,f=i(c.options.series.bar1.gradientColor),g=i(c.options.series.bar2.gradientColor),j=[{type:"bar",$dataIndex:0,dataKey:"y1",$axisIndex:[0,2],itemStyle:{fill:f,stroke:c.options.series.bar1.stroke,lineWidth:c.options.series.bar1.lineWidth,shadowBlur:c.options.series.bar1.shadowBlur,shadowColor:c.options.series.bar1.shadowColor},animationDelay:function(a){return a?a*e+1e3*c.options.others.animation.animationDelay:0},label:{normal:{show:!!c.options.series.bar1.label.show&&"all",style:{position:"top",fill:c.options.series.bar1.label.text.color,fontSize:c.options.series.bar1.label.text.fontSize,fontWeight:c.options.series.bar1.label.text.fontWeight,fontFamily:c.options.series.bar1.label.text.fontFamily},formatter:function(a){var b=a?a.toFixed(c.options.series.bar1.label.decimals):"";return b}}},z:19},{type:"bar",$dataIndex:0,dataKey:"y2",$axisIndex:[0,1],itemStyle:{fill:g,stroke:c.options.series.bar2.stroke,lineWidth:c.options.series.bar2.lineWidth,shadowBlur:c.options.series.bar2.shadowBlur,shadowColor:c.options.series.bar2.shadowColor},animationDelay:function(a){return a?a*e+1e3*c.options.others.animation.animationDelay:0},label:{normal:{show:!!c.options.series.bar2.label.show&&"all",style:{position:"top",fill:c.options.series.bar2.label.text.color,fontSize:c.options.series.bar2.label.text.fontSize,fontWeight:c.options.series.bar2.label.text.fontWeight,fontFamily:c.options.series.bar2.label.text.fontFamily},formatter:function(a){var b=a?a.toFixed(c.options.series.bar2.label.decimals):"";return b}}},z:11}];this.option={data:[{originData:a}],grid:[{left:c.options.chart.grid.left,right:c.options.chart.grid.right,top:c.options.chart.grid.top,bottom:c.options.chart.grid.bottom}],moveLabel:{show:!0,rotate:c.options.axis.xAxis.label.rotate,style:{fontWeight:c.options.chart.moveLabel.text.fontWeight,fontSize:c.options.chart.moveLabel.text.fontSize,textFill:c.options.chart.moveLabel.text.color,fontFamily:c.options.chart.moveLabel.text.fontFamily,textBackgroundColor:c.options.chart.moveLabel.textBackgroundColor,offset:[0,c.options.chart.moveLabel.padding]},formatter:function(a){return a},animationDelay:1e3*c.options.others.animation.animationDelay,animationDuration:1e3*c.options.others.animation.animationDuration},axis:[{xOrY:"x",type:"band",position:"bottom",$dataIndex:0,dataKey:"x",paddingOuter:100*c.options.chart.padding.paddingOuter+"%",paddingInner:100*c.options.chart.padding.paddingInner+"%",barGap:100*c.options.chart.padding.barGap+"%",label:{padding:c.options.axis.xAxis.label.padding,rotate:c.options.axis.xAxis.label.rotate,style:{fill:c.options.axis.xAxis.label.text.color,fontSize:c.options.axis.xAxis.label.text.fontSize,fontWeight:c.options.axis.xAxis.label.text.fontWeight,fontFamily:c.options.axis.xAxis.label.text.fontFamily}},line:{show:c.options.axis.xAxis.line.show,style:{lineWidth:c.options.axis.xAxis.line.lineWidth,stroke:{x:0,y:0,x2:1,y2:0,colorStops:[{offset:0,color:"#b1f7b0"},{offset:0.2,color:"#a3c8f0"},{offset:0.4,color:"#dedede"},{offset:0.6,color:"#fd7381"},{offset:0.8,color:"#fdc788"},{offset:1,color:"#38d5e7"}]}}},interval:c.options.axis.xAxis.label.interval,alwaysShowLast:!0},{xOrY:"y",type:"linear",position:"right",label:{show:c.options.axis.yAxisRight.isShow,padding:c.options.axis.yAxisRight.label.padding,rotate:c.options.axis.yAxisRight.label.rotate,style:{fill:c.options.axis.yAxisRight.label.text.color,fontSize:c.options.axis.yAxisRight.label.text.fontSize,fontWeight:c.options.axis.yAxisRight.label.text.fontWeight,fontFamily:c.options.axis.yAxisRight.label.text.fontFamily}},line:{show:c.options.axis.yAxisRight.line.show,style:{stroke:c.options.axis.yAxisRight.line.stroke,lineWidth:c.options.axis.yAxisRight.line.lineWidth}},splitLine:{show:c.options.axis.yAxisRight.splitLine.show&&c.options.axis.yAxisRight.isShow,style:{color:c.options.axis.yAxisRight.splitLine.color,lineWidth:c.options.axis.yAxisRight.splitLine.lineWidth}}},{xOrY:"y",type:"linear",position:"left",label:{show:c.options.axis.yAxisLeft.isShow,padding:c.options.axis.yAxisLeft.label.padding,rotate:c.options.axis.yAxisLeft.label.rotate,style:{fill:c.options.axis.yAxisLeft.label.text.color,fontSize:c.options.axis.yAxisLeft.label.text.fontSize,fontWeight:c.options.axis.yAxisLeft.label.text.fontWeight,fontFamily:c.options.axis.yAxisLeft.label.text.fontFamily}},line:{show:c.options.axis.yAxisLeft.line.show,style:{stroke:c.options.axis.yAxisLeft.line.stroke,lineWidth:c.options.axis.yAxisLeft.line.lineWidth}},splitLine:{show:c.options.axis.yAxisLeft.splitLine.show&&c.options.axis.yAxisLeft.isShow,style:{color:c.options.axis.yAxisLeft.splitLine.color,lineWidth:c.options.axis.yAxisLeft.splitLine.lineWidth}}}],series:j},this.chart.setOption(this.option);var k=1e3*c.options.others.animation.animationDelay+1e3*c.options.others.animation.animationDuration;this.finish({data:a,duration:k}),this.updateStyle()},resize:function(a,b){this.updateLayout(a,b),this.chart.resize(),this.chart.setOption(this.option)},setColors:function(){},data:function(a){return a&&(this._data=a),this._data},mergeConfig:function(a){return a?(this.config.theme=g.defaultsDeep(a.theme||{},this.config.theme),this.setColors(),this.config=g.defaultsDeep(a||{},this.config),this.config):this.config},updateLayout:function(){},updateStyle:function(){},updateOptions:function(a){this.option.axis[0].interval=a.options.axis.xAxis.label.interval,this.option.axis[0].paddingOuter=100*a.options.chart.padding.paddingOuter+"%",this.option.axis[0].paddingInner=100*a.options.chart.padding.paddingInner+"%",this.option.axis[0].barGap=100*a.options.chart.padding.barGap+"%",this.option.axis[0].label={padding:a.options.axis.xAxis.label.padding,rotate:a.options.axis.xAxis.label.rotate,style:d({},this.option.axis[0].label.style,a.options.axis.xAxis.label.text,{fill:a.options.axis.xAxis.label.text.color})},this.option.axis[0].line.show=a.options.axis.xAxis.line.show,this.option.axis[0].line.style.lineWidth=a.options.axis.xAxis.line.lineWidth,this.option.axis[1].label={show:a.options.axis.yAxisRight.isShow,padding:a.options.axis.yAxisRight.label.padding,rotate:a.options.axis.yAxisRight.label.rotate,style:d({},this.option.axis[1].label.style,a.options.axis.yAxisRight.label.text,{fill:a.options.axis.yAxisRight.label.text.color})},this.option.axis[1].line={show:a.options.axis.yAxisRight.line.show&&a.options.axis.yAxisRight.isShow,style:{stroke:a.options.axis.yAxisRight.line.stroke,lineWidth:a.options.axis.yAxisRight.line.lineWidth}},this.option.axis[1].splitLine={show:a.options.axis.yAxisRight.splitLine.show&&a.options.axis.yAxisRight.isShow,style:{color:a.options.axis.yAxisRight.splitLine.color,lineWidth:a.options.axis.yAxisRight.splitLine.lineWidth}},this.option.axis[2].label={show:a.options.axis.yAxisLeft.isShow,padding:a.options.axis.yAxisLeft.label.padding,rotate:a.options.axis.yAxisLeft.label.rotate,style:d({},this.option.axis[2].label.style,a.options.axis.yAxisLeft.label.text,{fill:a.options.axis.yAxisLeft.label.text.color})},this.option.axis[2].line={show:a.options.axis.yAxisLeft.line.show&&a.options.axis.yAxisLeft.isShow,style:{stroke:a.options.axis.yAxisLeft.line.stroke,lineWidth:a.options.axis.yAxisLeft.line.lineWidth}},this.option.axis[2].splitLine={show:a.options.axis.yAxisLeft.splitLine.show&&a.options.axis.yAxisLeft.isShow,style:{color:a.options.axis.yAxisLeft.splitLine.color,lineWidth:a.options.axis.yAxisLeft.splitLine.lineWidth}},this.option.moveLabel.animationDelay=1e3*a.options.others.animation.animationDelay,this.option.moveLabel.animationDuration=1e3*a.options.others.animation.animationDuration,this.option.moveLabel.rotate=a.options.axis.xAxis.label.rotate,this.option.moveLabel.style=d({},this.option.moveLabel.style,a.options.chart.moveLabel.text,{textFill:a.options.chart.moveLabel.text.color,textBackgroundColor:a.options.chart.moveLabel.textBackgroundColor,offset:[0,a.options.chart.moveLabel.padding]});var b=i(a.options.series.bar1.gradientColor);this.option.series[0].itemStyle.fill=b,this.option.series[0].itemStyle.stroke=a.options.series.bar1.stroke,this.option.series[0].itemStyle.lineWidth=a.options.series.bar1.lineWidth,this.option.series[0].itemStyle.shadowBlur=a.options.series.bar1.shadowBlur,this.option.series[0].itemStyle.shadowColor=a.options.series.bar1.shadowColor,this.option.series[0].label={normal:{show:!!a.options.series.bar1.label.show&&"all",style:d({position:"top"},a.options.series.bar1.label.text),formatter:function(b){var c=b?b.toFixed(a.options.series.bar1.label.decimals):"";return c}}};var c=i(a.options.series.bar2.gradientColor);this.option.series[1].itemStyle.fill=c,this.option.series[1].itemStyle.stroke=a.options.series.bar2.stroke,this.option.series[1].itemStyle.lineWidth=a.options.series.bar2.lineWidth,this.option.series[1].itemStyle.shadowBlur=a.options.series.bar2.shadowBlur,this.option.series[1].itemStyle.shadowColor=a.options.series.bar2.shadowColor,this.option.series[1].label={normal:{show:!!a.options.series.bar2.label.show&&"all",style:d({position:"top"},a.options.series.bar2.label.text),formatter:function(b){var c=b?b.toFixed(a.options.series.bar2.label.decimals):"";return c}}};var e=this.data(),f=1e3*a.options.others.animation.animationDuration,g=0<e.length?f/e.length:f;this.option.series[0].animationDelay=function(b){return b?b*g+1e3*a.options.others.animation.animationDelay:0},this.option.series[1].animationDelay=function(b){return b?b*g+1e3*a.options.others.animation.animationDelay:0},this.option.grid={left:a.options.chart.grid.left,right:a.options.chart.grid.right,top:a.options.chart.grid.top,bottom:a.options.chart.grid.bottom};var h=1e3*a.options.others.animation.animationDelay+1e3*a.options.others.animation.animationDuration;this.finish({data:e,duration:h}),this.chart.setOption(this.option)},destroy:function(){this.chart.clear()},getThemableConfig:function(a){if(!a)return null;var b={options:{chart:{moveLabel:{text:{color:a.textColor},textBackgroundColor:a.bgColor}},axis:{xAxis:{label:{text:{color:a.textColor}},line:{stroke:a.axisColor}},yAxisLeft:{label:{text:{color:a.textColor}},line:{stroke:a.axisColor},splitLine:{color:a.axisColor}},yAxisRight:{label:{text:{color:a.textColor}},line:{stroke:a.axisColor},splitLine:{color:a.axisColor}}},series:{bar1:{gradientColor:{style:"single",value:a.palette[0]},stroke:a.palette[0],label:{text:{color:a.textColor}}},bar2:{gradientColor:{style:"single",value:a.palette[5]},stroke:a.palette[5],label:{text:{color:a.textColor}}}}}};return b}}),a.exports});