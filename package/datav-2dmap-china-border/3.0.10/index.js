// env=undefined => env=publish 
Cube("datav:/com/datav-2dmap-china-border/3.0.10/defaultData/provincialCapital.js",[],function(a,e,t,l,n,d){return a.exports=[{lat:39.90403,lng:116.407526,type:"left",name:"北京",adcode:"110000",isCapital:!0},{lat:37.87046,lng:112.549717,name:"太原",type:"left",adcode:"140000"},{lat:36.617042,lng:101.778112,name:"西宁",type:"left",adcode:"630000"},{lat:31.82057,lng:117.227308,name:"合肥",type:"left",adcode:"340000"},{lat:22.198951,lng:113.54909,name:"澳门",type:"left",adcode:"820000"},{lat:26.075302,lng:119.306239,name:"福州",type:"left",adcode:"350000"},{lat:39.085294,lng:117.201538,name:"天津",type:"right",adcode:"120000"},{lat:38.042225,lng:114.514793,name:"石家庄",type:"right",adcode:"130000"},{lat:40.842723,lng:111.748426,name:"呼和浩特",type:"right",adcode:"150000"},{lat:41.677287,lng:123.465009,name:"沈阳",type:"right",adcode:"210000"},{lat:43.817001,lng:125.323628,name:"长春",type:"right",adcode:"220000"},{lat:45.803131,lng:126.535319,name:"哈尔滨",type:"right",adcode:"230000"},{lat:31.230378,lng:121.473658,name:"上海",type:"right",adcode:"310000"},{lat:32.059352,lng:118.796623,name:"南京",type:"right",adcode:"320000"},{lat:30.287459,lng:120.153576,name:"杭州",type:"right",adcode:"330000"},{lat:28.676493,lng:115.892151,name:"南昌",type:"right",adcode:"360000"},{lat:36.6512,lng:117.120098,name:"济南",type:"right",adcode:"370000"},{lat:34.745795,lng:113.658097,name:"郑州",type:"right",adcode:"410000"},{lat:30.592935,lng:114.305215,name:"武汉",type:"right",adcode:"420000"},{lat:28.19409,lng:112.982279,name:"长沙",type:"right",adcode:"430000"},{lat:23.125178,lng:113.280637,name:"广州",type:"right",adcode:"440000"},{lat:22.817746,lng:108.36637,name:"南宁",type:"right",adcode:"450000"},{lat:20.044412,lng:110.198286,name:"海口",type:"right",adcode:"460000"},{lat:29.563761,lng:106.550464,name:"重庆",type:"right",adcode:"500000"},{lat:30.573095,lng:104.066143,name:"成都",type:"right",adcode:"510000"},{lat:26.647661,lng:106.630153,name:"贵阳",type:"right",adcode:"520000"},{lat:24.881539,lng:102.833722,name:"昆明",type:"right",adcode:"530000"},{lat:29.653482,lng:91.171961,name:"拉萨",type:"right",adcode:"540000"},{lat:34.343147,lng:108.939621,name:"西安",type:"right",adcode:"610000"},{lat:36.06081,lng:103.834249,name:"兰州",type:"right",adcode:"620000"},{lat:38.487193,lng:106.230909,name:"银川",type:"right",adcode:"640000"},{lat:43.82539,lng:87.616842,name:"乌鲁木齐",type:"right",adcode:"650000"},{lat:25.044332,lng:121.509062,name:"台北",type:"right",adcode:"710000"},{lat:22.320048,lng:114.173355,name:"香港",type:"right",adcode:"810000"},{name:"海南岛",lng:109.820432,lat:19.317867,offset:{x:0,y:8},isIslands:!0},{name:"台湾岛",lng:120.945351,lat:23.815415,offset:{x:0,y:0},isIslands:!0},{name:"钓鱼岛",lng:123.475139,lat:25.742234,type:"left",offset:{x:-5,y:0},isIslands:!0},{name:"赤尾屿",lng:124.562104,lat:25.919135,offset:{x:0,y:-8},isIslands:!0},{name:"东沙群岛",lng:116.001504,lat:21.104913,offset:{x:20,y:16},isIslands:!0},{name:"西沙群岛",lng:112.032693,lat:16.786046,offset:{x:0,y:-10},isIslands:!0},{name:"中沙群岛",lng:114.49363,lat:16.122257,type:"center",offset:{x:10,y:-6},isIslands:!0},{name:"永兴岛",lng:112.23594,lat:15.723436,offset:{x:0,y:4},isIslands:!0},{name:"黄岩岛",lng:117.848817,lat:15.151669,type:"left",offset:{x:4,y:10},isIslands:!0},{name:"南沙群岛",lng:114.427712,lat:9.592533,offset:{x:0,y:0},isIslands:!0},{name:"曾母暗沙",lng:111.659158,lat:4.785638,offset:{x:0,y:0},isIslands:!0}],a.exports});;
Cube("datav:/com/datav-2dmap-china-border/3.0.10/config",[],function(o,a,e,r,n,t){return o.exports={DEFAULT_OPTIONS:{tolerance:0,smoothFactor:1,renderer:"canvas",visibility:!0,general:{zoomRange:[0,18],minZoom:0,maxZoom:22,opacity:1},graph:{}}},o.exports});;
Cube("datav:/com/datav-2dmap-china-border/3.0.10/src/minMap",["datav:/npm/eventemitter3/3.0.0","datav:/npm/safely-merge/1.0.1"],function(e,t,r,o,a,i){var n=function(e,t,o){return t&&s(e.prototype,t),o&&s(e,o),e};function s(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var u=r("datav:/npm/eventemitter3/3.0.0"),d=r("datav:/npm/safely-merge/1.0.1");return e.exports=function(e){var l=e.L,f=e.map,e=e.Utils,m=e._,b=e.geojsonFlatten,h=e.geojsonBBox,g={type:"FeatureCollection",features:[{type:"Feature",properties:{stroke:"#555555","stroke-width":2,"stroke-opacity":1,fill:"#555555","fill-opacity":.5},geometry:{type:"Polygon",coordinates:[[[107.1826171875,2.767477951092084],[123.1787109375,2.767477951092084],[123.1787109375,24.647017162630366],[107.1826171875,24.647017162630366],[107.1826171875,2.767477951092084]]]}}]},c=190,p=270,y=r("datav:/com/datav-2dmap-china-border/3.0.10/defaultData/provincialCapital.js");return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(o,u),n(o,[{key:"init",value:function(){var e=this.options,t=e.general,o=e.graph.minMap,r=o.show,a=o.marginRight,i=o.marginBottom,n=o.ctxScale,e=c*n,o=p*n;this.container=document.createElement("canvas"),this.container.width=e,this.container.height=o,this.container.style.width=e+"px",this.container.style.height=o+"px",this.container.style.marginRight=-10+a+"px",this.container.style.marginBottom=i+"px",f._container.querySelector("div.leaflet-bottom.leaflet-right").appendChild(this.container),(this.ctx=this.container.getContext("2d")).scale(n,n);n=f.getZoom();r&&n>=t.zoomRange[0]&&n<=t.zoomRange[1]?(this.container.style.marginRight=-10+a+"px",this.container.style.marginBottom=i+"px",this.ctx.scale(1,1),this.genGeojson()):this.hide()}},{key:"renderArea",value:function(e){this.geojson_area=e,this.genGeojson()}},{key:"renderBorder",value:function(e){this.geojson_border=e,this.genGeojson()}},{key:"setMappingData",value:function(e){this.mappingDataMap=e,this.genGeojson()}},{key:"genGeojson",value:function(){var e=this,t=e.ctx,o=e.geojson_area,r=e.geojson_border,a=this.options,i=a.general,n=a.graph,s=n.minMap,l=s.oceanColor,a=s.borderColor,s=s.borderWeight;t.globalAlpha=.01*i.opacity,t.beginPath(),t.rect(0,0,c,p),t.fillStyle=l,t.fill(),t.lineJoin="round",t.lineCap="round",t.shadowColor=null,t.shadowBlur=null;i=h(g),l=f.project([i[1],i[0]],4),i=f.project([i[3],i[2]],4),i={x:Math.min(l.x,i.x),y:Math.min(l.y,i.y)};o&&e.drawLandBackground(t,o,i),o&&e.drawArea(t,o,i),r&&e.drawBorder(t,r,i),n.labelStyle.show&&y&&e.drawLabels(t,i),t.beginPath(),t.rect(0,0,c,p),t.lineWidth=2*s,t.strokeStyle=a,t.stroke()}},{key:"drawLandBackground",value:function(e,t,o){if(t&&t.features&&t.features.length)for(var r={fillColor:this.options.graph.minMap.landColor},a=0;a<t.features.length;a++){t.features[a].properties.adcode;for(var i,n,s=b(t.features[a]),l=[],h=0;h<s.length;h++)if(n=(i=s[h].geometry).coordinates,"Polygon"===i.type){for(var g=0;g<n.length;g++){var c=this.pointsProject(n[g],o);3<=c.length&&l.push(c)}e.beginPath();for(var p,f=void 0,y=void 0,f=0;f<l.length;f++){for(y=0;y<l[f].length;y++)p=l[f][y],e[y?"lineTo":"moveTo"](p[0],p[1]);e.closePath()}}e.fillStyle=r.fillColor,e.fill()}}},{key:"drawArea",value:function(e,t,o){if(t&&t.features&&t.features.length)for(var r=m.get(this.options,"graph.colorMapping"),a=void 0,i={},a=0;a<t.features.length;a++){for(var n,s,l=t.features[a].properties.adcode,h=b(t.features[a]),g=[],c=0;c<h.length;c++)if(s=(n=h[c].geometry).coordinates,"Polygon"===n.type){for(var p=0;p<s.length;p++){var f=this.pointsProject(s[p],o);3<=f.length&&g.push(f)}e.beginPath();for(var y,u=void 0,d=void 0,u=0;u<g.length;u++){for(d=0;d<g[u].length;d++)y=g[u][d],e[d?"lineTo":"moveTo"](y[0],y[1]);e.closePath()}}l&&this.mappingDataMap[l]&&this.mappingDataMap[l].fillColor?i.fillColor=this.mappingDataMap[l].fillColor:i.fillColor=r.fixed,e.fillStyle=i.fillColor,e.fill()}}},{key:"drawBorder",value:function(e,t,o){var r=this.options.graph.lineStyle,a=r.guojieColor,i=r.guojieWeight,n=r.shengjieColor,s=r.shengjieWeight,l=r.haianxianColor,h=r.haianxianWeight;if(t&&t.features&&t.features.length)for(var g=0;g<t.features.length;g++){var c,p,f=b(t.features[g]),y=[],u=t.features[g].properties,d={strokeColor:"rgba(255,255,255,0.3)",weight:1,dashArray:""};switch(u.id||u.adcode){case 1:d={strokeColor:a,weight:i,dashArray:"4, 8"};break;case 2:d={strokeColor:l,weight:h,dashArray:""};break;case 3:d={strokeColor:n,weight:s,dashArray:""};break;case 4:d={strokeColor:n,weight:s,dashArray:"10,4,4,4"};break;case 5:d={strokeColor:a,weight:i,dashArray:""}}e.beginPath();for(var m=0;m<f.length;m++)if(0!==(p=(c=f[m].geometry).coordinates).length&&"LineString"===c.type){var v=this.pointsProject(p,o);if((y=2<=v.length?v:y)&&1<y.length&&0<d.weight){e.moveTo(y[0][0],y[0][1]);for(var x=1;x<y.length;x++)e.lineTo(y[x][0],y[x][1])}}e.strokeStyle=d.strokeColor,e.lineWidth=d.weight,e.setLineDash&&(u=this.getDashArray(d)||[],e.setLineDash(u)),e.stroke()}}},{key:"drawLabels",value:function(e,t){var o=this.options.graph.labelStyle,r=o.iconColor,a=o.textStyle,i=a.fontFamily,n=(a.fontSize,a.color),s=a.fontWeight,o=a.shadowColor,a=a.shadowBlur;e.textAlign="center",e.fillStyle=r,e.strokeStyle=r,e.lineWidth=.5;for(var l=0;l<y.length;l++){var h=y[l];h.isCapital||h.isIslands||(h=f.project([h.lat,h.lng],4),e.beginPath(),e.arc(h.x-t.x,h.y-t.y,1.5,0,2*Math.PI),e.fill(),e.beginPath(),e.arc(h.x-t.x,h.y-t.y,4,0,2*Math.PI),e.stroke())}e.textBaseline="middle",e.font=s+" 10px "+i,e.fillStyle=n,e.shadowColor=o,e.shadowBlur=a;for(var g=0;g<y.length;g++){var c=y[g],p=f.project([c.lat,c.lng],4);switch(c.offset=c.offset||{x:0,y:0},c.type){case"left":e.textAlign="right",c.isIslands||(c.offset.x=-8);break;case"right":e.textAlign="left",c.offset.x=8;break;default:e.textAlign="center",c.offset.x=0}e.fillText(c.name,p.x-t.x+c.offset.x,p.y-t.y+c.offset.y)}}},{key:"getDashArray",value:function(e){if(""===e.dashArray)r=[];else if("string"==typeof e.dashArray)for(var t,o=e.dashArray.split(/[, ]+/),r=[],a=0;a<o.length;a++){if(t=Number(o[a]),isNaN(t))return;r.push(t)}else r=e.dashArray||[];return r}},{key:"pointsProject",value:function(e,t){for(var o=[],r=void 0,r=0;r<e.length;r++){var a=e[r];!a[0]&&0!=a[0]||!a[1]&&0!=a[1]||(a=f.project([a[1],a[0]],4),o.push(a))}this.options.smoothFactor;var i=[];if(o.length)for(var n=l.LineUtil.simplify(o,.5),s=0;s<n.length;s++)i.push([n[s].x-t.x,n[s].y-t.y]);return i}},{key:"getDashArray",value:function(e){if("string"==typeof e.dashArray)for(var t,o=e.dashArray.split(/[, ]+/),r=[],a=0;a<o.length;a++){if(t=Number(o[a]),isNaN(t))return;r.push(t)}else r=e.dashArray||[];return r}},{key:"updateOptions",value:function(e){this.options=d(this.options,e),this.options.general.minZoom=e.general.zoomRange[0],this.options.general.maxZoom=e.general.zoomRange[1];var t=this.options,o=t.general,r=t.graph.minMap,a=r.show,i=r.marginRight,e=r.marginBottom,t=r.ctxScale,r=f.getZoom();a&&r>=o.zoomRange[0]&&r<=o.zoomRange[1]?(r=p*t,this.container.width=o=c*t,this.container.height=r,this.container.style.width=o+"px",this.container.style.height=r+"px",this.container.style.marginRight=-10+i+"px",this.container.style.marginBottom=e+"px",this.container&&this.container.style&&(this.container.style.display="block"),this.ctx.scale(t,t),this.genGeojson()):this.hide()}},{key:"show",value:function(){this.options.graph.minMap.show&&this.container&&this.container.style&&(this.container.style.display="block")}},{key:"hide",value:function(){this.container&&this.container.style&&(this.container.style.display="none")}},{key:"destroy",value:function(){this.ctx=null,this.container.remove(),this.container=null,this.data=null,this.options=null,this.style=null}}]),o;function o(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(o.__proto__||Object.getPrototypeOf(o)).call(this));return t.options=d({},e),t.options.general.minZoom=e.general.zoomRange[0],t.options.general.maxZoom=e.general.zoomRange[1],t.options.visibility=!0,t.mappingDataMap={},t.init(),t}},e.exports});;
Cube("datav:/com/datav-2dmap-china-border/3.0.10/src/layer",["datav:/npm/eventemitter3/3.0.0","datav:/npm/safely-merge/1.0.1"],function(e,t,a,o,i,n){var r=function(e,t,o){return t&&s(e.prototype,t),o&&s(e,o),e};function s(e,t){for(var o=0;o<t.length;o++){var a=t[o];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var l=a("datav:/npm/eventemitter3/3.0.0"),h=a("datav:/npm/safely-merge/1.0.1");return e.exports=function(e){var s=e.L,b=e.map,e=e.Utils,y=e._,w=e.geojsonFlatten,m=b.options.offset,k=a("datav:/com/datav-2dmap-china-border/3.0.10/defaultData/provincialCapital.js");return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(o,l),r(o,[{key:"init",value:function(){var e=b.getSize(),t=b.devicePixelRatio||1,o=e.x-2*m.x,a=e.y-2*m.y,e=this.container=document.createElement("canvas");e.width=o*t,e.height=a*t,e.style.width=o+"px",e.style.height=a+"px",this.ctx=e.getContext("2d"),this.ctx.scale(t,t),this.geojson_area=null,this.geojson_border=null,this.mappingDataMap={}}},{key:"onRender",value:function(e){this.genGeojson(e)}},{key:"resize",value:function(e,t){var o=b.devicePixelRatio||1;this.container.width=e*o,this.container.height=t*o,this.container.style.width=e+"px",this.container.style.height=t+"px",this.ctx.scale(o,o)}},{key:"renderArea",value:function(e){this.geojson_area=e,this.genGeojson()}},{key:"renderBorder",value:function(e){this.geojson_border=e,this.genGeojson()}},{key:"setMappingData",value:function(e){this.mappingDataMap=e,this.genGeojson()}},{key:"updateOptions",value:function(e){this.options=h(this.options,e),this.options.general.minZoom=e.general.zoomRange[0],this.options.general.maxZoom=e.general.zoomRange[1],this.genGeojson()}},{key:"genGeojson",value:function(){var e=this,t=e.ctx,o=e.geojson_area,a=e.geojson_border;t.clearRect(0,0,this.container.width,this.container.height),t.lineJoin="round",t.lineCap="round",t.shadowColor=null,t.shadowBlur=null,o&&e.drawArea(t,o),a&&e.drawBorder(t,a),this.options.graph.labelStyle.show&&k&&e.drawLabels(t),this.isStateChange=!0}},{key:"drawArea",value:function(e,t){if(t&&t.features&&t.features.length)for(var o=y.get(this.options,"graph.colorMapping"),a=void 0,i={},a=0;a<t.features.length;a++){for(var n,r,s=t.features[a].properties.adcode,l=w(t.features[a]),h=[],f=0;f<l.length;f++)if(r=(n=l[f].geometry).coordinates,"Polygon"===n.type){for(var g=0;g<r.length;g++){var p=this.pointsProject(r[g]);3<=p.length&&h.push(p)}e.beginPath();for(var c,u=void 0,d=void 0,u=0;u<h.length;u++){for(d=0;d<h[u].length;d++)c=h[u][d],e[d?"lineTo":"moveTo"](c[0],c[1]);e.closePath()}}s&&this.mappingDataMap[s]&&this.mappingDataMap[s].fillColor?i.fillColor=this.mappingDataMap[s].fillColor:i.fillColor=o.fixed,e.fillStyle=i.fillColor,e.fill()}}},{key:"drawBorder",value:function(e,t){var o=this.options.graph.lineStyle,a=o.guojieColor,i=o.guojieWeight,n=o.shengjieColor,r=o.shengjieWeight,s=o.haianxianColor,l=o.haianxianWeight;if(t&&t.features&&t.features.length)for(var h=0;h<t.features.length;h++){var f,g,p=w(t.features[h]),c=[],u=t.features[h].properties,d={strokeColor:"rgba(255,255,255,0.3)",weight:1,dashArray:""};switch(u.id||u.adcode){case 1:d={strokeColor:a,weight:i,dashArray:"4, 8"};break;case 2:d={strokeColor:s,weight:l,dashArray:""};break;case 3:d={strokeColor:n,weight:r,dashArray:""};break;case 4:d={strokeColor:n,weight:r,dashArray:"10,4,4,4"};break;case 5:d={strokeColor:a,weight:i,dashArray:""}}e.beginPath();for(var y=0;y<p.length;y++)if(0!==(g=(f=p[y].geometry).coordinates).length&&"LineString"===f.type){var v=this.pointsProject(g);if((c=2<=v.length?v:c)&&1<c.length&&0<d.weight){e.moveTo(c[0][0],c[0][1]);for(var x=1;x<c.length;x++)e.lineTo(c[x][0],c[x][1])}}e.strokeStyle=d.strokeColor,e.lineWidth=d.weight,e.setLineDash&&(u=this.getDashArray(d)||[],e.setLineDash(u)),e.stroke()}}},{key:"drawLabels",value:function(e){var t=this.options.graph.labelStyle,o=t.iconColor,a=t.textStyle,i=a.fontFamily,n=a.fontSize,r=a.color,s=a.fontWeight,t=a.shadowColor,a=a.shadowBlur;e.textBaseline="middle",e.font="bolder "+1.3*n+"px "+i,e.textAlign="center",e.fillStyle="red",e.shadowColor="white",e.shadowBlur=1,e.beginPath();for(var l=0;l<k.length;l++){var h=Object.assign({},k[l]);if(h.isCapital){for(var f=b.latLngToContainerPoint([+h.lat,+h.lng]),g=f.x-m.x,p=f.y-m.y,c=0;c<5;c++)e.lineTo(5*Math.cos((18+72*c)/180*Math.PI)+g,5*-Math.sin((18+72*c)/180*Math.PI)+p),e.lineTo(2.5*Math.cos((54+72*c)/180*Math.PI)+g,2.5*-Math.sin((54+72*c)/180*Math.PI)+p);switch(e.closePath(),e.fill(),h.offset=h.offset||{x:0,y:0},h.type){case"left":e.textAlign="right",h.offset.x=-8;break;case"right":e.textAlign="left",h.offset.x=8;break;default:e.textAlign="center",h.offset.x=0}e.fillText(h.name,f.x-m.x+h.offset.x,f.y-m.y+h.offset.y)}}e.textAlign="center",e.fillStyle=o,e.strokeStyle=o,e.lineWidth=.5,e.shadowColor=null,e.shadowBlur=null;for(var u=0;u<k.length;u++){var d=k[u];d.isCapital||d.isIslands||(d=b.latLngToContainerPoint([d.lat,d.lng]),e.beginPath(),e.arc(d.x-m.x,d.y-m.y,1.5,0,2*Math.PI),e.fill(),e.beginPath(),e.arc(d.x-m.x,d.y-m.y,4,0,2*Math.PI),e.stroke())}e.textBaseline="middle",e.font=s+" "+n+"px "+i,e.fillStyle=r,e.shadowColor=t,e.shadowBlur=a;for(var y=0;y<k.length;y++){var v=k[y];if(!v.isCapital){var x=b.latLngToContainerPoint([v.lat,v.lng]);switch(v.offset=v.offset||{x:0,y:0},v.type){case"left":e.textAlign="right",v.isIslands||(v.offset.x=-8);break;case"right":e.textAlign="left",v.offset.x=8;break;default:e.textAlign="center",v.offset.x=0}e.fillText(v.name,x.x-m.x+v.offset.x,x.y-m.y+v.offset.y)}}}},{key:"pointsProject",value:function(e){for(var t=[],o=void 0,o=0;o<e.length;o++){var a=e[o];!a[0]&&0!=a[0]||!a[1]&&0!=a[1]||(a=b.latLngToContainerPoint([a[1],a[0]]),t.push(a))}this.options.smoothFactor;var i=[];if(t.length)for(var n=s.LineUtil.simplify(t,.5),r=0;r<n.length;r++)i.push([n[r].x-m.x,n[r].y-m.y]);return i}},{key:"getDashArray",value:function(e){if(""===e.dashArray)a=[];else if("string"==typeof e.dashArray)for(var t,o=e.dashArray.split(/[, ]+/),a=[],i=0;i<o.length;i++){if(t=Number(o[i]),isNaN(t))return;a.push(t)}else a=e.dashArray||[];return a}},{key:"draw",value:function(e){var t,o=this,a=o.geojson_area,i=o.geojson_border;this.options.visibility&&(t=o.options.general,e.globalAlpha=.01*t.opacity,e.lineJoin="round",e.lineCap="round",e.shadowColor=null,e.shadowBlur=null,a&&o.drawArea(e,a),i&&o.drawBorder(e,i),this.options.graph.labelStyle.show&&k&&o.drawLabels(e))}},{key:"show",value:function(){this.genGeojson(),this.options.visibility=!0}},{key:"hide",value:function(){this.options.visibility=!1,this.ctx.clearRect(0,0,this.container.width,this.container.height),this.isStateChange=!0}},{key:"destroy",value:function(){this.geojson_area=null,this.geojson_border=null,this.mappingDataMap=null,delete this.options,this.ctx,this.container,this.geojson_area,this.geojson_border,this.mappingDataMap}}]),o;function o(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(o.__proto__||Object.getPrototypeOf(o)).call(this));return t.options=h({},e),t.options.general.minZoom=e.general.zoomRange[0],t.options.general.maxZoom=e.general.zoomRange[1],t.options.visibility=!0,t.init(),t}},e.exports});;
Cube("datav:/com/datav-2dmap-china-border/3.0.10",["datav:/npm/eventemitter3/3.0.0","datav:/npm/safely-merge/1.0.1"],function(e,t,i,n,a,o){var r=function(e,t,i){return t&&s(e.prototype,t),i&&s(e,i),e};function s(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var l=i("datav:/npm/eventemitter3/3.0.0"),h=i("datav:/npm/safely-merge/1.0.1"),p=i("datav:/com/datav-2dmap-china-border/3.0.10/src/layer"),d=i("datav:/com/datav-2dmap-china-border/3.0.10/src/minMap"),u=i("datav:/com/datav-2dmap-china-border/3.0.10/config").DEFAULT_OPTIONS,r=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(y,l),r(y,[{key:"addTo",value:function(e,t){this.viewer=e,this.options.id=t;t=p(e);this.layer=new t(this.options);e=d(e);return this.minMap=new e(this.options),this.renderArea(),this.renderBorder(),this}},{key:"renderArea",value:function(){var t=this;fetch(this.options.graph.defaultArea).then(function(e){return e.json()}).then(function(e){t.layer&&t.layer.renderArea(e),t.minMap&&t.minMap.renderArea(e)})}},{key:"renderBorder",value:function(){var t=this;fetch(this.options.graph.defaultBorder).then(function(e){return e.json()}).then(function(e){t.layer&&t.layer.renderBorder(e),t.minMap&&t.minMap.renderBorder(e)})}},{key:"render",value:function(e){var t=this.viewer,i=t.Utils,t=t.GuiUtils,n=i.mergeOptions,i=i._;this.mappingData=e||[];for(var a,o,r=t.validateCustomStyle,s=i.get(this.options,"condition.condition"),l=i.get(t,"scale.color")({config:i.get(this.options,"graph.colorMapping"),data:e,field:"colorField"}),h=void 0,p=void 0,d={},h=0;h<e.length;h++)(p=n({},e[h])).adcode&&(a=(o=r({config:s,data:p,ruleKey:"rules"}))&&o[0]?o[0]:null,p.fillColor||(a&&a.fillColor.show?p.fillColor=a.fillColor.value:p.fillColor=l(p.colorField)),d[p.adcode]=p);this.layer&&this.layer.setMappingData&&this.layer.setMappingData(d),this.minMap&&this.minMap.setMappingData&&this.minMap.setMappingData(d)}},{key:"onRender",value:function(e){this.layer&&this.layer.onRender&&this.layer.onRender(e)}},{key:"resize",value:function(e,t){this.layer&&this.layer.resize&&this.layer.resize(e,t)}},{key:"updateOptions",value:function(e){e=e.options;this.options=h(u,e),this.options.general.minZoom=e.general.zoomRange[0],this.options.general.maxZoom=e.general.zoomRange[1],this.render(this.mappingData||[]),this.layer&&this.layer.updateOptions&&this.layer.updateOptions(this.options),this.minMap&&this.minMap.updateOptions&&this.minMap.updateOptions(this.options)}},{key:"draw",value:function(e){this.layer&&this.layer.draw&&this.layer.draw(e)}},{key:"show",value:function(){this.options.visibility=!0,this.layer&&this.layer.show&&this.layer.show(),this.minMap&&this.minMap.show&&this.minMap.show()}},{key:"hide",value:function(){this.options.visibility=!1,this.layer&&this.layer.hide&&this.layer.hide(),this.minMap&&this.minMap.hide&&this.minMap.hide()}},{key:"destroy",value:function(){this.layer&&this.layer.destroy&&this.layer.destroy(),this.layer=null,this.minMap&&this.minMap.destroy&&this.minMap.destroy(),this.minMap=null,delete this.layer,this.minMap}}]),y);function y(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,y);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(y.__proto__||Object.getPrototypeOf(y)).call(this)),t=t.options;return i.options=h(u,t),i.options.general.minZoom=t.general.zoomRange[0],i.options.general.maxZoom=t.general.zoomRange[1],i.options.visibility=!0,i}return e.exports=r,e.exports});