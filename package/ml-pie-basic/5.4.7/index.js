// env=undefined => env=publish 
Cube("datav:/com/ml-pie-basic/5.4.7/customRuleStyle",["datav:/npm/lodash/4.17.11/get","datav:/npm/lodash/4.17.11/set","datav:/npm/alibabacloud-datav-tool-gui-utils/1.0.0"],function(t,e,o,l,r,i){function n(e,t){var o,l=Object.keys(e);return Object.getOwnPropertySymbols&&(o=Object.getOwnPropertySymbols(e),t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),l.push.apply(l,o)),l}function v(l){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach(function(t){var e,o;e=l,o=r[t=t],t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach(function(t){Object.defineProperty(l,t,Object.getOwnPropertyDescriptor(r,t))})}return l}var y=o("datav:/npm/lodash/4.17.11/get"),m=o("datav:/npm/lodash/4.17.11/set"),O=o("datav:/com/ml-pie-basic/5.4.7/utils").transformGradientColor,a=o("datav:/npm/alibabacloud-datav-tool-gui-utils/1.0.0"),w=a.scale,j=a.validateCustomStyle,S=o("datav:/com/ml-pie-basic/5.4.7/utils").transLineDash,k="colorField",C=["fill"];return t.exports=function(){var l,t,o,r,i,n,a,c,s,u,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},d=e.props,p=e.guiConfig,e=e.data,p=(void 0===p?{}:p).options,f=p.chart,b=f.fill,g=f.line,f=f.pattern,h=p.condition.customStyle,p=p.legend.isShow;h=(d={props:void 0===d?{}:d,customStyle:h,fill:b,line:g,data:e,show:p,pattern:f}).props,l=d.customStyle,b=d.fill,t=d.line,g=d.data,d.show,d=d.pattern,e=y(w,"color.g2plot"),m(h,"colorField",k),o=e({config:b,data:g,field:k}),m(h,"color",o),m(h,"pieStyle",function(){var e={fill:o(arguments.length<=0?void 0:arguments[0]),lineDash:S(t),lineWidth:t.lineWidth,stroke:t.lineColor};return j({config:l,data:arguments.length<=0?void 0:arguments[0],ruleKey:"rules"}).forEach(function(o){var t=C.reduce(function(t,e){return o[e]&&o[e].show&&(t[e]=o[e]&&o[e].value),v(v({},t),O(t.fill))},{});Object.assign(e,t)}),e}),r=d.show,i=d.type,n=d.patternFill,a=d.lineFill,c=d.patternStroke,s=d.dotCfg,u=d.lineCfg,r&&m(h,"pattern",function(t,e){var o={backgroundColor:e},e=(j({config:l,data:t,ruleKey:"rules"}).forEach(function(t){t=t.fill;o=t.show?{backgroundColor:O(t.value).fill}:o}),r?"line"===i?u:s:"");return{type:i,cfg:v(v({},o),{},{fill:n.fill,fillOpacity:1,strokeOpacity:1,stroke:"line"===i?a.stroke:c.show?c.stroke:"rgba(255,255,255,0)",lineWidth:"line"===i?a.lineWidth:c.show?c.lineWidth:0},e)}})},t.exports});;
Cube("datav:/com/ml-pie-basic/5.4.7/utils",["datav:/npm/lodash/4.17.11/toNumber","datav:/npm/lodash/4.17.11/map","datav:/npm/lodash/4.17.11/isUndefined","datav:/npm/lodash/4.17.11/forEach","datav:/npm/lodash/4.17.11/trim","datav:/npm/lodash/4.17.11/isNull","datav:/npm/lodash/4.17.11/isNumber","datav:/npm/lodash/4.17.11/isNaN","datav:/npm/lodash/4.17.11/unionBy","datav:/npm/d3-format/3.1.0"],function(a,t,n,o,L,e){function i(a){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(a)}function l(a){var t=a.x,n=a.y,o=a.r,a=a.type,L=o/2*Math.sqrt(3),e=o*Math.sin(1/3*Math.PI);return{line:[["M",t-3*o,n],["L",t+3*o,n]],lineEllipsis:[["M",t-3*o,n],["L",t-2*o,n],["M",t-o,n],["L",t,n],["M",t+o,n],["L",t+2*o,n],["M",t+3*o,n],["L",t+4*o,n]],smooth:[["M",t-o,n],["A",o/2,o/2,0,1,1,t,n],["A",o/2,o/2,0,1,0,t+o,n]],smoothEllipsis:[["M",150,100],["C",150,72.4,72.4,50,100,50]],step:[["M",t-o-1,n-2.5],["L",t,n-2.5],["L",t,n+2.5],["L",t+o+1,n+2.5]],stepEllipsis:[["M",t-o-1,n-2.5],["L",t-o+3,n-2.5],["M",t-o/2+2,n-2.5],["L",t,n-2.5],["L",t,n+2.5],["L",t+4,n+2.5],["M",t+o/2+3,n+2.5],["L",t+o+1,n+2.5]],circle:[["M",t,n+o],["A",o,o,0,0,0,t+o,n],["M",t,n+o],["A",o,o,0,1,1,t+o,n]],circleLine:[["M",t-3*o,n],["L",t-o,n],["M",t+o,n],["L",t+3*o,n],["M",t,n+o],["A",o,o,0,0,0,t+o,n],["M",t,n+o],["A",o,o,0,1,1,t+o,n]],circleEllipsis:[["M",t-3*o,n],["L",t-2*o,n],["M",t-o-o/2,n],["L",t-o-2,n],["M",t+o+2,n],["L",t+o+o/2,n],["M",t+3*o,n],["L",t+2*o,n],["M",t,n+o],["A",o,o,0,0,0,t+o,n],["M",t,n+o],["A",o,o,0,1,1,t+o,n]],square:[["M",t-o,n-o],["L",t+o,n-o],["L",t+o,n+o],["L",t-o,n+o],["Z"]],squareLine:[["M",t-3*o,n],["L",t-o,n],["M",t+o,n],["L",t+3*o,n],["M",t-o,n-o],["L",t+o,n-o],["L",t+o,n+o],["L",t-o,n+o],["Z"]],squareEllipsis:[["M",t-3*o,n],["L",t-2*o,n],["M",t-o-o/2,n],["L",t-o-2,n],["M",t+o+2,n],["L",t+o+o/2,n],["M",t+3*o,n],["L",t+2*o,n],["M",t-o,n-o],["L",t+o,n-o],["L",t+o,n+o],["L",t-o,n+o],["Z"]],hexagon:[["M",t,n-o-2],["L",t+L+1,n-o/2-1],["L",t+L+1,n+o/2+1],["L",t,n+o+1+1],["L",t-L-1,n+o/2+1],["L",t-L-1,n-o/2-1],["Z"]],hexagonLine:[["M",t-3*o,n],["L",t-o-(o<=3?1:0),n],["M",t+o+(o<=3?1:0),n],["L",t+3*o,n],["M",t,n-o-2],["L",t+L+1,n-o/2-1],["L",t+L+1,n+o/2+1],["L",t,n+o+1+1],["L",t-L-1,n+o/2+1],["L",t-L-1,n-o/2-1],["Z"]],hexagonEllipsis:[["M",t-3*o,n],["L",t-2*o,n],["M",t-o-o/2,n],["L",t-o-1,n],["M",t+o+1,n],["L",t+o+o/2,n],["M",t+3*o,n],["L",t+2*o,n],["M",t,n-o-2],["L",t+L+1,n-o/2-1],["L",t+L+1,n+o/2+1],["L",t,n+o+1+1],["L",t-L-1,n+o/2+1],["L",t-L-1,n-o/2-1],["Z"]],diamond:[["M",t-o-2,n],["L",t,n-o-2],["L",t+o+2,n],["L",t,n+o+2],["Z"]],diamondLine:[["M",t-3*o,n],["L",t-o-1,n],["M",t+o+1,n],["L",t+3*o,n],["M",t-o-2,n],["L",t,n-o-2],["L",t+o+2,n],["L",t,n+o+2],["Z"]],diamondEllipsis:[["M",t-3*o,n],["L",t-2*o,n],["M",t-o-o/2,n],["L",t-o-2,n],["M",t+o+2,n],["L",t+o+o/2,n],["M",t+3*o,n],["L",t+2*o,n],["M",t-o-2,n],["L",t,n-o-2],["L",t+o+2,n],["L",t,n+o+2],["Z"]],triangle:[["M",t-o,n+e],["L",t,n-e],["L",t+o,n+e],["z"]],triangleLine:[["M",t-3*o,n],["L",t-o+o/2,n],["M",t+o-o/2,n],["L",t+3*o,n],["M",t-o,n+e],["L",t,n-e],["L",t+o,n+e],["z"]],triangleEllipsis:[["M",t-3*o,n],["L",t-2*o,n],["M",t-o-o/2,n],["L",t-o/2,n],["M",t+o/2,n],["L",t+o+o/2,n],["M",t+3*o,n],["L",t+2*o,n],["M",t-o,n+e],["L",t,n-e],["L",t+o,n+e],["z"]],"triangle-down":[["M",t-o,n-e],["L",t+o,n-e],["L",t,n+e],["Z"]],triangleDownLine:[["M",t-3*o,n],["L",t-o+o/2,n],["M",t+o-o/2,n],["L",t+3*o,n],["M",t-o,n-e],["L",t+o,n-e],["L",t,n+e],["Z"]],triangleDownEllipsis:[["M",t-3*o,n],["L",t-2*o,n],["M",t-o-o/2,n],["L",t-o/2,n],["M",t+o/2,n],["L",t+o+o/2,n],["M",t+3*o,n],["L",t+2*o,n],["M",t-o,n-e],["L",t+o,n-e],["L",t,n+e],["Z"]],bowtie:[["M",t-o,n-e],["L",t+o,n+e],["L",t+o,n-e],["L",t-o,n+e],["Z"]],bowtieLine:[["M",t-3*o,n],["L",t-o,n],["M",t+o,n],["L",t+3*o,n],["M",t-o,n-e],["L",t+o,n+e],["L",t+o,n-e],["L",t-o,n+e],["Z"]],bowtieEllipsis:[["M",t-3*o,n],["L",t-2*o,n],["M",t-o-o/2,n],["L",t-o-2,n],["M",t+o+2,n],["L",t+o+o/2,n],["M",t+3*o,n],["L",t+2*o,n],["M",t-o,n-e],["L",t+o,n+e],["L",t+o,n-e],["L",t-o,n+e],["Z"]]}[a]}var r=n("datav:/npm/lodash/4.17.11/toNumber"),s=n("datav:/npm/lodash/4.17.11/map"),M=n("datav:/npm/lodash/4.17.11/isUndefined"),d=n("datav:/npm/lodash/4.17.11/forEach"),p=n("datav:/npm/lodash/4.17.11/trim"),m=n("datav:/npm/lodash/4.17.11/isNull"),c=n("datav:/npm/lodash/4.17.11/isNumber"),f=n("datav:/npm/lodash/4.17.11/isNaN"),u=(n("datav:/npm/lodash/4.17.11/unionBy"),"linear"),h=n("datav:/npm/d3-format/3.1.0").format;return a.exports={transLineDash:function(a){var t=a.lineStyle,n=a.dashedLength,o=a.dashedSpace,L=a.dottedLength,a=a.dottedSpace,e=[];return"solid"===t?e=[1,0]:"dashed"===t?e=[n,o]:"dotted"===t&&(e=[L,a]),e},transformGradientColor:function(a){var t,n,o;return"object"===i(a)?(n=a.type,t=a.value,"flat"===n?{fill:t}:(t=(n=a.value).angle,n=n.stops,o="",s(n,function(a){var t=a.offset,a=a.color;o+="".concat(t/100,":").concat(a," ")}),{fill:"l(".concat(t,") ").concat(p(o))})):{fill:a}},pathDFn:function(){var a=l(arguments.length<=0?void 0:arguments[0]),t="";return d(a,function(a){d(a,function(a){c(a)?t+=a+",":t+=a}),t+=" "}),t},transformSVGGradientColor:function(a){var t="",a=get(a,"fixed.value"),n=a.angle,a=a.stops,o="grad"+ +new Date,t="<defs><linearGradient id='".concat(o,"' gradientTransform='rotate(").concat(n,")'>");return s(a,function(a){t+='<stop offset="'.concat(a.offset,'" stop-color="').concat(a.color,'"/>')}),{gradientHtml:t+="</linearGradient></defs>",id:o}},transNumberFormatterTooltip:function(a){var t=a.v,n=a.type,o=a.format,L=a.prefix,a=a.suffix;return n===u&&"null"!==o?L+h(o)(t)+a:n===u&&"null"===o?L+r(t)+a:n===TIME_TYPE&&"null"!==o?L+moment(t).format(o)+a:L+t+a},isValid:function(a){return!M(a)&&!m(a)&&!f(a)}},a.exports});;
Cube("datav:/com/ml-pie-basic/5.4.7/transform",["datav:/npm/lodash/4.17.11/get","datav:/npm/lodash/4.17.11/map","datav:/npm/lodash/4.17.11/uniqBy","datav:/npm/lodash/4.17.11/isUndefined","datav:/npm/lodash/4.17.11/floor","datav:/npm/lodash/4.17.11/minBy","datav:/npm/lodash/4.17.11/maxBy","datav:/npm/lodash/4.17.11/ceil","datav:/npm/lodash/4.17.11/round","datav:/npm/lodash/4.17.11/filter","datav:/npm/@antv/g2plot/2.4.23/dist/g2plot.min.js"],function(t,e,n,i,o,a){function l(e,t){var n,i=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)),i}function St(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach(function(t){kt(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function kt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Ct=n("datav:/npm/lodash/4.17.11/get"),Ft=n("datav:/npm/lodash/4.17.11/map"),zt=n("datav:/npm/lodash/4.17.11/uniqBy"),Ot=n("datav:/npm/lodash/4.17.11/isUndefined"),Wt=n("datav:/npm/lodash/4.17.11/floor"),jt=n("datav:/npm/lodash/4.17.11/minBy"),Rt=n("datav:/npm/lodash/4.17.11/maxBy"),Mt=n("datav:/npm/lodash/4.17.11/ceil"),Tt=n("datav:/npm/lodash/4.17.11/round"),Pt=n("datav:/npm/lodash/4.17.11/filter"),Bt=n("datav:/npm/@antv/g2plot/2.4.23/dist/g2plot.min.js").measureTextWidth,Xt=n("datav:/com/ml-pie-basic/5.4.7/customRuleStyle"),n=n("datav:/com/ml-pie-basic/5.4.7/utils"),Yt=n.transLineDash,Dt=n.transformGradientColor,Nt=n.pathDFn,Ht=n.transformSVGGradientColor,Lt=n.transNumberFormatterTooltip;return t.exports={transOptionKey:function(Y,D,t){function N(t,e,n){var i=(n=Bt(e,n)).width,n=n.height,o=1,i=(t<i&&(o=Math.min(Math.sqrt(Math.abs(Math.pow(t/2,2)/(Math.pow(i/2,2)+Math.pow(n,2)))),1)),"width:".concat(t,"px;"));return'<div style="'.concat(i,";font-size:").concat(o,"em;line-height:").concat(o<1?1:"inherit",';">').concat(e,"</div>")}var e=D.options,n=e.chart,i=n.margin,H=n.radius,o=n.radiusGroup,a=n.statistic,l=a.show,r=a.centerType,L=a.title,G=a.statisticFormat,c=a.statisticDesc,I=c.statPrefix,q=c.statSuffix,c=a.titleOffset,E=a.contentOffset,U=a.staTitleTextStyle,V=a.staContentTextStyle,A=a.imageSrc,s=a.imageStyle,a=a.imageOffset,m=n.fill,n=n.label,K=n.show,p=n.textStyle,d=n.stroke,f=n.spiderStyle,J=n.labelContent,Q=n.valueFormat,h=n.describe,n=n.labelForm,Z=n.labelContentShow,n=n.position,u=e.legend,$=u.isShow,g=u.layout,y=u.textStyle,v=u.spaceToChart,_=v.spaceChartX,v=v.spaceChartY,x=u.cateLegend,b=x.marker,w=x.markerSpace,S=x.maxItemWidth,x=x.flip,tt=x.show,k=x.textStyle,C=x.pageMarker,et=x.flipColor,nt=x.inactiveFill,it=x.flipTextColor,x=x.maxRow,u=u.continuousLegend,F=u.handler,z=u.track,u=u.label,O=e.animation,ot=O.isShow,W=O.animationEasing,O=O.duration,e=e.tooltip,at=e.statisticActive,j=e.tooltipSet,lt=j.show,rt=j.position,R=j.titleTextStyle,M=j.contentTextStyle,ct=j.trigger,st=j.titleSpace,pt=j.contentSpace,dt=j.suffix,T=j.axisPointer,ft=T.show,T=T.line,P=j.bgBox,mt=P.padding,ht=P.backgroundColor,P=P.border,B=j.series,j=e.active,e=j.show,ut=j.fillSet,gt=ut.show,ut=ut.fill,yt=j.line,X=j.trigger,j=j.selectType,i=i.show?{padding:[i.top,i.right,i.bottom,i.left]}:{padding:"auto"},vt=f.show?{labelLine:{style:{lineWidth:f.lineWidth}}}:{labelLine:null},K=K?{label:St(St({type:n,offset:f.lineHeight,style:St(St({fill:p.color},p),{},{stroke:d.strokeColor,lineWidth:d.lineWidth})},vt),{},{content:function(t){var e;return"init"===Z?(e=Ct(t,J),"value"===J?Lt({v:e,type:"linear",format:Q,prefix:h.prefix,suffix:h.suffix}):h.prefix+e+h.suffix):(e=t.percent,h.prefix+"".concat((100*e).toFixed(0),"%")+h.suffix)},animate:ot&&{appear:{animation:"scale-in-x"===W||"scale-in-y"===W?"zoom-in":W,duration:O},update:{duration:O}}})}:{label:!1},n="top-left"===g||"top"===g||"top-right"===g||"bottom-left"===g||"bottom"===g||"bottom-right"===g?u.alignHorizon:u.alignVerizon,f=S.show?{maxItemWidth:S.width}:{maxItemWidth:null},p=w.openselfSpacing?{itemSpacing:w.itemSpacing}:null,d=w.openselfSpacing?{itemMarginBottom:w.itemMarginBottom}:null,vt=$?{legend:St(St(St({},p),d),{},{position:g,flipPage:tt,offsetX:_,offsetY:v,maxRow:x,pageNavigator:{marker:{style:{size:C.pageSize,fill:C.flipColor||et,inactiveFill:C.inactiveFill||nt}},text:{style:{fontSize:k.fontSize,fill:k.color||it,fontWeight:k.fontWeight,fontFamily:k.fontFamily}}},itemHeight:16,marker:{style:{r:b.size},spacing:Ot(w.openselfSpacing)||w.openselfSpacing?w.spacing:4,symbol:b.shape},itemName:{style:{fill:y.color,fontFamily:y.fontFamily,fontSize:y.fontSize,fontWeight:y.fontWeight,border:0}},handler:{size:F.size,style:{fill:F.fill}},min:"auto"===F.min?Wt(Ct(jt(t,"colorField"),"colorField"),2):parseInt(F.min),max:"auto"===F.max?Mt(Ct(Rt(t,"colorField"),"colorField"),2):parseInt(F.max),rail:{type:z.type,size:z.height,defaultLength:z.width,style:{fill:z.railColor}},label:{align:n,spacing:u.spacing,style:{fill:y.color,fontFamily:y.fontFamily,fontSize:y.fontSize,fontWeight:y.fontWeight,border:0}},slidable:!0,radio:{style:{fill:"rgba(0,0,0,0)",stroke:y.color}}},f)}:{legend:!1},S=ft?{showCrosshairs:!0,crosshairs:{type:"xy",line:{style:{lineDash:Yt(T),lineWidth:T.lineWidth,stroke:T.lineColor}}}}:{showCrosshairs:!1},xt=[],p=(Ft(B,function(t){return xt.push(t.columnName)}),Ct(m,"scale.type")),bt=Nt({x:9,y:9,r:5,type:$&&"ordinal"===p?b.shape:"circle"}),wt=Ct(D,"options.tooltip.tooltipSet.mode"),d=lt?{tooltip:St(St({showTitle:!0,title:"type",fields:"simple"===wt?null:xt,showMarkers:!1,customContent:function(t,p){var e=zt(p,"data").length,d=Tt(p.length/e),f="",e=Ct(p,["0","data","type"],"标题");return Ft(p,function(e,t){var n,i=e.name,o=(e.value,e.color),a=e.data,l="",r=pt,c=(Ft(B,function(t){var e=t.columnName,t=t.displayName;i===e&&(l=t||e)}),t===p.length-1&&(r=0),""),s=Ct(m,"fixed").type;Ct(m,"mapping")||"linearGradient"!==s||(n=(s=Ht(m)).gradientHtml,s=s.id,o="url(#".concat(s,")"),c=n),"simple"===wt?(s=Ct(a,"type"),n=Ct(a,"value"),f+='\n                  <div\n                    style="\n                      display: flex;\n                      justify-content: left;\n                      align-items: center;\n                      font-size: '.concat(M.fontSize,"px;\n                      line-height: ").concat(M.fontSize,"px;\n                      color: ").concat(M.color,";\n                      font-weight: ").concat(M.fontWeight,";\n                      font-family: ").concat(M.fontFamily,';\n                    "\n                    >\n                    <div style="width: 18px;height: 18px; margin-right: 6px; overflow: hidden;">\n                      <svg>\n                        ').concat(c,'\n                        <path\n                          d="').concat(bt,'"\n                          stroke="').concat(o,'"\n                          stroke-opacity="1"\n                          opacity="1"\n                          fill="').concat(o,'"\n                        ></path>\n                      </svg>\n                    </div>\n                    <span style="\n                      display: inline-block;\n                      vertical-align: middle;\n                    ">').concat(s,"： ").concat(n).concat(dt,"</span>\n                  </div>\n                ")):B&&0<B.length&&(a=Pt(B,function(t){return t.columnName===e.name}),s=Ct(a,[0,"suffix"]),f+='\n                    <div\n                      style="\n                        display: flex;\n                        justify-content: left;\n                        align-items: center;\n                        margin-bottom: '.concat(r,"px;\n                        font-size: ").concat(M.fontSize,"px;\n                        line-height: ").concat(M.fontSize,"px;\n                        color: ").concat(M.color,";\n                        font-weight: ").concat(M.fontWeight,";\n                        font-family: ").concat(M.fontFamily,';\n                      "\n                      >\n                      <div style="opacity: ').concat(t%d==0?1:0,';width: 18px;height: 18px; margin-right: 6px; overflow: hidden;">\n                        <svg>\n                          ').concat(c,'\n                          <path\n                            d="').concat(bt,'"\n                            stroke="').concat(o,'"\n                            stroke-opacity="1"\n                            opacity="1"\n                            fill="').concat(o,'"\n                          ></path>\n                        </svg>\n                      </div>\n                      <span style="\n                        display: inline-block;\n                        vertical-align: middle;\n                      ">').concat(l,"： ").concat(Ct(e,"data.".concat(i))).concat(s,"</span>\n                    </div>\n                  "))}),'\n                <div\n                  style="\n                    display: '.concat("simple"===wt?"none":"block",";\n                    font-size: ").concat(R.fontSize,"px;\n                    line-height: ").concat(R.fontSize,"px;\n                    color: ").concat(R.color,";\n                    font-weight: ").concat(R.fontWeight,";\n                    font-family: ").concat(R.fontFamily,";\n                    margin-bottom: ").concat(st,'px;\n                  "\n                >').concat(e,"</div>\n                ").concat(f,"\n            ")},position:rt},S),{},{domStyles:{"g2-tooltip":{backgroundColor:ht,border:"".concat(P.borderWidth,"px ").concat(P.borderStyle," ").concat(P.borderColor),padding:"".concat(mt.paddingY,"px ").concat(mt.paddingX,"px"),borderRadius:"".concat(P.borderRadius,"px"),boxShadow:"none"}}})}:{tooltip:!1},g=ot?{animation:{appear:{animation:W,duration:O},update:{duration:O}}}:{animation:!1},tt=gt?Dt(ut):null,_=kt({},"click"===X?"selected":"active",!!e&&{style:St({lineWidth:yt.lineWidth,lineDash:Yt(yt),stroke:yt.lineColor},tt)}),v="multi"===j,x=!Ot(o)&&0!==o.innerRadius&&l&&"text"===r?{statistic:{title:{offsetX:c.offsetX,offsetY:c.offsetY,style:St({},U),customHtml:function(t,e,n){var t=t.getBoundingClientRect(),i=t.width,t=t.height,i=Math.sqrt(Math.pow(i/2,2)+Math.pow(t/2,2)),t=n?n.type:L;return N(i,t,St({},U))}},content:{offsetX:E.offsetX,offsetY:E.offsetY,style:St({},V),customHtml:function(t,e,n,i){t=t.getBoundingClientRect().width,n=n?n.value:i.reduce(function(t,e){return t+e.value},0),i=Lt({v:n,type:"linear",format:G,prefix:I,suffix:q});return N(t,i,St({},V))}}}}:{statistic:null},et=!Ot(o)&&0!==o.innerRadius&&l&&"image"===r?{annotations:[{type:"html",html:'<div>\n        <img\n        style="width:'.concat(s.width,"px;\n        height:").concat(s.height,"px;\n        opacity:").concat(s.opacity,";\n        border-radius:").concat(s.borderRadius,'px;\n        position:absolute;\n        left:50%;\n        top:50%;\n        transform:translate(-50%,-50%)"\n        src=').concat(A,">\n        </div>"),position:["".concat(a.positionX,"%"),"".concat(a.positionY,"%")],offsetX:a.offsetX,offsetY:a.offsetY}]}:{annotations:null},C=Ot(o)?{radius:H/100}:{radius:o.outerRadius/100,innerRadius:o.innerRadius/100},nt=St(St(St(St(St(St(St(St({data:Ft(t,function(t){return St(St({},t),{},{type:String(t.type)})}),angleField:"value",autoFit:!0},i),C),{},{supportCSSTransform:!0,rawFields:["type","value","colorField"]},K),vt),d),{},{state:St({default:{style:{lineWidth:2,fillOpacity:1,stroke:"yellow",fill:"green"}}},_),interactions:[{type:"element-selected",enable:"click"===X&&v},{type:"element-single-selected",enable:"click"===X&&!v},{type:"element-active",enable:"hover"===X&&v},{type:"element-single-active",enable:"hover"===X&&!v},{type:"tooltip",cfg:{start:[{trigger:"element:".concat(ct),action:"tooltip:show"}]}},!Ot(o)&&0!==o.innerRadius&&at&&l&&"text"===r&&{type:"pie-statistic-active"}]},g),x),et);return Xt({props:nt,guiConfig:Y,data:t}),nt}},t.exports});;
Cube("datav:/com/ml-pie-basic/5.4.7",["datav:/npm/bcore/0.0.22/event","datav:/npm/lodash/4.17.11/get","datav:/npm/lodash/4.17.11/set","datav:/npm/lodash/4.17.11/cloneDeep","datav:/npm/lodash/4.17.11/filter","datav:/npm/lodash/4.17.11/every","datav:/npm/lodash/4.17.11/includes","datav:/npm/lodash/4.17.11/some","datav:/npm/lodash/4.17.11/map","datav:/npm/lodash/4.17.11/isArray","datav:/npm/lodash/4.17.11/defaultsDeep","datav:/npm/lodash/4.17.11/floor","datav:/npm/lodash/4.17.11/isUndefined","datav:/npm/lodash/4.17.11/isEmpty","datav:/npm/lodash/4.17.11/isEqual","datav:/npm/lodash/4.17.11/toNumber","datav:/npm/lodash/4.17.11/orderBy","datav:/npm/lodash/4.17.11/chunk","datav:/npm/@antv/g2plot/2.4.23/dist/g2plot.min.js"],function(t,e,i,o,a,n){function l(e,t){var i,o=Object.keys(e);return Object.getOwnPropertySymbols&&(i=Object.getOwnPropertySymbols(e),t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),o.push.apply(o,i)),o}function m(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?l(Object(i),!0).forEach(function(t){v(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):l(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}function v(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var s=i("datav:/npm/bcore/0.0.22/event"),y=i("datav:/npm/lodash/4.17.11/get"),r=i("datav:/npm/lodash/4.17.11/set"),c=i("datav:/npm/lodash/4.17.11/cloneDeep"),h=i("datav:/npm/lodash/4.17.11/filter"),p=i("datav:/npm/lodash/4.17.11/every"),d=i("datav:/npm/lodash/4.17.11/includes"),f=i("datav:/npm/lodash/4.17.11/some"),u=i("datav:/npm/lodash/4.17.11/map"),g=i("datav:/npm/lodash/4.17.11/isArray"),S=i("datav:/npm/lodash/4.17.11/defaultsDeep"),b=i("datav:/npm/lodash/4.17.11/floor"),C=i("datav:/npm/lodash/4.17.11/isUndefined"),x=i("datav:/npm/lodash/4.17.11/isEmpty"),w=i("datav:/npm/lodash/4.17.11/isEqual"),O=i("datav:/npm/lodash/4.17.11/toNumber"),k=i("datav:/npm/lodash/4.17.11/orderBy"),D=i("datav:/npm/lodash/4.17.11/chunk"),F=i("datav:/npm/@antv/g2plot/2.4.23/dist/g2plot.min.js"),j=F.Pie,F=F.G2,z=i("datav:/com/ml-pie-basic/5.4.7/transform").transOptionKey,i=i("datav:/com/ml-pie-basic/5.4.7/utils"),T=i.transformGradientColor,N=i.isValid;return F.registerInteraction("element-single-active",{start:[{trigger:"element:mouseenter",action:"element-active:active"}],end:[{trigger:"element:mouseleave",action:"element-active:reset"}]}),F.registerInteraction("element-active",{start:[{trigger:"element:mouseenter",action:"element-active:toggle"}]}),t.exports=s.extend(function(t,e){this.config={options:{chart:{statistic:{show:!0,centerType:"text",title:"总计",staTitleTextStyle:{fontSize:20,color:"#ddd",fontWeight:"bold",fontFamily:"Arial"},titleOffset:{offsetX:0,offsetY:-4},statisticFormat:"null",statisticDesc:{statPrefix:"￥ ",statSuffix:""},staContentTextStyle:{fontSize:20,color:"#ddd",fontWeight:"bold",fontFamily:"Arial"},contentOffset:{offsetX:0,offsetY:4}},fill:{scale:{custom:!1,domain:["分类一","分类二","深圳"],excepted:"yellow",range:["#20878e","#d6a974","#7b4d2b"],scheme:"cat-1",type:"ordinal"}},label:{valueFormat:"null",describe:{prefix:"",suffix:""}},isCombine:{show:!0,piecesCount:50,defineType:"其他"},pattern:{show:!1}},legend:{spaceToChart:{spaceChartX:0,spaceChartY:0},cateLegend:{maxItemWidth:{show:!1,width:100},flip:{flipColor:"#000",inactiveFill:"#000",flipTextColor:"rgb(144, 160, 174)",textStyle:{fontFamily:"Arial",fontWeight:"normal",fontSize:12},pageMarker:{pageSize:12},maxRow:1},markerSpace:{itemSpacing:null,itemMarginBottom:null}},continuousLegend:{label:{alignVerizon:"rail"}}},tooltip:{statisticActive:!1,tooltipSet:{suffix:"",series:[{columnName:"type",displayName:"类别"},{columnName:"value",displayName:"数量"}]},active:{fill:{default:{type:"linearGradient",value:{angle:90,stops:[{offset:0,color:"#00ff95"},{offset:100,color:"rgba(88, 142, 233, 0.5)"}]}}},fillSet:{show:!1,fill:{default:{type:"linearGradient",value:{angle:90,stops:[{offset:0,color:"#00ff95"},{offset:100,color:"rgba(88, 142, 233, 0.5)"}]}}}}}},condition:{customStyle:[{rules:{operator:"OR",enabled:!1,expressions:[{operator:"AND",expressions:[["colorField","eq",700]]}]},fill:{show:!0,value:"#ff0000",type:"flat"}}]}}},this.container=t,this.apis=e.apis,this._data=null,this.chart=null,this.guiConfig=null,this.init(e)},{init:function(t){this.mergeConfig(t)},initChart:function(t){this.chart=new j(this.container,t),this.chart.render()},render:function(t,e){var i,o=this,a=this.mergeConfig(e);(t=this.data(t,a))&&(i=(e=y(a,"options.chart.isCombine")).show,e=e.piecesCount,i&&e<t.length-1&&(t=this.combineData(t)),this.guiConfig=z(this.config,a,c(t)),this.chart&&this.chart.destroy(),this.initChart(this.guiConfig),this.chart.off(),a.options.tooltip&&a.options.tooltip.active&&a.options.tooltip.active.trigger&&a.options.tooltip.active.show&&(i=a.options.tooltip.active.trigger,this.chart.on("element:".concat("click"===i?i:"mouseenter"),function(){var t=h(u(o.chart.getStates(),function(t){return("selected"===t.state||"active"===t.state)&&t.data}),Boolean);o.emit("itemSelect","multi"===a.options.tooltip.active.selectType?t:t&&t[0])})),this.chart.on("contextmenu",function(t){var e=y(t,"data.data");o.emit("onContextMenu",e,t)}),this.chart.on("legend-item:click",function(t){var t=y(t,"target.cfg.delegateObject.item"),e=t.value,t=t.unchecked;o.emit("legendClick",{value:e,checked:!t}),o.emit("legendSelect",{value:e,checked:!t})}))},combineData:function(t){var e=y(this.config,"options.chart.isCombine"),i=e.piecesCount,e=e.defineType,t=c(t),t=k(t,["value"],["desc"]),t=D(t,i),i=t[0],t=t[1],o={type:e,value:0,colorField:y(t,[0,"colorField"])};return u(t,function(t){return o.value+=t.value}),i.push(o),i},resize:function(t,e){},setColors:function(){},data:function(t,e){t&&(this.__data=t);var i=y(this.config,"options.chart.fill.scale.type"),o=y(this.config,"options.chart.fill.mapping");return this._data=c(this.__data),g(this._data)&&this._data.filter(function(t){return N(t.type)&&N(t.value)}).map(function(t){return N(t.colorField)&&(t.colorField="ordinal"!==i&&o?O(t.colorField):""+t.colorField),t.value&&(t.value=O(t.value)),t})},mergeConfig:function(t){return t&&(0===Object.keys(this.config).length?this.config=t:(this.config.theme=S(t.theme||{},this.config.theme),this.setColors(),y(t,"options.chart.fill.scale.range")&&r(this.config,"options.chart.fill.scale.range",y(t,"options.chart.fill.scale.range")),y(t,"options.condition")&&r(this.config,"options.condition",y(t,"options.condition")),y(t,"options.tooltip.tooltipSet.series")&&(t.options.tooltip.tooltipSet.series=t.options.tooltip.tooltipSet.series.map(function(t){return t.columnName=t.columnName||"type",t.displayName=t.displayName||"类型",t.suffix=t.suffix||"",t}),r(this.config,"options.tooltip.tooltipSet.series",y(t,"options.tooltip.tooltipSet.series"))),this.config=S(t||{},this.config))),this.config},getColorableConfig:function(t){var e,i,o;return!t||x(t)?{}:(e=t.textColor,i=t.axisColor,o=t.palette,t=t.bgColor,o&&0<o.length&&o[b(o.length/2)],{options:{chart:{fill:{scale:{range:u(y(this.config,"options.chart.fill.scale.range"),function(t,e){return o[e]||o[e%o.length]})}},label:{textStyle:{color:e},stroke:{strokeColor:e}}},legend:{textStyle:{color:i},cateLegend:{flip:{show:!0,textStyle:{color:e},pageMarker:{flipColor:t,inactiveFill:t}}},continuousLegend:{track:{railColor:t},handler:{fill:i}}}}})},getThemableConfig:function(t,e){var i,o,a,n,l,s,r,c,h,p=this.config.options,d=p.chart.label.textStyle,f=p.tooltip,p=p.legend,e=e||{},u=e.color,g=e.font,e=e.complexity,u=this.getColorableConfig(u||t),t={},d=(g&&(i=function(t,e){return void 0===y(g,t)?{}:v({},e,y(g,t))},a="family",n="fontFamily",l="weight",s="fontWeight",r="color.primary",c="color.secondary",h="color",t={options:{chart:{label:{textStyle:m(m(m({fontSize:y(g,o="size",0)+d.fontSize},i(a,n)),i(l,s)),i(r,h))}},tooltip:{tooltipSet:{titleTextStyle:m(m(m({fontSize:y(g,o,0)+f.tooltipSet.titleTextStyle.fontSize},i(a,n)),i(l,s)),i(r,h)),contentTextStyle:m(m(m({fontSize:y(g,o,0)+f.tooltipSet.contentTextStyle.fontSize},i(a,n)),i(l,s)),i(r,h))}},legend:{textStyle:m(m(m({fontSize:y(g,o,0)+p.textStyle.fontSize},i(a,n)),i(l,s)),i(c,h)),cateLegend:{flip:{textStyle:m(m(m({fontSize:y(g,o,0)+p.cateLegend.flip.fontSize},i(a,n)),i(l,s)),i(c,h))}}}}}),{});return"L0"===e?d={options:{chart:{label:{show:!1}},tooltip:{tooltipSet:{show:!0},active:{show:!0}},legend:{isShow:!1}}}:"L1"===e?d={options:{chart:{label:{show:!1}},tooltip:{tooltipSet:{show:!0},active:{show:!0}},legend:{isShow:!0}}}:"L2"===e&&(d={options:{chart:{label:{show:!0}},tooltip:{tooltipSet:{show:!0},active:{show:!0}},legend:{isShow:!0}}}),S({},d,t,u)},handleNonstandardData:function(t){var i=["type","value","colorField"],t=c(t);return h(t,function(t){return p(t,function(t,e){return d(i,e)})})},isHighlight:function(t){var e=t.item,t=t.data;return f(t,function(t){return f([e],t)})},highlight:function(t){var e=t.data,t=t.style;if(Object.keys(e).length<=0)return!1;var i=this,o=y(this.config,"options.tooltip.active"),a=o.show,n=o.selectType,l=o.fillSet,s=l.show,l=l.fill,r=o.line,o="click"===o.trigger?"selected":"active",s=C(t)||x(t)?{fillStyle:s?T(l).fill:"",stroke:r.lineColor}:m({},t),l=v({},o,!!a&&{style:m({},s)}),c=(this.chart.update(m(m({},this.guiConfig),{},{state:m(m({},this.guiConfig.state),l)})),g(e)?e:[e]),c=w(this.prevOriginData,e)?this.prevFilterData:this.handleNonstandardData(c);c="single"===n?[c[0]]:c,this.chart.setState(o,function(t){return i.isHighlight({item:t,data:c})}),this.prevOriginData=e,this.prevFilterData=c},reset:function(){var t="click"===y(this.config,"options.tooltip.active").trigger?"selected":"active";this.chart&&this.chart.destroy(),this.initChart(this.guiConfig),this.chart.setState(t,function(){return!1}),this.render(this._data,this.config)},destroy:function(){this.chart&&this.chart.destroy(),this.chart=null,this._data=null,this.container&&(this.container.innerHTML="")}}),t.exports});