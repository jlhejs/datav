// env=undefined => env=publish 
Cube("datav:/com/ml-line-double/3.0.20/defaultConf",[],function(o,t,e,a,i,r){return o.exports={chart:{margin:{top:0,bottom:0,left:0,right:20},emptyData:!1,loadAmount:2e3,legend:{show:!0,textarea:{fontFamily:"Microsoft Yahei",fontWeight:"normal",fontSize:10,color:"rgba(255,255,255,0.5)"},layout:{margin:{horiInterval:8,vertiInterval:0},loc:"bottom-center"}}},axis:{xaxis:{isShow:!0,type:"time",dataFormat:"%Y/%m/%d %H:%M:%S",boundaryGap:0,interval:1,extent:{min:"auto",max:"auto"},label:{show:!0,format:"%m月",textarea:{fontFamily:"Microsoft Yahei",fontWeight:"normal",fontSize:10,color:"rgba(255,255,255,0.6)"},display:{dy:8,angle:"0",amount:5,unit:""}},axisLine:{show:!0,color:"rgba(255,255,255,0.5)"},grid:{show:!1,color:"#fff"}},yaxis:{isShow:!0,extent:{min:"0",max:"dataMax"},label:{show:!0,format:".0f",textarea:{fontFamily:"Microsoft Yahei",fontWeight:"normal",fontSize:10,color:"rgba(255,255,255,0.6)"},display:{angle:"0",amount:6,unit:"单位"}},axisLine:{show:!0,color:"rgba(255,255,255,0.5)"},grid:{show:!1,color:"#434343"}},zaxis:{isShow:!0,extent:{min:"0",max:"dataMax"},label:{show:!0,format:".0f",textarea:{fontFamily:"Microsoft Yahei",fontWeight:"normal",fontSize:10,color:"rgba(255,255,255,0.6)"},display:{angle:"0",amount:6,unit:"单位"}},axisLine:{show:!0,color:"rgba(255,255,255,0.5)"},grid:{show:!1,color:"#434343"}}},series:{series1:{serieName:"系列Y",line:{width:1,curve:"polyline",style:"solid",color:"#00baff"},point:{show:!0,radius:4,color:"#00baff"},area:{show:!1,color:{type:"flat",value:"#00BAFF"}},numericalLabel:{show:!1,textStyle:{fontFamily:"Microsoft Yahei",fontWeight:"normal",fontSize:10,color:"#FFFFFF"}}},series2:{serieName:"系列Z",line:{width:1,curve:"polyline",style:"solid",color:"#3DE7C9"},point:{show:!0,radius:4,color:"#3DE7C9"},area:{show:!0,color:{type:"linearGradient",value:{angle:90,stops:[{offset:0,color:"#3de7c9"},{offset:100,color:"rgba(61,231,201,0)"}]}}},numericalLabel:{show:!1,textStyle:{fontFamily:"Microsoft Yahei",fontWeight:"normal",fontSize:10,color:"#FFFFFF"}}}},others:{animation:{show:!0,setting:{animationEasing:"cubicInOut",animationAfterPreviousSeries:!1},enter:{animationDuration:1e3},update:{animationDurationUpdate:300,animationUpdateFromPrevious:!0}},tooltip:{show:!0,trigger:{type:"item",action:"hover"},textStyle:{fontFamily:"Microsoft Yahei",fontWeight:"normal",fontSize:14,color:"#fff"},hideDelay:100,axisPointer:{show:!0,_type:"line",lineStyle:{width:1,_type:"solid",color:"#f00"}},bgBox:{backgroundColor:"rgba(0, 0, 0, 0.65)",customSize:{show:!1,width:150,height:50},padding:10,offset:{xOffset:6,yOffset:10},border:{borderWidth:0,borderColor:"#333"}}}}},o.exports});;
Cube("datav:/com/ml-line-double/3.0.20/line",["datav:/com/maliang-utils/0.0.24","datav:/npm/bcore/0.0.22/event","datav:/npm/jquery/2.1.4","datav:/npm/lodash/4.17.11","datav:/npm/lodash/4.17.11/clone","datav:/npm/lodash/4.17.11/cloneDeep","datav:/npm/dchart-line-with-point-area-double/0.2.35","datav:/npm/d3/3.5.12/d3"],function(t,e,a,i,o,n){var c=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a,i=arguments[e];for(a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t},r=a("datav:/npm/bcore/0.0.22/event"),l=a("datav:/npm/jquery/2.1.4"),f=a("datav:/npm/lodash/4.17.11"),u=a("datav:/npm/lodash/4.17.11/clone"),x=a("datav:/npm/lodash/4.17.11/cloneDeep"),s=a("datav:/npm/dchart-line-with-point-area-double/0.2.35"),g=a("datav:/com/maliang-utils/0.0.24"),y=a("datav:/npm/d3/3.5.12/d3"),h=Symbol();function m(t){return-1!==t.toString().indexOf(".")?t.toLocaleString():t.toString().replace(/(\d)(?=(?:\d{3})+$)/g,"$1,")}function d(t){return f.isNumber(t)&&!f.isNaN(t)&&f.isFinite(t)?t:null}function p(t){var e=t.serie,a=t.color,i=t.value,t=t.key;return'<div><span style="display:inline-block; margin-right:5px; border-radius:2px; width:10px; height:10px;\n        background-color:'+(a||e&&e.color&&e.color.value||"#ccc")+'"></span>\n        '+(t?t+": ":"")+(i&&i.value||i)+"</div>"}function b(t){var e=x(t);e.show=t.isShow;var a=t.extent;null!==d(f.toNumber(a.max))?(e.max=+a.max,e.maxNeedNice=!1):"dataMax"===a.max?(e.max=null,e.maxNeedNice=!1):(e.max=null,e.maxNeedNice=!0),null!==d(f.toNumber(a.min))?(e.min=+a.min,e.minNeedNice=!1):"dataMin"===a.min?(e.min=null,e.minNeedNice=!1):(e.min=0,e.minNeedNice=!0);a=t.label;if(Object.assign(e,c({},a.textarea,{fontColor:a.textarea.color})),e.textShow=a.show,t.format&&t.format.includes("%")){switch(t.format){case"%":e.tickFormat=".0f";break;case".1%":e.tickFormat=".2f";break;default:e.tickFormat=".4f"}e.format=t.format}else e.format=null,e.tickFormat=t.format&&t.format.includes("toThousands")?".0f":t.format||function(t){return t};e.assistLine=t.axisLine.show,e.assistLineColor=t.axisLine.color;a=a.display;return e.ticks=a.amount||null,e.dy=a.dy,e.rotate=f.toNumber(a.angle),e.label=e.textShow&&a.unit||null,e.net=t.grid.show,e.netColor=t.grid.color,e}function v(t,e,a){var i,o=u(t);return o.color=t.line.color,o.colorWidth=t.line["stroke-width"]||t.line.width,o.style=t.line.style,o.point.hide=!t.point.show,o.area.hide=!t.area.show,t.line&&"smooth"===t.line.curve&&(o.interpolate=g.getCustomSmoothSpline),o.label=c({show:t.numericalLabel.show},t.numericalLabel.textStyle),e.format&&e.format.includes("%")&&(i=y.format(e.format),o.label&&(o.label.format=function(t,e){return i(t[a][e]&&t[a][e].value)})),[o]}return t.exports=r.extend(function(t,e){this.config={theme:{},chart:{},tooltip:{show:!0,trigger:"item",triggerMethod:"hover",beforeFormat:null,formatter:"doubleLineChart",enterFocus:!0,axisPointer:{show:!0,_type:"line",lineStyle:{color:"#f00",width:1,_type:"solid"}},hideDelay:300,textStyle:{color:"#fff",fontSize:14,fontFamily:"Microsoft Yahei",fontWeight:"normal"},bgBox:{color:"rgba(0, 0, 0, 0.65)",padding:10,xOffset:6,yOffset:10,customSize:{show:!1,width:300,height:150},borderColor:"#333",borderWidth:0}}},this.container=l(t),this.apis=e.apis,this._data=null,this.chart=null,this.init(e)},{init:function(t){this.mergeConfig(t),this.updateLayout(),this.chart=new s(this.container[0],this._getChartOptions()),this.chart.updateBeforeRender=this.chart.beforeRender},_getChartOptions:function(t){t=t||this._data;var e=x(this.config),a=e.axis,i=e.chart,o=e.series,n=e.others,r={};r.chart=u(i);var l=a.xaxis,s=a.yaxis,a=a.zaxis;r.xaxis=function(t,e){var a=x(t),i=t.label;Object.assign(a,c({},i.textarea,{fontColor:i.textarea.color})),a.show=t.isShow,a.textShow=i.show,"time"===a.type?a.tickFormat=y.time.format(t.label.format):"defaults"===a.type?a.tickFormat=t.label.format:(a.tickFormat=null,a.ticks=a.ticks||e&&e.length||null);a.padding="category"===a.type?[t.interval,t.boundaryGap]:null,a.format=t.dataFormat,a.blank=0!=+t.boundaryGap,a.blankDis=t.boundaryGap;var o=t.extent;a.max=null!==o.max?o.max:null,a.min=null!==o.min?o.min:null;var n=o.max,r=o.min;"time"===a.type&&(a.max&&"auto"!==a.max?a.max=o.max:a.max=null,a.min&&"auto"!==a.min?a.min=o.min:a.min=null);{var l,s;"defaults"===a.type&&(a.blank&&e?(l=f.map(e,"x"),s=f.max(l),e=f.min(l),l=(s-e)*a.blankDis,s=s+l,e=e-l,a.max&&"auto"!==a.max?a.max=f.toNumber(n)+l:a.max=s,a.min&&"auto"!==a.min?a.min=f.toNumber(r)-l:a.min=e):(a.max?a.max=d(f.toNumber(o.max)):a.max=null,a.min?a.min=d(f.toNumber(o.min)):a.min=null))}i=i.display;return a.ticks=i.amount,a.dy=i.dy,a.rotate=f.toNumber(i.angle),a.label=a.textShow&&""!==i.unit?i.unit:null,a.assistLine=t.axisLine.show,a.assistLineColor=t.axisLine.color,a.net=t.grid.show,a.netColor=t.grid.color,a}(l,t),r.yaxis=b(s),r.zaxis=b(a),r.series=v(o.series1,r.yaxis,"y"),r.series2=v(o.series2,r.zaxis,"z"),r.legend=i.legend,r.legend.show=!1,r.beforeLayout=null,r.margin=i.margin;l=i.margin,s=l.right,a=l.top;return r.margin.top=a||r.yaxis.show&&r.yaxis.textShow&&r.yaxis.label&&3*r.yaxis.fontSize||0,r.margin.right=s||r.xaxis.show&&r.xaxis.textShow&&r.xaxis.label&&r.xaxis.label.length*r.xaxis.fontSize*2||0,r.hiddenEmptyData=!i.emptyData,Object.assign(r,(o=n.animation,l={},a=o.setting,s=o.enter,i=o.update,Object.assign(l,c({},a)),Object.assign(l,c({},i)),Object.assign(l,c({},s)),l.animation=o.show,l)),r.tooltip=function(t,s,c){if(!t)return{};var u=x(t),e=t.trigger,a=t.axisPointer,i=t.textStyle,o=t.bgBox;e&&e.action&&(u.triggerMethod=e.action),e&&e.type&&(u.trigger=e.type),t.beforeFormat&&(u.beforeFormat=t.beforeFormat);var n=f.get(s,"axis.yaxis.format"),e=f.get(s,"axis.zaxis.format"),h=function(t){return t},m=function(t){return t};n&&n.includes("%")&&(h=y.format(""+n));e&&e.includes("%")&&(m=y.format(""+e));var d=!s.chart.emptyData;u.formatter=function(t,e,a){var i='<div class="dchart-tooltip">',o=s.series,n=o.series1,r=o.series2,l=[],o=c.length;return"axis"===u.trigger?(t.x&&l.push("<b>"+t.x.toString()+"</b>"),t.y&&t.y.forEach(function(t,e){var a=g.getDisplayValueFromData(t&&t.value);d&&t.__isNull||l.push(p({color:n&&n.line.color,value:h(a)}))}),t.z&&t.z.forEach(function(t,e){var a=g.getDisplayValueFromData(t&&t.value);d&&t.__isNull||l.push(p({color:r&&r.line.color,value:m(a)}))})):l.push(p({color:(1<=a/o?n:r).line.color,value:1<=a/o?h(t.y&&t.y[0].value||0):m(t.z&&t.z[0].value||0),key:t.x.toString()})),i+=l.join("")+"</div>"},void 0!==t.enterFocus&&(u.enterFocus=t.enterFocus),void 0!==t.hideDelay&&(u.hideDelay=t.hideDelay),a&&a._type&&(u.axisPointer=a._type),a&&a.lineStyle&&(u.lineStyle=a.lineStyle);i&&(u.color=i.color,u.fontSize=i.fontSize+"px",u.fontFamily=i.fontFamily,u.fontWeight=i.fontWeight);o&&(t=o.offset,a=o.border,i=o.customSize,u.backgroundColor=o.backgroundColor,t&&void 0!==t.xOffset&&(u.xOffset=t.xOffset),t&&void 0!==t.yOffset&&(u.yOffset=t.yOffset),i&&(u.autoSize=!i.show,u.width=i.width,u.height=i.height),a&&(a.borderColor&&(u.borderColor=a.borderColor),void 0!==a.borderWidth&&(u.borderWidth=a.borderWidth)));return u}(n.tooltip,e,t),r},render:function(t,e){e=this.mergeConfig(e),(t=this.data(t,e))&&t.length&&(this.chart.render(t,this._getChartOptions(t)),this.updateStyle())},resize:function(t,e){this.updateLayout(t,e),this.chart.render(this.data(),{width:t,height:e}),this.updateStyle()},setColors:function(){},setOriginalData:function(t){this[h]=t},getOriginalData:function(){return this[h]},data:function(t,e){e=this.mergeConfig(e),t&&this.setOriginalData(t),t=t||this.getOriginalData();var a=e&&e.chart&&e.chart.loadAmount||2e3;a&&(t=t.slice(0,a));var i=!e.chart.emptyData;return t&&t.length&&(this.__data=f.cloneDeep(t).map(function(t){return t.y={value:t.y||0,data:f.omit(t,"z"),__isNull:i&&!t.y},t.z={value:t.z||0,data:f.omit(t,"y"),__isNull:i&&!t.z},t})),this.hasS(this.__data)?this._data=g.threeD2Two(this.__data,"x","y","s",g.getSeriesValue(this.config.series,"value"),"time"===this.config.xaxis.label.category&&function(t,e){return t<e?-1:1}):this._data=f.clone(this.__data),this._data},mergeConfig:function(t){return t&&(this.config.theme=f.defaultsDeep(t.theme||{},this.config.theme),this.setColors(),this.config=f.defaultsDeep(t||{},this.config)),this.config},updateLayout:function(){},updateStyle:function(){var e,a,t,i,o,n=this.chart.el;n&&(n.selectAll(".area-g .serie").style("stroke","none"),n.select(".con-svg").style("background","transparent"),n.selectAll(".series:not(.area-g):not(.scatterplot-g):not(.area2-g):not(.scatterplot2-g) .serie").style("fill","none"),n.selectAll(".area-g .serie, .area2-g .serie").style("stroke","none"),i=f.get(this.config,"axis.yaxis.format"),o=f.get(this.config,"axis.zaxis.format"),i&&i.includes("%")?(e=y.format(""+i),n.selectAll(".axis2 .tick text").text(function(t){return f.isFunction(e)&&e(t)||t})):i&&i.includes("toThousands")&&n.selectAll(".axis2 .tick text").text(function(t){return f.isFunction(m)&&m(t)||t}),o&&o.includes("%")?(a=y.format(""+o),n.selectAll(".axis3 .tick text").text(function(t){return f.isFunction(a)&&a(t)})):o&&o.includes("toThousands")&&n.selectAll(".axis3 .tick text").text(function(t){return f.isFunction(m)&&m(t)||t}),t=f.get(this.config,"axis.xaxis.label.textarea.fontFamily"),i=f.get(this.config,"axis.yaxis.label.textarea.fontFamily"),o=f.get(this.config,"axis.zaxis.label.textarea.fontFamily"),n.selectAll(".axis1 .tick text").style("font-family",t),n.selectAll(".axis2 .tick text").style("font-family",i),n.selectAll(".axis3 .tick text").style("font-family",o))},clear:function(){this.chart&&this.chart.empty()},destroy:function(){this.chart&&this.chart.off(),this.chart&&this.chart.destroy(),this._data=this.__data=null},updateOptions:function(t){this.mergeConfig(t),this.render()},hasS:function(t){var e=0;return f.map(t,function(t){void 0!==t.s&&e++}),e===t.length}}),t.exports});;
Cube("datav:/com/ml-line-double/3.0.20",["datav:/com/legend/0.1.4","datav:/npm/bcore/0.0.22/event","datav:/npm/jquery/2.1.4","datav:/npm/lodash/4.17.11/toNumber","datav:/npm/lodash/4.17.11/clone","datav:/npm/lodash/4.17.11/cloneDeep","datav:/npm/lodash/4.17.11/defaultsDeep","datav:/npm/lodash/4.17.11/isFunction"],function(t,e,i,n,h,a){var o=i("datav:/npm/bcore/0.0.22/event"),s=i("datav:/npm/jquery/2.1.4"),r=i("datav:/npm/lodash/4.17.11/toNumber"),c=i("datav:/npm/lodash/4.17.11/clone"),l=i("datav:/npm/lodash/4.17.11/cloneDeep"),d=i("datav:/npm/lodash/4.17.11/defaultsDeep"),g=i("datav:/npm/lodash/4.17.11/isFunction"),m=i("datav:/com/ml-line-double/3.0.20/line"),u=i("datav:/com/legend/0.1.4"),p=i("datav:/com/ml-line-double/3.0.20/defaultConf");function f(t){if(!t||!t.series)return[];var e=t.series,i=e.series1,t=e.series2,e=[];return i&&e.push({showName:i.serieName,color:i.line.color}),t&&e.push({showName:t.serieName,color:t.line.color}),e}return t.exports=o.extend(function(t,e){this.config=l(p),this.container=s(t).css("padding","10px 0"),this.chart=null,this.legend=null,this.init(e)},{init:function(t){var e=t&&(t.options||t);this.apis=e.apis;var i=this.mergeConfig(e),t=i.chart.legend,e=t.layout.loc.split("-")[0];this.chartDom=s('<div class="dchart-bar-basic" style="width: 100%;"></div>'),this.legendDom=s('<div class="dchart-legend" style="left: 0;width: 100%;"></div>'),"bottom"===e?(this.container.append(this.chartDom),this.container.append(this.legendDom)):(this.container.append(this.legendDom),this.container.append(this.chartDom)),this.legend=new u(this.legendDom[0],t),this.legend.render(f(i),t),this.chartDom.height(this.container.height()-(t.show&&this.legendDom.height()||0)),this.chart=new m(this.chartDom[0],l(i)),this.legendDom.css("display",t.show?"block":"none"),this._bindEvent()},render:function(t,e){e=e&&(e.options||e),e=this.mergeConfig(e);(t=this.data(t))&&t.length&&(this.legend.render(f(e),e.chart.legend),this.config.chart.height=this.container.height()-(this.config.chart.legend.show&&this.legendDom.height()||0),this.chartDom.height(this.config.chart.height),t&&this.chart.render(t,e),this._cfg=e)},updateOptions:function(t){var e=(t&&(t.options||t)).chart.legend,i=this.config.chart.legend;_.isEqual(i,e)||this.updateLegendLayout(e,!0),this.render(null,t)},updateStyle:function(){},setColors:function(){},data:function(t){return t&&(this._data=c(t),this._data.length&&this._data.forEach(function(t){t.y=r(t.y)})),this._data},mergeConfig:function(t){return t&&(this.config.theme=d(t.theme||{},this.config.theme),this.setColors(),t.series&&(this.config.series=t.series),this.config=d(t||{},this.config)),this.config},resize:function(t,e){this.chart.resize(t,e-(this.config.chart.legend.show&&this.legendDom.outerHeight()||0)-20)},updateLegendLayout:function(t,e){var i=this.config.chart.legend;i.show!==t.show&&(this.legendDom.css("display",t.show?"block":"none"),this.config.chart.height=this.container.height()-(t.show&&this.legendDom.height()||0)),i.textarea.fontSize!==t.textarea.fontSize&&(this.legendDom.find(".legend-item").css("fontSize",t.textarea.fontSize),this.config.chart.height=this.container.height()-(t.show&&this.legendDom.height()||0)),JSON.stringify(i.layout.margin)!==JSON.stringify(t.layout.margin)&&(n=t.layout.margin,this.legendDom.find(".legend-item").css("margin",n.vertiInterval+"px "+n.horiInterval+"px"),this.config.chart.height=this.container.height()-(t.show&&this.legendDom.height()||0));var n=i.layout.loc.split("-")[0],i=t.layout.loc.split("-")[0];n!==i&&("top"===i?this.container[0].appendChild(this.chartDom[0]):"bottom"===i&&this.container[0].appendChild(this.legendDom[0])),e||this.render(null,{chart:{legend:t}})},clear:function(){this.chart&&this.chart.clear(),this.legend&&g(this.legend.clear)&&this.legend.clear()},destroy:function(){this.chart&&this.chart.destroy(),this.chart=null,this.legend&&this.legend.destroy(),this.legend=null,this.chartDom=null,this.legendDom=null,this.container&&this.container.empty(),this._data=null},startAnimate:function(){if(!this.chart||!this.chart.chart)return!1;var t,e,i,n;this._cfg&&(this.chart.chart.clearAllAnimation(),t=(n=this._cfg.others.animation).update,e=n.enter,i=t.animationUpdateFromPrevious,t.animationUpdateFromPrevious=!1,n=t.animationDurationUpdate,t.animationDurationUpdate=e.animationDuration,this.chart.render(),t.animationDurationUpdate=n,t.animationUpdateFromPrevious=i)},clearAnimate:function(){this.chart&&this.chart.chart&&this.chart.chart.resumeToAnimationEnd()},_bindEvent:function(){var t,i=this;this.chart&&this.chart.chart&&(t=this.chart.chart,["click"].forEach(function(e){t.on(e,function(t){t=t.data;return i.emit(e,t)})}))},highlight:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=t.data,t=t.options,t=void 0===t?{}:t;if(!this.chart)return null;t.hasOwnProperty("selectMode")&&(t.mode=t.selectMode,delete t.selectMode),t.hasOwnProperty("cancelHighlightFirst")&&t.cancelHighlightFirst&&this.cancelHighlight(),this.chart.chart&&this.chart.chart.highlight({targetData:e,options:t})},cancelHighlight:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=t.data,t=t.options,t=void 0===t?{}:t;if(!this.chart)return null;t.hasOwnProperty("selectMode")&&(t.mode=t.selectMode,delete t.selectMode),this.chart.chart&&this.chart.chart.cancelHighlight({targetData:e,options:t})}}),t.exports});