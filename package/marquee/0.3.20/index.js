// env=undefined => env=publish 
Cube("datav:/com/marquee/0.3.20/jquery.actual",[],function(t,e,n,a,o,i){return t.exports=function(l){return l.fn.addBack=l.fn.addBack||l.fn.andSelf,l.fn.extend({actual:function(t,e){if(!this[t])throw'$.actual => The jQuery method "'+t+'" you called does not exist';var n,a,o,i,r=l.extend({absolute:!1,clone:!1,includeMargin:!1,display:"block"},e),u=this.eq(0);e=!0===r.clone?(i=function(){u=u.clone().attr("style","position: absolute !important; top: -1000 !important; ").appendTo("body")},function(){u.remove()}):(n=[],a="",i=function(){o=u.parents().addBack().filter(":hidden"),a+="visibility: hidden !important; display: "+r.display+" !important; ",!0===r.absolute&&(a+="position: absolute !important; "),o.each(function(){var t=l(this),e=t.attr("style");n.push(e),t.attr("style",e?e+";"+a:a)})},function(){o.each(function(t){var e=l(this),t=n[t];void 0===t?e.removeAttr("style"):e.attr("style",t)})}),i();t=/(outer)/.test(t)?u[t](r.includeMargin):u[t]();return e(),t}}),l},t.exports});;
Cube("datav:/com/marquee/0.3.20",["datav:/npm/bcore/0.0.18/event","datav:/npm/jquery/2.1.4","datav:/npm/lodash/4.6.1","datav:/npm/animejs/3.1.0/lib/anime.min.js"],function(t,i,e,a,n,s){var l=e("datav:/npm/bcore/0.0.18/event"),o=e("datav:/com/marquee/0.3.20/jquery.actual")(e("datav:/npm/jquery/2.1.4")),r=e("datav:/npm/lodash/4.6.1"),h=e("datav:/npm/animejs/3.1.0/lib/anime.min.js");return t.exports=l.extend(function(t,i){this.config={},this.container=o(t),this.apis=i.apis,this._data=null,this.chart=null,this.needUpdate=!0,this.animeTimer=null,this.init(i)},{init:function(t){this.mergeConfig(t),this.container.append('<div class="datav-marquee" style="white-space: nowrap; overflow: hidden;"><div class="marquee-text" style="display: inline-block;"><span style="display: inline-block;" class="marquee-text-span"></span><span style="display: inline-block;" class="marquee-text-span"></span></div></div>'),this.textWrap=this.container.find(".marquee-text"),this.text=this.container.find(".marquee-text-span"),this.updateOptions(t)},mergeConfig:function(t){return t&&(this.config=r.defaultsDeep(t||{},this.config)),this.config},updateStyle:function(){},data:function(t){return t&&(r.isEqual(t,this._data)?this.needUpdate=!1:this.needUpdate=!0,this._data=t),this._data},render:function(t){var i=this;this.data(t),this.needUpdate&&this.reset(),document.addEventListener("visibilitychange",function(){"visible"===document.visibilityState&&i.reset()})},updateOptions:function(t){t=this.mergeConfig(t);this.container.css({color:t.textStyle.color,"font-size":t.textStyle.fontSize,"font-weight":t.textStyle.fontWeight,"font-family":'"'+t.textStyle.fontFamily+'"'}),this.reset()},reset:function(){this.text.html(this._data&&this._data[0]&&this._data[0].value),this.textWrap.css({transform:"translateX(0)",transition:"none"}),this.isScroll=r.gt(this.text.actual("width",{display:"inline-block"}),this.container.width()),this.clearAnimates(),this.isScroll?(this.text.html(this._data&&this._data[0]&&this._data[0].value+'<i style="display:inline-block;width:5em;"></i>'),this.startAnimates()):this.text.css("min-width",this.container.width())},startAnimates:function(){var t=this.config,i=this.textWrap,e=i.actual("outerWidth",{display:"inline-block"}),a=this;t.loop&&this.isScroll&&(this.animeTimer=h({targets:i[0],translateX:[0,-e/2],easing:"linear",loop:t.loop,duration:t.ifSpeed?t.speed*e/200:t.duration,delay:t.subordinate,endDelay:t.leading,changeComplete:function(){a.emit("marquee_end")}}))},clearAnimates:function(){h.remove(r.get(this.animeTimer,"animatables[0].target"))},resize:function(t,i){this.render(null,{width:t,height:i})},clear:function(){this.container.empty(),this.clearAnimates()},destroy:function(){this.clearAnimates(),this.container.empty(),this._data=null,this.off&&this.off()}}),t.exports});