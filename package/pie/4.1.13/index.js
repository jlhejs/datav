// env=undefined => env=publish 
Cube("datav:/com/pie/4.1.13/index.css", [], function(m){m.exports=".datav-wraper-pie-wrap .ring-guide-name{color:var(--color-name)!important;font-weight:var(--fontWeight-name)!important;font-family:var(--fontFamily-name)!important;font-size:var(--fontSize-name)!important}.datav-wraper-pie-wrap .ring-guide-value{color:var(--color-value)!important;font-weight:var(--fontWeight-value)!important;font-family:var(--fontFamily-value)!important;font-size:var(--fontSize-value)!important}";return m.exports});;
Cube("datav:/com/pie/4.1.13/transform",["datav:/npm/lodash/4.17.11","datav:/npm/datav-g2plot-util/0.2.4"],function(a,b,c){function d(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:15;return+parseFloat((+a).toPrecision(b))}function e(a,b,c,d){var e=a?"<span class=\"ring-guide-name\" style=\""+w+"\">"+a+"</span><br/>":"";return"<div class=\"ring-guide-html "+c+"\" style=\""+(v+"width:"+d+"px;")+"\">"+e+("<span class=\"ring-guide-value\" style=\""+x+"\">"+b+"</span>")+"</div>"}var f=Object.assign||function(a){for(var b,c=1;c<arguments.length;c++)for(var d in b=arguments[c],b)Object.prototype.hasOwnProperty.call(b,d)&&(a[d]=b[d]);return a},g=c("datav:/npm/lodash/4.17.11"),h=g.get,i=g.isNull,j=g.isUndefined,k=g.cloneDeep,l=c("datav:/npm/datav-g2plot-util/0.2.4"),m=l.transformGUI2Props,n=l.getMarginOptions,o=l.getLegendOptions,p=l.getNumericalLabelOptions,q=l.getTooltipOptions,r=l.getAnimationOptions,s=l.getCustomS,t=f({},n(),o(),p(),q(),r(),function(){return{"options.chart.pieStyle.stroke":"pieStyle.stroke","options.chart.pieStyle.lineWidth":"pieStyle.lineWidth","options.axis.radiusAxis.innerRadius":"innerRadius","options.axis.radiusAxis.outerRadius":"radius","options.chart.statisticLabel.show":"statistic.visible","options.chart.statisticLabel.triggerOn":"statistic.triggerOn"}}(),{"options.chart.numericalLabel.spiderStyle.stroke":"label.line.stroke","options.chart.numericalLabel.spiderStyle.lineWidth":"label.line.lineWidth","options.chart.renderer":"renderer"}),u=function(a){var b=a.seriesConfig,c=a.propsConfig,d=a.dataSeries,e=a.data;if(b){var f=b.series,g=b.seriesMapping;if(g){var k={},l=[],m={};f.forEach(function(a){var b=a.mapping,c=b.fieldValue,d=b.serieName;i(c)||j(c)||""===c?l.push(a.color):(k[d||c]=a.color,m[c]=d)});var n=f.map(function(a){return h(a,"mapping.fieldValue")});e=e.sort(function(c,a){var b=n.indexOf(c.name),d=n.indexOf(a.name);return(-1===b?Infinity:b)-(-1===d?Infinity:d)}),e.forEach(function(a){a.__s=m[a.name]||a.name});var o=s(e);o.forEach(function(a,b){k[a]||(l.length?k[a]=l.shift():k[a]=f[b%f.length].color)});var p=Object.values(k)[0];c.color=Object.keys(k).length?function(a){return k[a]||p}:l,c.data=e,c.colorField="__s"}else{var q=f.map(function(a){return a.color});c.color=q,c.colorField="name",c.data=e}}},v="color:#4d4d4d;font-size:14px;text-align:center;line-height:2;font-family:'-apple-system',BlinkMacSystemFont,'SegoeUI',Roboto,'HelveticaNeue',Helvetica,'PingFangSC','HiraginoSansGB','MicrosoftYaHei',SimSun,'sans-serif';pointer-events:none;",w="font-weight:300;white-space:nowrap;text-overflow:ellipsis;",x="font-size:32px;font-weight:bold;color:#4D4D4D";return a.exports={transOptionKey:function(a,b,c){var i=k(b)||{};m({guiConfig:a,guiOptPropMap:t,res:i});var j=[].concat(c).filter(function(a){return a}).map(function(a){return a.s}),l=h(a,"options.series");u({seriesConfig:l,propsConfig:i,dataSeries:j,data:c}),i.tooltip&&i.tooltip.domStyles&&(i.tooltip.domStyles["g2-tooltip"].boxShadow="none");var n=g.get(a,"options.others.tooltip.textStyle.show");i.tooltip.domStyles["g2-tooltip-title"].display=n?"block":"none",delete i.label.offsetX,delete i.label.offsetY;var o=g.get(i,"label.type");return"outer"===o&&delete i.label.line,"spider"===o&&(g.set(i,"label.text",{fill:""+g.get(i,"label.style.fill"),fontFamily:""+g.get(i,"label.style.fontFamily"),fontSize:""+g.get(i,"label.style.fontSize"),fontWeight:""+g.get(i,"label.style.fontWeight"),stroke:"rgba(0,0,0,0)"}),delete i.label.style),"spider"!==o||g.get(a,"options.chart.numericalLabel.spiderStyle.show")||g.set(i,"label.line.stroke","rgba(0, 0, 0, 0)"),("outer"===o||"inner"===o)&&g.set(i,"label.style",f({},i.label.style,{stroke:"rgba(0,0,0,0)"})),g.set(i,"statistic",f({},i.statistic,{htmlContent:function(a,b){var c=a.name,f=a.value;return e(c,d(f),"",b)}})),i},defaultProps:{title:{visible:!1},description:{visible:!1},pixelRatio:3,angleField:"value",colorField:"name",padding:"auto",forceFit:!0,legend:{position:"bottom-center"},renderer:"canvas",label:{type:"inner",style:{stroke:"rgba(0,0,0,0)"}},pieStyle:{},innerRadius:0.8}},a.exports});;
Cube("datav:/com/pie/4.1.13",["datav:/npm/lodash/4.17.11","datav:/npm/jquery/2.1.4","datav:/npm/bcore/0.0.22/event","datav:/npm/datav-g2plot-util/0.2.4","datav:/npm/datav-g2plot-adaptor/1.1.22/g2plot.js"],function(a,b,c){var d=Object.assign||function(a){for(var b,c=1;c<arguments.length;c++)for(var d in b=arguments[c],b)Object.prototype.hasOwnProperty.call(b,d)&&(a[d]=b[d]);return a},e=c("datav:/npm/lodash/4.17.11"),f=c("datav:/npm/jquery/2.1.4"),g=c("datav:/npm/bcore/0.0.22/event"),h=c("datav:/npm/datav-g2plot-util/0.2.4"),i=h.getTransform,j=c("datav:/npm/datav-g2plot-adaptor/1.1.22/g2plot.js"),k=c("datav:/com/pie/4.1.13/transform"),l=k.transOptionKey,m=k.defaultProps,n=e.get,o=e.isUndefined,p=e.clone,q=e.cloneDeep,r=e.toNumber;return c("datav:/com/pie/4.1.13/index.css",""),a.exports=g.extend(function(a,b){this.container=a,this.chart=null,this.guiConfig={options:{chart:{legend:{marker:{shape:"circle",show:!0,size:4},renderer:"canvas",textStyle:{color:"rgb(144, 160, 174)",fontFamily:"Microsoft Yahei",fontSize:12,fontWeight:"normal"}},numericalLabel:{spiderStyle:{show:!0,stroke:"#ddd",lineWidth:"1"}}},others:{tooltip:{textStyleList:{color:"#fff",fontFamily:"Microsoft Yahei",fontSize:14,fontWeight:"normal"},textStyleValue:{color:"#fff",fontFamily:"Microsoft Yahei",fontSize:14,fontWeight:"normal"}}}}},this.propsConfig=m,this.chartConfig={},this.init(b)},{init:function(a){this.mergeConfig(a)},initChart:function(a){var b=a.chartConfig;this.chart=new j.Donut(this.container,b),this.chart.render();var c=i(this.container);Object.values(c).length&&this.chart&&this.chart.canvas&&(this.chart.canvas.set("containerTransform",c),this.chart.canvas.set("supportCSSTransform",!0))},render:function(a,b){var c=this;if(this.guiConfig=this.mergeConfig(b),a=this.data(a),!a||!e.isArray(a)||!a.length)return console.warn("--------- \u540C\u5B66\u4F60\u597D, \u8BF7\u786E\u4FDD\"\u73AF\u56FE\"\u7EC4\u4EF6, \u6570\u636E\u7C7B\u578B\u4E3A\u6570\u7EC4 && \u6570\u636E\u5927\u4E8E\u7B49\u4E8E1\u6761 ---------"),void console.warn("--------- Hello classmates, please make sure that the \"Ring diagram\" component, the data type is an array && data is greater than or equal to 1 ---------");this.propsConfig=l(this.guiConfig,this.propsConfig,q(a)),this._bindEvent(this.propsConfig);var f=d({data:a},this.propsConfig);this.chartConfig=f,this.chart?(this.chart.destroy(),this.initChart({chartConfig:f})):(this.initChart({chartConfig:f}),setTimeout(function(){c.chart.destroy(),c.initChart({chartConfig:f})},0)),this.updateStyle()},mergeConfig:function(a){if(!a)return this.guiConfig;var b=e.cloneDeep(e.get(a,"options.series.series"));return this.guiConfig=e.defaultsDeep(a||{},this.guiConfig),b&&e.set(this.guiConfig,"options.series.series",b),this.setColors(),this.guiConfig},updateStyle:function(){var a=this.guiConfig;if(a&&this.chart){var b=n(a,"options.chart.statisticLabel"),c=b.labelStyle,d=b.numStyle,e=f(this.container);if(e.addClass("datav-wraper-pie-wrap"),e&&e.context){var g=e.context.style;g.setProperty("--color-name",c.color),g.setProperty("--fontWeight-name",c.fontWeight),g.setProperty("--fontFamily-name",c.fontFamily),g.setProperty("--fontSize-name",c.fontSize+"px"),g.setProperty("--color-value",d.color),g.setProperty("--fontWeight-value",d.fontWeight),g.setProperty("--fontFamily-value",d.fontFamily),g.setProperty("--fontSize-value",d.fontSize+"px")}}},setColors:function(){},data:function(a){return a&&(this._data=p(a),this._data.length&&this._data.forEach(function(a){a.value=r(a.value)||0})),this._data},getThemableConfig:function(a){if(!a)return{};var b=a.textColor,c=a.palette,d=a.bgColor,e=(n(this.guiConfig,"options.series.series")||[]).map(function(a,b){return{color:c[b]||c[b%c.length]}});return{options:{chart:{numericalLabel:{textStyle:{color:b}}},series:{series:e},others:{tooltip:{textStyle:{color:b},bgBox:{backgroundColor:d}}}}}},resize:function(a,b){this.chart&&this.chart.updateConfig({width:a,height:b}),this.chart&&this.chart.render()},destroy:function(){this.chart&&this.chart.destroy(),this.chart=null,this._data=null},_bindEvent:function(a){var b=this;a.events={onRingClick:function(a){var c=n(a,"data");o(c)||b.emit("click",c)},onLegendClick:function(c){var d=n(a,"legend.text.style.fill")===n(c,"target.attrs.fill"),e={checked:!!d,value:n(c,"target.cfg.delegateObject.item.value")};o(e)||b.emit("onLegendClick",e)}}},highlight:function(a){var b=a.data,c=a.style;if(this.chart&&b){var d=function(a){return Object.keys(b).every(function(c){return a[c]===b[c]})};this.chart.setActive(d,c)}},cancelHighlight:function(){this.chart&&this.chart.setActive({},{})}}),a.exports});