// env=undefined => env=publish 
Cube("datav:/com/@datav-city-pro-v2/datav-engine-od-flyline/2.1.4/shader/linkFly.frag.glsl",[],function(n,e,t,a,o,l){return n.exports="#define GLSLIFY 1\n#include <common>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n#include <fog_pars_fragment>\n\nuniform vec3 color;\nuniform float opacity;\nuniform float blurWidthRatio;\n// uniform vec3 unpickColor;\n// uniform float unpickOpacity;\n// uniform vec3 pickColor;\nuniform vec3 brightSegColor;\n// uniform float pickOpacity;\nuniform float brightSegOpacity;\nuniform float spaceRatio;\n\n#ifdef USE_MAP\n\nuniform sampler2D map;\nuniform sampler2D map1;\n\n#endif\n\n#ifdef USE_ALPHA_MAP\n\nuniform sampler2D alphaMap;\n\n#endif\n\nuniform float visibility;\nuniform uint useDash;\nuniform float dashArray;\nuniform float dashOffset0;\nuniform float dashOffset1;\n\nuniform float dashRatio;\nuniform float brightSegCount;\n\nuniform float alphaTest;\nuniform vec2 uvScale0;\nuniform float symbolAspect;\n\nin vec2 vUv;\n// in float vCounters;\nflat in float lineAspect;\nflat in float v_symbolCount;\n\nvarying vec2 v_normal;\n\n// flat in uint vPick;\n\nvoid main() {\n\n    #include <clipping_planes_fragment>\n    #include <logdepthbuf_fragment>\n\n    //后期渲染模块会统一做gamma校正，\n    //为了图元渲染颜色和配置项设置颜色保持一致，需要做以下处理以抵消\n    vec3 color2 = pow(color, vec3(2.2));\n    vec3 brightSegColor2 = pow(brightSegColor, vec3(2.2));\n\n    vec4 c = vec4(color2, opacity);\n\n    bool useMap = false;\n\n    // for line  \n    vec2 uv0 = vUv * uvScale0;\n    uv0.x -= dashOffset0; \n   \n    // antialiase\n    // reference from https://blog.mapbox.com/drawing-antialiased-lines-with-opengl-8766f34192dc\n    float blur = 1.0;\n    float featherLen = length(v_normal) - (1.0 - blurWidthRatio);\n    if(featherLen > 0.0){\n      blur =  1.0 - featherLen / blurWidthRatio;\n    }\n    blur *= blur;\n\n    #ifdef USE_MAP\n     \n      vec4 texture0 = texture2D(map, uv0);//线条纹理\n\n      // for symbol\n      float segLineAspect = lineAspect / v_symbolCount; \n      // dashOffset1 / v_symbolCount 使得不同长度的飞线上符号运动速度一致\n      float segU = mod(vUv.x - dashOffset1 / v_symbolCount, 1.0 / v_symbolCount); \n\n      segU *= v_symbolCount;\n\n      float symbolLen = symbolAspect / segLineAspect; //保持符号贴图的纵横比\n\n      vec4 texture1 = vec4(0.0);\n      if(segU < symbolLen){\n        segU = segU / symbolLen;\n        vec2 uv1 = vec2( segU, vUv.y);\n       \n        // 对每个分段的首尾两端做模糊处理\n        float endBlurLen = 0.08; //首尾两端模糊长度\n        float endBlurFactor = 1.0;\n        if(segU < endBlurLen){\n          endBlurFactor = pow((segU / endBlurLen), 3.0);\n        }else if(segU > 1.0 - endBlurLen){\n          endBlurFactor = pow((1.0 - segU) / endBlurLen, 3.0);\n        }\n\n        texture1 = texture2D(map1, uv1) * endBlurFactor;\n      }\n\n      texture0 *= blur; //仅对线条纹理做边缘模糊\n      texture0 = mix(vec4(.0), texture0, texture0.a);\n      texture1 = mix(texture1, vec4(1.0), texture1);\n\n      vec4 texture = texture0 + texture1;\n      c *= texture;\n\n      useMap = true;\n    #endif\n\n    #ifdef USE_ALPHA_MAP\n      // c.a *= texture2D(alphaMap, vUv * repeat).a;\n      c.a *= texture2D(alphaMap, uv0).a;\n    #endif\n\n    if (c.a < alphaTest)\n      discard;\n\n    gl_FragColor = c;\n\n    if(useMap == false){\n        float dist = 1.0;\n        float localSegLen = mod(vUv.x - dashOffset0, 1.0 / brightSegCount); \n        float localSegRatio = localSegLen * brightSegCount;\n      \n        float blurRange = 0.1; //\n        if(localSegRatio > spaceRatio){\n          dist = pow((localSegRatio - spaceRatio) / (1.0 - spaceRatio), 4.0 ); \n        }else if(localSegRatio > spaceRatio - blurRange){\n          //对高亮线段的头部做模糊处理\n          dist = pow((spaceRatio - localSegRatio) / blurRange, 4.0 ); \n        }\n        dist = saturate(dist);\n\n        gl_FragColor = mix(vec4(brightSegColor2, brightSegOpacity), gl_FragColor, dist);\n\n        gl_FragColor.a *= blur;\n    }\n\n    \n    #include <premultiplied_alpha_fragment>\n    // #include <tonemapping_fragment>\n    // #include <encodings_fragment>\n    #include <fog_fragment>\n\n}",n.exports});;
Cube("datav:/com/@datav-city-pro-v2/datav-engine-od-flyline/2.1.4/shader/linkFly.vert.glsl",[],function(e,n,t,i,r,o){return e.exports="#define GLSLIFY 1\n#include <common>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#include <fog_pars_vertex>\n\nattribute vec3 previous;\nattribute vec3 next;\nattribute float side;\n// attribute uint pick;\nattribute float counters;\nattribute float len;\nattribute float symbolCount;\n\nuniform vec2 resolution;\nuniform float lineWidth;\n// uniform float pickLineWidth;\n// uniform float unpickLineWidth;\nuniform float near;\nuniform float far;\nuniform uint sizeAttenuation;\n\nuniform float dashOffset0;\nuniform float brightSegCount;\nuniform float brightSegWidth;\nuniform float spaceRatio;\nuniform float symbolIntervalLen;\n// uniform mat4 projectionMatrixInverse;\n\nout vec2 vUv;\n// out float vCounters;\n \nvarying vec2 v_normal;\nflat out float lineAspect;\nflat out float v_symbolCount;\n\n// flat out uint vPick;\n// flat out uint vUnPick;\n\nvec2 fix(vec4 i, float aspect) {\n\n  vec2 res = i.xy / i.w;\n  res.x *= aspect;\n  return res;\n}\n\n// special case for perspective projection, and segments that terminate either in, or behind, the camera plane\n// clearly the gpu firmware has a way of addressing this issue when projecting into ndc space\n// but we need to perform ndc-space calculations in the shader, so we must address this issue directly\n// perhaps there is a more elegant solution -- WestLangley\nvoid trimSegment( const in vec4 start, inout vec4 end ) {\n\n  // trim end segment so it terminates between the camera plane and the near plane\n\n  // conservative estimate of the near plane\n  float a = projectionMatrix[ 2 ][ 2 ]; // 3nd entry in 3th column\n  float b = projectionMatrix[ 3 ][ 2 ]; // 3nd entry in 4th column\n  float nearEstimate = - 0.5 * b / a;\n\n  float alpha = ( nearEstimate - start.z ) / ( end.z - start.z );\n\n  end.xyz = mix( start.xyz, end.xyz, alpha );\n\n}\n\nvoid main() {\n  // vCounters = counters;\n  vUv = uv;\n  // vPick = pick;\n  // vUnPick = pick;\n  float aspect = resolution.x / resolution.y;\n  float pixelWidthRatio = 1. / (resolution.x * projectionMatrix[0][0]);\n  vec2 aspectVec = vec2(aspect, 1.0);\n\n  lineAspect = len / lineWidth / aspect;\n\n  // camera space\n  vec4 mvCur = modelViewMatrix * vec4(position, 1.);\n  vec4 mvPrev = modelViewMatrix * vec4(previous, 1.);\n  vec4 mvNext = modelViewMatrix * vec4(next, 1.);\n\n  if(mvCur.z < 0.0 && mvPrev.z >= 0.0){\n    trimSegment(mvCur, mvPrev);\n  }else if(mvPrev.z < 0.0 && mvCur.z >= 0.0){\n    trimSegment(mvPrev, mvCur);\n  }\n\n  if(mvCur.z < 0.0 && mvNext.z >= 0.0){\n    trimSegment(mvCur, mvNext);\n  }else if(mvNext.z < 0.0 && mvCur.z >= 0.0){\n    trimSegment(mvNext, mvCur);\n  }\n\n  // into clip space\n  vec4 currentProjected = projectionMatrix * mvCur;\n  vec4 previousProjected = projectionMatrix * mvPrev;\n  vec4 nextProjected = projectionMatrix * mvNext;\n\n  // into NDC space [-1,1] and correct for aspect ratio(screenWidth/screenHeight)\n  vec2 currentScreen = currentProjected.xy / currentProjected.w * aspectVec;\n  vec2 previousScreen = previousProjected.xy / previousProjected.w * aspectVec;\n  vec2 nextScreen = nextProjected.xy / nextProjected.w * aspectVec;\n   \n  float pixelWidth =\n      sizeAttenuation == 1u ? 1.0 : currentProjected.w * pixelWidthRatio;\n   \n\n  float width = lineWidth;\n\n  #ifdef USE_MAP\n\n  #else \n    float dist = 1.0;\n    float localSegLen = mod(uv.x - dashOffset0, 1.0 / brightSegCount);  \n    float localSegRatio = localSegLen * brightSegCount;\n\n    float blurRange = 0.1; //\n    if(localSegRatio > spaceRatio){\n      dist = (localSegRatio - spaceRatio) / (1.0 - spaceRatio); \n    }else if(localSegRatio > spaceRatio - blurRange){\n      //对高亮线段的头部做模糊处理\n      dist = pow((spaceRatio - localSegRatio) / blurRange, 3.0 ); \n    }\n    width = mix(brightSegWidth, lineWidth, saturate(dist));\n\n  #endif\n\n  width *= 1.8 * pixelWidth;\n\n  vec2 dir = vec2(0.0);\n  if (nextScreen == currentScreen) //next == position\n    dir = normalize(currentScreen - previousScreen);\n  else if (previousScreen == currentScreen) //previous == position\n    dir = normalize(nextScreen - currentScreen);\n  else {\n    vec2 dir1 = normalize(currentScreen - previousScreen);\n    vec2 dir2 = normalize(nextScreen - currentScreen);\n    dir = normalize(dir1 + dir2);\n  }\n\n  v_normal = normalize( vec2(-dir.y / aspect, dir.x) * side); //for antialiase line\n\n  vec4 normalVec4 = vec4( -dir.y, dir.x, 0., 1. );\n  normalVec4.xy *= .5 * width;\n  \n  // https://github.com/spite/THREE.MeshLine/blob/master/src/THREE.MeshLine.js#L438\n  // 原本是需要乘 projectionMatrix矩阵，但在近相机的某些视角下会导致畸变，去掉下行代码暂未发现异常\n  // normalVec4 *= projectionMatrix;\n  vec2 normal = normalVec4.xy;\n\n  vec4 offset = vec4(normal * side, 0., 0.);\n \n  // 修改前\n  gl_Position = currentProjected + offset;\n \n  vec4 mvPosition = mvCur;\n\n  v_symbolCount = len / symbolIntervalLen;\n\n  #include <logdepthbuf_vertex>\n  #include <clipping_planes_vertex>\n  #include <fog_vertex>\n\n}\n",e.exports});;
Cube("datav:/com/@datav-city-pro-v2/datav-engine-od-flyline/2.1.4/meshLine",[],function(t,e,a,r,i,n){function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(e,t){var r,i=Object.keys(e);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(e),t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,r)),i}function l(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function h(){return(h="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=y(t)););return t}(t,e);if(i)return(i=Object.getOwnPropertyDescriptor(i,e)).get?i.get.call(arguments.length<3?t:r):i.value}).apply(this,arguments)}function f(t,e){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function c(r){var i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=y(r),e=(t=i?(t=y(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),this);if(t&&("object"===s(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return p(e)}}function p(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function y(t){return(y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function v(t,e,r){e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}function m(t){return function(t){if(Array.isArray(t))return o(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){var r;if(t)return"string"==typeof t?o(t,e):"Map"===(r="Object"===(r=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(t,e):void 0}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,i=new Array(e);r<e;r++)i[r]=t[r];return i}function b(t,e,r){t*=6,e*=6;return r[t]===r[e]&&r[1+t]===r[1+e]&&r[2+t]===r[2+e]}function d(t,e){t*=6;return[e[t],e[1+t],e[2+t]]}function g(t,e){for(var r=t.array,i=0,n=r.length;i<n;i+=3)r[i]-=e.x,r[i+1]-=e.y,r[i+2]-=e.z;t.needsUpdate=!0}return t.exports=function(M){function t(){this.positions=[],this.previous=[],this.next=[],this.side=[],this.width=[],this.indices=[],this.uvs=[],this.counters=[],this.lens=[],this.geometry=new M.BufferGeometry,this.widthCallback=null,this.matrixWorld=new M.Matrix4}var j,W,R;function s(t,e,r,i,n){var s;if(t=t.subarray||t.slice?t:t.buffer,r=r.subarray||r.slice?r:r.buffer,t=e?t.subarray?t.subarray(e,n&&e+n):t.slice(e,n&&e+n):t,r.set)r.set(t,i);else for(s=0;s<t.length;s++)r[s+i]=t[s]}t.prototype.setMatrixWorld=function(t){this.matrixWorld=t},t.prototype.setGeometry=function(t,e,r,i){this.widthCallback=i,this.process(t,e,r)},t.prototype.raycast=(j=new M.Matrix4,W=new M.Ray,R=new M.Sphere,function(t,e){var r=t.linePrecision,i=r*r,r=this.geometry;if(null===r.boundingSphere&&r.computeBoundingSphere(),R.copy(r.boundingSphere),R.applyMatrix4(this.matrixWorld),!1!==t.ray.intersectSphere(R)){j.getInverse(this.matrixWorld),W.copy(t.ray).applyMatrix4(j);var n=new M.Vector3,s=new M.Vector3,o=new M.Vector3,a=new M.Vector3,u=this instanceof M.LineSegments?2:1;if(r instanceof M.BufferGeometry){var l=r.index,h=r.attributes;if(null!==l)for(var f=l.array,c=h.position.array,p=0,y=f.length-1;p<y;p+=u){var v=f[p],m=f[p+1];n.fromArray(c,3*v),s.fromArray(c,3*m),i<W.distanceSqToSegment(n,s,a,o)||(a.applyMatrix4(this.matrixWorld),(v=t.ray.origin.distanceTo(a))<t.near||v>t.far||e.push({distance:v,point:o.clone().applyMatrix4(this.matrixWorld),index:p,face:null,faceIndex:null,object:this}))}else for(var b,d=h.position.array,g=0,w=d.length/3-1;g<w;g+=u)n.fromArray(d,3*g),s.fromArray(d,3*g+3),i<W.distanceSqToSegment(n,s,a,o)||(a.applyMatrix4(this.matrixWorld),(b=t.ray.origin.distanceTo(a))<t.near||b>t.far||e.push({distance:b,point:o.clone().applyMatrix4(this.matrixWorld),index:g,face:null,faceIndex:null,object:this}))}else if(r instanceof M.Geometry)for(var O,S=r.vertices,x=S.length,A=0;A<x-1;A+=u)i<W.distanceSqToSegment(S[A],S[A+1],a,o)||(a.applyMatrix4(this.matrixWorld),(O=t.ray.origin.distanceTo(a))<t.near||O>t.far||e.push({distance:O,point:o.clone().applyMatrix4(this.matrixWorld),index:A,face:null,faceIndex:null,object:this}))}}),t.prototype.createGeometry=function(){var t=new M.BufferAttribute(new Float32Array(this.positions),3),e=new M.BufferAttribute(new Float32Array(this.previous),3),r=new M.BufferAttribute(new Float32Array(this.next),3),i=new M.BufferAttribute(new Float32Array(this.side),1),n=new M.BufferAttribute(new Float32Array(this.uvs),2),s=new M.BufferAttribute(new Uint32Array(this.indices),1),o=new M.BufferAttribute(new Float32Array(this.counters),1),a=new M.BufferAttribute(new Float32Array(this.lens),1);this.geometry.setAttribute("position",t),this.geometry.setAttribute("previous",e),this.geometry.setAttribute("next",r),this.geometry.setAttribute("side",i),this.geometry.setAttribute("uv",n),this.geometry.setAttribute("counters",o),this.geometry.setAttribute("len",a),this.geometry.setIndex(s)},t.prototype.offsetPosition=function(t){var e=this.geometry.attributes,r=e.position,i=e.previous,e=e.next;g(r,t),g(i,t),g(e,t)},t.prototype.clear=function(){this.positions.length=0,this.previous.length=0,this.next.length=0,this.side.length=0,this.width.length=0,this.indices.length=0,this.uvs.length=0,this.counters.length=0,this.lens.length=0},t.prototype._processPosition=function(t){for(var e,r,i=0,n=t.length/6;i<n;i++)this.counters.push(r=i/(n-1)),this.counters.push(r);(e=this.positions).push.apply(e,m(t));var s=t.length/6,o=b(0,s-1,t)?d(s-2,t):d(0,t);this.previous.push(o[0],o[1],o[2]),this.previous.push(o[0],o[1],o[2]);for(var a=0;a<s-1;a++)o=d(a,t),this.previous.push(o[0],o[1],o[2]),this.previous.push(o[0],o[1],o[2]);for(var u=1;u<s;u++)o=d(u,t),this.next.push(o[0],o[1],o[2]),this.next.push(o[0],o[1],o[2]);o=b(s-1,0,t)?d(1,t):d(s-1,t),this.next.push(o[0],o[1],o[2]),this.next.push(o[0],o[1],o[2])},t.prototype._processIndex=function(t){for(var e=this.positions.length/3,r=t.length/6,i=0;i<r-1;i++){var n=2*i+e;this.indices.push(n,1+n,2+n),this.indices.push(2+n,1+n,3+n)}},t.prototype._processUV=function(t,e){if(2<arguments.length&&void 0!==arguments[2]&&arguments[2]){this.uvs.push(0,0),this.uvs.push(0,1);for(var r,i,n=0,s=6,o=t.length;s<o;s+=6)r=[t[s-6],t[s-6+1],t[s-6+2]],i=[t[s],t[s+1],t[s+2]],n+=Math.sqrt(Math.pow(i[0]-r[0],2)+Math.pow(i[1]-r[1],2)+Math.pow(i[2]-r[2],2)),this.uvs.push(i=n/e,0),this.uvs.push(i,1)}else for(var a=t.length/6,u=0;u<a;u++)this.uvs.push(u/(a-1),0),this.uvs.push(u/(a-1),1)},t.prototype._processSide=function(t){for(var e=t.length/6,r=0;r<e;r++)this.side.push(1),this.side.push(-1)},t.prototype._processLen=function(t,e){for(var r=t.length/6,i=0;i<r;i++)this.lens.push(e),this.lens.push(e)},t.prototype.process=function(t,e,r){this._processIndex(t),this._processSide(t),this._processUV(t,e,r),this._processPosition(t),this._processLen(t,e)},t.prototype.advance=function(t){var e=this.attributes.position.array,r=this.attributes.previous.array,i=this.attributes.next.array,n=e.length;s(e,0,r,0,n),s(e,6,e,0,n-6),e[n-6]=t.x,e[n-5]=t.y,e[n-4]=t.z,e[n-3]=t.x,e[n-2]=t.y,e[n-1]=t.z,s(e,6,i,0,n-6),i[n-6]=t.x,i[n-5]=t.y,i[n-4]=t.z,i[n-3]=t.x,i[n-2]=t.y,i[n-1]=t.z,this.attributes.position.needsUpdate=!0,this.attributes.previous.needsUpdate=!0,this.attributes.next.needsUpdate=!0};var o=M.ShaderMaterial;return{MeshLine:t,MeshLineMaterial:function(){var t=n,e=o;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&f(t,e);var r,i=c(n);function n(t){var e;if(this instanceof n)return e=i.call(this,{uniforms:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach(function(t){v(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({lineWidth:{value:1},brightSegWidth:{value:1},blurWidthRatio:{value:.5},color:{value:new M.Color},brightSegColor:{value:new M.Color},opacity:{value:1},brightSegOpacity:{value:1},map:{value:null},map1:{value:null},alphaMap:{value:null},resolution:{value:new M.Vector2(1,1)},sizeAttenuation:{value:1},near:{value:1},far:{value:1},visibility:{value:1},dashOffset0:{value:0},dashOffset1:{value:0},useDash:{value:0},alphaTest:{value:0},repeat:{value:new M.Vector2(1,1)},brightSegCount:{value:3},uvScale0:{value:new M.Vector2(1,1)},symbolIntervalLen:{value:100},spaceRatio:{value:0},symbolAspect:{value:1},projectionMatrixInverse:{value:new M.Matrix4}},M.UniformsLib.fog),vertexShader:a("datav:/com/@datav-city-pro-v2/datav-engine-od-flyline/2.1.4/shader/linkFly.vert.glsl"),fragmentShader:a("datav:/com/@datav-city-pro-v2/datav-engine-od-flyline/2.1.4/shader/linkFly.frag.glsl")}),v(p(e),"dispose",function(){this.map&&this.map.dispose&&this.map.dispose(),this.map1&&this.map1.dispose&&this.map1.dispose()}),e.type="MeshLineMaterial",Object.defineProperties(p(e),{lineWidth:{enumerable:!0,get:function(){return this.uniforms.lineWidth.value},set:function(t){this.uniforms.lineWidth.value=t}},brightSegWidth:{enumerable:!0,get:function(){return this.uniforms.brightSegWidth.value},set:function(t){this.uniforms.brightSegWidth.value=t}},blurWidthRatio:{enumerable:!0,get:function(){return this.uniforms.blurWidthRatio.value},set:function(t){this.uniforms.blurWidthRatio.value=t}},map:{enumerable:!0,get:function(){return this.uniforms.map.value},set:function(t){this.uniforms.map.value=t}},map1:{enumerable:!0,get:function(){return this.uniforms.map1.value},set:function(t){this.uniforms.map1.value=t}},alphaMap:{enumerable:!0,get:function(){return this.uniforms.alphaMap.value},set:function(t){this.uniforms.alphaMap.value=t}},color:{enumerable:!0,get:function(){return this.uniforms.color.value},set:function(t){this.uniforms.color.value=t}},brightSegColor:{enumerable:!0,get:function(){return this.uniforms.brightSegColor.value},set:function(t){this.uniforms.brightSegColor.value=t}},opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(t){this.uniforms.opacity.value=t}},brightSegOpacity:{enumerable:!0,get:function(){return this.uniforms.brightSegOpacity.value},set:function(t){this.uniforms.brightSegOpacity.value=t}},resolution:{enumerable:!0,get:function(){return this.uniforms.resolution.value},set:function(t){this.uniforms.resolution.value.copy(t)}},sizeAttenuation:{enumerable:!0,get:function(){return this.uniforms.sizeAttenuation.value},set:function(t){this.uniforms.sizeAttenuation.value=t}},near:{enumerable:!0,get:function(){return this.uniforms.near.value},set:function(t){this.uniforms.near.value=t}},far:{enumerable:!0,get:function(){return this.uniforms.far.value},set:function(t){this.uniforms.far.value=t}},visibility:{enumerable:!0,get:function(){return this.uniforms.visibility.value},set:function(t){this.uniforms.visibility.value=t}},dashArray:{enumerable:!0,get:function(){return this.uniforms.dashArray.value},set:function(t){this.uniforms.dashArray.value=t,this.useDash=0!==t?1:0}},dashOffset0:{enumerable:!0,get:function(){return this.uniforms.dashOffset0.value},set:function(t){this.uniforms.dashOffset0.value=t}},dashOffset1:{enumerable:!0,get:function(){return this.uniforms.dashOffset1.value},set:function(t){this.uniforms.dashOffset1.value=t}},dashRatio:{enumerable:!0,get:function(){return this.uniforms.dashRatio.value},set:function(t){this.uniforms.dashRatio.value=t}},useDash:{enumerable:!0,get:function(){return this.uniforms.useDash.value},set:function(t){this.uniforms.useDash.value=t}},alphaTest:{enumerable:!0,get:function(){return this.uniforms.alphaTest.value},set:function(t){this.uniforms.alphaTest.value=t}},repeat:{enumerable:!0,get:function(){return this.uniforms.repeat.value},set:function(t){this.uniforms.repeat.value.copy(t)}},uvScale0:{enumerable:!0,get:function(){return this.uniforms.uvScale0.value},set:function(t){this.uniforms.uvScale0.value.copy(t)}},brightSegCount:{enumerable:!0,get:function(){return this.uniforms.brightSegCount.value},set:function(t){this.uniforms.brightSegCount.value=t}},spaceRatio:{enumerable:!0,get:function(){return this.uniforms.spaceRatio.value},set:function(t){this.uniforms.spaceRatio.value=t}},symbolAspect:{enumerable:!0,get:function(){return this.uniforms.symbolAspect.value},set:function(t){this.uniforms.symbolAspect.value=t}},symbolIntervalLen:{enumerable:!0,get:function(){return this.uniforms.symbolIntervalLen.value},set:function(t){this.uniforms.symbolIntervalLen.value=t}},projectionMatrixInverse:{enumerable:!0,get:function(){return this.uniforms.projectionMatrixInverse.value},set:function(t){this.uniforms.projectionMatrixInverse.value=t}}}),e.setValues(t),e;throw new TypeError("Cannot call a class as a function")}return t=n,(e=[{key:"copy",value:function(t){return h(y(n.prototype),"copy",this).call(this,t),this.lineWidth=t.lineWidth,this.map=t.map,this.map1=t.map1,this.useMap=t.useMap,this.alphaMap=t.alphaMap,this.useAlphaMap=t.useAlphaMap,this.color.copy(t.color),this.opacity=t.opacity,this.resolution.copy(t.resolution),this.sizeAttenuation=t.sizeAttenuation,this.near=t.near,this.far=t.far,this.dashArray.copy&&this.dashArray.copy(t.dashArray),this.dashOffset0.copy&&this.dashOffset0.copy(t.dashOffset0),this.dashOffset1.copy&&this.dashOffset1.copy(t.dashOffset1),this.dashRatio.copy&&this.dashRatio.copy(t.dashRatio),this.brightSegCount=t.brightSegCount,this.brightSegWidth=t.brightSegWidth,this.blurWidthRatio=t.blurWidthRatio,this.brightSegColor=t.brightSegColor,this.brightSegOpacity=t.brightSegOpacity,this.useDash=t.useDash,this.visibility=t.visibility,this.alphaTest=t.alphaTest,this.repeat.copy(t.repeat),this.uvScale0.copy(t.uvScale0),this.spaceRatio.copy(t.spaceRatio),this.symbolAspect=t.symbolAspect,this.symbolIntervalLen=t.symbolIntervalLen,this.projectionMatrixInverse=t.projectionMatrixInverse,this}}])&&l(t.prototype,e),r&&l(t,r),Object.defineProperty(t,"prototype",{writable:!1}),n}()}},t.exports});;
Cube("datav:/com/@datav-city-pro-v2/datav-engine-od-flyline/2.1.4/utils",[],function(t,a,s,r,e,h){function i(t,a){for(var s=0;s<a.length;s++){var r=a[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function n(t,a,s){return a&&i(t.prototype,a),s&&i(t,s),Object.defineProperty(t,"prototype",{writable:!1}),t}function o(t,a){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}var l=Math.PI/180,p=180/Math.PI,c=n(function t(a,s){o(this,t),this.lng=a,this.lat=s,this.x=l*a,this.y=l*s}),u=n(function t(a){o(this,t),this.properties=a||{},this.geometries=[]}),M=(n(f,[{key:"interpolate",value:function(t){var a=Math.sin((1-t)*this.g)/Math.sin(this.g),t=Math.sin(t*this.g)/Math.sin(this.g),s=a*Math.cos(this.start.y)*Math.cos(this.start.x)+t*Math.cos(this.end.y)*Math.cos(this.end.x),r=a*Math.cos(this.start.y)*Math.sin(this.start.x)+t*Math.cos(this.end.y)*Math.sin(this.end.x),a=a*Math.sin(this.start.y)+t*Math.sin(this.end.y),t=p*Math.atan2(a,Math.sqrt(Math.pow(s,2)+Math.pow(r,2)));return[p*Math.atan2(r,s),t]}},{key:"arc",value:function(t,a){var s=[];if(!t||t<=2)s.push([this.start.lng,this.start.lat]),s.push([this.end.lng,this.end.lat]);else for(var r=1/(t-1),e=0;e<t;++e){var h=this.interpolate(r*e);s.push(h)}for(var i=!1,n=0,a=a&&a.offset?a.offset:10,o=180-a,l=-180+a,p=360-a,c=1;c<s.length;++c){var u=s[c-1][0],M=s[c][0],f=Math.abs(M-u);p<f&&(o<M&&u<l||o<u&&M<l)?i=!0:n<f&&(n=f)}var y=[];if(i&&n<a){var g=[];y.push(g);for(var d=0;d<s.length;++d){var v,w,b,x,m,A=parseFloat(s[d][0]);0<d&&Math.abs(A-s[d-1][0])>p?(v=parseFloat(s[d-1][0]),w=parseFloat(s[d-1][1]),m=parseFloat(s[d][0]),b=parseFloat(s[d][1]),-180<v&&v<l&&180==m&&d+1<s.length&&-180<s[d-1][0]&&s[d-1][0]<l?(g.push([-180,s[d][1]]),d++,g.push([s[d][0],s[d][1]])):o<v&&v<180&&-180===m&&d+1<s.length&&s[d-1][0]>o&&s[d-1][0]<180?(g.push([180,s[d][1]]),d++,g.push([s[d][0],s[d][1]])):(v<l&&o<m&&(x=v,v=m,m=x,x=w,w=b,b=x),o<v&&m<l&&(m+=360),v<=180&&180<=m&&v<m?(g.push([s[d-1][0]>o?180:-180,m=(x=(180-v)/(m-v))*b+(1-x)*w]),(g=[]).push([s[d-1][0]>o?-180:180,m]),y.push(g)):y.push(g=[]),g.push([A,s[d][1]]))):g.push([s[d][0],s[d][1]])}}else{var F=[];y.push(F);for(var P=0;P<s.length;++P)F.push([s[P][0],s[P][1]])}return y}}]),f);function f(t,a,s){o(this,f);var r=t,e=a,t=(Array.isArray(t)&&Array.isArray(a)||(r=[t.lng,t.lat],e=[a.lng,a.lat]),this.start=new c(r[0],r[1]),this.end=new c(e[0],e[1]),this.properties=s||{},this.start.x-this.end.x),a=this.start.y-this.end.y,s=Math.pow(Math.sin(a/2),2)+Math.cos(this.start.y)*Math.cos(this.end.y)*Math.pow(Math.sin(t/2),2);if(this.g=2*Math.asin(Math.sqrt(s)),this.g===Math.PI)throw new Error("it appears [".concat((r[0],r[1]),"] and [").concat((e[0],e[1]),"] are 'antipodal', e.g diametrically opposite, thus there is no single route but rather infinite"));if(isNaN(this.g))throw new Error("could not calculate great circle between [".concat((r[0],r[1]),"] and [").concat((e[0],e[1]),"]."))}return t.exports={Coord:c,Arc:u,GreatCircle:M},t.exports});;
Cube("datav:/com/@datav-city-pro-v2/datav-engine-od-flyline/2.1.4/odFlyline",[],function(e,t,u,i,r,n){function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t,i){return(g=o()?Reflect.construct.bind():function(e,t,i){var r=[null];r.push.apply(r,t);t=new(Function.bind.apply(e,r));return i&&k(t,i.prototype),t}).apply(null,arguments)}function v(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){var i;if(e)return"string"==typeof e?a(e,t):"Map"===(i="Object"===(i=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:i)||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?a(e,t):void 0}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=e[i];return r}function p(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(){return(f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,i){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:i):r.value}).apply(this,arguments)}function k(e,t){return(k=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function M(i){var r=o();return function(){var e,t=_(i),t=(e=r?(e=_(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(e&&("object"===h(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}function o(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}return e.exports=function(d){var T=d.THREE,r=d.Utils,i=d.VG,t=d.FormatTransformer,y=d.coordHelper,e=i.Layer,m=u("datav:/com/@datav-city-pro-v2/datav-engine-od-flyline/2.1.4/utils"),b=null,j=null,n=s;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&k(n,e);var a,o=M(s);function s(e){var t;if(this instanceof s)return(t=o.call(this)).classNameAlias="OdFlylineLayer",t.layerName=t.classNameAlias,t.renderQueue=i.Geometry,t.needsAutoUpdate=!0,t.options=Object.assign({visible:!0},e||{}),t;throw new TypeError("Cannot call a class as a function")}return n=s,(e=[{key:"addTo",value:function(e){f(_(s.prototype),"addTo",this).call(this,e),this.formatTransformer=new t;e=u("datav:/com/@datav-city-pro-v2/datav-engine-od-flyline/2.1.4/meshLine")(T);b=e.MeshLine,j=e.MeshLineMaterial}},{key:"setData",value:function(e){this.clear(),this.formattedData=null;var t=e;if(!e)return this.emit("rendered"),console.error("".concat(this.classNameAlias,": No data."));if(!Array.isArray(e)){if("FeatureCollection"!==e.type)return this.emit("rendered"),console.error("".concat(this.classNameAlias,": invalid data format, ").concat(e,"."));t=this.formatTransformer.geojson2datav(e)}if(!t.length)return this.emit("rendered"),console.error("".concat(this.classNameAlias,": the length of data is 0, ").concat(e,"."));this.formattedData=t,this.process(t),this.emit("rendered")}},{key:"dataErrorHandler",value:function(){this.emit("rendered")}},{key:"process",value:function(n){if(n){for(var a,o,e=this.options.options,t=e.general,e=e.graph,s=t.segments,l=e.arcRatio,c=new b,u=(this.meshLine=c,new T.Box3),h=new T.Vector3,i=0,r=n.length;i<r;i++)!function(e){var e=n[e].geometry.coordinates,e=(a=e[0],o=e[1],.5*(a[2]+o[2])||0),t=new m.GreatCircle(a,o).arc(3),t=[].concat(v(t[0][1]),[e]),e=(y.setFromArray(t),y.toArray()),t=y.normal;y.setFromValues(a[0],a[1],a[2]||0),a=y.toXYZ(),y.setFromValues(o[0],o[1],o[2]||0),o=y.toXYZ();var i=Math.abs(a.distanceTo(o))*l,e=[e[0]+i*t.x,e[1]+i*t.y,e[2]+i*t.z],e=g(T.Vector3,v(e)),i=new T.QuadraticBezierCurve3(a,e,o),r=[],t=(i.getPoints(s).forEach(function(e){r.push(e.x,e.y,e.z,e.x,e.y,e.z),h.set(e.x,e.y,e.z),u.expandByPoint(h)}),i.getLength());c.setGeometry(r,t,!1)}(i);var p,f,t=new T.Vector3;u.getCenter(t),c.createGeometry(),c.offsetPosition(t),this._linksGeometry&&this._linksGeometry.dispose&&this._linksGeometry.dispose(),this._linksGeometry=c.geometry,this.setMaterial(),this.linksMesh?this.linksMesh.geometry=this._linksGeometry:(p=(e=d.viewer.engine).renderer,e=e.camera,f=new T.Vector2,p.getDrawingBufferSize(f),this._linkMaterial.resolution.set(f.width,f.height),this._linkMaterial.near=e.near,this._linkMaterial.far=e.far,this._linkMaterial.needsUpdate=!0,this.linksMesh=new T.Mesh(this._linksGeometry,this._linkMaterial),this.add(this.linksMesh)),this.linksMesh.position.copy(t)}}},{key:"setMaterial",value:function(){var t=this,e=this.options.options,i=e.general,e=e.graph,r=i.sizeAttenuation,n=i.blurWidthRatio,i=i.blending,a=e.lineType,o=e.textureParams,s=e.base,e=e.highlight,l=e.brightSegCount,c=e.brightSegWidth,u=e.spaceRatio,h=e.brightSegColor,e=e.brightSegOpacity,p=s.baseColor,f=s.baseOpacity,s=s.baseWidth,d=o.lineTexture,o=o.symbolTexture,y=d.texture0Type,m=d.defaultTexture0Url,b=d.customTexture0Url,d=d.uvScale0,g=o.texture1Type,v=o.defaultTexture1Url,k=o.customTexture1Url,o=o.symbolIntervalLen,M=new T.TextureLoader;M.setCrossOrigin("anonymous");var _=this.viewer.controls.object.projectionMatrixInverse,w=null,O=null,S=null,x=null;a&&(x="default"===g?v:k,this.oldTexture0Url!==(S="default"===y?m:b)&&((w=M.load(S)).wrapS=T.RepeatWrapping,w.wrapT=T.RepeatWrapping),this.oldTexture1Url!==x&&((O=M.load(x,function(e){t._linkMaterial.symbolAspect=e.image.width/e.image.height})).wrapS=T.RepeatWrapping,O.wrapT=T.RepeatWrapping)),this._linkMaterial?(this._linkMaterial.color=new T.Color(p),this._linkMaterial.brightSegColor=new T.Color(h),this._linkMaterial.lineWidth=s,this._linkMaterial.brightSegWidth=c,this._linkMaterial.opacity=f,this._linkMaterial.brightSegOpacity=e,this._linkMaterial.brightSegCount=l,this._linkMaterial.sizeAttenuation=r,this._linkMaterial.blurWidthRatio=n,this.oldTexture0Url!==S&&(this._linkMaterial.map&&this._linkMaterial.map.dispose(),this._linkMaterial.map=w),this.oldTexture1Url!==x&&(this._linkMaterial.map1&&this._linkMaterial.map1.dispose(),this._linkMaterial.map1=O),this._linkMaterial.uvScale0=new T.Vector2(d.x,d.y),this._linkMaterial.spaceRatio=u,this._linkMaterial.symbolIntervalLen=o,this._linkMaterial.projectionMatrixInverse=_,this._linkMaterial.depthTest=!a,this._linkMaterial.blending=T[i],this._linkMaterial.needsUpdate=!0):this._linkMaterial=new j({depthTest:!a,transparent:!0,depthWrite:!1,resolution:new T.Vector2,sizeAttenuation:r?1:0,side:T.DoubleSide,blending:T[i],near:1,far:1,visibility:1,blurWidthRatio:n,dashOffset0:0,dashOffset1:0,brightSegCount:l,color:new T.Color(p),brightSegColor:h,lineWidth:s,brightSegWidth:c,opacity:f,brightSegOpacity:e,map:w,map1:O,uvScale0:new T.Vector2(d.x,d.y),spaceRatio:u,symbolIntervalLen:o,symbolAspect:1,projectionMatrixInverse:_}),this.oldTexture0Url=S,this.oldTexture1Url=x}},{key:"render",value:function(e){this.setData(e)}},{key:"animate",value:function(){var e,t;this._linkMaterial&&(e=(t=this.options.options.animate).dashSpeed0,t=t.dashSpeed1,this._linkMaterial.uniforms.dashOffset0.value+=e,this._linkMaterial.uniforms.dashOffset0.value%=1,this._linkMaterial.uniforms.dashOffset1.value+=t,this._linkMaterial.uniforms.dashOffset1.value%=1)}},{key:"autoUpdate",value:function(){this.animate()}},{key:"checkVisible",value:function(){this.options.visible?this.show():this.hide()}},{key:"hide",value:function(){this.options.visible=!1,f(_(s.prototype),"hide",this).call(this)}},{key:"show",value:function(){this.options.visible=!0,f(_(s.prototype),"show",this).call(this)}},{key:"updateOptions",value:function(e){var t=r.deepClone(this.options);this.options=r.mergeOptions(this.options,e||{}),this.checkVisible(),(c(t,e,"segments")||c(t,e,"arcRatio"))&&(this.clear(),this.process(this.formattedData)),this.setMaterial(t.options),r.easyDiff(t.sceneId.length,e.sceneId.length)&&r.deepDiff(t.sceneId,e.sceneId)||this.updateSceneId()}},{key:"clear",value:function(){f(_(s.prototype),"clear",this).call(this),this.meshLine&&this.meshLine.clear(),this.linksMesh=null}},{key:"destroy",value:function(){this.clear(),f(_(s.prototype),"destroy",this).call(this),this.formattedData&&(this.formattedData.length=0)}}])&&p(n.prototype,e),a&&p(n,a),Object.defineProperty(n,"prototype",{writable:!1}),s;function l(e,t){if(t.hasOwnProperty(e))return t[e];for(var i,r=Object.keys(t),n=0;n<r.length;n++){if(i)return i;"object"===h(t[r[n]])&&(i=l(e,t[r[n]]))}return i}function c(e,t,i){e=l(i,e),i=l(i,t);return"object"===h(e)&&"object"===h(i)?r.deepDiff(e,i):e!==i}},e.exports});;
Cube("datav:/com/@datav-city-pro-v2/datav-engine-od-flyline/2.1.4",["datav:/npm/eventemitter3/3.0.0"],function(e,t,r,o,n,i){function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function l(e,t){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function u(r){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=y(r),t=(e=o?(e=y(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(e&&("object"===a(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var s=r("datav:/npm/eventemitter3/3.0.0"),f=r("datav:/com/@datav-city-pro-v2/datav-engine-od-flyline/2.1.4/odFlyline"),r=function(){var e=n,t=s;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t);var r,o=u(n);function n(e,t){var r;if(this instanceof n)return(r=o.call(this)).options=t,r.comId="",r;throw new TypeError("Cannot call a class as a function")}return e=n,(t=[{key:"addTo",value:function(e,t){return this.cityproCore=e,this.comId=t,this.initLayer()}},{key:"initLayer",value:function(){var e=f(this.cityproCore);this.layer=new e(this.options),this.cityproCore.viewer.addLayer(this.comId,this.layer)}},{key:"setData",value:function(e){this.layer&&this.layer.setData(e)}},{key:"errorRender",value:function(){console.log("OD飞线组件数据错误"),this.layer&&this.layer.dataErrorHandler()}},{key:"updateOptions",value:function(e){this.layer&&this.layer.updateOptions&&this.layer.updateOptions(e)}},{key:"show",value:function(){this.layer&&this.layer.show&&this.layer.show()}},{key:"hide",value:function(){this.layer&&this.layer.hide&&this.layer.hide()}},{key:"remove",value:function(){this.clear(),console.log("remove is duplicate, please use clear instead.")}},{key:"clear",value:function(){this.layer&&this.layer.clear&&this.layer.clear()}},{key:"destroy",value:function(){this.layer&&this.layer.destroy&&this.layer.destroy()}}])&&c(e.prototype,t),r&&c(e,r),Object.defineProperty(e,"prototype",{writable:!1}),n}();return e.exports=r,e.exports});