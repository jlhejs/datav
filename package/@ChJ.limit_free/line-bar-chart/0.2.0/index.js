// env=undefined => env=publish 
Cube("datav:/com/@ChJ.limit_free/line-bar-chart/0.2.0",["datav:/npm/bcore/0.0.18/event","datav:/npm/jquery/2.1.4","datav:/npm/lodash/4.6.1","datav:/npm/echarts/3.7.2"],function(a,b,c){var d=c("datav:/npm/bcore/0.0.18/event"),e=c("datav:/npm/jquery/2.1.4"),f=c("datav:/npm/lodash/4.6.1"),g=c("datav:/npm/echarts/3.7.2");return a.exports=d.extend(function(a,b){this.config={theme:{}},this.container=e(a),this.apis=b.apis,this._data=null,this.chart=null,this.init(b)},{init:function(a){this.chart=g.init(this.container[0]),this.mergeConfig(a),this.updateLayout(),this.updateStyle()},render:function(a,b){a=this.data(a);var c=this.mergeConfig(b);this.updateStyle(),console.log(c);let d=[],e=[],f=new Map,g={},h=c.series.a.width,i=c.series.b.width;for(var j in c.series)d.push({name:c.series[j].series_name,textStyle:{color:c.legend.textColor}});for(let c in a.map((a)=>{f.set(a.x,a.y),g[a.s]||(g[a.s]=new Map)}),e=[...f.keys()],g)e.map((a)=>{g[c].set(a,0)});a.map((a)=>{g[a.s].set(a.x,a.y)}),console.log(e);let k={color:["#5793f3","#d14a61","#675bba"],tooltip:{trigger:"axis",axisPointer:{type:"cross"}},legend:{show:c.legend.show,data:d},grid:{containLabel:!0},xAxis:[{show:c.xAxis.show,type:"category",axisTick:{alignWithLabel:!0},axisLabel:{color:c.xAxis.labelColor,fontSize:c.xAxis.labelFontSize},splitLine:{show:c.xAxis.splitLineShow,lineStyle:{color:"#03214a",type:"solid",width:1}},axisLine:{lineStyle:{color:c.xAxis.axisColor}},data:e}],yAxis:[{show:c.yAxis.show,type:"value",position:"left",axisLabel:{color:c.yAxis.labelColor,formatter:"{value} "+c.yAxis.unit_01,fontSize:c.yAxis.labelFontSize},splitLine:{show:c.yAxis.splitLineShow,lineStyle:{color:"#03214a",type:"solid",width:1}},axisLine:{lineStyle:{color:c.yAxis.axisColor}}},{type:"value",position:"right",axisLabel:{color:c.yAxis.labelColor,formatter:"{value}"+c.yAxis.unit_02,fontSize:c.yAxis.labelFontSize},splitLine:{show:c.yAxis.splitLineShow,lineStyle:{color:"#03214a",type:"solid",width:1}},axisLine:{lineStyle:{color:c.yAxis.axisColor}}}],series:[{name:c.series.a.series_name,type:"bar",barWidth:c.series.a.width,itemStyle:{normal:{color:{type:"linear",x:0.5,y:1,x2:0.5,y2:0,colorStops:[{offset:0,color:c.series.a.color.from},{offset:1,color:c.series.a.color.to}],globalCoord:!1},barBorderRadius:[h/2,h/2,h/2,h/2]}},data:[...g[c.series.a.value].values()]},{name:c.series.b.series_name,type:"bar",barWidth:c.series.b.width,itemStyle:{normal:{color:{type:"linear",x:0.5,y:1,x2:0.5,y2:0,colorStops:[{offset:0,color:c.series.b.color.from},{offset:1,color:c.series.b.color.to}],globalCoord:!1},barBorderRadius:[i/2,i/2,i/2,i/2]}},data:[...g[c.series.b.value].values()]},{name:c.series.c.series_name,type:"line",smooth:!0,yAxisIndex:1,lineStyle:{normal:{color:c.series.c.color,width:c.series.c.lineWidth}},data:[...g[c.series.c.value].values()]}]};this.chart.setOption(k)},resize:function(a,b){this.chart.resize(),this.updateLayout(a,b)},setColors:function(){},data:function(a){return a&&(this._data=a),this._data},mergeConfig:function(a){return a?(this.config.theme=f.defaultsDeep(a.theme||{},this.config.theme),this.setColors(),this.config=f.defaultsDeep(a||{},this.config),this.config):this.config},updateLayout:function(){},updateStyle:function(){var a=this.config;this.container.css({"font-size":a.size+"px",color:a.color||"#fff"})},destroy:function(){console.log("\u8BF7\u5B9E\u73B0 destroy \u65B9\u6CD5"),this.chart.destroy()}}),a.exports});