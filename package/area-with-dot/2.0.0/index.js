Cube('datav:/com/area-with-dot/2.0.0',['datav:/npm/bcore/0.0.21/event','datav:/npm/dchart-area-with-line/0.0.11','datav:/npm/jquery/2.1.4','datav:/com/maliang-utils/0.0.4'],function(i,n,b,m,l,k){function j(a){return d[a]?d[a]:d[a]=c[a]()}var c={},d={};c['coms/area-with-dot/2.0.0/template.html']=c['coms/area-with-dot/2.0.0/template.html']=function(){return function(){return'<div class="area-with-dot-title" style="line-height: 1.3">\n	<span class="area-with-dot-main-title"></span>\n	<span class="area-with-dot-sub-title"></span>\n	<span class="clear-fix"></span>\n</div>\n<div class="area-with-dot-chart-container">\n</div>\n'}};var h=b('datav:/npm/bcore/0.0.21/event'),g=b('datav:/npm/dchart-area-with-line/0.0.11'),f=j('coms/area-with-dot/2.0.0/template.html'),e=b('datav:/npm/jquery/2.1.4'),a=b('datav:/com/maliang-utils/0.0.4');return i.exports=h.extend(function a(c,b){this.container=e(c);var d=this.config=e.extend(!0,{title:{},'sub-title':{},serie1:{},serie2:{},serie3:{},chartOption:{},chart:{withAnimated:!1,margin:{top:5,left:0,bottom:0,right:0},xaxis:{show:!1,'assist-line':!1,color:'#fff','font-size':12,ticks:5,type:'category',ticks:3,padding:[.4,0],groupPadding:[.4,0],dy:8},yaxis:{show:!1,min:0,'assist-line':!1,color:'#fff','font-size':12,ticks:5,dy:8},interpolate:null,gradientColors:[]}},b);this.apis=b.apis,this.init()},{init:function(){var a=this.config;this.container.html(f),this.container.css({'font-family':'Microsoft Yahei'}),this.chartDom=this.container.find('.area-with-dot-chart-container'),this.titleDom=this.container.find('.area-with-dot-main-title'),this.subTitleDom=this.container.find('.area-with-dot-sub-title'),this.updateStyle(),this.chart=new g(this.chartDom[0],a.chart||{})},updateStyle:function(){var a=this.config,b=this.container.innerHeight(),c=this.container.innerWidth();this.chartDom.css('height',b-Math.max(a.title['font-size'],a['sub-title']['font-size'])*1.3),this.titleDom.css({float:'left',color:a.title.color,'font-size':a.title['font-size']}),this.subTitleDom.css({float:'right',color:a['sub-title'].color,'font-size':a['sub-title']['font-size']}),this.container.find('.clear-fix').css({clear:'both',display:'block'})},setAxis:function(a){var b=this.config,d={xaxis:'.axis1',yaxis:'.axis2',zaxis:'.axis3'},e=d[a],c=this.chart.svg.selectAll(e);b.chart[a].show?(c.style('display','block'),c.selectAll('.tick line').style({display:'block',stroke:b.chart[a].color}),c.selectAll('.tick text').style({fill:b.chart[a].color,'font-size':b.chart[a]['font-size']+'px'}),c.select('.domain').style({display:b.chart[a]['assist-line']&&'block'||'none',fill:'none',stroke:b.chart[a].color})):c.style('display','none')},data:function(b){var c=this.config;return b&&b.length?(c.chartOption&&c.chartOption.increase&&(b=(this._data||[]).concat(b),b.length>c.chartOption.increaseSize&&(b=b.slice(b.length-c.chartOption.increaseSize))),this.__data=_.clone(b),this._data=a.threeD2Two(b,'x','y','s',a.getSeriesValue(this.config.series,'serie-value'))):this._data=a.threeD2Two(this.__data,'x','y','s',a.getSeriesValue(this.config.series,'serie-value')),this._data},getSerieIndex:function(d){var b=this.config,c=a.getSeriesValue(b.series,'serie-value');return _.indexOf(c,d)},render:function(d,f){f&&f.series&&(this.config.series=f.series);var a=this.config=_.defaultsDeep(f||{},this.config);if(d=this.data(d),!(d&&d.length))return;var e=[];for(var b=0;b<d.length;b++){e[b]={x:d[b].x,y:[]};for(var c=0;c<d[b].y.length;c++){var h=a.series[c]&&a.series[c].denominator?a.series[c].denominator:a['default-serie'].denominator;isNaN(parseFloat(d[b].y[c]))&&(e[b].y[c]=0),e[b].y[c]=d[b].y[c]/h}}this.updateStyle(),a.chart.gradientColors=[],_.map(a.series,function(b,c){a.chart.gradientColors.push(b.gradientColor)}),this.chart.render(e,a.chart),this.chart.el.select('.con-svg').style('background','transparent');var g=this;g.chart.svg.selectAll('.line-g .serie').style('stroke',a['default-serie'].lineColor),_.map(a.series,function(a,b){g.chart.svg.selectAll('.line-g .serie'+(b+1)).style('stroke',a.lineColor)}),this.chart.svg.selectAll('.series .serie').style('stroke','none'),this.chart.svg.selectAll('.line-g .serie').style('fill','none'),this.setAxis('xaxis'),this.setAxis('yaxis'),this.titleDom.text(a.title.value),this.subTitleDom.text(_.round(e[e.length-1].y[0],2)+a['sub-title'].value)},resize:function(a,b){this.render(null,{chart:{height:b,width:a}})},clearAllData:function(){this._data=[]}}),i.exports})