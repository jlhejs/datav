// env=undefined => env=publish 
Cube("datav:/com/@echarts/ml-echarts-gauge/2.0.15",["datav:/com/maliang-echarts-utils/0.0.18","datav:/npm/bcore/0.0.18/event","datav:/npm/jquery/2.1.4","datav:/npm/lodash/4.6.1","datav:/npm/echarts/4.4.0"],function(t,i,e,s,n,r){var a=e("datav:/npm/bcore/0.0.18/event"),o=e("datav:/npm/jquery/2.1.4"),c=e("datav:/npm/lodash/4.6.1"),h=e("datav:/npm/echarts/4.4.0"),f=e("datav:/com/maliang-echarts-utils/0.0.18");return t.exports=a.extend(function(t,i){this.config={tooltip:{formatter:"{a} <br/>{b} : {c}%"},_series:{type:"gauge",title:{horiOffset:0,vertiOffset:40},detail:{horiOffset:0,vertiOffset:-40}}},this.container=o(t),this.apis=i.apis,this._data=null,this.chart=null,this.initCfg=null,this.init(i)},{init:function(t){t=this.mergeConfig(t),this.chart=h.init(this.container[0]),this.chart.setOption(f.config2echartsOptions(t)),this.updateStyle(),this.initCfg=c.cloneDeep(f.config2echartsOptions(t))},render:function(t,i){var e,s,n=this;t&&t.length&&(t=this.data(t),i&&this.mergeConfig(i),i=this.mergeConfig(f.data2echartsGauge(t,this.config)),(t=f.config2echartsOptions(i))&&t.series&&(i=i.chart||{centerX:50,centerY:80},e=i.centerX,s=i.centerY,t.series.forEach(function(t,i){t.center=["".concat(e,"%"),"".concat(s,"%")],t.radius="".concat(2*n.initCfg.series[i].radius,"%")})),this.chart.setOption(t),this.updateStyle())},resize:function(t,i){this.chart.resize({width:t,height:i})},setColors:function(){},data:function(t){return t&&(t[0].value&&"number"!=typeof t[0].value&&c.isNaN(c.toNumber(t[0].value))&&(t[0].value=this.config._series.min),this._data=t),this._data},mergeConfig:function(t){return t&&(t.series&&(this.config._series=c.defaultsDeep(t.series[0]||{},this.config._series)),t._series&&this.config._series.axisLine&&t._series.axisLine.lineStyle&&t._series.axisLine.lineStyle._color&&(this.config._series.axisLine.lineStyle._color=t._series.axisLine.lineStyle._color),this.config=c.defaultsDeep(t||{},this.config),this.config._series.axisLine.lineStyle.color=c.map(this.config._series.axisLine.lineStyle._color,function(t){return[t.pos,t.color]}),this.config.tooltip.formatter="{a} <br/>{b} : {c}"+(this.config._series.detail.unit||""),this.config._series.detail.formatter="{value}"+(this.config._series.detail.unit||""),this.config._series.detail.offsetCenter=["".concat(this.config._series.detail.horiOffset,"%"),"".concat(this.config._series.detail.vertiOffset,"%")],this.config._series.title.offsetCenter=["".concat(this.config._series.title.horiOffset,"%"),"".concat(this.config._series.title.vertiOffset,"%")],this.config.series=[this.config._series],this.config.tooltip.showContent=this.config.tooltip.show),this.config},updateStyle:function(){this.config},updateOptions:function(t){t=this.mergeConfig(t);var i,e,s=f.config2echartsOptions(t);s&&s.series&&(t=t.chart||{centerX:50,centerY:80},i=t.centerX,e=t.centerY,s.series.forEach(function(t){t.center=["".concat(i,"%"),"".concat(e,"%")],t.radius="".concat(2*t.radius,"%")})),this.chart.setOption(s)},clear:function(){this.chart&&this.chart.clear&&this.chart.clear()},destroy:function(){this.chart&&this.chart.dispose&&this.chart.dispose()}}),t.exports});