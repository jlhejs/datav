// env=undefined => env=publish 
Cube("datav:/com/@lottery/single-lottery/0.0.13/single",["datav:/npm/bcore/0.0.9/event","datav:/npm/jquery/2.1.4","datav:/npm/lodash/4.17.15"],function(t,i,n,e,s,o){var r=n("datav:/npm/bcore/0.0.9/event"),a=n("datav:/npm/jquery/2.1.4"),h=n("datav:/npm/lodash/4.17.15"),l=h.template("\n  <div class='number-container' style='position: relative; display: inline-block;'>\n    <div class='ball' style='position: relative; height:1em; width: .6em;'>\n      <div class='scroll scrollRun' style='display: flex; align-items: center; justify-content: center;'>\n        <div class='number' style='height: 1em; line-height: 1em;'><%= number %></div>\n      </div>\n    </div>\n  </div>\n");return t.exports=r.extend(function(t,i){this.config={digital:6,duration:{min:100,max:100},numbers:[0,1,2,3,4,5,6,7,8,9]},this.container=a(t),this.apis=null,this._data=null,this.chart=null,this.rollDuration=h.random(this.config.duration.min,this.config.duration.max,!0),this.init(i)},{init:function(t){t=this.mergeConfig(t);t=l({number:0});this.container.append(t),this.numberDom=this.container.find(".number"),this.updateStyle()},updateOptions:function(t){h.isEqual(this.config,t)||this.mergeConfig(t),this.render()},render:function(t){this.data(t)},startLoop:function(){this.looping=!0,this.loop()},loop:function(){var i=this,n=this.config;this.timer&&clearTimeout(this.timer),this.timer=this.looping&&setTimeout(function(){i.duration=i.rollDuration;var t=h.sample(n.numbers);i.numberDom.html(t),i.loop()},this.rollDuration)},stop:function(){this.timer&&clearTimeout(this.timer),this.looping=!1,this.numberDom.html(this._data)},resize:function(t,i){this.render()},data:function(t){return h.isNumber(t)&&(this._data&&this.same(t)||(this._data=t)),this._data},same:function(t){return h.isEqual(t,this._data)},mergeConfig:function(t){return t&&(t.numbers&&(this.config.numbers=t.numbers),this.config=h.defaultsDeep(t||{},this.config)),this.config},updateStyle:function(){this.config},clear:function(){this.timer&&clearTimeout(this.timer),this.numberDom.html("0")},destroy:function(){this.timer&&clearTimeout(this.timer),this._data=null,this.off&&this.off(),this.container.empty()}}),t.exports});;
Cube("datav:/com/@lottery/single-lottery/0.0.13",["datav:/npm/bcore/0.0.9/event","datav:/npm/jquery/2.1.4","datav:/npm/lodash/4.17.15"],function(t,i,n,e,s,r){var a=function(t,i){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,i){var n=[],e=!0,s=!1,r=void 0;try{for(var a,o=t[Symbol.iterator]();!(e=(a=o.next()).done)&&(n.push(a.value),!i||n.length!==i);e=!0);}catch(t){s=!0,r=t}finally{try{!e&&o.return&&o.return()}finally{if(s)throw r}}return n}(t,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")},f=Object.assign||function(t){for(var i=1;i<arguments.length;i++){var n,e=arguments[i];for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}return t},o=n("datav:/npm/bcore/0.0.9/event"),h=n("datav:/npm/jquery/2.1.4"),l=n("datav:/npm/lodash/4.17.15"),u=n("datav:/com/@lottery/single-lottery/0.0.13/single"),d=l.template("\n  <div class='container' style='display: inline-block; position: relative; vertical-align: top;'></div>\n");return t.exports=o.extend(function(t,i){this.config={global:{prefix:{},nick:{},workId:{},suffix:{}},number:{digital:6,rollDurationStart:100,rollDurationEnd:100,numbers:[0,1,2,3,4,5,6,7,8,9],nameWidth:700,nameColor:"#402706",changedColorEnable:!1,changedColor:"#fff"}},this.container=h(t).css({display:"flex",alignItems:"center"}),this.apis=null,this._data=null,this.numbers=[],this.init(i)},{init:function(t){var i=(t=this.mergeConfig(t)).global.workId.digital;this.container.append('<div class="prefix" style="display: inline-flex; align-items: center;"></div><div class="nick" style="display: inline-flex; align-items: center;"></div>');for(var n=0;n<i;n++){var e=h(d()),s=new u(e[0],this.mergeNumberConfig(t,n));this.container.append(e),this.numbers.push(s)}this.container.append('<div class="suffix" style="display: inline-flex; align-items: center;"></div>'),this.prefix=this.container.find(".prefix"),this.name=this.container.find(".nick"),this.suffix=this.container.find(".suffix"),this.number=this.container.find(".number-container"),this.dynamicInit(this.name,t.global.nick),this.dynamicInit(this.prefix,t.global.prefix),this.dynamicInit(this.suffix,t.global.suffix),this.updateStyle()},dynamicInit:function(t){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=i.width,e=i.margin,s=e.left,r=e.right,a=i.contentType,o=void 0===a?"text":a,h=i.content,l=i.font,u=i.shadow,e=i.img,a=i.size,i=i.round;t.css(f({width:n,marginLeft:s,marginRight:r,textShadow:u.offsetX+"px "+u.offsetY+"px "+u.blur+"px "+u.color},l)),"img"===o?t.append('<img src="'+e+'" style=" width: '+a.width+"px; height: "+a.height+"px; border-radius: "+i+'px;" />'):t.html(h)},update:function(t){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=i.width,e=i.margin,s=e.left,r=e.right,a=i.contentType,o=void 0===a?"text":a,h=i.content,l=i.font,u=i.shadow,e=i.img,a=i.size,i=i.round;t.css({width:n,marginLeft:s,marginRight:r}),"img"===o?t.find("img").attr("src",e).css({width:a.width,height:a.height,borderRadius:i}):(t.html(h),t.css(f({textShadow:u.offsetX+"px "+u.offsetY+"px "+u.blur+"px "+u.color},l)))},updateStyle:function(){var t=this.config;this.update(this.name,t.global.nick),this.update(this.prefix,t.global.prefix),this.update(this.suffix,t.global.suffix),this.number.css(t.global.workId.font)},updateOptions:function(t){var i;l.isEqual(this.config,t)||(l.isEqual(this.config.number,t.number)?(this.mergeConfig(t),this.updateStyle()):(i=this.data(),this.destroy(),this.init(t),this.render(i)))},render:function(t){var t=((t=this.data(t)||{})[0]||{}).id,n=(void 0===t?"":t).split("").map(function(t){return+t});this.numbers&&this.numbers.length&&this.numbers.forEach(function(t,i){t&&t.render&&t.render(n[i])})},loop:function(){this.numbers&&this.numbers.length&&this.numbers.forEach(function(t){t&&t.startLoop&&t.startLoop()})},stop:function(t){t&&t.index?(t=l.toNumber(t.index),l.isNumber(t)&&this.numbers&&this.numbers[t]&&this.numbers[t].stop&&this.numbers[t].stop()):this.numbers&&this.numbers.forEach(function(t){t&&t.stop&&t.stop()})},showName:function(){var t=this.data()||[{}],t=a(t,1)[0],t=(t=void 0===t?{}:t).name;t&&this.name&&this.name.html(t)},resize:function(t,i){this.render()},data:function(t){return t&&(this.config,this._data&&this.same(t)||(this._data=t)),this._data},same:function(t){return l.isEqual(t,this._data)},mergeConfig:function(t){return t&&(this.config=l.defaultsDeep(t||{},this.config)),this.config},mergeNumberConfig:function(t,i){return f({},t.global.workId,{numbers:t.global.workId.numbers[i]&&t.global.workId.numbers[i].split(",")})},clear:function(){this.name.html("锦鲤"),this.numbers&&this.numbers.length&&this.numbers.forEach(function(t){t&&t.clear&&t.clear()})},destroy:function(){this.numbers&&this.numbers.length&&this.numbers.forEach(function(t){t&&t.destroy&&t.destroy()}),this.numbers=[],this._data=null,this.off&&this.off(),this.container.empty()}}),t.exports});