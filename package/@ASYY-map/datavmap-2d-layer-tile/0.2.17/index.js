// env=undefined => env=publish 
Cube("datav:/com/datavmap-2d-layer-tile/0.2.17/filter.js",["datav:/npm/bcore/0.0.21/event"],function(a,b,c){function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&("object"===typeof b||"function"===typeof b)?b:a}function f(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var g=function(){function a(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=null;return a.exports=function(a){function b(a){return(Math.round(1e4*a)/100).toFixed(2)+"%"}var i=c("datav:/npm/bcore/0.0.21/event"),j=a.datavUtils,k={brightness:1,contrast:1,grayscale:0,hueRotate:0,invert:0,saturate:1,sepia:0,blur:0};return h||(h=function(a){function c(a,b){d(this,c);var f=e(this,(c.__proto__||Object.getPrototypeOf(c)).call(this));return f.container=a,f.options=j.mergeOptions(k,b),f}return f(c,a),g(c,[{key:"setContainer",value:function(a){this.container=a,this.updateOptions({})}},{key:"reset",value:function(){this.updateFilter(k)}},{key:"updateFilter",value:function(a){this.container.style.transition="-webkit-filter .2s",this.container.style["-webkit-filter"]="brightness("+b(a.brightness)+") contrast("+b(a.contrast)+") grayscale("+b(a.grayscale)+") hue-rotate("+a.hueRotate+"deg) invert("+b(a.invert)+") saturate("+b(a.saturate)+") sepia("+b(a.sepia)+") blur("+a.blur+"px)"}},{key:"updateOptions",value:function(a){this.options=j.mergeOptions(this.options,a),this.updateFilter(this.options)}}]),c}(i))},a.exports});;
Cube("datav:/com/datavmap-2d-layer-tile/0.2.17/tileData.js",[],function(a){function b(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}var c,d="&copy; <a href=\"#\">\u9AD8\u5FB7\u5730\u56FE</a>",e="&copy; <a href=\"#\">\u817E\u8BAF\u5730\u56FE</a>",f="Map tiles by Stamen Design";return a.exports=(c={SatelliteAMap:{url:"//webst02.is.autonavi.com/appmaptile?style=6&x={x}&y={y}&z={z}",options:{attribution:d,minZoom:2,maxZoom:18,name:"\u536B\u661F(\u9AD8\u5FB7)"}},NormalGoogle:{url:"http://www.google.cn/maps/vt?lyrs=m@189&gl=cn&x={x}&y={y}&z={z}",options:{attribution:d,minZoom:2,maxZoom:18,name:"\u666E\u901A(\u8C37\u6B4C)"}},"ESRI-World-Street":{url:"http://services.arcgisonline.com/arcgis/rest/services/World_Street_Map/MapServer/tile/{z}/{y}/{x}",options:{attribution:"&copy; <a href=\"./\">ESRI</a>",minZoom:0,maxZoom:20,maxNativeZoom:18,name:"ESRI World Street"}},"ESRI-World-Dark":{url:"http://services.arcgisonline.com/arcgis/rest/services/Canvas/World_Dark_Gray_Base/MapServer/tile/{z}/{y}/{x}",options:{attribution:"&copy; <a href=\"./\">ESRI</a>",minZoom:0,maxZoom:20,maxNativeZoom:18,name:"ESRI World Dark"}},"ESRI-World-Light":{url:"http://services.arcgisonline.com/arcgis/rest/services/Canvas/World_Light_Gray_Base/MapServer/tile/{z}/{y}/{x}",options:{attribution:"&copy; <a href=\"./\">ESRI</a>",minZoom:0,maxZoom:20,maxNativeZoom:18,name:"ESRI World Light"}},"Mapbox-World-Light":{url:"https:{s}.tiles.mapbox.com/v3/mapbox.world-light/{z}/{x}/{y}.png",options:{subdomains:"abc",attribution:"&copy; <a href=\"./\">Mapbox</a>",minZoom:0,maxZoom:20,maxNativeZoom:18,name:"Mapbox World Light"}},"Mapbox-World-Dark":{url:"https:{s}.tiles.mapbox.com/v3/mapbox.world-dark/{z}/{x}/{y}.png",options:{subdomains:"abc",attribution:"&copy; <a href=\"./\">Mapbox</a>",minZoom:0,maxZoom:20,maxNativeZoom:18,name:"Mapbox World Dark"}},"Mapbox-World-Blue":{url:"https:{s}.tiles.mapbox.com/v3/mapbox.world-blue/{z}/{x}/{y}.png",options:{subdomains:"abc",attribution:"&copy; <a href=\"./\">Mapbox</a>",minZoom:0,maxZoom:20,maxNativeZoom:18,name:"Mapbox World Blue"}},OpenStreetMap:{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",options:{maxZoom:19,attribution:"&copy; <a href=\"http://www.openstreetmap.org/copyright\">OpenStreetMap</a>",minZoom:2,name:"OpenStreetMap"}},"CartoDB-World-Light":{url:"https://cartodb-basemaps-{s}.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png",options:{maxZoom:19,attribution:"&copy; <a href=\"http://cartodb.com/attributions\">CartoDB</a>",subdomains:"abcd",minZoom:2,name:"CartoDB"}},"CartoDB-World-Dark":{url:"https://cartodb-basemaps-{s}.global.ssl.fastly.net/dark_all/{z}/{x}/{y}.png",options:{maxZoom:19,attribution:"&copy; <a href=\"http://cartodb.com/attributions\">CartoDB</a>",subdomains:"abcd",minZoom:2,name:"CartoDB"}},AMapRoad:{url:function(a){var b=a.x,c=a.y,d=a.z;return"http://tm.amap.com/trafficengine/mapabc/traffictile?v=1.0&t=1&x="+b+"&y="+c+"&z="+d+"&random="+Math.random()},options:{attribution:d,minZoom:2,maxZoom:18,name:"\u8DEF\u7F51(\u9AD8\u5FB7)"}},SatelliteTMap:{url:function(a){var b=a.x,c=a.y,d=a.z;return c=Math.pow(2,d)-c-1,"http://p"+Math.floor(4*Math.random())+".map.gtimg.com/sateTiles/"+d+"/"+Math.floor(b/16)+"/"+Math.floor(c/16)+"/"+b+"_"+c+".jpg"},options:{attribution:e,minZoom:2,maxZoom:18,name:"\u536B\u661F(\u817E\u8BAF)"}},SatelliteGoogle:{url:"http://mt3.google.cn/vt/lyrs=s&hl=zh-CN&gl=cn&x={x}&y={y}&z={z}",options:{attribution:d,minZoom:2,maxZoom:18,name:"\u536B\u661F(\u8C37\u6B4C)"}},TMapTerrain:{url:function(a){var b=a.x,c=a.y,d=a.z;return c=Math.pow(2,d)-c-1,"http://p"+Math.floor(4*Math.random())+".map.gtimg.com/demTiles/"+d+"/"+Math.floor(b/16)+"/"+Math.floor(c/16)+"/"+b+"_"+c+".jpg"},options:{attribution:e,minZoom:2,maxZoom:18,name:"\u5730\u5F62(\u817E\u8BAF)"}},TianDiMap:{url:"//t0.tianditu.com/DataServer?T=vec_w&x={x}&y={y}&l={z}",options:{minZoom:2,maxZoom:18,name:"\u5929\u5730\u56FE"}},SatelliteEsri:{url:"//server.arcgisonline.com/arcgis/rest/services/world_imagery/mapserver/tile/{z}/{y}/{x}",options:{attribution:"&copy; <a href=\"//maps.esri.com/\">esri</a>",minZoom:0,maxZoom:20,name:"\u536B\u661F(esri)"}},TMapRoad:{url:function(a){var b=a.x,c=a.y,d=a.z,e=""+Date.parse(new Date),f="abc".charAt(~~(3*Math.random()));return b=b.toString(),c=c.toString(),d=d.toString(),"//rtt2"+f+".map.qq.com/rtt/?z="+d+"&x="+b+"&y="+(Math.pow(2,+d)-1-c)+"&timeKey="+e.substring(0,e.length-4)},options:{attribution:e,minZoom:2,maxZoom:18,name:"\u8DEF\u7F51(\u817E\u8BAF)"}},NormalAMap1:{url:"//webrd03.is.autonavi.com/appmaptile?lang=zh_cn&size=1&scale=1&style=7&x={x}&y={y}&z={z}",options:{attribution:d,minZoom:2,maxZoom:18,name:"\u7B80\u5355(\u9AD8\u5FB7)"}},NormalAMap:{url:"//webrd03.is.autonavi.com/appmaptile?lang=zh_cn&size=1&scale=1&style=8&x={x}&y={y}&z={z}",options:{attribution:d,minZoom:2,maxZoom:18,name:"\u666E\u901A(\u9AD8\u5FB7)"}},GeoQBlue:{url:"//map.geoq.cn/ArcGIS/rest/services/ChinaOnlineStreetPurplishBlue/MapServer/tile/{z}/{y}/{x}",options:{attribution:"&copy; <a href=\"./\">geoq</a>",minZoom:0,maxZoom:20,maxNativeZoom:16,name:"\u84DD\u8272(geoQ)"}},GeoQGray:{url:"//map.geoq.cn/ArcGIS/rest/services/ChinaOnlineStreetGray/MapServer/tile/{z}/{y}/{x}",options:{attribution:"&copy; <a href=\"./\">geoq</a>",minZoom:0,maxZoom:20,maxNativeZoom:16,name:"\u7070\u8272(geoQ)"}},GeoQBound:{url:"//thematic.geoq.cn/arcgis/rest/services/ThematicMaps/administrative_division_boundaryandlabel/MapServer/tile/{z}/{y}/{x}",options:{attribution:"&copy; <a href=\"./\">geoq</a>",minZoom:0,maxZoom:20,maxNativeZoom:16,name:"\u8FB9\u754C(geoQ)"}},GeoQColorplate:{url:"//map.geoq.cn/ArcGIS/rest/services/ChinaOnlineCommunity/MapServer/tile/{z}/{y}/{x}",options:{attribution:"&copy; <a href=\"./\">geoq</a>",minZoom:0,maxZoom:20,maxNativeZoom:16,name:"\u5F69\u8272(geoQ)"}},GeoQBoundOnly:{url:"http://30.9.160.123:8887/v2/tiles/{z}/{x}/{y}.pbf",options:{attribution:"&copy; <a href=\"./\">geoq</a>",minZoom:0,maxZoom:20,maxNativeZoom:16,name:"\u4EC5\u8FB9\u754C(geoQ)"}},GeoQWater:{url:"//thematic.geoq.cn/arcgis/rest/services/ThematicMaps/WorldHydroMap/MapServer/tile/{z}/{y}/{x}",options:{attribution:"&copy; <a href=\"./\">geoq</a>",minZoom:0,maxZoom:20,name:"\u6C34\u7CFB(geoQ)"}},GeoQRailway:{url:"//thematic.geoq.cn/arcgis/rest/services/ThematicMaps/Subway/MapServer/tile/{z}/{y}/{x}",options:{attribution:"&copy; <a href=\"./\">geoq</a>",minZoom:0,maxZoom:20,maxNativeZoom:16,name:"\u5730\u94C1(geoQ)"}}},b(c,"OpenStreetMap",{disable:!0,url:"//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",options:{attribution:"&copy; <a href=\"//www.openstreetmap.org/copyright\">OpenStreetMap</a>",name:"OSM"},variants:{Mapnik:{},BlackAndWhite:{url:"//{s}.tiles.wmflabs.org/bw-mapnik/{z}/{x}/{y}.png"},DE:{url:"//{s}.tile.openstreetmap.de/tiles/osmde/{z}/{x}/{y}.png"},HOT:{url:"//{s}.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png",options:{attribution:"{attribution.OpenStreetMap}, Tiles courtesy of <a href=\"//hot.openstreetmap.org/\" target=\"_blank\">Humanitarian OpenStreetMap Team</a>"}}}}),b(c,"StamenToner",{url:"//{s}.tile.stamen.com/toner/{z}/{x}/{y}.png",options:{attribution:f,subdomains:"abcd",minZoom:0,maxZoom:20,name:"\u6728\u523B(stamen)"}}),b(c,"StamenWaterColor",{url:"//{s}.tile.stamen.com/watercolor/{z}/{x}/{y}.png",options:{attribution:f,subdomains:"abcd",minZoom:1,maxZoom:16,name:"\u6C34\u5F69(stamen)"}}),b(c,"OpenTopoMap",{url:"//{s}.tile.opentopomap.org/{z}/{x}/{y}.png",options:{attribution:"&copy; <a href=\"//opentopomap.org/\">opentopomap</a>",subdomains:"abcd",minZoom:0,maxZoom:20,name:"\u9AD8\u7A0B(OTM)",desc:"\u514D\u8D39\u5730\u56FE\uFF0C\u6570\u636E\u6765\u81EAOpenStreetMap\u548CSRTM\u9AD8\u7A0B\u6570\u636E"}}),c),a.exports});;
Cube("datav:/com/datavmap-2d-layer-tile/0.2.17/tileLayer.js",[],function(a,b,c){function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&("object"===typeof b||"function"===typeof b)?b:a}function f(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var g=function(){function a(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=null;return a.exports=function(a){var b=a.datavUtils,i=a.BaseLayer,j=c("datav:/com/datavmap-2d-layer-tile/0.2.17/tileData.js"),k=c("datav:/com/datavmap-2d-layer-tile/0.2.17/filter.js")(a),l={opacity:1,maskColor:"rgba(0,0,0,0)",url:"GeoQBlue",isAutoRefresh:!1,refreshTime:10,isFilter:!1,filter:{brightness:1,contrast:1,grayscale:0,hueRotate:0,invert:0,saturate:1,sepia:0,blur:0}};return h||(h=function(c){function h(a){d(this,h);var c=e(this,(h.__proto__||Object.getPrototypeOf(h)).call(this));return a=b.mergeOptions(l,a),c.options=b.mergeOptions(c.options,a),c}return f(h,c),g(h,[{key:"init",value:function(){var b=this,c=this.getTileOptions();this.layer=a.tileLayer(c),this.layer.addTo(this.map),this.layer&&this.layer.setOpacity(this.options.opacity),this.initFilter(),this.updateFilter(this.options),this.options.isAutoRefresh&&this.autoRefresh(),this.options.isAutoRefresh||this.stopAutoRefresh();var d=this.mask=document.createElement("div"),e=this.map.getSize();d.style.width=e.x+"px",d.style.height=e.y+"px",d.style.position="absolute",d.style.top=0,d.style.left=0,d.style.zIndex=1,d.style.pointerEvents="none",d.style.background=this.options.maskColor||"rgba(0,0,0,0)",d.setAttribute("class","leaflet-mask"),this.map.getPane("tilePane").appendChild(d),this.map.on("move",function(){if(b.mask){var c=b.map.getSize();b.mask.style.width=c.x+"px",b.mask.style.height=c.y+"px";var d=a.DomUtil.getPosition(b.map.getPane("mapPane"));d&&a.DomUtil.setPosition(b.mask,{x:-d.x,y:-d.y})}},this),this.visibility=!0}},{key:"getTileOptions",value:function(){var a=""===this.options.url?j.NormalAMap:j[this.options.url]||{url:this.options.url,options:{minZoom:2,maxZoom:20,maxNativeZoom:18}};return a}},{key:"autoRefresh",value:function(){var a=this;this.stopAutoRefresh();var b=this.getTileOptions();"string"===typeof b.url?this.layer&&this.layer.setUrl(b.url+(b.url.split("?")[1]?"&":"?")+"random="+Math.random()):this.layer&&this.layer.setUrl(b.url);var c=this.options.refreshTime;this.timer=setTimeout(function(){a.autoRefresh()},60*(1e3*c))}},{key:"stopAutoRefresh",value:function(){this.timer&&clearTimeout(this.timer)}},{key:"initFilter",value:function(){this.filter=new k(this.layer.getContainer(),this.options.filter)}},{key:"updateFilter",value:function(a){a.isFilter?this.filter.updateOptions(a.filter):this.resetFilter()}},{key:"updateFilterContainer",value:function(){this.filter&&this.filter.setContainer(this.layer.getContainer())}},{key:"resetFilter",value:function(){this.filter&&this.filter.reset()}},{key:"show",value:function(){this.visibility=!0,this.layer&&this.layer.setOpacity(this.options.opacity),this.mask&&(this.mask.style.display="block")}},{key:"hide",value:function(){this.visibility=!1,this.layer&&this.layer.setOpacity(0),this.mask&&(this.mask.style.display="none")}},{key:"setZIndex",value:function(a){this.layer&&this.layer.setZIndex(a)}},{key:"updateUrl",value:function(){var a=this.getTileOptions();this.layer._url===a.url||(this.layer.setUrl(a.url),this.layer.options=b.mergeOptions(this.layer.options,a.options),this.updateFilterContainer())}},{key:"onUpdateOptions",value:function(a){this.updateUrl(a),this.mask.style.background=a.maskColor,this.layer&&(this.visibility?this.layer.setOpacity(a.opacity):this.layer.setOpacity(0)),this.options.isAutoRefresh&&this.autoRefresh(),this.options.isAutoRefresh||this.stopAutoRefresh(),this.updateFilter(a)}},{key:"onRemove",value:function(){this.stopAutoRefresh(),this.layer&&this.layer.remove(),this.layer=null}}]),h}(i))},a.exports});;
Cube("datav:/com/datavmap-2d-layer-tile/0.2.17",["datav:/npm/bcore/0.0.21/event"],function(a,b,c){function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&("object"===typeof b||"function"===typeof b)?b:a}function f(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var g=function(){function a(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=c("datav:/npm/bcore/0.0.21/event"),i=c("datav:/com/datavmap-2d-layer-tile/0.2.17/tileLayer.js"),j=void 0,k={},l=function(a){function b(a,c){d(this,b);var f=e(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return f.container="string"===typeof a?document.querySelector(a):a,f.apis=c.apis,f.map=null,f._data=null,f.config=c,f.config.visibility=!0,f}return f(b,a),g(b,[{key:"init",value:function(){var a=this.getOptions(),b=i(this.map.L);this.layer=new b(a),this.layer.addTo(this.map)}},{key:"addTo",value:function(a){this.map=a,j=a.L.datavUtils,this.init()}},{key:"getOptions",value:function(){return this.config=j&&j.mergeOptions(k,this.config),this.config}},{key:"data",value:function(a){return a&&(this._data=a),this._data}},{key:"show",value:function(){this.config.visibility=!0,this.layer&&this.layer.show&&this.layer.show()}},{key:"hide",value:function(){this.config.visibility=!1,this.layer&&this.layer.hide&&this.layer.hide()}},{key:"remove",value:function(){this.layer&&this.layer.remove&&this.layer.remove(),this.layer=null,this._data=null}},{key:"render",value:function(){}},{key:"updateOptions",value:function(a){this.config=j.mergeOptions(this.config,a),a=this.getOptions(),this.layer&&this.layer.updateOptions(a),this.config.visibility?this.show():this.hide()}}]),b}(h);return a.exports=l,a.exports});