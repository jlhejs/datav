Cube('datav:/com/map2d-layer-lines-konva/0.0.9',['datav:/npm/bcore/0.0.18/event','datav:/npm/ldmap/0.1.2/core/utils','datav:/npm/ldmap/0.1.2/leaflet','datav:/npm/ldmap/0.1.2/layer/lines_konva'],function(e,k,c,i,j,h){function a(){var c=arguments[arguments.length-1];this.options=b.deepMerge(a.options,c),this.shapes={},this.points=[]}var f=c('datav:/npm/bcore/0.0.18/event'),b=c('datav:/npm/ldmap/0.1.2/core/utils'),g=c('datav:/npm/ldmap/0.1.2/leaflet'),d=c('datav:/npm/ldmap/0.1.2/layer/lines_konva');return a.options={id:function(a,b){return a.id||b},popup:function(a){return a?a.info?a.info:b.popupFromObject(a):void 0},color:{from:'rgba(245,230,0,1)',to:'rgba(205,0,0, 0.6)',none:'rgba(200,200,200, 0.6)',easing:'Linear.None.1.7',space:'rgb'},weight:2},a=f.extend(a,{addTo:function(a){a._map&&(a=a._map),this._map=a,this.initLayer()},initLayer:function(){this.layer=this.layer=new d(this.getOptions()),this.layer.addTo(this._map)},geojson:function(a){a=this.processingGeo(a),console.log(a,'geojson==\n'),this.layer.geojson(a)},geoJson:function(a){this.geojson(a)},getOptions:function(){var a=this.options,c=b.getColorFunc(a.gradinent);return a.color=function(a,b,e){if(!a||a.value===null||a.value===undefined)return c(null);var d=(a.value-b)/(e-b);return c(d)},a},updateOptions:function(a){a=this.options=b.deepMerge(this.options,a),this.layer.updateOptions(this.getOptions())},clean:function(){},initEvents:function(b,c,d){var a=this.options},data:function(a){this._data=a},processingGeo:function(a){if(!Array.isArray(a))return a;var b,c=this;return a.map(function(a){return b=a.latlngs,{type:'polyline',id:a.id,latlngs:c.processLatlngs(b)}})},processLatlngs:function(a){return typeof a==='string'?(a=a.split(';'),a.filter(function(d){var a=d.split(','),b=parseFloat(a[1],10)||0,c=parseFloat(a[0],10)||0;return!(b&&c)||b<20?!1:!0}).map(function(d){var a=d.split(','),b=parseFloat(a[1],10)||0,c=parseFloat(a[0],10)||0;return b&&c||console.log(d),{lat:b,lng:c}})):a},render:function(a){a&&this.data(a),this.layer.render(this._data)}}),e.exports=a,e.exports})