// env=undefined => env=publish 
Cube("datav:/com/@datav-3d-v3/datav-3dplane-info-label/3.0.10/src/popup/Popup",["datav:/npm/eventemitter3/3.0.0","datav:/npm/safely-merge/1.0.1"],function(t,e,n,o,r,i){function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t,e,n){return(l=s()?Reflect.construct.bind():function(t,e,n){var o=[null];o.push.apply(o,e);e=new(Function.bind.apply(t,o));return n&&y(e,n.prototype),e}).apply(null,arguments)}function f(t){return function(t){if(Array.isArray(t))return c(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){var n;if(t)return"string"==typeof t?c(t,e):"Map"===(n="Object"===(n=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:n)||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(t,e):void 0}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function p(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function y(t,e){return(y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function d(n){var o=s();return function(){var t,e=u(n),e=(t=o?(t=u(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),this);if(t&&("object"===a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return h(e)}}function h(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function s(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function b(t,e,n){e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}var m=n("datav:/npm/eventemitter3/3.0.0"),v=n("datav:/npm/safely-merge/1.0.1");return t.exports=function(t){var n=t.THREE.Vector3,o=0,e=1,r=4,i=new n,t=u,a=m;if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(a&&a.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),a&&y(t,a);var c,s=d(u);function u(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=this,n=u;if(e instanceof n)return b(h(e=s.call(this)),"id",null),b(h(e),"context",null),b(h(e),"container",null),b(h(e),"worldPos",null),b(h(e),"bindObject3d",null),b(h(e),"_bindType",o),b(h(e),"mounted",!1),b(h(e),"distance",0),e.id=t.id,e.opts=v({anchorOffset:{x:0,y:0},forceUpdate:!1},t),e;throw new TypeError("Cannot call a class as a function")}return t=u,(a=[{key:"isForceUpdate",value:function(){return this.opts.forceUpdate}},{key:"setContext",value:function(t){this.context=t}},{key:"setDom",value:function(t){if(this.container)for(var e=this.container.lastChild;e;)this.container.removeChild(e),e=this.container.lastChild;else this.container=this.createDom("div","3dplanev3-labelinfo-popup",this.context.getPopupContainer());return"string"==typeof t?this.container.innerHTML=t:this.container.appendChild(t),this}},{key:"setData",value:function(t){var e=t.xyz;return this.updatePosition(e),this.data=t,this._bindType=r,this}},{key:"updatePosition",value:function(t){t instanceof Array?this.worldPos=l(n,f(t)):this.worldPos=t}},{key:"setLngLat",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[120,30],e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return this.worldPos=l(n,f(mercatorFromLngLat(t)).concat([e])),this._bindType=r,this}},{key:"update",value:function(){var t;this._bindType!==o&&this.worldPos&&((this._bindType!==e?this.context._frustum.containsPoint(this.worldPos):this.context._frustum.intersectsObject(this.bindObject3d))?(this.mounted||(this.emit("mounted",this),this.mounted=!0),this.container&&(this.container.style.display="block",t=this.context.camera,this.distance=i.copy(this.worldPos).sub(t.position).length(),t=function(t,e,n){t=t.project(e),e=n.clientHeight;return[n.clientWidth/2*(1+t.x),-e/2*(t.y-1)]}(i.copy(this.worldPos),t,this.context.domElement),this.container.style.left=t[0]+this.opts.anchorOffset.x+"px",this.container.style.top=t[1]+this.opts.anchorOffset.y+"px",t=Math.pow(this.context.distanceToCenter/this.distance,.75),this.container.style.transform="scale(".concat(t,", ").concat(t,")"))):this.mounted&&(this.container.style.display="none"))}},{key:"setIndex",value:function(t){this.container&&(this.container.style["z-index"]=t)}},{key:"updateSize",value:function(){}},{key:"createDom",value:function(t,e,n){t=window.document.createElement(t);return t.style.position="absolute",t.style["pointer-events"]="auto",t.style.display="none",t.style["transform-origin"]="0% 0%",e&&(t.className=e),n&&n.appendChild(t),t}},{key:"finalize",value:function(){this.emit("finalize"),this.removeAllListeners(),this.worldPos=null,this.bindObject3d=null,this.container&&this.context.getPopupContainer().removeChild(this.container),this.container=null}}])&&p(t.prototype,a),c&&p(t,c),Object.defineProperty(t,"prototype",{writable:!1}),u},t.exports});;
Cube("datav:/com/@datav-3d-v3/datav-3dplane-info-label/3.0.10/src/popup/PopupManager",[],function(t,e,i,p,r,n){function o(t,e){for(var i=0;i<e.length;i++){var p=e[i];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(t,p.key,p)}}function h(t,e,i){e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i}return t.exports=function(s){var t,e=s.THREE,i=e.Frustum,p=e.Vector3,e=e.Matrix4,a=new p,u=new e;return p=r,(e=[{key:"length",get:function(){return this.popupArr.length}},{key:"getPopupContainer",value:function(){return this.domElement}},{key:"get",value:function(t){return this.popups[t]}},{key:"add",value:function(t){this.has(t.id)?console.log("popup.id重复"):(this.popups[t.id]=t,this.popupArr.push(t),t.setContext(this))}},{key:"remove",value:function(t){var e,i=null;(i="string"!=typeof t&&"number"!=typeof t?i:this.popups[t])&&(this.deActive(i),-1<(e=this.popupArr.indexOf(i))?(i.finalize(),this.popupArr.splice(e,1),delete this.popups[t]):console.log("popup已经被移除"))}},{key:"has",value:function(t){return t in this.popups}},{key:"active",value:function(t){var e,t="string"==typeof t||"number"==typeof t?t:t.id;this.has(t)&&!this.activePopups[t]&&(e=this.popups[t],this.activePopupArr.push(e),this.activePopups[t]=e)}},{key:"deActive",value:function(t){var e,t="string"==typeof t||"number"==typeof t?t:t.id;this.has(t)&&this.activePopups[t]&&(e=this.popups[t],this.activePopupArr.splice(this.activePopupArr.indexOf(e),1),delete this.activePopups[t])}},{key:"update",value:function(){var t=s.VOGOViewer.engine.camera,e=t.position,i=0<arguments.length&&void 0!==arguments[0]&&arguments[0];if(e.equals(a)||(u.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(u),a.copy(e),i=!0),i){this.distanceToCenter=s.lengthPerPixel*s.container.clientHeight/2/Math.tan(this.camera.fov/2*Math.PI/180);for(var p=0,r=this.activePopupArr.length;p<r;p++)this.activePopupArr[p].update();this.activePopupArr=this.activePopupArr.sort(function(t,e){return e.distance-t.distance});for(var n=0,o=this.activePopupArr.length;n<o;n++)this.activePopupArr[n].setIndex(n)}}},{key:"forEach",value:function(t){for(var e=0;e<this.popupArr.length;e++)t(this.popupArr[e])}},{key:"finalize",value:function(){for(var t=this.popupArr.length-1;0<=t;t--)this.popupArr[t].finalize();this.popupArr.length=0,this.popups={},this.activePopupArr.length=0,this.activePopups={}}}])&&o(p.prototype,e),t&&o(p,t),Object.defineProperty(p,"prototype",{writable:!1}),r;function r(){if(!(this instanceof r))throw new TypeError("Cannot call a class as a function");h(this,"popups",{}),h(this,"popupArr",[]),h(this,"distanceToCenter",0),h(this,"_frustum",new i),h(this,"_camera",null),h(this,"activePopups",{}),h(this,"activePopupArr",[]),this.domElement=document.createElement("div"),this.domElement.style="position:absolute;pointer-events:none;left:0px;top:0px;height:100%;width:100%;",this.camera=s.engine.camera}},t.exports});;
Cube("datav:/com/@datav-3d-v3/datav-3dplane-info-label/3.0.10/src/LabelInfoLayer.js",[],function(t,e,n,o,i,a){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function m(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function y(){return(y="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=w(t)););return t}(t,e);if(o)return(o=Object.getOwnPropertyDescriptor(o,e)).get?o.get.call(arguments.length<3?t:n):o.value}).apply(this,arguments)}function b(t,e){return(b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function v(n){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=w(n),e=(t=o?(t=w(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),this);if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return x(e)}}function x(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function w(t){return(w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _(t,e,n){e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}var k=n("datav:/com/@datav-3d-v3/datav-3dplane-info-label/3.0.10/src/popup/PopupManager"),S=n("datav:/com/@datav-3d-v3/datav-3dplane-info-label/3.0.10/src/popup/Popup");return t.exports=function(a,n){var t=a.THREE,e=a.Utils,i=a.GuiUtils,r=(e._,e.mergeOptions),o=(e.deepClone,e.Chroma,e.BASE_HEIGHT_SCALE),s=(new t.Vector2,/<[a-zA-Z]+.*?>([\s\S]*?)<\/[a-zA-Z]*?>/),u=/[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_\+.~#?&//=]*)/,t=a.Layer,p=d;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");p.prototype=Object.create(t&&t.prototype,{constructor:{value:p,writable:!0,configurable:!0}}),Object.defineProperty(p,"prototype",{writable:!1}),t&&b(p,t);var c,l=v(d);function d(t){var e;if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");_(x(e=l.call(this)),"dataIndexArr1",[]),_(x(e),"popupArr2",[]),_(x(e),"highPerformance",!1),_(x(e),"beforeRender",function(){e.options.visible&&e.popupManager.update(!0)}),_(x(e),"mouseDownFn",function(){e.popupManager.forEach(function(t){t.container&&(t.container.style["pointer-events"]="none")})}),_(x(e),"mouseUpFn",function(){e.popupManager.forEach(function(t){t.container&&(t.container.style["pointer-events"]="auto")})});return e.options=r(e.options,{visible:!0,renderOrder:1e3}),e.options=r(e.options,t||{}),e.popupManager=new(k(a)),a.container.appendChild(e.popupManager.getPopupContainer()),a.VOGOViewer.on("onAfterRender",e.beforeRender),e.initStyle(),a.container.addEventListener("mousedown",e.mouseDownFn),a.container.addEventListener("mouseup",e.mouseUpFn),e}return p=d,(t=[{key:"initStyle",value:function(){var t=document.getElementsByTagName("head")[0],e=document.createElement("style");this.showAnimation="show_3dplane_labelinfo_"+n.replace(/[^a-zA-Z0-9]/g,""),this.hideAnimation="hide_3dplane_labelinfo_"+n.replace(/[^a-zA-Z0-9]/g,""),e.innerHTML="\n        @keyframes ".concat(this.showAnimation," {\n          0% {\n            clip: rect(-100px, -100px, 1000px, -100px);\n            opacity: 0;\n          }\n          100% {\n            clip: rect(-100px, 600px, 999px, -100px );\n            opacity: 1;\n          }\n        }\n        @keyframes ").concat(this.hideAnimation," {\n          0% {\n            opacity: 0.8;\n          }\n          100% {\n            opacity: 0;\n          }\n        }\n      "),t.appendChild(e)}},{key:"onClick",value:function(t){}},{key:"deSelect",value:function(){}},{key:"activeData",value:function(){var t=this.options.animation;if("all"===t.showMethod||t.count>this.data.length)this.dataIndexArr1=Object.assign([],this.data);else if("random"===t.order){var e=0;for(this.dataIndexArr1.length=0;e<t.count;){n=this.data.length;var n=Math.floor(Math.random()*n);-1===this.dataIndexArr1.indexOf(this.data[n])&&(this.dataIndexArr1.push(this.data[n]),e++)}}else{var o=this.dataIndexArr1[this.dataIndexArr1.length-1]?this.data.indexOf(this.dataIndexArr1[this.dataIndexArr1.length-1])+1:0,i=o+t.count>this.data.length;this.dataIndexArr1=i?this.data.slice(o,this.data.length).concat(this.data.slice(0,t.count-(this.data.length-o))):this.data.slice(o,o+t.count)}return this.dataIndexArr1}},{key:"render",value:function(t){if(this.data=[],t&&0<t.length)for(var e=0;e<t.length;e++){var n,o=t[e];o.hasOwnProperty("lng")&&o.hasOwnProperty("lat")&&(n=a.proj.proj([+o.lng,+o.lat,0]),o.xyz=[~~n[0],~~n[1],this.getBaseHeight()+(null!=(n=o.height)?n:0)],o.__3dplane_id=Math.random(),this.data.push(o))}100<t.length?this.highPerformance=!0:this.highPerformance=!1,this.draw()}},{key:"updateArea",value:function(){var e=this;this.popupManager.forEach(function(t){e.updatePopupPosition(t)})}},{key:"updatePopupPosition",value:function(t){var e=t.data.xyz;t.updatePosition([e[0],e[1],this.getBaseHeight()+(null!=(e=t.data.height)?e:0)])}},{key:"draw",value:function(){this.deSelect(),this.clear(),this.updateAnimation(),this.options.visible?this.show():this.hide()}},{key:"_drawEle",value:function(t){var e,n,o=this,i=this.getOptions(t);this.popupManager.has(t.__3dplane_id)?(this.popupManager.active(t.__3dplane_id),null!=(e=this.popupManager.get(t.__3dplane_id))&&e.container&&(this.popupManager.get(t.__3dplane_id).container.style.display="block","carousel"===i.animation.showMethod&&(this.popupManager.get(t.__3dplane_id).container.style.animation="".concat(this.showAnimation," ").concat(this.options.animation.time.enterTime,"s")))):(n=new(S(a))({id:t.__3dplane_id}),this.popupManager.add(n),this.popupManager.active(n),n.setData(t),n.on("mounted",function(){o.createDom(n,t,i),"carousel"===i.animation.showMethod&&n.container&&(n.container.style.animation="".concat(o.showAnimation," ").concat(o.options.animation.time.enterTime,"s")),o.updatePopupPosition(n)}))}},{key:"createDom",value:function(e,t,n){var o=this;e.setDom(function(i,t){var e=(2<arguments.length&&void 0!==arguments[2]?arguments[2]:{}).parentContainer,n=t.general,o=t.graph,a=t.label;if(e)for(;e.lastChild;)e.removeChild(e.lastChild);var r=document.createElement("div"),p=r.style,p=(p.display="flex",p["flex-direction"]="row",p.opacity=n.opacity/100,document.createElement("div")),n=(r.appendChild(p),o.icon.padding),c=(p.style.padding="".concat(n.top,"px ").concat(n.right,"px ").concat(n.bottom,"px ").concat(n.left,"px"),p.style.display=o.icon.show?"block":"none",p.style["margin-left"]="-".concat(o.icon.iconSize.width/2+n.left,"px"),p.style["margin-top"]="-".concat(o.icon.iconSize.height/2+n.top,"px"),document.createElement("img")),p=(p.appendChild(c),c.style),c=(c.src="".concat(null!=(c=i.icon)?c:o.icon.iconUrl),p.width="".concat(o.icon.iconSize.width,"px"),p.height="".concat(o.icon.iconSize.height,"px"),p["margin-right"]="".concat(n.right,"px"),p["margin-left"]="".concat(n.left,"px"),p["margin-bottom"]="".concat(n.bottom,"px"),p["margin-top"]="".concat(n.top,"px"),document.createElement("div")),p=(r.appendChild(c),c.style);"adapt"===a.textLabelWidth.widthAdapt?p["max-width"]="".concat(a.textLabelWidth.maxWidth,"px"):p.width="".concat(a.textLabelWidth.fixedWidth,"px");var l=a.backgroundStyle;o.icon.show&&(p["margin-top"]="-".concat(o.icon.iconSize.height/2+n.top,"px"));a.backgroundStyle.show&&("image"===l.backgroundType?(p["background-image"]="url(".concat(l.imageUrl,")"),p["background-size"]="100% 100%",p.padding="".concat(a.backgroundStyle.padding.top,"px ").concat(a.backgroundStyle.padding.right,"px ").concat(a.backgroundStyle.padding.bottom,"px ").concat(a.backgroundStyle.padding.left,"px"),p.opacity=l.opacity/100):h(p,{backgroundColor:a.backgroundStyle.background,border:a.backgroundStyle.border,borderRadius:a.backgroundStyle.borderRadius,padding:a.backgroundStyle.padding}));"wrap"!==a.textProcess&&(p["text-overflow"]=a.textProcess,p["white-space"]="nowrap",p.overflow="hidden");if(s.test(i.html))c.innerHTML=i.html;else{if(u.test(i.html))return(o=document.createElement("iframe")).src=i.html,c.appendChild(o),r;var n=document.createElement("div"),l=(c.appendChild(n),n.style.display=a.titleStyle.show?"block":"none",h(n.style,{backgroundColor:a.titleStyle.background.backgroundColor,border:a.titleStyle.background.border,borderRadius:a.titleStyle.background.borderRadius,padding:a.titleStyle.background.padding}),i[a.titleStyle.fieldName]),p=(s.test(l)?n.innerHTML=l:n.innerText=l,f(n.style,a.titleStyle.textStyle),a.contentStyle),d=document.createElement("div"),o=(d.style.display=a.contentStyle.show?"block":"none",c.appendChild(d),h(d.style,{backgroundColor:p.background.backgroundColor,border:p.background.border,borderRadius:p.background.borderRadius,padding:p.background.padding}),g(d),d.style["line-height"]=p.lineHeight,p.background.margin);d.style.margin="".concat(o.top,"px ").concat(o.right,"px ").concat(o.bottom,"px ").concat(o.left,"px"),p.lineSeries.forEach(function(t){var e=document.createElement("div"),n=(g(e),t.prefix.show&&(n=document.createElement("span"),e.appendChild(n),f(n.style,t.prefix),n.innerText=t.prefix.name,n.style["padding-right"]="".concat(t.prefix.padding,"px")),document.createElement("span")),o=(e.appendChild(n),f(n.style,t.content),i[t.fieldName]);s.test(o)?n.innerHTML=o:n.innerText=o,t.suffix.show&&(n=document.createElement("span"),e.appendChild(n),f(n.style,t.suffix),n.innerText=t.suffix.name,n.style["padding-left"]="".concat(t.suffix.padding,"px")),d.appendChild(e)}),e&&e.appendChild(r)}return r}(t,n)),null!=e&&null!=(t=e.container)&&t.addEventListener("click",function(t){t.stopPropagation(),o.emit("click",e.data)}),null!=e&&null!=(n=e.container)&&n.addEventListener("mousedown",function(t){t.stopPropagation()}),null!=e&&null!=(t=e.container)&&t.addEventListener("mouseup",function(t){t.stopPropagation()})}},{key:"getOptions",value:function(t){for(var e=(0,i.validateCustomStyle)({config:this.options.condition.condition,data:t,ruleKey:"rules"}),n=null,o=0;o<e.length;o++)n=r(n,e[o]);return n=r(this.options,n)}},{key:"updateAnimation",value:function(){for(var t,n=this,o=(clearTimeout(this.disappearTimeout),clearTimeout(this.appearTimeout),this.options.animation),i=Object.assign([],this.dataIndexArr1),e=0;e<i.length;e++)null!=(t=this.popupManager.get(i[e].__3dplane_id))&&t.container&&(this.highPerformance?this.popupManager.remove(i[e].__3dplane_id):(this.popupManager.get(i[e].__3dplane_id).container.style.display="none",this.popupManager.deActive(i[e].__3dplane_id)));for(var a=this.activeData(),r=0;r<a.length;r++)this._drawEle(a[r]);"carousel"===o.showMethod&&(this.appearTimeout=setTimeout(function(){for(var t,e=0;e<a.length;e++)null!=(t=n.popupManager.get(a[e].__3dplane_id))&&t.container&&(n.popupManager.get(a[e].__3dplane_id).container.style.animation="".concat(n.hideAnimation," ").concat(o.time.disappearTime,"s"));n.disappearTimeout=setTimeout(function(){for(var t,e=0;e<i.length;e++)null!=(t=n.popupManager.get(i[e].__3dplane_id))&&t.container&&(n.popupManager.get(i[e].__3dplane_id).container.style.display="none"),n.popupManager.deActive(i[e].__3dplane_id);n.updateAnimation()},1e3*o.time.disappearTime)},1e3*(o.time.enterTime+o.time.stayTime)))}},{key:"updateOptions",value:function(t){var n=this;e.deepDiff(this.options.animation,t.animation)||(this.options.animation=r(this.options.animation,t.animation),this.updateAnimation()),this.options=r(this.options,t),(e.deepDiff(this.options.graph,t.graph)||e.deepDiff(this.options.label,t.label)||e.deepDiff(this.options.general,t.general))&&this.popupManager.forEach(function(t){var e;t.container&&(e=t.data,n.createDom(t,e,n.getOptions(e)))})}},{key:"getBaseHeight",value:function(){var t=a.baseHeightScale;return~~(a.drawScale*t*o)}},{key:"checkVisible",value:function(){this.options.visible?this.show():this.hide()}},{key:"show",value:function(){this.options.visible=!0,this.popupManager&&(this.popupManager.domElement.style.display="block"),y(w(d.prototype),"show",this).call(this)}},{key:"hide",value:function(){this.options.visible=!1,this.popupManager&&(this.popupManager.domElement.style.display="none"),y(w(d.prototype),"hide",this).call(this)}},{key:"clear",value:function(){this.popupManager.finalize(),clearTimeout(this.disappearTimeout),clearTimeout(this.appearTimeout),this.dataIndexArr1.length=0,y(w(d.prototype),"clear",this).call(this)}},{key:"destroy",value:function(){var t;y(w(d.prototype),"remove",this).call(this),this.clear(),a.container.removeEventListener("mousedown",this.mouseDownFn),a.container.removeEventListener("mouseup",this.mouseUpFn),a.VOGOViewer.off("onAfterRender",this.beforeRender),null!=(t=this.popupManager)&&t.domElement.parentElement.removeChild(this.popupManager.domElement),this.needsAutoUpdate=!1,this.data=null,this.options=null}}])&&m(p.prototype,t),c&&m(p,c),Object.defineProperty(p,"prototype",{writable:!1}),d;function h(t,e){var n=e.backgroundColor,o=e.border,i=e.padding,e=e.borderRadius,a=n.value;t.background="linearGradient"===n.type?"linear-gradient(".concat(a.angle,"deg").concat(a.stops.reduce(function(t,e){return t+","+e.color+" "+e.offset+"%"},""),")"):a,t["border-style"]=o.dashArray,t["border-width"]="".concat(o.width,"px"),t["border-color"]=o.color,t["border-radius"]="".concat(e.topLeft,"px ").concat(e.topRight,"px ").concat(e.bottomLeft,"px ").concat(e.bottomRight,"px"),t.padding="".concat(i.top,"px ").concat(i.right,"px ").concat(i.bottom,"px ").concat(i.left,"px")}function f(t,e){t.color=e.color,t.fontFamily=e.fontFamily,t.fontSize=e.fontSize+"px",t.fontWeight=e.fontWeight,t["text-overflow"]="inherit",t["white-space"]="inherit",t.overflow="inherit"}function g(t){t=t.style;t["text-overflow"]="inherit",t["white-space"]="inherit",t.overflow="inherit"}},t.exports});;
Cube("datav:/com/@datav-3d-v3/datav-3dplane-info-label/3.0.10",["datav:/npm/eventemitter3/3.0.0","datav:/npm/safely-merge/1.0.1"],function(e,t,r,n,o,i){function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function u(r){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=y(r),t=(e=n?(e=y(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(e&&("object"===a(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return c(t)}}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var f=r("datav:/npm/eventemitter3/3.0.0"),p=r("datav:/npm/safely-merge/1.0.1"),h=r("datav:/com/@datav-3d-v3/datav-3dplane-info-label/3.0.10/src/LabelInfoLayer.js"),r=function(){var e=o,t=f;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t);var r,n=u(o);function o(e,t){var r;if(this instanceof o)return(r=n.call(this)).classNameAlias="LabelInfoLayer",r.options=p({},t.options||{}),r.visible=!0,r.updateArea&&r.updateArea.bind(c(r)),r;throw new TypeError("Cannot call a class as a function")}return e=o,(t=[{key:"addTo",value:function(e,t){var r=this,t=(this.layerId=t,h(e,t));this.layer=new t(this.options),e.addLayer(this.layerId+"_layer",this.layer),this.visible?this.layer.show():this.layer.hide(),this.updateArea(),this.layer.on("click",function(e){r.emit("click",e)})}},{key:"updateArea",value:function(){this.layer&&this.layer.updateArea()}},{key:"render",value:function(e){var t=[],r=0;if(e&&e.length){for(var n,o=0;o<e.length;o++)n=e[o],Number.isFinite(parseFloat(n.lng))&&Number.isFinite(parseFloat(n.lat))?t.push(n):r++;0<r&&console.log("标签层：有 "+r+" 条异常数据。")}this.data=t,this.layer&&this.layer.render&&this.layer.render(t)}},{key:"updateOptions",value:function(e){this.options=p(this.options,e.options),this.layer&&this.layer.updateOptions&&this.layer.updateOptions(this.options)}},{key:"updateBaseHeight",value:function(){this.layer&&this.layer.updateBaseHeight&&this.layer.updateBaseHeight()}},{key:"show",value:function(){this.visible=!0,this.layer&&this.layer.show()}},{key:"hide",value:function(){this.visible=!1,this.layer&&this.layer.hide()}},{key:"destroy",value:function(){this.layer&&(this.layer.destroy(),this.layer=null)}}])&&l(e.prototype,t),r&&l(e,r),Object.defineProperty(e,"prototype",{writable:!1}),o}();return e.exports=r,e.exports});