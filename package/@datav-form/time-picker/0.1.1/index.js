// env=undefined => env=publish 
Cube("datav:/com/@datav-form/time-picker/0.1.1/pcTemplate.html",[],function(i,l,n,t,d,e){return i.exports=function(){return'<div class="calendar-panel">\n  \x3c!-- 头部 --\x3e\n  <div class="pick-header">\n    <div class="header-left header-btn">&lt;</div>\n    <div class="header-btn year-box">\n      <select class="year"></select>\n    </div>\n    <div class="header-btn month-box">\n      <select class="month">\n        <option value="1">1月</option>\n        <option value="2">2月</option>\n        <option value="3">3月</option>\n        <option value="4">4月</option>\n        <option value="5">5月</option>\n        <option value="6">6月</option>\n        <option value="7">7月</option>\n        <option value="8">8月</option>\n        <option value="9">9月</option>\n        <option value="10">10月</option>\n        <option value="11">11月</option>\n        <option value="12">12月</option>\n      </select>\n    </div>\n    <div class="header-right header-btn">&gt;</div>\n  </div>\n  \x3c!-- 时间选择头部 --\x3e\n  <div class="header-time-panel"></div>\n  \x3c!-- 选择主体 --\x3e\n  <div class="pick-body">\n    <div class="date-panel pick-panel">\n      <table>\n        <thead>\n          <tr>\n            <th>日</th>\n            <th>一</th>\n            <th>二</th>\n            <th>三</th>\n            <th>四</th>\n            <th>五</th>\n            <th>六</th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr>\n            <td></td>\n            <td></td>\n            <td></td>\n            <td></td>\n            <td></td>\n            <td></td>\n            <td></td>\n          </tr>\n          <tr>\n            <td></td>\n            <td></td>\n            <td></td>\n            <td></td>\n            <td></td>\n            <td></td>\n            <td></td>\n          </tr>\n          <tr>\n            <td></td>\n            <td></td>\n            <td></td>\n            <td></td>\n            <td></td>\n            <td></td>\n            <td></td>\n          </tr>\n          <tr>\n            <td></td>\n            <td></td>\n            <td></td>\n            <td></td>\n            <td></td>\n            <td></td>\n            <td></td>\n          </tr>\n          <tr>\n            <td></td>\n            <td></td>\n            <td></td>\n            <td></td>\n            <td></td>\n            <td></td>\n            <td></td>\n          </tr>\n          <tr>\n            <td></td>\n            <td></td>\n            <td></td>\n            <td></td>\n            <td></td>\n            <td></td>\n            <td></td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n\n    <div class="time-panel pick-panel">\n      <div class="time-picker-ul">\n        <ul>\n          <li>00</li>\n          <li>01</li>\n          <li>02</li>\n          <li>03</li>\n          <li>04</li>\n          <li>05</li>\n          <li>06</li>\n          <li>07</li>\n          <li>08</li>\n          <li>09</li>\n          <li>10</li>\n          <li>11</li>\n          <li>12</li>\n          <li>13</li>\n          <li>14</li>\n          <li>15</li>\n          <li>16</li>\n          <li>17</li>\n          <li>18</li>\n          <li>19</li>\n          <li>20</li>\n          <li>21</li>\n          <li>22</li>\n          <li>23</li>\n          <i></i>\n        </ul>\n      </div>\n      <div class="time-picker-ul">\n        <ul>\n          <li>00</li>\n          <li>01</li>\n          <li>02</li>\n          <li>03</li>\n          <li>04</li>\n          <li>05</li>\n          <li>06</li>\n          <li>07</li>\n          <li>08</li>\n          <li>09</li>\n          <li>10</li>\n          <li>11</li>\n          <li>12</li>\n          <li>13</li>\n          <li>14</li>\n          <li>15</li>\n          <li>16</li>\n          <li>17</li>\n          <li>18</li>\n          <li>19</li>\n          <li>20</li>\n          <li>21</li>\n          <li>22</li>\n          <li>23</li>\n          <li>24</li>\n          <li>25</li>\n          <li>26</li>\n          <li>27</li>\n          <li>28</li>\n          <li>29</li>\n          <li>30</li>\n          <li>31</li>\n          <li>32</li>\n          <li>33</li>\n          <li>34</li>\n          <li>35</li>\n          <li>36</li>\n          <li>37</li>\n          <li>38</li>\n          <li>39</li>\n          <li>40</li>\n          <li>41</li>\n          <li>42</li>\n          <li>43</li>\n          <li>44</li>\n          <li>45</li>\n          <li>46</li>\n          <li>47</li>\n          <li>48</li>\n          <li>49</li>\n          <li>50</li>\n          <li>51</li>\n          <li>52</li>\n          <li>53</li>\n          <li>54</li>\n          <li>55</li>\n          <li>56</li>\n          <li>57</li>\n          <li>58</li>\n          <li>59</li>\n          <i></i>\n        </ul>\n      </div>\n      <div class="time-picker-ul">\n        <ul>\n          <li>00</li>\n          <li>01</li>\n          <li>02</li>\n          <li>03</li>\n          <li>04</li>\n          <li>05</li>\n          <li>06</li>\n          <li>07</li>\n          <li>08</li>\n          <li>09</li>\n          <li>10</li>\n          <li>11</li>\n          <li>12</li>\n          <li>13</li>\n          <li>14</li>\n          <li>15</li>\n          <li>16</li>\n          <li>17</li>\n          <li>18</li>\n          <li>19</li>\n          <li>20</li>\n          <li>21</li>\n          <li>22</li>\n          <li>23</li>\n          <li>24</li>\n          <li>25</li>\n          <li>26</li>\n          <li>27</li>\n          <li>28</li>\n          <li>29</li>\n          <li>30</li>\n          <li>31</li>\n          <li>32</li>\n          <li>33</li>\n          <li>34</li>\n          <li>35</li>\n          <li>36</li>\n          <li>37</li>\n          <li>38</li>\n          <li>39</li>\n          <li>40</li>\n          <li>41</li>\n          <li>42</li>\n          <li>43</li>\n          <li>44</li>\n          <li>45</li>\n          <li>46</li>\n          <li>47</li>\n          <li>48</li>\n          <li>49</li>\n          <li>50</li>\n          <li>51</li>\n          <li>52</li>\n          <li>53</li>\n          <li>54</li>\n          <li>55</li>\n          <li>56</li>\n          <li>57</li>\n          <li>58</li>\n          <li>59</li>\n          <i></i>\n        </ul>\n      </div>\n    </div>\n  </div>\n  \x3c!-- 底部 --\x3e\n  <div class="pick-footer">\n    <div class="now-btn footer-btn">此刻</div>\n    <div class="time-picker-btn footer-btn">选择时间</div>\n    <div class="ok-btn footer-btn">确定</div>\n  </div>\n</div>'},i.exports});;
Cube("datav:/com/@datav-form/time-picker/0.1.1/input.html",[],function(t,n,e,i,u,c){return t.exports=function(){return'<div class="input-out-box">\n  <input class="date-check-input" placeholder="请选择日期时间" />\n</div>'},t.exports});;
Cube("datav:/com/@datav-form/time-picker/0.1.1",["datav:/npm/bcore/0.0.18/event","datav:/npm/jquery/2.1.4","datav:/npm/lodash/4.6.1","datav:/npm/xss/1.0.3","datav:/npm/d3-time/1.0.11","datav:/npm/d3-time-format/2.1.3","datav:/npm/moment/2.29.1"],function(t,e,i,o,n,a){function r(e,t){var i,o=Object.keys(e);return Object.getOwnPropertySymbols&&(i=Object.getOwnPropertySymbols(e),t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),o.push.apply(o,i)),o}function s(o){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach(function(t){var e,i;e=o,i=n[t=t],t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach(function(t){Object.defineProperty(o,t,Object.getOwnPropertyDescriptor(n,t))})}return o}var c=i("datav:/npm/bcore/0.0.18/event"),p=i("datav:/npm/jquery/2.1.4"),d=i("datav:/npm/lodash/4.6.1"),l=i("datav:/com/@datav-form/time-picker/0.1.1/input.html")(),h=i("datav:/com/@datav-form/time-picker/0.1.1/pcTemplate.html")(),u=i("datav:/npm/xss/1.0.3"),f=Object.assign({},i("datav:/npm/d3-time/1.0.11"),i("datav:/npm/d3-time-format/2.1.3")),m=i("datav:/npm/moment/2.29.1");return t.exports=c.extend(function(t,e){this.config={global:{input:{borderNormal:{borderWidth:1,borderColor:"rgba(24,24,24,0.8)",borderRadius:2},borderHover:{borderWidth:1,borderColor:"#00baff",borderRadius:2}}},timeLimit:{show:!1,startTime:"2020-10-01",endTime:"2020-10-20"},moment:!1},this.container=p(t),this.apis=e.apis,this._data=null,this.pcTemplate=h,this.inputTemplate=l,this.datePickShow=!0,this.prevValue="",this.now=new Date,this.userAgent=/iPhone|iPod|iPad|micromessenger|Android|ios|SymbianOS/i.test(navigator.userAgent)?"mobile":"pc",this.init(e)},{init:function(t){var e=this;this.mergeConfig(t),"mobile"===this.userAgent?(this.container.append(d.template(this.inputTemplate)),this.inputOutBox=this.container.find(".input-out-box"),this.inputOutBox.html('<input class="mobile-input" type="datetime-local"/> <input disabled="disabled" class="date-check-input"/>'),this.mobileInput=this.inputOutBox.find(".mobile-input"),this.dateCheckInput=this.inputOutBox.find(".date-check-input"),this.inputOutBox.css({"box-sizing":" border-box",margin:0,padding:0,"list-style":"none",position:"relative",display:"inline-block",width:this.container.width(),height:this.container.height(),"font-size":"14px","line-height":"1.5",color:"rgba(0,0,0,.65)","background-color":"#fff","background-image":"none",border:"1px solid #d9d9d9","border-radius":"4px","user-select":"none"}),this.mobileInput.css({display:"inline-block","text-align":"start",border:"none",outline:"none",height:"100%",width:"100%","user-select":"none","font-size":"14px",opacity:0,position:"absolute","z-index":2}),this.dateCheckInput.css({display:"inline-block","text-align":"start",border:"none",outline:"none",height:"100%",width:"100%","user-select":"none","font-size":"14px",position:"absolute",opacity:1,"z-index":0})):(this.container.append(d.template(this.inputTemplate)),this.container.append(d.template(this.pcTemplate)),this.inputOutBox=this.container.find(".input-out-box"),this.dateCheckInput=this.container.find(".date-check-input"),this.calendar=this.container.find(".calendar-panel"),this.header=this.calendar.find(".pick-header"),this.timeHeader=this.calendar.find(".header-time-panel"),this.yearDom=this.calendar.find(".year"),this.monthDom=this.calendar.find(".month"),this.body=this.calendar.find(".pick-body"),this.footer=this.calendar.find(".pick-footer"),this.datePanel=this.calendar.find(".date-panel"),this.timePanel=this.calendar.find(".time-panel"),this.timePickerBtn=this.calendar.find(".time-picker-btn"),this.timeUlBox=this.calendar.find(".time-picker-ul"),this.inputOutBox.css({"box-sizing":" border-box",margin:0,padding:0,"list-style":"none",position:"relative",display:"inline-block",width:this.container.width(),height:this.container.height(),"font-size":"14px","line-height":"1.5",color:"rgba(0,0,0,.65)","background-color":"#fff","background-image":"none",border:"1px solid #d9d9d9","border-radius":"4px","user-select":"none"}),this.dateCheckInput.css({display:"inline-block","text-align":"start",border:"none",outline:"none",height:"100%",width:"100%","user-select":"none","font-size":"14px"}),this.calendar.css({"background-color":"#fff",width:this.container.width(),height:"300px","font-size":"14px","line-height":"1.5",color:"rgba(0,0,0,.65)","box-sizing":"border-box",margin:0,padding:0,"list-style":"none",position:"absolute","user-select":"none",display:"none"}),this.header.css({width:this.container.width(),height:this.config.calendar.header.headerHeight*this.calendar.height()/100+"px","line-height":this.config.calendar.header.headerHeight*this.calendar.height()/100+"px","text-align":"center",position:"absolute"}),this.calendar.find(".header-btn").css({position:"absolute",outline:"none","user-select":"none",cursor:"pointer"}),this.calendar.find("select").css({border:"none",background:"transparent",outline:"none","user-select":"none",cursor:"pointer"}),this.calendar.find("option[value=".concat((new Date).getMonth()+1,"]")).attr("selected","true"),this.body.css({width:"100%",position:"absolute"}),this.body.find(".pick-panel").css({width:"100%",height:"100%","box-sizing":"border-box",position:"absolute"}),this.datePanel.find("table").css({width:"100%",height:"100%","text-align":"center"}),this.datePanel.find("td").css({align:"center","vertical-align":"middle","text-align":"center"}),this.timePanel.css({display:"none"}),this.timeUlBox.css({float:"left","box-sizing":"border-box",overflow:"hidden",position:"relative","overflow-y":"auto",width:"33.33%",transition:".3s ease"}),this.timeUlBox.find("ul").css({"list-style":"none","text-align":"center","box-sizing":"border-box",margin:0,padding:0,width:"100%",height:"100%",position:"absolute"}),this.timeUlBox.find("ul li").css({height:"10%",cursor:"pointer",transition:"background .3s ease"}),this.timeUlBox.find("ul i").css({height:this.timeUlBox.height()-this.timeUlBox.find("ul li").height(),display:"block"}),this.footer.css({width:"100%",position:"absolute"}),this.footer.find(".footer-btn").css({position:"absolute",cursor:"pointer"}),this.dateCheckInput.off().change(function(){var t="";"time"===e.config.callback._type?t+="".concat(e.currentDate," ").concat(e.dateCheckInput[0].value):t=e.dateCheckInput[0].value,e.updateCalendarAndEmit(new Date(u(t))),e.calendar&&e.calendar.hide()}),this.yearDom.off().change(function(){var t=parseInt(e.yearDom.val());e.currentDate="".concat(t,"-").concat(parseInt(e.currentDate.split("-")[1]),"-").concat(parseInt(e.currentDate.split("-")[2])),e.calendarReset(t,parseInt(e.currentDate.split("-")[1]))}),this.monthDom.off().change(function(){var t=parseInt(e.monthDom.val());e.currentDate="".concat(parseInt(e.currentDate.split("-")[0]),"-").concat(t,"-").concat(parseInt(e.currentDate.split("-")[2])),e.calendarReset(parseInt(e.currentDate.split("-")[0]),t)}),this.header.find(".header-left").off().on("click",function(){var t=e.currentDate.split("-");parseInt(t[1])-1<1?(t[1]=12,t[0]=parseInt(t[0])-1,e.currentDate="".concat(t[0],"-").concat(t[1],"-").concat(t[2]),e.calendarReset(t[0],parseInt(t[1]))):(e.currentDate="".concat(t[0],"-").concat(parseInt(t[1])-1,"-").concat(t[2]),e.calendarReset(t[0],parseInt(t[1])-1))}),this.header.find(".header-right").off().on("click",function(){var t=e.currentDate.split("-");12<parseInt(t[1])+1?(t[1]=1,t[0]=parseInt(t[0])+1,e.currentDate="".concat(t[0],"-").concat(t[1],"-").concat(t[2]),e.calendarReset(t[0],parseInt(t[1]))):(e.currentDate="".concat(t[0],"-").concat(parseInt(t[1])+1,"-").concat(t[2]),e.calendarReset(t[0],parseInt(t[1])+1))}),this.footer.find(".ok-btn").off().on("click",this.okBtnClick.bind(this,this.config.callback._type)),this.footer.find(".now-btn").off().on("click",this.nowBtnClick.bind(this,this.config.callback._type)),this.inputOutBox.off().on("focusin",function(){e.calendar&&e.calendar.show()}),this.inputOutBox.hover(function(){e.inputOutBox.css({border:"".concat(e.config.global.input.borderHover.borderWidth,"px solid ").concat(e.config.global.input.borderHover.borderColor),"border-radius":e.config.global.input.borderHover.borderRadius+"px"})},function(){e.inputOutBox.css({border:"".concat(e.config.global.input.borderNormal.borderWidth,"px solid ").concat(e.config.global.input.borderNormal.borderColor),"border-radius":e.config.global.input.borderNormal.borderRadius+"px"})})),this.bindClickOutSide()},render:function(t,e){var i,o=this,e=(t=this.data(t),this.mergeConfig(e)),n=new Date;t&&t.length&&t[0].time&&(i=t[0].time.replace(/-/g,"/"),"Invalid Date"!==new Date(i).toString()?n=new Date(i):console.error("数据日期不合法，请检查日期格式!".concat(t.length&&t[0].time&&'当前组件数据：[{"time":'+t[0].time+"}}]"))),this.updateInputStyle(e.global),"mobile"===this.userAgent?(this.emitMobileCallback(this.config.callback._type,n),this.mobileInput.change(function(){return o.emitMobileCallback(o.config.callback._type,new Date(new Date(o.mobileInput.val().replace(/-/g,"/").replace("T"," ")).toISOString()))})):"pc"===this.userAgent&&(this.updateCalenderStyle(e.calendar),this.updateYearOptions(e.calendar.yearInterval),this.updateCalendarAndEmit(n))},emitMobileCallback:function(t,e){var i="",o="",n=e.getFullYear(),a=e.getMonth()+1,r=e.getDate(),c=e.getHours(),l=e.getMinutes(),e=e.getSeconds(),n=(i+="".concat(n,"-").concat(a<10?"0"+a:a,"-").concat(r<10?"0"+r:r),o+="".concat(c<10?"0"+c:c,":").concat(l<10?"0"+l:l,":").concat(e<10?"0"+e:e),this.currentDate=i,this.currentTime=o,this.mobileInput.attr({value:"".concat(this.currentDate,"T").concat(this.currentTime)}),f.timeFormat(t)(new Date("".concat(this.currentDate," ").concat(this.currentTime).replace(/-/g,"/"))));this.dateCheckInput[0].value=n,this.emit("time-changed",s(s({},d.get(this._data,["0"])),{},{time:n}))},updateInputStyle:function(t){this.container.css({"font-family":t.fontFamily}),this.inputOutBox.css({width:this.config.width+"px",height:this.config.height+"px","background-color":t.input.backgroundColor,border:"".concat(t.input.borderNormal.borderWidth,"px solid ").concat(t.input.borderNormal.borderColor),"border-radius":t.input.borderNormal.borderRadius+"px",padding:"0 0 0 ".concat(t.input.indent,"px")}),this.dateCheckInput.css({"background-color":"transparent","font-size":"".concat(t.input.textStyle.fontSize,"px"),color:t.input.textStyle.color,"font-weight":t.input.textStyle.fontWeight,"font-family":t.fontFamily})},updateCalenderStyle:function(e){var o=this;this.mergeConfig({calendar:e}),this.calendar.css({"background-color":e.backgroundColor,height:e.height+"px",width:this.config.width+"px","margin-top":e.margin+"px","border-radius":e.borderRadius+"px"}),this.header.css({width:this.config.width+"px",height:this.calendar.height()*e.header.headerHeight/100+"px","line-height":this.calendar.height()*e.header.headerHeight/100+"px","border-bottom":"".concat(e.header.splitLine.width,"px solid ").concat(e.header.splitLine.color),"box-sizing":"border-box"}),this.calendar.find(".header-btn").css({"font-size":"".concat(e.header.dateTextStyle.fontSize,"px"),color:e.header.dateTextStyle.color,"font-weight":e.header.dateTextStyle.fontWeight}),this.calendar.find(".year-box").css({left:"".concat(e.header.yearMonthMargin,"%")}),this.calendar.find(".month-box").css({right:"".concat(e.header.yearMonthMargin,"%")}),this.calendar.find(".header-left").css({left:"".concat(e.header.lastNextMonthMargin,"%")}),this.calendar.find(".header-right").css({right:"".concat(e.header.lastNextMonthMargin,"%")}),this.calendar.find("select").css({"font-size":"".concat(e.header.dateTextStyle.fontSize,"px"),color:e.header.dateTextStyle.color,"font-weight":e.header.dateTextStyle.fontWeight}),this.timeHeader.css({width:this.container.width(),height:this.calendar.height()*e.header.headerHeight/100+"px","line-height":this.calendar.height()*e.header.headerHeight/100+"px","text-align":"center","border-bottom":"".concat(e.header.splitLine.width,"px solid ").concat(e.header.splitLine.color),"font-size":"".concat(e.header.timeTextStyle.fontSize,"px"),color:e.header.timeTextStyle.color,"font-weight":e.header.timeTextStyle.fontWeight}),this.body.css({height:e.body.height+"px",top:this.header.height()+e.header.splitLine.width+"px","border-bottom":"".concat(e.body.splitLine.width,"px solid ").concat(e.body.splitLine.color)}),this.body.find(".pick-panel").css({"font-size":e.dateBodyStyle.tableStyle.fontSize}),this.datePanel.find("table").css({height:"100%","background-color":e.dateBodyStyle.tableStyle.backgroundColor,"border-radius":e.dateBodyStyle.tableStyle.border.borderRadius}),this.datePanel.find("table tr th").css({color:e.dateBodyStyle.tdStyle.week.color,"font-weight":e.dateBodyStyle.tdStyle.week.fontWeight}),this.setDateTdHoverStyle(e.dateBodyStyle.tdStyle),this.setTimeLiHoverStyle(e),this.timeUlBox.css({float:"left","font-size":e.timeBodyStyle.ulBoxStyle.fontSize+"px","border-right":"".concat(e.timeBodyStyle.ulBoxStyle.border.borderWidth,"px solid ").concat(e.timeBodyStyle.ulBoxStyle.border.borderColor),height:e.body.height+"px"}),p(this.timeUlBox[2]).css({border:"none"}),this.timeUlBox.find("ul i").css({height:.9*e.body.height+"px"}),this.timeUlBox.find("ul li").css({"background-color":e.timeBodyStyle.liStyle.normal.backgroundColor,"font-weight":e.timeBodyStyle.liStyle.normal.fontWeight,color:e.timeBodyStyle.liStyle.normal.color}),this.timeUlBox.find(".time-picker-ul-li-selected").css({"background-color":e.timeBodyStyle.liStyle.focusStyle.backgroundColor,"font-weight":e.timeBodyStyle.liStyle.focusStyle.fontWeight,color:e.timeBodyStyle.liStyle.focusStyle.color}),this.footer.css({height:e.footer.height+"px",bottom:e.footer.bottom+"px"}),this.footer.find(".now-btn").css({color:e.footer.nowBtnStyle.color,"font-weight":e.footer.nowBtnStyle.fontWeight,"font-size":e.footer.nowBtnStyle.fontSize+"px",left:e.footer.nowBtnStyle.left+"px",top:e.footer.nowBtnStyle.top+"px"}),this.footer.find(".time-picker-btn").css({color:e.footer.checkBtnStyle.color,"font-weight":e.footer.checkBtnStyle.fontWeight,"font-size":e.footer.checkBtnStyle.fontSize+"px",right:e.footer.checkBtnStyle.right+"px",top:e.footer.checkBtnStyle.top+"px"}),this.footer.find(".ok-btn").css({color:e.footer.okBtnStyle.color,"font-weight":e.footer.okBtnStyle.fontWeight,"font-size":e.footer.okBtnStyle.fontSize+"px",right:e.footer.okBtnStyle.right+"px","background-color":e.footer.okBtnStyle.backgroundColor,"border-radius":e.footer.okBtnStyle.borderRadius+"px",padding:"1px 5px",top:e.footer.okBtnStyle.top+"px"}),this.updateTdAndInput(e.dateBodyStyle.tdStyle),this.timeUlBox.off().on("click","ul li",function(t){o.setTimeLiHoverStyle(e);var i="";p(t.delegateTarget).animate({scrollTop:p(t.currentTarget).height()*parseInt(p(t.currentTarget).html())},200),p(t.currentTarget).off("mouseleave mouseenter").addClass("time-picker-ul-li-selected").siblings().removeClass("time-picker-ul-li-selected"),o.timeUlBox.each(function(t,e){i+=(p(e).find(".time-picker-ul-li-selected").html()||"00")+(t<2?":":"")}),o.currentTime=i,o.updateInput(),p(t.currentTarget).css({"background-color":e.timeBodyStyle.liStyle.focusStyle.backgroundColor,"font-weight":e.timeBodyStyle.liStyle.focusStyle.fontWeight,color:e.timeBodyStyle.liStyle.focusStyle.color}).siblings().css({"background-color":e.timeBodyStyle.liStyle.normal.backgroundColor,"font-weight":e.timeBodyStyle.liStyle.normal.fontWeight,color:e.timeBodyStyle.liStyle.normal.color})}),this.timePickerBtn.off().on("click",function(){o.datePickShow=!o.datePickShow,(o.datePickShow?(o.timePickerBtn.html("选择时间"),o.timePanel.hide(),o.timeHeader.hide(),o.datePanel.show(),o.header):(o.timePickerBtn.html("选择日期"),o.timeHeader.html("".concat(o.currentDate)),o.datePanel.hide(),o.header.hide(),o.timePanel.show(),o.timeHeader)).show(),o.timePanelReset(e)})},updateCalendarAndEmit:function(t){var e,i,o,n,a,r,c,l;t&&(i=e="",o=t.getFullYear(),n=t.getMonth()+1,a=t.getDate(),r=t.getHours(),c=t.getMinutes(),l=t.getSeconds(),"Invalid Date"===t.toString()?console.error("输入数据日期不合法，请检查日期格式"):(e+="".concat(o,"-").concat(n<10?"0"+n:n,"-").concat(a<10?"0"+a:a),i+="".concat(r<10?"0"+r:r,":").concat(c<10?"0"+c:c,":").concat(l<10?"0"+l:l),this.currentDate=e,this.currentTime=i,this.calendarReset(o,n),this.timePanelReset()),this.eventEmit())},calendarReset:function(c,l){var s=this,d=(l<1?l=1:12<l&&(l=12),this.monthDom.val(l),this.yearDom.val(c),new Date(c,l,0).getDate()),h=new Date(c,l-1,0).getDate(),u=new Date(c,l-1,1).getDay(),f=1;this.datePanel.find("td").each(function(t,e){var i,o,n,a,r;p(e).html("").css({color:"rgba(0, 0, 0, 0.65)"}).removeClass("date-picker-td-last-next-month").off(),t<u?(i=h-u+t+1,o=0<l-1?c:c-1,n=0<l-1?l-1:12,p(e).html(i),p(e).addClass("date-picker-td-last-next-month"),p(e).attr({title:"".concat(o,"年").concat(n,"月").concat(i,"日"),info:"".concat(o,"-").concat(n<10?"0"+n:n,"-").concat(i<10?"0"+i:i)}),p(e).off("click").on("click",function(){s.currentDate=p(e).attr("info"),s.calendarReset(o,n),s.updateTdAndInput()})):(d<f&&(f=1),p(e).html(f),p(e).attr({title:"".concat(c,"年").concat(l,"月").concat(f,"日"),info:"".concat(c,"-").concat(l<10?"0"+l:l,"-").concat(f<10?"0"+f:f)}),d<=t-u?(a=l+1<13?c:c+1,r=l+1<13?l+1:1,p(e).addClass("date-picker-td-last-next-month"),p(e).attr({title:"".concat(a,"年").concat(r,"月").concat(f,"日"),info:"".concat(a,"-").concat(r<10?"0"+r:r,"-").concat(f<10?"0"+f:f)}),p(e).off("click").on("click",function(){s.currentDate=p(e).attr("info"),s.calendarReset(a,r),s.updateTdAndInput()})):p(e).off("click").on("click",function(){s.currentDate=p(e).attr("info"),s.updateTdAndInput()}),f++)}),this.updateTdAndInput()},updateTdAndInput:function(t){t=t||this.config.calendar.dateBodyStyle.tdStyle;this.clearAllTdStyle(t),this.setTodayTdStyle(t),this.updateTargetTdStyle(t),this.updateInput()},setDateTdHoverStyle:function(e){var i=this;this.datePanel.find("td").off("mouseenter mouseleave").mouseenter(function(t){i.setDisableStyle(p(t.currentTarget),e.hoverStyle)}).mouseleave(function(t){i.setDisableStyle(p(t.currentTarget),e.normal);t=i.datePanel.find(".date-picker-td-last-next-month");i.setDisableStyle(t,e.lastNextMonthStyle)})},clearAllTdStyle:function(t){this.setDisableStyle(this.datePanel.find("td"),t.normal)},setDisableStyle:function(t,i){var o=this,e=this.config.timeLimit.show,n=d.get(this._data,["0"])||{},a=n.startTime,n=n.endTime;e||a||n?d.each(t,function(t){var e=p(t).attr("info");o.compareDate(e)?p(t).css({cursor:"pointer",border:"".concat(i.border.borderWidth,"px solid ").concat(i.border.borderColor),"font-weight":i.fontWeight,"border-radius":i.border.borderRadius,color:i.color,"background-color":i.backgroundColor,opacity:1}):(p(t).css({border:"".concat(i.border.borderWidth,"px solid ").concat(i.border.borderColor),"font-weight":i.fontWeight,"border-radius":i.border.borderRadius,color:"rgb(144, 160, 174)",opacity:.4,cursor:"not-allowed"}),p(t).off())}):t.css({cursor:"pointer",border:"".concat(i.border.borderWidth,"px solid ").concat(i.border.borderColor),"font-weight":i.fontWeight,"border-radius":i.border.borderRadius,color:i.color,"background-color":i.backgroundColor,opacity:1})},setTodayTdStyle:function(t){var e="".concat((new Date).getFullYear(),"-").concat((new Date).getMonth()+1,"-").concat((new Date).getDate());this.datePanel.find('td[info="'.concat(e,'"]')).length?(this.setDateTdHoverStyle(t),this.datePanel.find('td[info="'.concat(e,'"]')).off("mouseenter mouseleave").css({border:"".concat(t.todayStyle.border.borderWidth,"px solid ").concat(t.todayStyle.border.borderColor),"font-weight":t.todayStyle.fontWeight,"border-radius":t.todayStyle.border.borderRadius,color:t.todayStyle.color,"background-color":t.todayStyle.backgroundColor})):this.setDisableStyle(this.datePanel.find("td"),t.normal)},updateTargetTdStyle:function(t){this.setDateTdHoverStyle(t);var e=this.datePanel.find('td[info="'.concat(this.currentDate,'"]')),e=(e.off("mouseenter mouseleave"),this.setDisableStyle(e,t.focusStyle),this.datePanel.find(".date-picker-td-last-next-month"));this.setDisableStyle(e,t.lastNextMonthStyle)},compareDate:function(t){var e=this.config.timeLimit,i=e.startTime,o=e.endTime,e=e.show,n=d.get(this._data,["0"])||{},a=n.startTime,n=n.endTime;return!!(e||a||n)&&("Invalid Date"==(e=new Date(a||n?a:i))&&(e=-1/0),"Invalid Date"==(i=new Date(a||n?n:o))&&(i=1/0),e<=(a=m(t).toDate())&&a<=i)},updateInput:function(){var t=f.timeFormat(this.config.callback._type)(new Date("".concat(this.currentDate&&this.currentDate.replace(/\-/g,"/")," ").concat(this.currentTime)));return this.dateCheckInput[0].value=t,d.includes(this.config.callback._type,"%H")||this.config.momentSet?this.timePickerBtn.show():this.timePickerBtn.hide(),t},setTimeLiHoverStyle:function(t){this.timePanel.find("ul li").not(this.timePanel.find(".time-picker-ul-li-selected")).off("mouseenter mouseleave").mouseenter(function(){p(this).css({"background-color":t.timeBodyStyle.liStyle.hoverStyle.backgroundColor,"font-weight":t.timeBodyStyle.liStyle.hoverStyle.fontWeight,color:t.timeBodyStyle.liStyle.hoverStyle.color})}).mouseleave(function(){p(this).css({"background-color":t.timeBodyStyle.liStyle.normal.backgroundColor,"font-weight":t.timeBodyStyle.liStyle.normal.fontWeight,color:t.timeBodyStyle.liStyle.normal.color})})},timePanelReset:function(t){var i=t||this.config.calendar,o=this.currentTime.split(":");this.setTimeLiHoverStyle(i),this.timeUlBox.each(function(t,e){e.scrollTo(0,p(p(e).find("li")[0]).height()*parseInt(o[t])),p(e).find("li:nth-child(".concat(parseInt(o[t])+1,")")).off("mouseleave mouseenter").addClass("time-picker-ul-li-selected").siblings().removeClass("time-picker-ul-li-selected").css({"background-color":i.timeBodyStyle.liStyle.normal.backgroundColor,"font-weight":i.timeBodyStyle.liStyle.normal.fontWeight,color:i.timeBodyStyle.liStyle.normal.color})}),this.timeUlBox.find(".time-picker-ul-li-selected").css({"background-color":i.timeBodyStyle.liStyle.focusStyle.backgroundColor,"font-weight":i.timeBodyStyle.liStyle.focusStyle.fontWeight,color:i.timeBodyStyle.liStyle.focusStyle.color})},getTodayTime:function(){var t=new Date,e=t.getFullYear(),i=t.getMonth()+1,o=t.getDate(),n=t.getHours(),a=t.getMinutes(),t=t.getSeconds();return{date:"".concat(e,"-").concat(i<10?"0"+i:i,"-").concat(o<10?"0"+o:o),time:"".concat(n<10?"0"+n:n,":").concat(a<10?"0"+a:a,":").concat(t<10?"0"+t:t),year:e,month:i}},eventEmit:function(){var t=this.updateInput(),e=this.config.timeLimit.show,i=d.get(this._data,["0"]),o=i||{},n=o.startTime,o=o.endTime;(e||n||o)&&!this.compareDate(t)||this.emitDataFn(i,t)},emitDataFn:function(t,e){t=s(s({},t),{},{time:e});d.isEqual(t,this.prevTimeRange)||(this.emit("time-changed",t),this.prevTimeRange=t)},nowBtnClick:function(t){var e=this.getTodayTime();this.currentDate=e.date,this.currentTime=e.time,this.calendarReset(e.year,e.month),this.timePanelReset(),this._closePullDownMenuOrEmit(),this.calendar&&this.calendar.hide()},okBtnClick:function(t){this._closePullDownMenuOrEmit(),this.calendar&&this.calendar.hide()},_closePullDownMenuOrEmit:function(){this.eventEmit(),this.calendar&&this.calendar.hide()},_clickOutSideHandler:function(t){this.container&&t&&(p.contains(this.container.context,t.target)||this._closePullDownMenuOrEmit())},bindClickOutSide:function(){document.body.addEventListener("click",this._clickOutSideHandler.bind(this))},removeClickOutSide:function(){document.body.removeEventListener("click",this._clickOutSideHandler.bind(this))},updateYearOptions:function(t){var e="";this.yearDom.empty();for(var i=(new Date).getFullYear()-t;i<=(new Date).getFullYear()+t;i++)i===(new Date).getFullYear()?e+='<option selected value="'.concat(i,'">').concat(i,"年</option>"):e+='<option value="'.concat(i,'">').concat(i,"年</option>");this.yearDom.append(e)},resize:function(t,e){this.render(null,{width:t,height:e})},data:function(t){return t&&(this._data=t),this._data},mergeConfig:function(t){return t&&(this.config=d.defaultsDeep(t||{},this.config)),this.config},destroy:function(){this.inputOutBox&&this.inputOutBox.off(),this.calendar.find("td").length&&this.calendar.find("td").off(),this.calendar.find("ul li").length&&this.calendar.find("ul li").off(),this.header.find(".header-btn").length&&this.header.find(".header-btn").off(),this.footer.find(".footer-btn").length&&this.footer.find(".footer-btn").off(),this.data=null,this.calendar=null,this.header=null,this.footer=null,this.container.empty(),this.removeClickOutSide()},getFieldValue:function(){return{time:this.updateInput()}},resetField:function(){this.render()}}),t.exports});