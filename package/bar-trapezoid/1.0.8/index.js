Cube('datav:/com/bar-trapezoid/1.0.8',['datav:/npm/bcore/0.0.9/event','datav:/npm/jquery/2.1.4','datav:/npm/lodash/4.6.1','datav:/npm/dchart-bar-acute-angle/0.1.5','datav:/com/maliang-utils/0.0.6'],function(h,m,d,n,o,p){function g(a){return e[a]?e[a]:e[a]=b[a]()}var b={},e={};b['coms/bar-trapezoid/1.0.8/legend.html']=b['coms/bar-trapezoid/1.0.8/legend.html']=function(){return function(){return'<div class="legend<%= i %> legend-item" style="margin: 0 5px;text-align: center;">\n  <div class="legend-rect" style="display: inline-block;"></div>\n  <div class="legend-label"></div>\n</div>'}},b['coms/bar-trapezoid/1.0.8/template.html']=b['coms/bar-trapezoid/1.0.8/template.html']=function(){return function(){return'<div class="legend" style="display: flex; align-items: center;line-height: 1.3;margin-right: 20px; justify-content: flex-end;"></div>\n<div class="chart"></div>\n'}};var f=d('datav:/npm/bcore/0.0.9/event'),i=d('datav:/npm/jquery/2.1.4'),a=d('datav:/npm/lodash/4.6.1'),j=d('datav:/npm/dchart-bar-acute-angle/0.1.5'),k=g('coms/bar-trapezoid/1.0.8/template.html')(),l=a.template(g('coms/bar-trapezoid/1.0.8/legend.html')()),c=d('datav:/com/maliang-utils/0.0.6');return h.exports=f.extend(function a(c,b){this.config={theme:{bg:['#000','#f9f9f9'],font:['#eee','#252525'],colors:['#444547','#A0AAB3']},chart:{slope:10,margin:{right:20,top:30,bottom:45,left:45},background:'rgba(1, 1, 1, 0)',xaxis:{color:'#fff','font-size':10,show:!0,type:'category',padding:[.3,0],'inner-padding':.3,'outer-padding':0,dy:8,'assist-line':!1},yaxis:{color:'#fff','font-size':10,show:!0,ticks:5,dy:8,'assist-line':!1}},legend:{height:10,right:20,dis:5,show:!0},series:[{'serie-color':'rgba(32, 108, 187, 0.7)',legend:{'font-size':10,color:'#fff',value:'1',showname:'系列1'}},{show:!0,'serie-color':'rgba(0, 253, 249, 0.7)',legend:{'font-size':10,color:'#fff',value:'2',showname:'系列2'}}]},this.container=i(c),this.apis=b.apis,this._data=null,this.chart=null,this.init(b)},{init:function(d){var c=this,b=this.mergeConfig(d);this.container.html(k),this.chartDom=this.container.find('.chart'),this.legendDom=this.container.find('.legend'),this.updateLayout(),this.chart=new j(this.chartDom[0],b.chart),a.map(b.series,function(d,b){var a=l({i:b});c.legendDom.append(a)}),this.updateLegend(),this.updateStyle()},isSafeNumber:function(b){return a.isNumber(b)&&!a.isNaN(b)&&a.isFinite(b)?b:null},render:function(a,c){if(a=this.data(a),!(a&&a.length)){this.chart&&this.chart.destroy();return}var b=this.mergeConfig(c);a&&this.chart.render(a,b.chart),this.updateLegend(),this.updateStyle()},resize:function(a,b){this.updateLayout(a,b),this.chart.render(null,{width:this.container.width()}),this.updateStyle()},setColors:function(){},data:function(a){return a?(this.__data=a,this._data=c.threeD2Two(a,'x','y','s',c.getSeriesValue(this.config.series,'legend.value'))):this._data=c.threeD2Two(this.__data,'x','y','s',c.getSeriesValue(this.config.series,'legend.value')),this._data},mergeConfig:function(c){if(!c)return this.config;this.config.theme=a.defaultsDeep(c.theme||{},this.config.theme),this.setColors(),this.config=a.defaultsDeep(c||{},this.config);var b=this.config;b.chart.xaxis.padding=[b.chart.xaxis['inner-padding'],b.chart.xaxis['outer-padding']];var d=b.chart.yaxis.min!==null?a.toNumber(b.chart.yaxis.min):null,e=b.chart.yaxis.max!==null?a.toNumber(b.chart.yaxis.max):null;return b.chart.yaxis.min=this.isSafeNumber(d),b.chart.yaxis.max=this.isSafeNumber(e),b.chart.series=b.series,this.config},updateLayout:function(e,d){var b=this.config,a=d||this.container.height()||400,c=b.legend.show?b.legend.height&&a*b.legend.height/100||a*.1:0;this.container.height(a),this.legendDom.height(c),this.chartDom.height(a-c)},updateStyle:function(){var b=this.config,e=this;this.container.css('background',b.chart.background),this.chart.el&&this.chart.el.select('.con-svg').style('background','transparent'),this.chart.el&&this.chart.el.selectAll('.serie-label').style('display','none');var f=this.legendDom.height();if(a.map(b.series,function(a,c){var b=e.legendDom.find('.legend'+c),d=(f-a.legend['font-size'])*.4;b.find('.legend-rect').css({'background-color':a['serie-color'],height:d+'px',width:d+'px'}),b.find('.legend-label').css({color:a.legend.color,'font-size':a.legend['font-size']+'px'}).html(a.legend.showname),a.show?(b.show(),e.chart.svg&&e.chart.svg.selectAll('.serie'+(c+1)).style({fill:a['serie-color'],stroke:'none',display:'block'})):(b.hide(),e.chart.svg&&e.chart.svg.selectAll('.serie'+(c+1)).style({display:'none'}))}),this.chart.svg){var c=this.chart.svg.selectAll('.axis1'),d=this.chart.svg.selectAll('.axis2');b.chart.xaxis.show?(c.style('display','block'),c.selectAll('.tick line').style('stroke',b.chart.xaxis.color),c.selectAll('.tick text, .domain').style('fill',b.chart.xaxis.color),c.selectAll('.tick text').style('font-size',b.chart.xaxis['font-size']+'px')):c.style('display','none'),c.select('.domain').style({display:b.chart.xaxis['assist-line']&&'block'||'none',fill:'none',stroke:b.chart.xaxis.color}),b.chart.yaxis.show?(d.style('display','block'),d.selectAll('.tick line').style('stroke',b.chart.yaxis.color),d.selectAll('.tick text, .domain').style('fill',b.chart.yaxis.color),d.selectAll('.tick text').style('font-size',b.chart.yaxis['font-size']+'px')):d.style('display','none'),d.select('.domain').style({display:b.chart.yaxis['assist-line']&&'block'||'none',fill:'none',stroke:b.chart.yaxis.color})}},updateLegend:function(a){var c=!0;(!a||a.height===this.config.legend.height&&a.show===this.config.legend.show)&&(c=!1);var b=this.mergeConfig({legend:a});this.legendDom.css('margin-right',b.legend.right+'px'),this.legendDom.find('.legend-item').css('margin','0 '+b.legend.dis+'px'),b.legend.show&&this.legendDom.show()||this.legendDom.hide(),c&&(this.updateLayout(),this.chart.render(null,{width:this.container.width()}),this.updateStyle())},updateSeries:function(b){b.series?this.updateS(b.series):a.isArray(b)?this.updateS(b):console.log('config is error: ',b)},updateS:function(a){a&&a.length!==this.config.series.length?(this.config.series=a,this.init(),this.render()):(this.mergeConfig({series:a}),this.updateStyle())}}),h.exports})