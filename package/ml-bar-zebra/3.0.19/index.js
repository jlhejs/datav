// env=undefined => env=publish 
Cube("datav:/com/ml-bar-zebra/3.0.19/defaultConfig",[],function(o,t,e,a,i,r){return o.exports={chart:{margin:{top:0,bottom:0,left:0,right:20},loadAmount:2e3,bar:{zebra:{width:2,padding:2}},numericalLabel:{show:!1,textStyle:{fontFamily:"Microsoft Yahei",fontWeight:"normal",fontSize:10,color:"#000"},pos:"center",emptyData:!1},legend:{show:!0,textarea:{fontFamily:"Microsoft Yahei",fontWeight:"normal",fontSize:10,color:"rgba(255,255,255,0.5)"},layout:{margin:{horiInterval:8,vertiInterval:0},loc:"bottom-center"}}},axis:{xaxis:{isShow:!0,boundaryGap:.2,interval:.1,label:{show:!0,format:"%m月",textarea:{fontFamily:"Microsoft Yahei",fontWeight:"normal",fontSize:10,color:"rgba(255,255,255,0.5)"},display:{angle:"45",amount:0,unit:""}},axisLine:{show:!0,color:"rgba(255,255,255,0.5)"},grid:{show:!1,color:"#fff"}},yaxis:{isShow:!0,extent:{max:"dataMax",min:0},label:{show:!0,format:".0f",textarea:{fontFamily:"Microsoft Yahei",fontWeight:"normal",fontSize:10,color:"rgba(255,255,255,0.6)"},display:{amount:6,unit:"单位"}},axisLine:{show:!0,color:"rgba(255,255,255,0.5)"},grid:{show:!1,color:"#434343"}}},series:{series:[{serieName:"系列1",color:"#00baff"}]},others:{animation:{show:!0,setting:{animationEasing:"cubicInOut",animationAfterPreviousSeries:!1},enter:{animationDuration:1e3},update:{animationDurationUpdate:300,animationUpdateFromPrevious:!0}},tooltip:{show:!0,hideDelay:100,trigger:{type:"item",action:"hover"},textStyle:{fontFamily:"Microsoft Yahei",fontWeight:"normal",fontSize:14,color:"#fff"},axisPointer:{show:!0,_type:"line",lineStyle:{width:1,_type:"solid",color:"#f00"}},bgBox:{backgroundColor:"rgba(0, 0, 0, 0.65)",customSize:{show:!1,width:150,height:50},padding:10,offset:{xOffset:6,yOffset:10},border:{borderWidth:0,borderColor:"#333"}}}}},o.exports});;
Cube("datav:/com/ml-bar-zebra/3.0.19/bar",["datav:/com/maliang-utils/0.0.24","datav:/npm/bcore/0.0.22/event","datav:/npm/dchart-bar-verti-zebra/0.2.16","datav:/npm/jquery/2.1.4","datav:/npm/lodash/4.17.11","datav:/npm/lodash/4.17.11/cloneDeep","datav:/npm/d3/3.5.12"],function(t,e,i,a,o,n){function r(e,t){var i,a=Object.keys(e);return Object.getOwnPropertySymbols&&(i=Object.getOwnPropertySymbols(e),t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,i)),a}function s(a){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?r(Object(o),!0).forEach(function(t){var e,i;e=a,i=o[t=t],t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(o)):r(Object(o)).forEach(function(t){Object.defineProperty(a,t,Object.getOwnPropertyDescriptor(o,t))})}return a}var l=i("datav:/npm/bcore/0.0.22/event"),c=i("datav:/npm/dchart-bar-verti-zebra/0.2.16"),h=i("datav:/npm/jquery/2.1.4"),f=i("datav:/npm/lodash/4.17.11"),d=i("datav:/npm/lodash/4.17.11/cloneDeep"),u=i("datav:/npm/d3/3.5.12"),m=i("datav:/com/maliang-utils/0.0.24"),b=Symbol();function g(t){return f.isNumber(t)&&!f.isNaN(t)&&f.isFinite(t)?t:null}return t.exports=l.extend(function(t,e){this.config={theme:{},chart:{background:"transparent",margin:{top:50,bottom:70,left:70,right:70,containLabel:!0}},axis:{xaxis:{tickSize:2},yaxis:{tickSize:2}},legend:{},series:[{value:"1",color:"#2F8FBE"}],tooltip:{show:!0,trigger:"item",triggerMethod:"hover",beforeFormat:null,formatter:"xyAxisChart",enterFocus:!0,axisPointer:{show:!0,_type:"line",lineStyle:{color:"#f00",width:1,_type:"solid"}},hideDelay:300,textStyle:{color:"#fff",fontSize:14,fontFamily:"Microsoft Yahei",fontWeight:"normal"},bgBox:{color:"rgba(0, 0, 0, 0.65)",padding:10,xOffset:6,yOffset:10,customSize:{show:!1,width:300,height:150},borderColor:"#333",borderWidth:0}}},this.container=h(t),this.__data=[],this.init(e)},{init:function(t){this.apis=t.apis;t=this.mergeConfig(t);this.chart=new c(this.container[0],t.chart)},isSafeNumber:function(t){return f.isNumber(t)&&!f.isNaN(t)&&f.isFinite(t)?t:null},render:function(t,e){e=this.mergeConfig(e);(t=this.data(t,e))&&t.length&&(t&&this.chart.render(t,function(t,e){var i=f.cloneDeep(t.chart),a=(i.label=function(t){t=t.chart.numericalLabel;return s(s({},t.textStyle),{},{emptyData:t.emptyData,pos:t.pos,show:t.show})}(t),t.axis.xaxis),o=t.axis.yaxis;switch(i.xaxis=function(t,e){var t=f.clone(t),i={},a=(i.show=t.isShow,i.padding=[t.interval,t.boundaryGap],t.label.textarea),a=(i.fontSize=a.fontSize||null,i.fontColor=a.color,i.fontStrokeWidth=a.fontStrokeWidth,i.fontWeight=a.fontWeight,i.textShow=t.label.show,i.assistLine=t.axisLine.show,i.assistLineColor=t.axisLine.color,i.net=t.grid.show,i.netColor=t.grid.color,t.label.display);i.ticks=a.amount&&parseInt(a.amount)?parseInt(a.amount):e.length||null,i.rotate=f.toNumber(a.angle),i.label=i.textShow&&a.unit||null,0===i.rotate?i.dy=10:i.dy=5;return i}(a,e),i.yaxis=function(t,e){var t=f.clone(t),i={},a=(i.show=t.isShow,t.extent);null!==g(f.toNumber(a.max))?(i.maxAmount=a.max,i.maxNeedNice=!1):"dataMax"===a.max?(i.maxAmount="dataMax",i.maxNeedNice=!1):(i.maxAmount=null,i.maxNeedNice=!0);null!==g(f.toNumber(a.min))?(i.min=i.minAmount=a.min,i.minNeedNice=!1):"dataMin"===a.min?(i.min=i.minAmount="dataMin",i.minNeedNice=!1):(i.min=i.minAmount=null,i.minNeedNice=!0);if(t.label.format&&t.label.format.includes("%")){switch(t.label.format){case"%":i.tickFormat=".0f";break;case".1%":i.tickFormat=".2f";break;default:i.tickFormat=".4f"}var o=u.format(t.label.format);i.format=t.label.format,e.label.format=function(t,e){return o(t.y&&t.y.value)}}else i.format=null,i.tickFormat=t.label.format||function(t){return t};a=t.label.textarea,i.fontSize=a.fontSize||null,i.fontColor=a.color,i.fontStrokeWidth=a.fontStrokeWidth,i.fontWeight=a.fontWeight,i.fontFamily=a.fontFamily,i.textShow=t.label.show,i.assistLine=t.axisLine.show,i.assistLineColor=t.axisLine.color,e=t.label.display;return i.ticks=e.amount||null,i.rotate=f.toNumber(e.angle),i.label=i.textShow&&e.unit||null,i.net=t.grid.show,i.netColor=t.grid.color,i}(o,i),i.series=f.clone(t.series.series),i.strokeWidth=t.chart.bar.zebra.width,i.size=i.strokeWidth+t.chart.bar.zebra.padding,i.series.forEach(function(t){t.strokeWidth=i.strokeWidth,t.size=i.size}),m.setAutoMargin(i),i.label.pos){case"center":i.label.dx="0",i.label.dy=".4em";break;case"top":i.label.dx="0",i.label.dy="1em";break;case"bottom":i.label.dx="0",i.label.dy="-.26em"}Object.assign(i,function(t){{var e,i,a,o;if(t&&t.others&&t.others.animation)return t=t.others.animation,e={},i=t.enter,a=t.update,o=t.setting,Object.assign(e,s({},i)),Object.assign(e,s({},a)),Object.assign(e,s({},o)),e.animation=t.show,e}return{}}(t)),t.others.tooltip&&(i.tooltip=function(t){if(!t)return{};var e=d(t),i=t.trigger,a=t.axisPointer,o=t.textStyle,n=t.bgBox;i&&i.action&&(e.triggerMethod=i.action),i&&i.type&&(e.trigger=i.type),t.beforeFormat&&(e.beforeFormat=t.beforeFormat),e.formatter="xyAxisChart",void 0!==t.enterFocus&&(e.enterFocus=t.enterFocus),void 0!==t.hideDelay&&(e.hideDelay=t.hideDelay),a&&a._type&&(e.axisPointer=a._type),a&&a.lineStyle&&(e.lineStyle=a.lineStyle);o&&(e.color=o.color,e.fontSize=o.fontSize+"px",e.fontFamily=o.fontFamily,e.fontWeight=o.fontWeight);n&&(i=n.offset,t=n.border,a=n.customSize,e.backgroundColor=n.backgroundColor,i&&void 0!==i.xOffset&&(e.xOffset=i.xOffset),i&&void 0!==i.yOffset&&(e.yOffset=i.yOffset),a&&(e.autoSize=!a.show,e.width=a.width,e.height=a.height),t&&(t.borderColor&&(e.borderColor=t.borderColor),void 0!==t.borderWidth&&(e.borderWidth=t.borderWidth)));return e}(t.others.tooltip));return i}(e,t)),this.updateStyle())},updateStyle:function(){var e,t=this.config,i=this.chart.el,a=(i.select(".con-svg").style("background","transparent"),this.config.chart.numericalLabel),o=(a.show&&i.selectAll(".series-group .serie-single").each(function(){var e=u.select(this).select(".serie-label");e.style({display:function(t){return a.emptyData||e.text()?"block":"none"},"font-family":f.get(t,"chart.numericalLabel.textStyle.fontFamily","Microsoft Yahei")})}),f.get(this.config,"axis.yaxis.label.format")),o=(o&&o.includes("%")&&(e=u.format("".concat(o)),i.selectAll(".axis2 .tick text").text(function(t){return f.isFunction(e)&&e(t)||t})),i.selectAll(".axis1")),i=i.selectAll(".axis2");f.get(t,"axis.xaxis.isShow")?(o.style("display","block"),o.selectAll(".tick text").style("font-family",f.get(t,"axis.xaxis.label.textarea.fontFamily"))):o.style("display","none"),f.get(t,"axis.yaxis.isShow")?(i.style("display","block"),i.selectAll(".tick text").style("font-family",f.get(t,"axis.yaxis.label.textarea.fontFamily"))):i.style("display","none")},setColors:function(){},hasS:function(t){var e=0;return f.map(t,function(t){void 0!==t.s&&e++}),e===t.length},setOriginalData:function(t){this[b]=t},getOriginalData:function(){return this[b]},data:function(t,e){t&&this.setOriginalData(t),t=t||this.getOriginalData();e=e.chart.loadAmount||2e3;return(t=e?t.slice(0,e):t)&&(this.__data=f.clone(t)),this.hasS(this.__data)?this._data=m.threeD2Two(this.__data,"x","y","s",m.getSeriesValue(this.__data,"s")):this._data=f.cloneDeep(this.__data).map(function(t){return t.y={value:t.y,data:f.clone(t)},t}),this._data},mergeConfig:function(t){return t&&(this.config.theme=f.defaultsDeep(t.theme||{},this.config.theme),this.setColors(),t.series&&(this.config.series=t.series),this.config=f.defaultsDeep(t||{},this.config)),this.config},resize:function(t,e){this.config.chart.width=t,this.config.chart.height=e,this.render()},clear:function(){this.chart&&this.chart.empty()},destroy:function(){this.chart&&this.chart.off(),this.chart&&this.chart.destroy(),this._data=this.__data=null}}),t.exports});;
Cube("datav:/com/ml-bar-zebra/3.0.19",["datav:/com/legend/0.1.3","datav:/com/maliang-utils/0.0.21","datav:/npm/bcore/0.0.22/event","datav:/npm/jquery/2.1.4","datav:/npm/lodash/4.17.11"],function(t,i,e,n,a,h){var s=e("datav:/npm/bcore/0.0.22/event"),o=e("datav:/npm/jquery/2.1.4"),r=e("datav:/npm/lodash/4.17.11"),c=e("datav:/com/ml-bar-zebra/3.0.19/bar"),l=e("datav:/com/legend/0.1.3"),d=e("datav:/com/maliang-utils/0.0.21"),g=e("datav:/com/ml-bar-zebra/3.0.19/defaultConfig");return t.exports=s.extend(function(t,i){this.config=r.cloneDeep(g)||{theme:{},chart:{background:"transparent",margin:{top:36,bottom:-10,left:20,right:40}},axis:{xaxis:{tickSize:2},yaxis:{tickSize:2}},legend:{innerStyle:{"line-height":1.3}},series:[{value:"1",color:"#2F8FBE"}],animation:{show:!0,animationDuration:1e3,animationEasing:"cubicInOut",animationDurationUpdate:300,animationUpdateFromPrevious:!0,animationAfterPreviousSeries:!1}},this.container=o(t).css("padding","10px 0"),this.chart=null,this.legend=null,this.init(i)},{init:function(t){var t=t&&t.options||t,t=(this.apis=t.apis,this.mergeConfig(t)),i=t.chart.legend,e=i.layout.loc.split("-")[0];this.chartDom=o('<div class="dchart-bar-basic" style="width: 100%;"></div>'),this.legendDom=o('<div class="dchart-legend" style="left: 0;width: 100%;"></div>'),"bottom"===e?(this.container.append(this.chartDom),this.container.append(this.legendDom)):(this.container.append(this.legendDom),this.container.append(this.chartDom)),this.legend=new l(this.legendDom[0],i),this.legend.render(t.series.series,i),this.chartDom.height(this.container.height()-(i.show&&this.legendDom.height()||0)),this.chart=new c(this.chartDom[0],r.cloneDeep(t)),this.legendDom.css("display",i.show?"block":"none"),this._bindEvent()},render:function(t,i){var i=i&&i.options||i,i=this.mergeConfig(i);(t=this.data(t))&&t.length&&(i=d.conflictConfigWithData(i,t,[{configField:{type:"array",field:"serieName",parent:"series.series"},dataField:"s",priority:"config",newConfigField:"showName"}]),this.legend.render(i.series.series,i.chart.legend),this.config.chart.height=this.container.height()-(this.config.chart.legend.show&&this.legendDom.height()||0),this.chartDom.height(this.config.chart.height),t&&this.chart.render(t,i),this._cfg=i)},updateStyle:function(){},setColors:function(){},data:function(t){return t&&(this._data=r.clone(t),this._data.length&&this._data.forEach(function(t){t.y=r.toNumber(t.y)})),this._data},mergeConfig:function(t){return t&&(this.config.theme=r.defaultsDeep(t.theme||{},this.config.theme),this.setColors(),t.series&&(this.config.series=t.series),this.config=r.defaultsDeep(t||{},this.config)),this.config},resize:function(t,i){i=i-(this.config.chart.legend.show&&this.legendDom.outerHeight()||0)-20;this.mergeConfig({chart:{width:t,height:i}}),this.chart.resize(t,i)},updateLegendLayout:function(t){var i=this.config.chart.legend,e=(i.show!==t.show&&(this.legendDom.css("display",t.show?"block":"none"),this.config.chart.height=this.container.height()-(t.show&&this.legendDom.height()||0)),i.textarea.fontSize!==t.textarea.fontSize&&(this.legendDom.find(".legend-item").css("fontSize",t.textarea.fontSize),this.config.chart.height=this.container.height()-(t.show&&this.legendDom.height()||0)),JSON.stringify(i.layout.margin)!==JSON.stringify(t.layout.margin)&&(e=t.layout.margin,this.legendDom.find(".legend-item").css("margin",e.vertiInterval+"px "+e.horiInterval+"px"),this.config.chart.height=this.container.height()-(t.show&&this.legendDom.height()||0)),i.layout.loc.split("-")[0]),i=t.layout.loc.split("-")[0];e!==i&&("top"===i?this.container[0].appendChild(this.chartDom[0]):"bottom"===i&&this.container[0].appendChild(this.legendDom[0])),this.render(null,{chart:{legend:t}})},clear:function(){this.chart&&this.chart.clear(),this.legend&&r.isFunction(this.legend.clear)&&this.legend.clear()},destroy:function(){this.chart&&this.chart.destroy(),this.chart=null,this.legend&&this.legend.destroy(),this.legend=null,this.chartDom=null,this.legendDom=null,this.container&&this.container.empty(),this._data=null},startAnimate:function(){if(!(this.chart&&this.chart.chart&&this.chart.chart))return!1;var t,i,e,n;this.chart&&this.chart.chart&&this.chart.chart.clearAllAnimation(),this._cfg&&(t=(i=this._cfg.others.animation).update,i=i.enter,e=t.animationUpdateFromPrevious,t.animationUpdateFromPrevious=!1,n=t.animationDurationUpdate,t.animationDurationUpdate=i.animationDuration,this.chart.render(),t.animationDurationUpdate=n,t.animationUpdateFromPrevious=e)},clearAnimate:function(){this.chart&&this.chart.chart&&this.chart.chart.resumeToAnimationEnd&&this.chart.chart.resumeToAnimationEnd()},_bindEvent:function(){var t,e=this;this.chart&&this.chart.chart&&(t=this.chart.chart,["click"].forEach(function(i){t.on(i,function(t){t=t.data;return e.emit(i,t)})}))},highlight:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},i=t.data,t=t.options,t=void 0===t?{}:t;return this.chart&&i?(t.hasOwnProperty("selectMode")&&(t.mode=t.selectMode,delete t.selectMode),t.hasOwnProperty("cancelHighlightFirst")&&t.cancelHighlightFirst&&this.cancelHighlight(),void(this.chart.chart&&this.chart.chart.highlight({targetData:i,options:t}))):null},cancelHighlight:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},i=t.data,t=t.options,t=void 0===t?{}:t;if(!this.chart)return null;t.hasOwnProperty("selectMode")&&(t.mode=t.selectMode,delete t.selectMode),this.chart&&this.chart.chart&&this.chart.chart.cancelHighlight({targetData:i,options:t})}}),t.exports});