// env=undefined => env=publish 
Cube("datav:/com/@echarts/ml-echarts-net/2.0.15",["datav:/com/maliang-echarts-utils/0.0.18","datav:/npm/bcore/0.0.18/event","datav:/npm/jquery/2.1.4","datav:/npm/lodash/4.6.1","datav:/npm/echarts/3.5.4"],function(e,t,i,a,n,s){var r=i("datav:/npm/bcore/0.0.18/event"),o=i("datav:/npm/jquery/2.1.4"),c=i("datav:/npm/lodash/4.6.1"),h=i("datav:/npm/echarts/3.5.4"),l=i("datav:/com/maliang-echarts-utils/0.0.18");return e.exports=r.extend(function(e,t){this.config={series:{type:"graph",layout:"force",animationDurationUpdate:0,animationEasingUpdate:"quinticInOut",legendHoverLink:!0,tooltip:{trigger:"item"},edgeSymbol:["circle","arrow"],initLayout:"circular",symbolSize:function(e,t){return e=e||0===e?e:10}}},this.container=o(e),this.apis=t.apis,this._data=null,this.chart=null,this.init(t)},{init:function(e){function t(e){return e.data[a.series[0].edgeLabel.content.value]?a.series[0].edgeLabel.content.prefix+e.data[a.series[0].edgeLabel.content.value]+a.series[0].edgeLabel.content.suffix:""}var i=this,a=(e=this.mergeConfig(e),this.chart=h.init(this.container[0]),l.config2echartsOptions(e));a.legend.data=c.map(a._series,"name"),a.series[0].categories=a._series;a.series[0].edgeLabel.normal.formatter=t,a.series[0].edgeLabel.emphasis.formatter=t,a.color=c.map(a._series,"color"),a.series[0].lineStyle.isEdgeSymbol?a.series[0].edgeSymbol=["circle","arrow"]:a.series[0].edgeSymbol=[],this.chart.setOption(a),this.updateStyle(),this.chart.off(),this.chart.on("click",function(e){e=c.merge(e.data,{type:e.data.name?"nodes":"links"});i.emit("click",e)}),this.chart.on("legendselectchanged",function(t){var e=c.filter(c.keys(t.selected),function(e){return t.selected[e]});i.emit("legend-select-changed",{selected:e,name:t.name})})},showTip:function(){var e=c.merge(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},{type:"showTip"});this.chart.dispatchAction(e)},hideTip:function(){this.chart.dispatchAction({type:"hideTip"})},legendAction:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.type,t=void 0===t?"legendToggleSelect":t,e=e.name;t&&-1!==["legendSelect","legendUnSelect","legendToggleSelect"].indexOf(t)&&this.chart.dispatchAction({type:t,name:e})},render:function(e){e=this.data(e);var t=this.config;this.chart.setOption(l.config2echartsOptions(l.data2echartsGraph(e,t))),this.updateStyle()},resize:function(e,t){this.chart.resize({width:e,height:t})},data:function(e){return e&&(this._data=e),this._data},mergeConfig:function(e){return e&&(this.config=c.defaultsDeep(e||{},this.config),this.config.tooltip.showContent=this.config.tooltip.show),this.config},updateStyle:function(){this.config},updateOptions:function(e){function t(e){return e.data[i.series[0].edgeLabel.content.value]?i.series[0].edgeLabel.content.prefix+e.data[i.series[0].edgeLabel.content.value]+i.series[0].edgeLabel.content.suffix:""}var i=l.config2echartsOptions(e);i.legend.data=c.map(i._series,"name"),i.series[0].categories=i._series;i.series[0].edgeLabel.normal.formatter=t,i.series[0].edgeLabel.emphasis.formatter=t,i.color=c.map(i._series,"color"),i.series[0].lineStyle.isEdgeSymbol?i.series[0].edgeSymbol=["circle","arrow"]:i.series[0].edgeSymbol=[],this.chart.setOption(l.config2echartsOptions(i))},clear:function(){this.chart&&this.chart.clear&&this.chart.clear()},destroy:function(){this.chart&&this.chart.dispose&&this.chart.dispose()}}),e.exports});