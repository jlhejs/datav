// env=undefined => env=publish 
Cube("datav:/com/ml-bar-group/4.1.5/transform",["datav:/npm/lodash/4.17.11","datav:/npm/datav-g2plot-util/0.2.4"],function(a,b,c){function d(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}var e=Object.assign||function(a){for(var b,c=1;c<arguments.length;c++)for(var d in b=arguments[c],b)Object.prototype.hasOwnProperty.call(b,d)&&(a[d]=b[d]);return a},f=c("datav:/npm/lodash/4.17.11"),g=f.get,h=f.cloneDeep,i=c("datav:/npm/datav-g2plot-util/0.2.4"),j=i.transformGUI2Props,k=i.getMarginOptions,l=i.getLegendOptions,m=i.getNumericalLabelOptions,n=i.getXAxisOptions,o=i.getYAxisOptions,p=i.getTooltipOptions,q=i.getAnimationOptions,r=i.getInteractionOptions,s=i.getAxisExtentOptions,t=i.getCustomS,u=i.setBasicSeriesColor,v=i.getGuideLine,w=i.hasS,x=i.getXAxisTypeOptions,y=e({},k(),l(),m(),r(),n(),o(),p(),q(),{"options.chart.numericalLabel.position":"label.position"},function(){var a,b="options.chart.connectedArea";return a={},d(a,b+".show","connectedArea.visible"),d(a,b+".lineStyleStroke","connectedArea.lineStyle.stroke"),d(a,b+".areaStyleFill","connectedArea.areaStyle.fill"),d(a,b+".triggerOn",{key:"connectedArea.triggerOn",handler:function(a){return"always"!==a&&a}}),a}(),function(){return{"options.chart.customBarWidth":{key:"columnSize",handler:function(a){return a.show?a.columnSize:0}}}}(),s("yaxis","yAxis","y"),x()),z="rgba(0,0,0,0)",A=function(a){var b=a.seriesConfig,c=a.propsConfig,d=a.dataSeries,e=a.data;if(b){var g=b.series,h=b.seriesMapping;if(h&&w(e)){var j={},k=[],i={};g.forEach(function(a){var b=a.mapping,c=b.fieldValue,d=b.serieName;f.isNull(c)||f.isUndefined(c)||""===c?k.push(a.color):(j[d||c]=a.color,i[c]=d)});var l=g.map(function(a){return f.get(a,"mapping.fieldValue")});e=e.sort(function(c,a){var b=l.indexOf(c.s),d=l.indexOf(a.s);return(-1===b?Infinity:b)-(-1===d?Infinity:d)}),e.forEach(function(a){a.__s=i[a.s]||a.s});var m=t(e);m.forEach(function(a,b){j[a]||(k.length?j[a]=k.shift():j[a]=g[b%g.length].color)});var n=Object.values(j)[0];c.color=Object.keys(j).length?function(a){return j[a]||n}:k,c.stackField=c.colorField="__s"}else{var o=g.map(function(a){return a.color});u({dataSeries:d,allColors:o,propsConfig:c}),c.stackField=c.colorField="s"}c.data=e}};return a.exports={transOptionKey:function(a,b,c){var d=h(b)||{};j({guiConfig:a,guiOptPropMap:y,res:d,data:c});var e=[].concat(c).filter(function(a){return a}).map(function(a){return a.s}),f=g(a,"options.series");A({seriesConfig:f,propsConfig:d,dataSeries:e,data:c}),g(a,"options.others.tooltip.axisPointer.show")||delete d.tooltip.crosshairs,d.xAxis.type="dateTime"===d.xAxis.type?"time":d.xAxis.type,d.tooltip&&d.tooltip.domStyles&&(d.tooltip.domStyles["g2-tooltip"].boxShadow="none");var i=g(a,"options.others.guideLine"),k=v(i);return d.guideLine=k&&i.show?[].concat(k):[],d},defaultProps:{title:{visible:!1},description:{visible:!1},pixelRatio:3,xField:"x",yField:"y",colorField:"s",groupField:"s",padding:"auto",forceFit:!0,yAxis:{label:{formatter:function(a){return(""+a).replace(/\d{1,3}(?=(\d{3})+$)/g,function(a){return a+","})},style:{stroke:z}},grid:{style:{lineDash:[4,4]}},tickLine:{visible:!1},title:{visible:!1,text:"",style:{stroke:z}}},xAxis:{grid:{style:{lineDash:[4,4]}},tickLine:{visible:!1},title:{visible:!1,text:"",style:{stroke:z}},label:{style:{stroke:z}}},legend:{position:"bottom-center"},label:{position:"middle",adjustColor:!1,adjustPosition:!0,style:{stroke:z}},connectedArea:{triggerOn:!1,lineStyle:{opacity:1},areaStyle:{opacity:1}}}},a.exports});;
Cube("datav:/com/ml-bar-group/4.1.5",["datav:/npm/lodash/4.17.11","datav:/npm/bcore/0.0.22/event","datav:/npm/datav-g2plot-adaptor/1.1.6/g2plot.js","datav:/npm/datav-g2plot-util/0.2.4"],function(a,b,c){var d=Object.assign||function(a){for(var b,c=1;c<arguments.length;c++)for(var d in b=arguments[c],b)Object.prototype.hasOwnProperty.call(b,d)&&(a[d]=b[d]);return a},e=c("datav:/npm/lodash/4.17.11"),f=c("datav:/npm/bcore/0.0.22/event"),g=c("datav:/npm/datav-g2plot-adaptor/1.1.6/g2plot.js"),h=c("datav:/npm/datav-g2plot-util/0.2.4"),i=h.getTransform,j=h.datavColor2G2Color,k=h.convertData,l=c("datav:/com/ml-bar-group/4.1.5/transform"),m=l.transOptionKey,n=l.defaultProps,o=e.get,p=e.cloneDeep,q=e.isUndefined,r=e.clone;return a.exports=f.extend(function(a,b){this.container=a,this.chart=null,this.guiConfig={options:{chart:{legend:{marker:{shape:"square",show:!0,size:4},textStyle:{color:"rgb(144, 160, 174)",fontFamily:"Microsoft Yahei",fontSize:12,fontWeight:"normal"}}},others:{tooltip:{textStyleList:{color:"#fff",fontFamily:"Microsoft Yahei",fontSize:14,fontWeight:"normal"},textStyleValue:{color:"#fff",fontFamily:"Microsoft Yahei",fontSize:14,fontWeight:"normal"}}}}},this.propsConfig=n,this.chartConfig=null,this.init(b)},{init:function(a){this.mergeConfig(a)},initChart:function(a){this.chart=new g.GroupColumn(this.container,a),this.chart.render();var b=i(this.container);Object.values(b).length&&this.chart&&this.chart.canvas&&(this.chart.canvas.set("containerTransform",b),this.chart.canvas.set("supportCSSTransform",!0))},render:function(a,b){var c=this;return this.guiConfig=this.mergeConfig(b),a=this.data(a),a&&e.isArray(a)&&a.length?void k(p(a),this.guiConfig,!1,{x:"x",y:"y"}).then(function(a){c.propsConfig=m(c.guiConfig,c.propsConfig,p(a)),c._bindEvent(c.propsConfig),c.chartConfig=d({data:a},c.propsConfig),c.chart?(c.chart.updateConfig(c.chartConfig),c.chart.render()):c.initChart(c.chartConfig)}):(console.warn("--------- \u540C\u5B66\u4F60\u597D, \u8BF7\u786E\u4FDD\"\u5782\u76F4\u5206\u7EC4\u67F1\u72B6\u56FE\"\u7EC4\u4EF6, \u6570\u636E\u7C7B\u578B\u4E3A\u6570\u7EC4 && \u6570\u636E\u5927\u4E8E\u7B49\u4E8E1\u6761 ---------"),void console.warn("--------- Hello classmates, please make sure that the \"Vertical grouping histogram\" component, the data type is an array && data is greater than or equal to 1 ---------"))},updateStyle:function(){},setColors:function(){var a=this.guiConfig;o(a,"options.series.series").forEach(function(a){var b=a.color;a.color=j(b)})},data:function(a){return a&&(this._data=r(a)),this._data},mergeConfig:function(a){if(!a)return this.guiConfig;var b=e.cloneDeep(e.get(a,"options.series.series"));return this.guiConfig=e.defaultsDeep(a||{},this.guiConfig),b&&e.set(this.guiConfig,"options.series.series",b),this.setColors(),this.guiConfig},getThemableConfig:function(a){if(!a)return{};var b=a.textColor,c=a.axisColor,e=a.palette,d=a.bgColor,f=(o(this.guiConfig,"options.series.series")||[]).map(function(a,b){return{color:e[b]||e[b%e.length]}}),g={label:{textarea:{color:b}},title:{textarea:{color:b}},axisLine:{color:c},tickLine:{stroke:c},grid:{color:c}};return{options:{chart:{numericalLabel:{textStyle:{color:b}}},axis:{xaxis:g,yaxis:g},series:{series:f},others:{tooltip:{textStyle:{color:b},bgBox:{backgroundColor:d}}}}}},resize:function(a,b){this.chart&&this.chart.updateConfig({width:a,height:b}),this.chart&&this.chart.render()},destroy:function(){this.chart&&this.chart.destroy(),this.chart=null,this._data=null},_bindEvent:function(a){var b=this;a.events={onPlotClick:function(a){var c=o(a,"target.cfg.origin.data");q(c)||b.emit("click",c)},onLegendClick:function(a){var c=e.get(a,"target.cfg.delegateObject.item.value"),d=e.get(a,"target.cfg.delegateObject.item.unchecked");q(c)||b.emit("onLegendClick",{value:c,checked:!d})}}},highlight:function(a){var b=a.data,c=b.x,f=b.y,g=b.s,h=a.style;if(this.chart&&c&&f&&g){var i=function(a){return a.x==c&&a.y===(e.isNaN(e.toNumber(f))?f:e.toNumber(f))&&a.s===g};this.chart.setActive(i,d({},h))}},cancelHighlight:function(){this.chart&&(this.chart&&this.chart.destroy(),this.initChart(this.chartConfig))}}),a.exports});