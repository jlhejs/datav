// env=undefined => env=publish 
Cube("datav:/com/@datav-mobile/goblin-pie-basic/0.3.2/oldconfig.json",[],function(a){return a.exports={options:{chart:{chart:{useCustomPadding:!1,padding:[0,0,0,0]},coord:{_type:"polar",transposed:!0,radius:1,innerRadius:0,startAngle:-90,endAngle:270},interval:{position:"b*value",adjust:{_type:"stack"}},legend:{show:!0,position:"right",align:"left",verticalAlign:"middle",marker:"circle",nameStyle:{fontSize:10,fontWeight:"normal",textAlign:"left",fill:"#808080"},clickable:!0,unCheckColor:"#bfbfbf"}},series:{series:[{interval:{color:{type:"flat",value:"#1890FF"}}},{interval:{color:{type:"flat",value:"#2FC25B"}}},{interval:{color:{type:"flat",value:"#FACC14"}}},{interval:{color:{type:"flat",value:"#223273"}}},{interval:{color:{type:"flat",value:"#8543E0"}}},{interval:{color:{type:"flat",value:"#13C2C2"}}}]},others:{animate:{show:!0,easing:"cubicOut",enterDuration:1000,updateDuration:300},tooltip:{show:!0,showName:!0,showPercent:!0,guideLine:{length:0.4,width:2,fill:"#808080"},textStyle:{fontSize:10,fill:"#fff"}}}}},a.exports});;
Cube("datav:/com/@datav-mobile/goblin-pie-basic/0.3.2/reverse",["datav:/npm/lodash/4.6.1"],function(a,b,c){var d=c("datav:/npm/lodash/4.6.1"),e={"options.chart.chart.useCustomPadding":"options.chart.padding.show","options.chart.chart.padding[0]":"options.chart.padding.top","options.chart.chart.padding[1]":"options.chart.padding.right","options.chart.chart.padding[2]":"options.chart.padding.bottom","options.chart.chart.padding[3]":"options.chart.padding.left","options.chart.coord.radius":"options.axis.rAxis.radiusGroup.radius","options.chart.coord.innerRadius":"options.axis.rAxis.radiusGroup.innerRadius","options.chart.coord.startAngle":"options.axis.angleAxis.angle.startAngle","options.chart.coord.endAngle":"options.axis.angleAxis.angle.endAngle","options.chart.interval.position":null,"options.chart.interval.adjust._type":null,"options.chart.legend.position":"options.chart.legend.layout.position","options.chart.legend.align":"options.chart.legend.layout.align","options.chart.legend.verticalAlign":"options.chart.legend.layout.verticalAlign","options.chart.legend.marker":"options.chart.legend.marker","options.chart.legend.nameStyle.fontSize":"options.chart.legend.textStyle.fontSize","options.chart.legend.nameStyle.fontWeight":"options.chart.legend.textStyle.fontWeight","options.chart.legend.nameStyle.textAlign":"options.chart.legend.textStyle.textAlign","options.chart.legend.nameStyle.fill":"options.chart.legend.textStyle.fill","options.chart.legend.clickable":"options.chart.legend.clickable","options.chart.legend.unCheckColor":"options.chart.legend.unCheckColor","options.chart.legend.show":"options.chart.legend.show","options.axis.angleAxis.angle.startAngle":"options.axis.angleAxis.angle.startAngle","options.axis.angleAxis.angle.endAngle":"options.axis.angleAxis.angle.endAngle","options.axis.rAxis.radiusGroup.radius":"options.axis.rAxis.radiusGroup.radius","options.axis.rAxis.radiusGroup.innerRadius":"options.axis.rAxis.radiusGroup.innerRadius","options.series.series":"options.series.series","options.others.animate.easing":"options.others.animate.easing","options.others.animate.enterDuration":"options.others.animate.duration.enterDuration","options.others.animate.updateDuration":"options.others.animate.duration.updateDuration","options.others.animate.show":"options.others.animate.show","options.others.tooltip.showPercent":"options.others.tooltip.showPercent","options.others.tooltip.guideLine.length":"options.others.tooltip.guideLine.length","options.others.tooltip.guideLine.width":"options.others.tooltip.guideLine.width","options.others.tooltip.guideLine.fill":"options.others.tooltip.guideLine.fill","options.others.tooltip.textStyle.fontSize":"options.others.tooltip.textStyle.fontSize","options.others.tooltip.textStyle.fill":"options.others.tooltip.textStyle.fill","options.others.tooltip.show":"options.others.tooltip.show","options.others.tooltip.showName":"options.others.tooltip.showName"},f=c("datav:/com/@datav-mobile/goblin-pie-basic/0.3.2/oldconfig.json");return a.exports=function(a){for(var b in e){var c=e[b];c&&d.set(f,b,d.get(a,c))}return f},a.exports});;
Cube("datav:/com/@datav-mobile/goblin-pie-basic/0.3.2",["datav:/com/@datav-mobile/goblin-utils/0.2.1","datav:/npm/bcore/0.0.18/event","datav:/npm/jquery/2.1.4","datav:/npm/lodash/4.6.1","datav:/npm/datav-goblin-adaptor/0.0.3"],function(a,b,c){function d(a,b){var c={};for(var d in a)0<=b.indexOf(d)||Object.prototype.hasOwnProperty.call(a,d)&&(c[d]=a[d]);return c}function e(a,b,c,d,e){var f=b.center,g=a.get("origin"),h=g._origin.value;e.showPercent&&(h=parseInt(100*(h/d))+"%");var i=g.points,j=(i[2].x-i[1].x)*(1+e.guideLine.length)+i[1].x,k=(i[0].y+i[1].y)/2,l=b.convertPoint({x:1,y:k}),n=b.convertPoint({x:j,y:k}),o=new m;o.addShape("Line",{attrs:{x1:l.x,y1:l.y,x2:n.x,y2:n.y,lineWidth:e.guideLine.width,stroke:e.guideLine.fill}});var p=o.addShape("Text",{attrs:{x:n.x,y:n.y,text:e.showName?g._origin.name+": "+h:h,fill:e.textStyle.fill,fontSize:e.textStyle.fontSize,textAlign:"start",textBaseline:"bottom"}}),q=p.getBBox().width,r=o.addShape("Line",{attrs:{x1:n.x,y1:n.y,x2:n.x,y2:n.y,lineWidth:e.guideLine.width,stroke:e.guideLine.fill}});n.x>f.x?r.attr("x2",n.x+q):n.x<f.x?(p.attr("textAlign","end"),r.attr("x2",n.x-q)):n.y>f.y?(p.attr("textAlign","center"),p.attr("textBaseline","top")):(p.attr("textAlign","center"),p.attr("textBaseline","bottom")),c.add(o),a.tooltip=o}var f=Object.assign||function(a){for(var b,c=1;c<arguments.length;c++)for(var d in b=arguments[c],b)Object.prototype.hasOwnProperty.call(b,d)&&(a[d]=b[d]);return a},g=c("datav:/npm/bcore/0.0.18/event"),h=c("datav:/npm/jquery/2.1.4"),i=c("datav:/npm/lodash/4.6.1"),j=c("datav:/com/@datav-mobile/goblin-pie-basic/0.3.2/reverse"),k=c("datav:/com/@datav-mobile/goblin-utils/0.2.1"),l=c("datav:/npm/datav-goblin-adaptor/0.0.3"),m=l.F2.G.Group,n=l.default;return a.exports=g.extend(function(a,b){this.config={},this.container=h(a),this.apis=b.apis,this._data=null,this.chart=null,this.init(b)},{init:function(a){var b=this.container.innerWidth(),c=this.container.innerHeight(),d=h("<canvas></canvas>").attr("width",b).attr("height",c);this.container.append(d);var e=window.devicePixelRatio;this.chartConfig={el:d[0],width:"100%",height:"100%",pixelRatio:e},this.mergeConfig(a)},render:function(a,b){var c=this;this.chart&&this.chart.clear(),a=this.data(a),this.mergeConfig(b);var g=k.config2goblinPie(j(this.config)),h=g.chart,l=g.tooltip;g.tooltip=!1,this.chartConfig.padding=h.useCustomPadding?h.padding:"auto",this.chart=n(f({},g,{chart:this.chartConfig,data:a})).chartInstance;var m=this._dataSum;if(l.show){var o=null;this.chart.interaction("pie-select",{onEnd:function(a){var f=a.data,g=f.b,b=d(f,["b"]);c.emit("click",b);var h=f.name,j=c.chart.get("canvas"),k=c.chart.get("coord"),n=c.chart.get("geoms")[0],p=n.get("shapes"),q=i.find(p,function(a){var b=a.get("origin");return b&&b._origin.name===h});o&&o!==q&&o.animate().to({attrs:{lineWidth:0},duration:10}).onStart(function(){o.tooltip&&o.tooltip.hide()}).onEnd(function(){o.set("selected",!1)}),q.get("selected")?q.animate().to({attrs:{lineWidth:0},duration:10}).onStart(function(){q.tooltip&&q.tooltip.hide()}).onEnd(function(){q.set("selected",!1)}):(q.set("selected",!0),q.animate().to({attrs:{lineWidth:5},duration:10}).onEnd(function(){o=q,q.tooltip?q.tooltip.show():e(q,k,j,m,l),j.draw()}))}})}},resize:function(a,b){this.chart&&this.chart.changeSize(a,b)},data:function(a){if(a){var b=0;a.forEach(function(a){b+=a.value,i.isNumber(a.name)&&(a.name=a.name.toString()),a.b||(a.b="1")}),this._dataSum=b,this._data=a}return this._data},mergeConfig:function(a){return a?(a.options.series&&a.options.series.series&&this.config.options&&this.config.options.series&&this.config.options.series.series&&(this.config.options.series.series=a.options.series.series),this.config=i.defaultsDeep(a||{},this.config),this.config):this.config},destroy:function(){this.chart&&this.chart.destroy();var a=this.container.find("canvas");a&&a.remove()},getThemableConfig:function(a){if(!a)return null;var b=a.palette.map(function(a){return{interval:{color:a}}}),c={options:{chart:{legend:{unCheckColor:a.assistColor,textStyle:{fill:a.textColor}}},series:{series:b},others:{tooltip:{guideLine:{fill:a.assistColor},textStyle:{fill:a.textColor}}}}};return c}}),a.exports});