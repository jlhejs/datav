Cube("datav:/com/carousel-iframe/1.1.5",["datav:/npm/bcore/0.0.18/event","datav:/npm/jquery/2.1.4","datav:/npm/lodash/4.6.1"],function(t,i,e,s,a,n){var r=e("datav:/npm/bcore/0.0.18/event"),o=e("datav:/npm/jquery/2.1.4"),h=e("datav:/npm/lodash/4.6.1"),f=h.template('<iframe src="<%= src %>" class="<%= className%> iframes" width=100% height=100% style="border:none;position:absolute;opacity:0"></iframe>');return t.exports=r.extend(function(t,i){this.config={isLoop:!1,interval:3},this.container=o(t),this.apis=i.apis,this._data=null,this.chart=null,this.startIndex=0,this.init(i)},{init:function(t){this.mergeConfig(t),this.container.append('<div class="iframeOutBox" style="width:100%;height:100%;position:absolute;"></div>'),this.iframeOutBox=this.container.find(".iframeOutBox"),this.createIframe(this.config.series)},createIframe:function(t){var e=this;t&&0<t.length&&h.map(t,function(t,i){t.url&&""!==t.id&&e.iframeOutBox.append(f({width:e.iframeOutBox.width(),height:e.iframeOutBox.height(),src:/^(http|https):\/\//.test(t.url)?t.url:"",className:"iframe"+t.id}))})},resize:function(t,i){},updateOptions:function(t){clearTimeout(this.loopTimer),this.mergeConfig(t),this.iframeIds.length&&this.config.isLoop&&this.loopIframe()},loopIframe:function(){clearTimeout(this.loopTimer),this.startIndex>=this.iframeIds.length&&(this.startIndex=0),this.showID=this.iframeIds[this.startIndex],this.updateIframe(),this.startIndex++,this.loopTimer=setTimeout(this.loopIframe.bind(this),1e3*this.config.interval)},renderData:function(t){var i=this;h.isEqual(t,this._data)||(t=this.data(t),this.iframeOutBox.empty(),this.createIframe(t),this.iframeIds=[],h.map(this._data,function(t){return i.iframeIds.push(t.id)}),this.showID&&this.renderId())},renderId:function(t){t&&(this.showID=t&&t[0]&&t[0].id+""),this.updateIframe(),this.iframeIds.length&&this.config.isLoop&&this.loopIframe()},updateIframe:function(){this.iframeOutBox.children(".iframes").css({opacity:0,"pointer-events":"none"}),this.iframeOutBox.children(".iframe"+this.showID).css({opacity:1,"pointer-events":"auto"})},data:function(t){return t&&(this._data=t),this._data},mergeConfig:function(t){return t&&(this.config=h.defaultsDeep(t||{},this.config)),this.config},destroy:function(){this.container.empty(),this._data=null},getFieldValue:function(){var i=this;if(this.showID&&this._data.length)return h.filter(this._data,function(t){return t.id+""===i.showID})[0]}}),t.exports});