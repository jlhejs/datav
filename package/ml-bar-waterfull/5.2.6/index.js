// env=undefined => env=publish 
Cube("datav:/com/ml-bar-waterfull/5.2.6/customRuleStyle",["datav:/npm/lodash/4.17.11/set","datav:/npm/lodash/4.17.11/isUndefined","datav:/npm/alibabacloud-datav-tool-gui-utils/1.0.0"],function(e,t,r,a,o,l){function n(t,e){var r,a=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),a.push.apply(a,r)),a}function u(a){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?n(Object(o),!0).forEach(function(e){var t,r;t=a,r=o[e=e],e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(o)):n(Object(o)).forEach(function(e){Object.defineProperty(a,e,Object.getOwnPropertyDescriptor(o,e))})}return a}var d=r("datav:/npm/lodash/4.17.11/set"),f=r("datav:/npm/lodash/4.17.11/isUndefined"),p=r("datav:/com/ml-bar-waterfull/5.2.6/utils").transformGradientColor,r=r("datav:/npm/alibabacloud-datav-tool-gui-utils/1.0.0"),b=(r.scale,r.validateCustomStyle),v=["fill"];return e.exports=function(){var o,l,n,i,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.props,r=e.guiConfig,e=e.data,r=(void 0===r?{}:r).options,a=r.chart,c=a.increase,s=a.decrease,a=a.total,r=r.condition.customStyle;r=(t={props:void 0===t?{}:t,customStyle:r,data:e,increase:c,decrease:s,total:a}).props,o=t.customStyle,t.data,l=t.increase,n=t.decrease,i=t.total,d(r,"color",function(){for(var t={},e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return b({config:o,data:r[0],ruleKey:"rules"}).forEach(function(r){var e=v.reduce(function(e,t){return r[t]&&r[t].show&&(e[t]=r[t]&&r[t].value),u(u({},e),p(e.fill))},{});Object.assign(t,e)}),f(t.fill)?r[0].$$isTotal$$?p(i.fill).fill:0<r[0].y?p(l.fill).fill:r[0].y<0&&p(n.fill).fill:t.fill})},e.exports});;
Cube("datav:/com/ml-bar-waterfull/5.2.6/utils",["datav:/npm/lodash/4.17.11/toNumber","datav:/npm/lodash/4.17.11/forEach","datav:/npm/lodash/4.17.11/isNumber","datav:/npm/lodash/4.17.11/map","datav:/npm/lodash/4.17.11/get","datav:/npm/lodash/4.17.11/set","datav:/npm/lodash/4.17.11/trim","datav:/npm/lodash/4.17.11/min","datav:/npm/lodash/4.17.11/max","datav:/npm/lodash/4.17.11/some","datav:/npm/lodash/4.17.11/sumBy","datav:/npm/lodash/4.17.11/isUndefined","datav:/npm/lodash/4.17.11/isNull","datav:/npm/lodash/4.17.11/isNaN","datav:/npm/moment/2.27.0","datav:/npm/d3-format/3.1.0"],function(a,t,n,o,i,e){function m(a,t,n){t in a?Object.defineProperty(a,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):a[t]=n}function r(a){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(a)}function l(a){var t=a.v,n=a.type,o=a.format,i=a.prefix,a=a.suffix;return n===C&&"null"!==o?i+w(o)(t)+a:n===C&&"null"===o?i+d(t)+a:"timeCat"===n&&"null"!==o?i+E(t).format(o)+a:i+t+a}function s(a){for(var t=[],n=1;n<=a.length;)t.push(a.slice(0,n)),n++;return t}function L(a){var t=a.x,n=a.y,o=a.r,a=a.type,i=o/2*Math.sqrt(3),e=o*Math.sin(1/3*Math.PI);return{line:[["M",t-3*o,n],["L",t+3*o,n]],lineEllipsis:[["M",t-3*o,n],["L",t-2*o,n],["M",t-o,n],["L",t,n],["M",t+o,n],["L",t+2*o,n],["M",t+3*o,n],["L",t+4*o,n]],smooth:[["M",t-o,n],["A",o/2,o/2,0,1,1,t,n],["A",o/2,o/2,0,1,0,t+o,n]],smoothEllipsis:[["M",150,100],["C",150,72.4,72.4,50,100,50]],step:[["M",t-o-1,n-2.5],["L",t,n-2.5],["L",t,n+2.5],["L",t+o+1,n+2.5]],stepEllipsis:[["M",t-o-1,n-2.5],["L",t-o+3,n-2.5],["M",t-o/2+2,n-2.5],["L",t,n-2.5],["L",t,n+2.5],["L",t+4,n+2.5],["M",t+o/2+3,n+2.5],["L",t+o+1,n+2.5]],circle:[["M",t,n+o],["A",o,o,0,0,0,t+o,n],["M",t,n+o],["A",o,o,0,1,1,t+o,n]],circleLine:[["M",t-3*o,n],["L",t-o,n],["M",t+o,n],["L",t+3*o,n],["M",t,n+o],["A",o,o,0,0,0,t+o,n],["M",t,n+o],["A",o,o,0,1,1,t+o,n]],circleEllipsis:[["M",t-3*o,n],["L",t-2*o,n],["M",t-o-o/2,n],["L",t-o-2,n],["M",t+o+2,n],["L",t+o+o/2,n],["M",t+3*o,n],["L",t+2*o,n],["M",t,n+o],["A",o,o,0,0,0,t+o,n],["M",t,n+o],["A",o,o,0,1,1,t+o,n]],square:[["M",t-o,n-o],["L",t+o,n-o],["L",t+o,n+o],["L",t-o,n+o],["Z"]],squareLine:[["M",t-3*o,n],["L",t-o,n],["M",t+o,n],["L",t+3*o,n],["M",t-o,n-o],["L",t+o,n-o],["L",t+o,n+o],["L",t-o,n+o],["Z"]],squareEllipsis:[["M",t-3*o,n],["L",t-2*o,n],["M",t-o-o/2,n],["L",t-o-2,n],["M",t+o+2,n],["L",t+o+o/2,n],["M",t+3*o,n],["L",t+2*o,n],["M",t-o,n-o],["L",t+o,n-o],["L",t+o,n+o],["L",t-o,n+o],["Z"]],hexagon:[["M",t,n-o-2],["L",t+i+1,n-o/2-1],["L",t+i+1,n+o/2+1],["L",t,n+o+1+1],["L",t-i-1,n+o/2+1],["L",t-i-1,n-o/2-1],["Z"]],hexagonLine:[["M",t-3*o,n],["L",t-o-(o<=3?1:0),n],["M",t+o+(o<=3?1:0),n],["L",t+3*o,n],["M",t,n-o-2],["L",t+i+1,n-o/2-1],["L",t+i+1,n+o/2+1],["L",t,n+o+1+1],["L",t-i-1,n+o/2+1],["L",t-i-1,n-o/2-1],["Z"]],hexagonEllipsis:[["M",t-3*o,n],["L",t-2*o,n],["M",t-o-o/2,n],["L",t-o-1,n],["M",t+o+1,n],["L",t+o+o/2,n],["M",t+3*o,n],["L",t+2*o,n],["M",t,n-o-2],["L",t+i+1,n-o/2-1],["L",t+i+1,n+o/2+1],["L",t,n+o+1+1],["L",t-i-1,n+o/2+1],["L",t-i-1,n-o/2-1],["Z"]],diamond:[["M",t-o-2,n],["L",t,n-o-2],["L",t+o+2,n],["L",t,n+o+2],["Z"]],diamondLine:[["M",t-3*o,n],["L",t-o-1,n],["M",t+o+1,n],["L",t+3*o,n],["M",t-o-2,n],["L",t,n-o-2],["L",t+o+2,n],["L",t,n+o+2],["Z"]],diamondEllipsis:[["M",t-3*o,n],["L",t-2*o,n],["M",t-o-o/2,n],["L",t-o-2,n],["M",t+o+2,n],["L",t+o+o/2,n],["M",t+3*o,n],["L",t+2*o,n],["M",t-o-2,n],["L",t,n-o-2],["L",t+o+2,n],["L",t,n+o+2],["Z"]],triangle:[["M",t-o,n+e],["L",t,n-e],["L",t+o,n+e],["z"]],triangleLine:[["M",t-3*o,n],["L",t-o+o/2,n],["M",t+o-o/2,n],["L",t+3*o,n],["M",t-o,n+e],["L",t,n-e],["L",t+o,n+e],["z"]],triangleEllipsis:[["M",t-3*o,n],["L",t-2*o,n],["M",t-o-o/2,n],["L",t-o/2,n],["M",t+o/2,n],["L",t+o+o/2,n],["M",t+3*o,n],["L",t+2*o,n],["M",t-o,n+e],["L",t,n-e],["L",t+o,n+e],["z"]],"triangle-down":[["M",t-o,n-e],["L",t+o,n-e],["L",t,n+e],["Z"]],triangleDownLine:[["M",t-3*o,n],["L",t-o+o/2,n],["M",t+o-o/2,n],["L",t+3*o,n],["M",t-o,n-e],["L",t+o,n-e],["L",t,n+e],["Z"]],triangleDownEllipsis:[["M",t-3*o,n],["L",t-2*o,n],["M",t-o-o/2,n],["L",t-o/2,n],["M",t+o/2,n],["L",t+o+o/2,n],["M",t+3*o,n],["L",t+2*o,n],["M",t-o,n-e],["L",t+o,n-e],["L",t,n+e],["Z"]],bowtie:[["M",t-o,n-e],["L",t+o,n+e],["L",t+o,n-e],["L",t-o,n+e],["Z"]],bowtieLine:[["M",t-3*o,n],["L",t-o,n],["M",t+o,n],["L",t+3*o,n],["M",t-o,n-e],["L",t+o,n+e],["L",t+o,n-e],["L",t-o,n+e],["Z"]],bowtieEllipsis:[["M",t-3*o,n],["L",t-2*o,n],["M",t-o-o/2,n],["L",t-o-2,n],["M",t+o+2,n],["L",t+o+o/2,n],["M",t+3*o,n],["L",t+2*o,n],["M",t-o,n-e],["L",t+o,n+e],["L",t+o,n-e],["L",t-o,n+e],["Z"]]}[a]}var d=n("datav:/npm/lodash/4.17.11/toNumber"),p=n("datav:/npm/lodash/4.17.11/forEach"),u=n("datav:/npm/lodash/4.17.11/isNumber"),M=n("datav:/npm/lodash/4.17.11/map"),c=n("datav:/npm/lodash/4.17.11/get"),f=n("datav:/npm/lodash/4.17.11/set"),h=n("datav:/npm/lodash/4.17.11/trim"),v=n("datav:/npm/lodash/4.17.11/min"),x=n("datav:/npm/lodash/4.17.11/max"),y=n("datav:/npm/lodash/4.17.11/some"),g=n("datav:/npm/lodash/4.17.11/sumBy"),b=n("datav:/npm/lodash/4.17.11/isUndefined"),Z=n("datav:/npm/lodash/4.17.11/isNull"),N=n("datav:/npm/lodash/4.17.11/isNaN"),C="linear",E=n("datav:/npm/moment/2.27.0"),w=n("datav:/npm/d3-format/3.1.0").format;return a.exports=(m(n={transLineDash:function(a){var t=a.lineStyle,n=a.dashedLength,o=a.dashedSpace,i=a.dottedLength,a=a.dottedSpace,e=[];return"solid"===t?e=[1,0]:"dashed"===t?e=[n,o]:"dotted"===t&&(e=[i,a]),e},transNumberFormatterTooltip:l,transformGradientColor:function(a){var t,n,o;return"object"===r(a)?(n=a.type,t=a.value,"flat"===n?{fill:t}:(t=(n=a.value).angle,n=n.stops,o="",M(n,function(a){var t=a.offset,a=a.color;o+="".concat(t/100,":").concat(a," ")}),{fill:"l(".concat(t,") ").concat(h(o))})):{fill:a}},maximumCalY:function(a){var t=a.extent,n=a.data,a=a.type,o=[],i=(M(n,function(a){return o.push(d(a.y))}),y(o,function(a){return a<0})),e=y(o,function(a){return 0<a}),n=s(n);if(M(n,function(a){return o.push(g(a,function(a){return a.y}))}),"linear"===a)return"min"===t.min&&"max"!==t.max?{min:i?+v(o):0,max:d(t.max)}:"min"!==t.min&&"max"===t.max?{min:d(t.min),max:e?+x(o):0}:"min"!==t.min&&"max"!==t.max?{min:d(t.min),max:d(t.max)}:"min"===t.min&&"max"===t.max?{min:i?+v(o):0,max:e?+x(o):0}:void 0},maximumCalX:function(a){var t=a.extent,n=a.data,a=a.type,o=[],n=(M(n,function(a){o.push(a.x)}),"min"===t.min?v(o):d(t.min)),t="max"===t.max?x(o):d(t.max);return{min:"linear"===a?n:void 0,max:"linear"===a?t:void 0}},handleTimeCatNull:function(a){var t=c(a,"options.axis.xaxis.type"),t=("null"===c(a,"options.axis.xaxis.label.timeFormat")&&"timeCat"===t&&f(a,"options.axis.xaxis.type","cat"),c(a,"options.axis.yaxis.type"));"null"===c(a,"options.axis.yaxis.label.timeFormat")&&"timeCat"===t&&f(a,"options.axis.yaxis.type","cat")},pathDFn:function(){var a=L(arguments.length<=0?void 0:arguments[0]),t="";return p(a,function(a){p(a,function(a){u(a)?t+=a+",":t+=a}),t+=" "}),t}},"transNumberFormatterTooltip",l),m(n,"locationInfo",function(a){var a=a.chart.getController("axis").getComponents(),t=a[0].component.getLayoutBBox(),n=t.height,t=t.width,a=a[2].component.getLayoutBBox();return{x:n,y:a.width,maxWidth:t,maxHeight:a.height}}),m(n,"transformSVGGradientColor",function(a){var t="",a=c(a,"value"),n=a.angle,a=a.stops,o="grad"+ +new Date,t="<defs><linearGradient id='".concat(o,"' gradientTransform='rotate(").concat(n,")'>");return M(a,function(a){t+='<stop offset="'.concat(a.offset,'" stop-color="').concat(a.color,'"/>')}),{gradientHtml:t+="</linearGradient></defs>",id:o}}),m(n,"isValid",function(a){return!b(a)&&!Z(a)&&!N(a)}),n),a.exports});;
Cube("datav:/com/ml-bar-waterfull/5.2.6/transform",["datav:/npm/lodash/4.17.11/isUndefined","datav:/npm/lodash/4.17.11/get","datav:/npm/lodash/4.17.11/map","datav:/npm/lodash/4.17.11/uniqBy","datav:/npm/lodash/4.17.11/find","datav:/npm/lodash/4.17.11/filter","datav:/npm/lodash/4.17.11/forEach"],function(t,e,i,n,l,o){function a(e,t){var i,n=Object.keys(e);return Object.getOwnPropertySymbols&&(i=Object.getOwnPropertySymbols(e),t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)),n}function Kt(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?a(Object(i),!0).forEach(function(t){Jt(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):a(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}function Jt(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var Qt=i("datav:/npm/lodash/4.17.11/isUndefined"),Zt=i("datav:/npm/lodash/4.17.11/get"),_t=i("datav:/npm/lodash/4.17.11/map"),te=i("datav:/npm/lodash/4.17.11/uniqBy"),ee=i("datav:/npm/lodash/4.17.11/find"),ie=i("datav:/npm/lodash/4.17.11/filter"),ne=i("datav:/npm/lodash/4.17.11/forEach"),le=i("datav:/com/ml-bar-waterfull/5.2.6/customRuleStyle"),i=i("datav:/com/ml-bar-waterfull/5.2.6/utils"),oe=i.transLineDash,ae=i.transformGradientColor,re=i.maximumCalY,se=i.transNumberFormatterTooltip,fe=i.pathDFn,ce=i.transformSVGGradientColor,pe=i.isValid;return t.exports={transOptionKey:function(B,I,T,t,e){var i=I.options,n=i.chart,l=n.margin,H=(n.typeStyle,n.groupSpace,n.groupInnerSpace,n.customBarWidth),A=(n.connectedArea,n.fill),h=(n.isCustom,n.barBgColor,n.increase),m=n.decrease,y=n.total,E=n.leaderLine,n=n.label,X=n.show,o=n.position,a=n.textStyle,r=n.offset,G=n.labelContent,$=n.valueFormat,s=n.describe,q=n.rangeSign,n=n.stroke,f=i.legend,c=f.isShow,p=f.layout,d=f.textStyle,R=f.spaceToChart,U=R.spaceChartX,R=R.spaceChartY,f=f.cateLegend,u=f.marker,g=f.markerSpace,x=f.maxItemWidth,f=f.flip,V=f.show,v=f.textStyle,K=f.pageMarker,J=f.flipColor,Q=f.inactiveFill,f=f.flipTextColor,b=i.axis,w=b.xaxis,Z=w.isShow,S=(w.extent,w.type),W=w.label,_=W.show,tt=W.timeFormat,et=W.valueFormat,k=W.display,it=k.tickCount,nt=k.rotate,lt=k.offset,ot=k.prefix,at=k.suffix,k=k.alignment,rt=W.textStyle,W=W.slider,C=w.title,st=w.axisLine,ft=w.tickLine,w=w.grid,b=b.yaxis,ct=b.isShow,pt=b.extent,F=b.type,z=b.label,dt=z.show,ht=z.valueFormat,mt=z.timeFormat,O=z.display,yt=O.tickCount,ut=O.rotate,gt=O.offset,xt=O.prefix,vt=O.suffix,O=O.alignment,bt=z.textStyle,z=z.slider,j=b.title,wt=b.axisLine,St=b.tickLine,b=b.grid,D=i.animation,Wt=D.isShow,kt=D.animationEasing,D=D.duration,i=i.tooltip,L=i.tooltipSet,Ct=L.show,Ft=L.position,zt=L.titleTextStyle,P=L.contentTextStyle,Ot=L.trigger,jt=L.titleSpace,Dt=L.contentSpace,Lt=L.suffix,M=L.axisPointer,Pt=M.show,M=M.line,Y=L.bgBox,Mt=Y.padding,Yt=Y.backgroundColor,Y=Y.border,N=L.series,L=i.active,i=L.show,Nt=L.fillSet,Bt=Nt.show,Nt=Nt.fill,It=L.line,Tt=L.trigger,L=L.selectType,Ht=c,At=l.show?{padding:[l.top,l.right,l.bottom,l.left]}:{padding:"auto"},H=H.show?{minColumnWidth:H.width,maxColumnWidth:H.width}:{},X=X?{label:{position:o,offsetX:r.offsetX,offsetY:r.offsetY,offset:0,style:Kt(Kt({fill:a.color},a),{},{stroke:n.strokeColor,lineWidth:n.lineWidth,textBaseline:"bottom"}),content:function(t){var e,i;return"range"===G?(i=Zt(t,"$$yField$$",[]),e=[],_t(i,function(t){e.push(se({v:t,type:"linear",format:$,prefix:"",suffix:""}))}),s.prefix+e.join(q)+s.suffix):(i=Zt(t,G),pe(i)?"y"===G?se({v:i,type:"linear",format:$,prefix:s.prefix,suffix:s.suffix}):s.prefix+i+s.suffix:void 0)},animate:Wt&&{appear:{animation:"scale-in-x"===kt||"scale-in-y"===kt?"zoom-in":kt,duration:D},update:{duration:D}}}}:{label:!1},o=null,r=t.width,a=null,n=t.height,t=(l.show?("left-top"===p||"right-top"===p?(o=0,a=-l.top):"left"===p||"right"===p?a=o=0:"left-bottom"===p||"right-bottom"===p?(o=0,a=l.top):"top-left"!==p&&"bottom-left"!==p||(o=l.left,a=0),r-=l.left,n-=l.top):Qt(e)||("top-left"!==p&&"bottom-left"!==p||(o=e.y,r=e.maxWidth),"left-bottom"!==p&&"right-bottom"!==p||(a=e.x,n=e.maxHeight-10),"left-bottom"!==p&&"left-top"!==p&&"left"!==p&&"right-bottom"!==p&&"right-top"!==p&&"right"!==p||(o=8,r=null)),x.show?{maxItemWidth:x.width}:{maxItemWidth:null}),l=[],e=(h.show&&l.push({name:h.text,value:h.text,marker:{symbol:u.shape,style:{r:u.size,fill:ae(h.fill).fill}}}),m.show&&l.push({name:m.text,value:m.text,marker:{symbol:u.shape,style:{r:u.size,fill:ae(m.fill).fill}}}),y.show&&l.push({name:y.text,value:y.text,marker:{symbol:u.shape,style:{r:u.size,fill:ae(y.fill).fill}}}),g.openselfSpacing?{itemSpacing:g.itemSpacing}:null),x=g.openselfSpacing?{itemMarginBottom:g.itemMarginBottom}:null,Ht=Ht?{legend:Kt(Kt(Kt({},e),x),{},{position:p,flipPage:V,offsetX:o+U,offsetY:-a+R,maxWidth:r,maxHeight:n,pageNavigator:{marker:{style:{size:K.pageSize,fill:K.flipColor||J,inactiveFill:K.inactiveFill||Q}},text:{style:{fontSize:v.fontSize,fill:v.color||f,fontWeight:v.fontWeight,fontFamily:v.fontFamily}}},itemHeight:16,items:l,marker:{spacing:Qt(g.openselfSpacing)||g.openselfSpacing?g.spacing:4},itemName:{style:{fill:d.color,fontFamily:d.fontFamily,fontSize:d.fontSize,fontWeight:d.fontWeight,border:0}}},t)}:{legend:!1},e=Pt?{showCrosshairs:!0,crosshairs:{type:"xy",line:{style:{lineDash:oe(M),lineWidth:M.lineWidth,stroke:M.lineColor}}}}:{showCrosshairs:!1},Et=[],x=(_t(N,function(t){return Et.push(t.columnName)}),Zt(A,"scale.type")),Xt=fe({x:9,y:9,r:5,type:c&&"ordinal"===x?u.shape:"square"}),Gt=ae(h.fill).fill,$t=ae(m.fill).fill,qt=ae(y.fill).fill,Rt=Zt(I,"options.tooltip.tooltipSet.mode"),p=Ct?{tooltip:Kt(Kt({fields:"simple"===Rt?null:Et,showMarkers:!1,customContent:function(c,p){var t=te(p,"data"),d="",e=Zt(t,["0","data","x"],"标题");return _t(t,function(t,e){var l=null,i=t.data,t=t.color,o="",a=t,t="";if(c===y.text&&(t=y.fill,a=qt),p[0].value<0&&(t=m.fill,a=$t),0<p[0].value&&(t=h.fill,a=Gt),"linearGradient"===t.type&&(n=(t=ce(t)).gradientHtml,t=t.id,a="url(#".concat(t,")"),o=n),"simple"===Rt){var t=se({v:Zt(i,"y"),type:F,format:Vt,prefix:xt,suffix:vt}),n=se({v:Zt(i,"x"),type:S,format:Ut,prefix:ot,suffix:at})+"："+t;d+='\n                    <div\n                      style="\n                        display: flex;\n                        justify-content: left;\n                        align-items: center;\n                        margin-bottom: '.concat(Dt,"px;\n                        font-size: ").concat(P.fontSize,"px;\n                        line-height: ").concat(P.fontSize,"px;\n                        color: ").concat(P.color,";\n                        font-weight: ").concat(P.fontWeight,";\n                        font-family: ").concat(P.fontFamily,';\n                      "\n                      >\n                      <div style="width: 18px;height: 18px; margin-right: 6px; overflow: hidden;">\n                        <svg>\n                          ').concat(o,'\n                          <path\n                            d="').concat(Xt,'"\n                            stroke="').concat(a,'"\n                            stroke-opacity="1"\n                            opacity="1"\n                            fill="').concat(a,'"\n                          >\n                          </path>\n                        </svg>\n                      </div>\n                      <span style="\n                        display: inline-block;\n                        vertical-align: middle;\n                      ">').concat(n).concat(Lt,"</span>\n                    </div>\n                  ")}else if(N&&0<N.length){for(var r in i)!function(e){ne(N,function(t){t.columnName===e&&(l=Kt(Kt({},l),{},Jt({},e,i[e])))})}(r);e===p.length-1&&(isSpace=0);var s,f=0;for(s in l)!function(e){var t=l[e],i=("x"===e&&(t=se({v:t,type:S,format:Ut,prefix:ot,suffix:at})),"y"===e&&(t=se({v:t,type:F,format:Vt,prefix:xt,suffix:vt})),Zt(ee(N,function(t){return e===t.columnName}),"suffix")),n=ee(N,function(t){return t.columnName===e}),n=n.displayName||n.columnName;d+='\n                      <div\n                        style="\n                          display: flex;\n                          justify-content: left;\n                          align-items: center;\n                          margin-bottom: '.concat(Dt,"px;\n                          font-size: ").concat(P.fontSize,"px;\n                          line-height: ").concat(P.fontSize,"px;\n                          color: ").concat(P.color,";\n                          font-weight: ").concat(P.fontWeight,";\n                          font-family: ").concat(P.fontFamily,';\n                        "\n                        >\n                        <div style="opacity: ').concat(0===f?1:0,';width: 18px;height: 18px; margin-right: 6px; overflow: hidden;">\n                          <svg>\n                            ').concat(o,'\n                            <path\n                              d="').concat(Xt,'"\n                              stroke="').concat(a,'"\n                              stroke-opacity="1"\n                              opacity="1"\n                              fill="').concat(a,'"\n                            >\n                            </path>\n                          </svg>\n                        </div>\n                        <span style="\n                          display: inline-block;\n                          vertical-align: middle;\n                        ">').concat(n,"： ").concat(t).concat(i,"</span>\n                      </div>\n                    "),f++}(s)}}),'\n                <div style="margin-bottom: -'.concat(Dt,'px;">\n                  <div\n                    style="\n                      display: ').concat("simple"===Rt?"none":"block",";\n                      font-size: ").concat(zt.fontSize,"px;\n                      line-height: ").concat(zt.fontSize,"px;\n                      color: ").concat(zt.color,";\n                      font-weight: ").concat(zt.fontWeight,";\n                      font-family: ").concat(zt.fontFamily,";\n                      margin-bottom: ").concat(jt,'px;\n                    "\n                  >').concat(e,"</div>\n                  ").concat(d,"\n                </div>\n            ")},position:Ft},e),{},{domStyles:{"g2-tooltip":{backgroundColor:Yt,border:"".concat(Y.borderWidth,"px ").concat(Y.borderStyle," ").concat(Y.borderColor),padding:"".concat(Mt.paddingY,"px ").concat(Mt.paddingX,"px"),borderRadius:"".concat(Y.borderRadius,"px"),boxShadow:"none"}}})}:{tooltip:!1},Ut="linear"===S?et:tt,V=_?{label:{rotate:Math.PI*nt/180,offset:lt,style:Kt({textAlign:k,fill:rt.color},rt),formatter:function(t){return se({v:t,type:S,format:Ut,prefix:ot,suffix:at})}}}:{label:{style:{fontSize:0}}},o=C.show?{title:{rotate:Math.PI*C.display.rotate/180,offset:C.display.offset,text:C.text,style:Kt({fill:C.textStyle.color},C.textStyle)}}:{},U=st.show?{line:{style:{stroke:st.line.lineColor,lineWidth:st.line.lineWidth,lineDash:oe(st.line)}}}:{line:{style:{lineWidth:0}}},a=ft.show?{tickLine:{length:ft.line.length,style:Jt({stroke:ft.line.lineColor,lineWidth:2},"lineWidth",ft.line.lineWidth)}}:{tickLine:{length:0,style:{lineWidth:0}}},R=w.show?{grid:{line:{style:{stroke:w.line.lineColor,lineWidth:w.line.lineWidth,lineDash:oe(w.line)}}}}:{grid:{line:{style:{lineWidth:0}}}},r=Z?Kt(Kt(Kt(Kt(Kt({type:"linear"===S?"cat":S,mask:"timeCat"===S?"YYYY/MM/DD HH:mm:ss":"",tickCount:it},V),o),U),a),R):{label:!1,tickLine:{style:{lineWidth:0}},line:{style:{lineWidth:0}},grid:{line:{style:{lineWidth:0}}},title:{style:{fontSize:0}}},Vt="linear"===F?ht:mt,n=dt?{label:{rotate:Math.PI*ut/180,offset:gt,style:Kt({textAlign:O,fill:bt.color},bt),formatter:function(t){return se({v:t,type:F,format:Vt,prefix:xt,suffix:vt})}}}:{label:!1},J=j.show?{title:{rotate:Math.PI*j.display.rotate/180,offset:j.display.offset,text:j.text,style:Kt({fill:j.textStyle.color},j.textStyle)}}:{},K=wt.show?{line:{style:{stroke:wt.line.lineColor,lineWidth:wt.line.lineWidth,lineDash:oe(wt.line)}}}:{line:{style:{lineWidth:0}}},Q=St.show?{tickLine:{length:St.line.length,style:{stroke:St.line.lineColor,lineWidth:St.line.lineWidth}}}:{tickLine:{length:0,style:{lineWidth:0}}},f=b.show?{grid:{line:{style:{stroke:b.line.lineColor,lineWidth:b.line.lineWidth,lineDash:oe(b.line)}}}}:{grid:{line:{style:{lineWidth:0}}}},v=ct?Kt(Kt(Kt(Kt(Kt(Kt({type:F},re({extent:pt,data:T,type:F})),{},{tickCount:yt},n),J),K),Q),f):{label:!1,tickLine:{style:{lineWidth:0}},line:{style:{lineWidth:0}},grid:{line:{style:{lineWidth:0}}},title:{style:{fontSize:0}}},l=Wt?{animation:{appear:{animation:kt,duration:D},update:{duration:D}}}:{animation:!1},g=Bt?ae(Nt):null,d=Jt({},"click"===Tt?"selected":"active",!!i&&{style:Kt({lineWidth:It.lineWidth,lineDash:oe(It),stroke:It.lineColor},g)}),t="multi"===L,Pt=y.show?{total:{label:y.text,style:{fill:ae(y.fill).fill}}}:{total:!1},M=!m.show&&ie(T,function(t){return 0<t.y})||T,M=!h.show&&ie(M,function(t){return t.y<0})||M,A=E.show?{leaderLine:{style:{lineDash:oe(E),lineWidth:E.lineWidth,stroke:E.lineColor}}}:{leaderLine:!1},x=Kt(Kt(Kt(Kt(Kt(Kt(Kt(Kt({data:M,xField:"x",yField:"y",autoFit:!0},At),H),{},{supportCSSTransform:!0,meta:(Jt(c={},"x",{range:[W/100,1-W/100]}),Jt(c,"y",{range:[z/100,1-z/100]}),c)},A),X),Ht),{},{xAxis:Kt({},r),yAxis:Kt({},v)},p),{},{state:Kt({default:{style:{lineWidth:2,fillOpacity:1,stroke:"yellow",fill:"green"}}},d)},Pt),{},{risingFill:h.show?ae(h.fill).fill:"#f4664a",fallingFill:m.show?ae(m.fill).fill:"#30bf78",interactions:[{type:"element-selected",enable:"click"===Tt&&t},{type:"element-single-selected",enable:"click"===Tt&&!t},{type:"element-active",enable:"hover"===Tt&&t},{type:"element-single-active",enable:"hover"===Tt&&!t},{type:"tooltip",cfg:{start:[{trigger:"plot:".concat(Ot),action:"tooltip:show"}]}}]},l);return le({props:x,guiConfig:B,data:T}),x}},t.exports});;
Cube("datav:/com/ml-bar-waterfull/5.2.6",["datav:/npm/bcore/0.0.22/event","datav:/npm/lodash/4.17.11/isUndefined","datav:/npm/lodash/4.17.11/floor","datav:/npm/lodash/4.17.11/get","datav:/npm/lodash/4.17.11/map","datav:/npm/lodash/4.17.11/includes","datav:/npm/lodash/4.17.11/toNumber","datav:/npm/lodash/4.17.11/set","datav:/npm/lodash/4.17.11/cloneDeep","datav:/npm/lodash/4.17.11/filter","datav:/npm/lodash/4.17.11/every","datav:/npm/lodash/4.17.11/some","datav:/npm/lodash/4.17.11/isArray","datav:/npm/lodash/4.17.11/defaultsDeep","datav:/npm/lodash/4.17.11/isEmpty","datav:/npm/lodash/4.17.11/isEqual","datav:/npm/lodash/4.17.11/omit","datav:/npm/@antv/g2plot/2.4.23/dist/g2plot.min.js"],function(t,e,i,o,n,a){function l(e,t){var i,o=Object.keys(e);return Object.getOwnPropertySymbols&&(i=Object.getOwnPropertySymbols(e),t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),o.push.apply(o,i)),o}function w(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?l(Object(i),!0).forEach(function(t){b(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):l(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}function b(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var s=i("datav:/npm/bcore/0.0.22/event"),h=i("datav:/npm/lodash/4.17.11/isUndefined"),r=i("datav:/npm/lodash/4.17.11/floor"),C=i("datav:/npm/lodash/4.17.11/get"),c=i("datav:/npm/lodash/4.17.11/map"),d=i("datav:/npm/lodash/4.17.11/includes"),p=i("datav:/npm/lodash/4.17.11/toNumber"),f=i("datav:/npm/lodash/4.17.11/set"),g=i("datav:/npm/lodash/4.17.11/cloneDeep"),u=i("datav:/npm/lodash/4.17.11/filter"),m=i("datav:/npm/lodash/4.17.11/every"),v=i("datav:/npm/lodash/4.17.11/some"),y=i("datav:/npm/lodash/4.17.11/isArray"),z=i("datav:/npm/lodash/4.17.11/defaultsDeep"),S=i("datav:/npm/lodash/4.17.11/isEmpty"),x=i("datav:/npm/lodash/4.17.11/isEqual"),O=i("datav:/npm/lodash/4.17.11/omit"),k=i("datav:/npm/@antv/g2plot/2.4.23/dist/g2plot.min.js"),L=k.Waterfall,k=k.G2,j=i("datav:/com/ml-bar-waterfull/5.2.6/transform").transOptionKey,i=i("datav:/com/ml-bar-waterfull/5.2.6/utils"),N=i.handleTimeCatNull,D=i.locationInfo,$=i.transformGradientColor,T=i.isValid;return k.registerInteraction("element-single-active",{start:[{trigger:"element:mouseenter",action:"element-active:active"}],end:[{trigger:"element:mouseleave",action:"element-active:reset"}]}),k.registerInteraction("element-active",{start:[{trigger:"element:mouseenter",action:"element-active:toggle"}]}),t.exports=s.extend(function(t,e){this.config={options:{chart:{label:{valueFormat:"null",describe:{prefix:"",suffix:""},rangeSign:"~"}},tooltip:{tooltipSet:{suffix:"",series:[{columnName:"x",displayName:"类别"},{columnName:"y",displayName:"数值"}]},active:{fill:{type:"linearGradient",value:{angle:90,stops:[{offset:0,color:"#00ff95"},{offset:100,color:"rgba(88, 142, 233, 0.5)"}]}},fillSet:{show:!1,fill:{type:"linearGradient",value:{angle:90,stops:[{offset:0,color:"#00ff95"},{offset:100,color:"rgba(88, 142, 233, 0.5)"}]}}}}},legend:{spaceToChart:{spaceChartX:0,spaceChartY:0},cateLegend:{markerSpace:{itemSpacing:null,itemMarginBottom:null},maxItemWidth:{show:!1,width:100},flip:{flipColor:"#000",inactiveFill:"#000",flipTextColor:"rgb(144, 160, 174)",textStyle:{fontFamily:"Arial",fontWeight:"normal",fontSize:12},pageMarker:{pageSize:12}}}},condition:{customStyle:[{rules:{operator:"AND",enabled:!1,expressions:[{operator:"AND",expressions:[["x","eq","伙食费"]]}]},fill:{show:!0,value:"#f00",type:"flat"}}]}}},this.container=t,this.apis=e.apis,this._data=null,this.chart=null,this.guiConfig=null,this.containerSize=null,this.init(e)},{init:function(t){this.mergeConfig(t);t=window.getComputedStyle(this.container,null);this.containerSize={width:p((this.container.style.width||t.getPropertyValue("width")).slice(0,-2)),height:p((this.container.style.height||t.getPropertyValue("height")).slice(0,-2))}},initChart:function(t){this.chart=new L(this.container,t),this.chart.render()},handleNonstandardData:function(t){var i=["x","y"],t=g(t);return u(t,function(t){return m(t,function(t,e){return d(i,e)})})},isHighlight:function(t){var e=t.item,t=t.data;return v(t,function(t){return v([e],t)})},render:function(t,e){var i=this,o=this.mergeConfig(e);(t=this.data(t,o))&&(N(o),this.guiConfig=j(this.config,o,g(t),this.containerSize),this.chart&&this.chart.destroy(),this.initChart(this.guiConfig),e=D(this.chart),this.guiConfig=j(this.config,o,g(t),this.containerSize,e),this.chart.update(this.guiConfig),this.chart.off(),o.options.tooltip&&o.options.tooltip.active&&o.options.tooltip.active.trigger&&o.options.tooltip.active.show&&(t=o.options.tooltip.active.trigger,this.chart.on("element:".concat("click"===t?t:"mouseenter"),function(){var t=u(c(i.chart.getStates(),function(t){return("selected"===t.state||"active"===t.state)&&t.data}),Boolean),e=[];c(t,function(t){return e.push(O(t,["$$absoluteField$$","$$diffField$$","$$isTotal$$","$$yField$$"]))}),i.emit("itemSelect","multi"===o.options.tooltip.active.selectType?e:e&&e[0])})),this.chart.on("contextmenu",function(t){var e=C(t,"data.data"),e=pick(e,["x","y"]);i.emit("onContextMenu",e,t)}),this.chart.on("legend-item:click",function(t){var t=C(t,"target.cfg.delegateObject.item"),e=t.value,t=t.unchecked;i.emit("legendSelect",{value:e,checked:!t})}))},resize:function(t,e){this.render(this._data,this.config)},setColors:function(){},data:function(t,e){return t&&(this.__data=t),this._data=g(this.__data),y(this._data)&&this._data.filter(function(t){return T(t.x)&&T(t.y)}).map(function(t){return isNaN(p(t.y))||(t.y=p(t.y)),t})},mergeConfig:function(t){return t&&(0===Object.keys(this.config).length?this.config=t:(this.config.theme=z(t.theme||{},this.config.theme),this.setColors(),C(t,"options.condition")&&f(this.config,"options.condition",C(t,"options.condition")),C(t,"options.tooltip.tooltipSet.series")&&(t.options.tooltip.tooltipSet.series=t.options.tooltip.tooltipSet.series.map(function(t){return t.columnName=t.columnName||"x",t.displayName=t.displayName||"分类",t.suffix=t.suffix||"",t}),f(this.config,"options.tooltip.tooltipSet.series",C(t,"options.tooltip.tooltipSet.series"))),this.config=z(t||{},this.config))),this.config},getColorableConfig:function(t){var e,i,o,n,a;return!t||S(t)?{}:(e=t.textColor,i=t.axisColor,o=t.palette,t=t.bgColor,n="",a=function(){return{label:{textStyle:{color:i}},title:{textStyle:{color:i}},axisLine:{line:{lineColor:i}},tickLine:{line:{lineColor:i}},grid:{line:{lineColor:i}}}},{options:{chart:{increase:{fill:o[(n=o&&0<o.length?r(o.length/2):n)-1]},decrease:{fill:o[n]},total:{fill:o[n+1]},label:{textStyle:{color:e}}},axis:{xaxis:a(),yaxis:a()},tooltip:{tooltipSet:{titleTextStyle:{color:e},contentTextStyle:{color:e},bgBox:{backgroundColor:t,border:{borderColor:t}}}},legend:{textStyle:{color:i},continuousLegend:{handler:{fill:i},track:{railColor:t}}}}})},getThemableConfig:function(t,e){var i,o,n,a,l,s,r,c,h,d,p=this.config.options,f=p.chart.label.textStyle,g=p.axis,u=g.xaxis,m=u.label,u=u.title,g=g.yaxis,v=g.label,g=g.title,y=p.tooltip,p=p.legend,e=e||{},S=e.color,x=e.font,e=e.complexity,S=this.getColorableConfig(S||t),t={},f=(x&&(i=function(t,e){return void 0===C(x,t)?{}:b({},e,C(x,t))},n="family",a="fontFamily",l="weight",s="fontWeight",r="color.primary",c="color.secondary",h="color",d="lineColor",t={options:{chart:{label:{textStyle:w(w(w({fontSize:C(x,o="size",0)+f.fontSize},i(n,a)),i(l,s)),i(r,h))}},axis:{xaxis:{title:{textStyle:w(w(w({fontSize:C(x,o,0)+u.textStyle.fontSize},i(n,a)),i(l,s)),i(c,h))},label:{textStyle:w(w(w({fontSize:C(x,o,0)+m.textStyle.fontSize},i(n,a)),i(l,s)),i(c,h))},axisLine:{line:w({},i(c,d))},tickLine:{line:w({},i(c,d))}},yaxis:{title:{textStyle:w(w(w({fontSize:C(x,o,0)+g.textStyle.fontSize},i(n,a)),i(l,s)),i(c,h))},label:{textStyle:w(w(w({fontSize:C(x,o,0)+v.textStyle.fontSize},i(n,a)),i(l,s)),i(c,h))},axisLine:{line:w({},i(c,d))},tickLine:{line:w({},i(c,d))}}},tooltip:{tooltipSet:{titleTextStyle:w(w(w({fontSize:C(x,o,0)+y.tooltipSet.titleTextStyle.fontSize},i(n,a)),i(l,s)),i(r,h)),contentTextStyle:w(w(w({fontSize:C(x,o,0)+y.tooltipSet.contentTextStyle.fontSize},i(n,a)),i(l,s)),i(r,h))}},legend:{textStyle:w(w(w({fontSize:C(x,o,0)+p.textStyle.fontSize},i(n,a)),i(l,s)),i(c,h))}}}),{});return"L0"===e?f={options:{chart:{connectedArea:{show:!1},label:{show:!1}},axis:{xaxis:{isShow:!1},yaxis:{isShow:!1}},tooltip:{tooltipSet:{show:!0},active:{show:!0},interaction:{show:!1}},legend:{isShow:!1}}}:"L1"===e?f={options:{chart:{connectedArea:{show:!1},label:{show:!1}},axis:{xaxis:{isShow:!0,axisLine:{show:!0},label:{show:!0},grid:{show:!0},title:{show:!1},tickLine:{show:!1}},yaxis:{isShow:!0,axisLine:{show:!0},label:{show:!0},grid:{show:!0},title:{show:!1},tickLine:{show:!1}}},tooltip:{tooltipSet:{show:!0},active:{show:!0},interaction:{show:!1}},legend:{isShow:!0}}}:"L2"===e&&(f={options:{chart:{connectedArea:{show:!1},label:{show:!0}},axis:{xaxis:{isShow:!0,axisLine:{show:!0},label:{show:!0},grid:{show:!0},title:{show:!0},tickLine:{show:!0}},yaxis:{isShow:!0,axisLine:{show:!0},label:{show:!0},grid:{show:!0},title:{show:!0},tickLine:{show:!0}}},tooltip:{tooltipSet:{show:!0},active:{show:!0},interaction:{show:!0}},legend:{isShow:!0}}}),z({},f,t,S)},highlight:function(t){var e=t.data,t=t.style;if(Object.keys(e).length<=0)return!1;var i=this,o=C(this.config,"options.tooltip.active"),n=o.show,a=o.selectType,l=o.fillSet,s=l.show,l=l.fill,r=o.line,o="click"===o.trigger?"selected":"active",s=h(t)||S(t)?{fillStyle:s?$(l).fill:"",stroke:r.lineColor}:w({},t),l=b({},o,!!n&&{style:w({},s)}),c=(this.chart.update(w(w({},this.guiConfig),{},{state:w(w({},this.guiConfig.state),l)})),y(e)?e:[e]),c=x(this.prevOriginData,e)?this.prevFilterData:this.handleNonstandardData(c);c="single"===a?[c[0]]:c,this.chart.setState(o,function(t){return i.isHighlight({item:t,data:c})}),this.prevOriginData=e,this.prevFilterData=c},reset:function(){var t="click"===C(this.config,"options.tooltip.active").trigger?"selected":"active";this.chart.update(this.guiConfig),this.chart.setState(t,function(){})},destroy:function(){this.chart&&this.chart.destroy(),this.chart=null,this._data=null,this.container&&(this.container.innerHTML="")}}),t.exports});