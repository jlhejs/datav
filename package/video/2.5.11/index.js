// env=undefined => env=publish 
Cube("datav:/com/video/2.5.11/rtsp.html",[],function(a,e,n,t,l,o){return a.exports=function(){return"<object type='application/x-vlc-plugin' pluginspage=\"http://www.videolan.org/\" id='vlc' width=\"<%= containerWidth %>\" height=\"<%= containerHeight %>\" title=\"rtsp\">\n  <param name='src' value='<%= src %>' />\n  <param name='volume' value='<%= cfg.volume %>' />\n  <param name='autoplay' value='<%= cfg.autoplay %>' />\n  <param name='loop' value='<%= cfg.loop %>' />\n  <param name='fullscreen' value='false' />\n  <param name='controls' value='false' />\n</object>\n"},a.exports});;
Cube("datav:/com/video/2.5.11/template.html",[],function(t,o,e,c,i,n){return t.exports=function(){return"<video <%= (cfg.controls ? 'controls'  : '') %> <%= (cfg.autoplay ? 'autoplay'  : '') %>  <%= (cfg.loop ? 'loop' : '') %>  width=\"<%= containerWidth %>\" height=\"<%= containerHeight %>\" class=\"video-switch\" style=\"object-fit: fill\">\n    <source src=\"<%= src %>\">\n</video>"},t.exports});;
Cube("datav:/com/video/2.5.11",["datav:/npm/bcore/0.0.18/event","datav:/npm/jquery/2.1.4","datav:/npm/lodash/4.6.1"],function(t,i,e,o,n,s){var d=e("datav:/npm/bcore/0.0.18/event"),a=e("datav:/npm/jquery/2.1.4"),h=e("datav:/npm/lodash/4.6.1"),v=e("datav:/com/video/2.5.11/template.html")(),u=e("datav:/com/video/2.5.11/rtsp.html")();return t.exports=d.extend(function(t,i){this.config={isMuted:!1,theme:{}},this.container=a(t),this.apis=i.apis,this._data=null,this.init(i),window&&window.$ms&&(window.$ms.on("visible",this.videoPlay&&this.videoPlay.bind(this)),window.$ms.on("hide",this.videoPause&&this.videoPause.bind(this)))},{init:function(t){this.mergeConfig(t),this.updateLayout(),this.updateStyle()},render:function(t,i){var e=this;t=this.data(t);var o=this.mergeConfig(i),i=!0;(t&&t[0]&&t[0].url||o.src)&&(i=!1),this.container.empty(),this.video&&delete this.video,i?this.container.append('<p style="text-align:center;color:#fff;"></p>').find("p").text(o.empty):(0===(t=t&&t[0]&&t[0].url||o.src).toString().indexOf("rtsp:")?this.template=h.template(u):this.template=h.template(v),t=this.template({cfg:o,containerWidth:a(this.container).width(),containerHeight:a(this.container).height(),src:t}),t=a(t),this.container.append(t),this.video=t,this.video.on("error",function(t){console.error("video play",t)}),this.video.on("ended",function(){e.emit("video-ended")}),this.video.on("play",function(){e.emit("video-start")}),this.videoDom=t[0],this.videoDom.muted=this.config.isMuted,this.videoDom.volume=o.volume/100,this.updateStyle())},resize:function(t,i){this.updateLayout(t,i),this.video&&this.video.css({width:t,height:i})},data:function(t){return t&&(this._data=t),this._data},mergeConfig:function(t){return t&&(this.config.theme=h.defaultsDeep(t.theme||{},this.config.theme),this.config=h.defaultsDeep(t||{},this.config)),this.config},updateLayout:function(){},updateStyle:function(){},clear:function(){},videoPlay:function(){this.config.autoplay&&this.videoDom&&this.videoDom.play()},videoPause:function(){this.videoDom&&this.videoDom.pause()},videoStart:function(){this.videoDom&&this.videoDom.play()},videoEnded:function(){this.videoDom&&(this.videoDom.pause(),this.videoDom.currentTime=0)},destroy:function(){window&&window.$ms&&(window.$ms.off("visible",this.videoPlay),window.$ms.off("hide",this.videoPause)),this.video=null,this._data=null,this.container.empty()}}),t.exports});