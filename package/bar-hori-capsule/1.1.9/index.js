Cube('datav:/com/bar-hori-capsule/1.1.9',['datav:/npm/bcore/0.0.18/event','datav:/npm/jquery/2.1.4','datav:/npm/lodash/4.6.1','datav:/npm/d3/3.5.16','datav:/npm/dchart-bar-hori-stack-capsule/0.2.0','datav:/com/maliang-utils/0.0.4'],function(e,k,b,i,j,l){var f=b('datav:/npm/bcore/0.0.18/event'),g=b('datav:/npm/jquery/2.1.4'),a=b('datav:/npm/lodash/4.6.1'),h=b('datav:/npm/d3/3.5.16'),d=b('datav:/npm/dchart-bar-hori-stack-capsule/0.2.0'),c=b('datav:/com/maliang-utils/0.0.4');return e.exports=f.extend(function a(b,c){this.config={theme:{},chart:{withAnimated:!1,margin:{top:0,right:40,bottom:0,left:40},yaxis:{padding:[.7,.5],dx:0,dy:10},xaxis:{dx:0,dy:0,min:0,max:null},label:{show:!1,'font-size':10,color:'#fff',dy:-4,dx:10},series:[]},chartStyle:{hullPadding:4,percent:.15}},this.container=g(b),this.apis=null,this._data=null,this.chart=null,this.init(c)},{init:function(a){this.apis=a&&a.apis,this.mergeConfig(a),this.updateLayout(),this.chart=new d(this.container[0],this.config.chart)},isSafeNumber:function(b){return a.isNumber(b)&&!a.isNaN(b)&&a.isFinite(b)?b:null},render:function(b,e){var c=this.mergeConfig(e);if(b=a.cloneDeep(this.data(b)),!(b&&b.length))return;this.chart&&this.chart.destroy(),this.chart=new d(this.container[0],c.chart),b&&this.chart.render(b,c.chart),this.updateStyle()},resize:function(a,b){this.updateLayout(a,b),this.chart.render(null,{width:a,height:b}),this.updateStyle()},setColors:function(){},hasS:function(c){var b=0,d=this.config;return a.map(c,function(a){a.s!==undefined&&b++}),b===c.length?!0:b===0?!1:(console.log('data is error.'),!1)},data:function(b){return b&&(this.__data=a.cloneDeep(b)),this.hasS(this.__data)?this._data=c.threeD2Two(this.__data,'x','y','s',c.getSeriesValue(this.config.series,'value')):this._data=this.__data,this._data},mergeConfig:function(b){if(!b)return this.config;this.config.theme=a.defaultsDeep(b.theme||{},this.config.theme),this.setColors(),this.config=a.defaultsDeep(b||{},this.config),this.config.chart.yaxis.dy=this.config.chartStyle.textDistance,this.config.chart.margin.left=this.config.chartStyle.left,this.config.chart.hullPadding=this.config.chartStyle.hullPadding,this.config.chart.percent=this.config.chartStyle.percent,this.config.chart.color=this.config.chartStyle.color,this.config.chart.series=this.config.series,this.config.chart.capsule=parseInt(this.config.chartStyle.capsule);var c=this.config.chartStyle.xaxis.min!==null?a.toNumber(this.config.chartStyle.xaxis.min):null,d=this.config.chartStyle.xaxis.max!==null?a.toNumber(this.config.chartStyle.xaxis.max):null;return this.config.chart.xaxis.min=this.isSafeNumber(c),this.config.chart.xaxis.max=this.isSafeNumber(d),this.config.chartStyle.yaxis&&this.config.chartStyle.yaxis.innerPadding&&(this.config.chart.yaxis.padding[0]=this.config.chartStyle.yaxis.innerPadding/10),this.config.chartStyle.yaxis&&this.config.chartStyle.yaxis.outerPadding&&(this.config.chart.yaxis.padding[1]=this.config.chartStyle.yaxis.outerPadding/10),this.config},updateLayout:function(){},updateStyle:function(){var b=this.config;if(this.chart.svg){var a=this.chart.el;a.selectAll('.con-svg').style('background','none'),a.selectAll('.serie-single .serie').style('stroke','none'),a.selectAll('.serie-bg').style('stroke',b.chartStyle.borderColor),a.selectAll('#yaxis text').style('fill',b.chartStyle.textColor).style('font-size',b.chartStyle.textSize),a.selectAll('#xaxis').style('display','none')}},updateOptions:function(a){this.mergeConfig(a),this.render(null)}}),e.exports})