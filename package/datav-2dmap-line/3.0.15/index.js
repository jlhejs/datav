// env=undefined => env=publish 
Cube("datav:/com/datav-2dmap-line/3.0.15/config",[],function(o,e,r,t,i,a){return o.exports={DEFAULT_OPTIONS:{renderer:"canvas",visibility:!0,tolerance:3,smoothFactor:1,general:{zoomRange:[0,18],minZoom:0,maxZoom:22,opacity:1},graph:{},lineStyle:{lineType:"dataBind",strokeColor:"rgba(53,173,163,0.5)",stroke:{minColor:"rgba(5, 96, 125, 0.8)",maxColor:"rgba(0, 255, 240, 0.5)",strokeColor:"rgba(53,173,163,0.5)"},weight:3,dashArray:"",lineJoin:"round",lineCap:"round"},popupStyle:{isBorderShadow:!0,show:!0,infoField:!1,eventType:"click",styleType:"parent",textStyle:{fontFamily:"Microsoft Yahei",fontSize:12,color:"#FFFFFF",fontWeight:"normal"},lineHeight:1.4,borderRadius:5,margin:{top:10,bottom:10,left:10,right:10},backgroundColor:"rgba(22,138,214,0.73)",closeBtn:{color:"#fff",size:16,top:0,right:0}},interaction:{isHover:{show:!0,strokeColor:"#FEE619",weight:3,dashArray:""},clickZoom:{show:!0,zoomPad:1.5}}}},o.exports});;
Cube("datav:/com/datav-2dmap-line/3.0.15/src/lineLayer",["datav:/npm/safely-merge/1.0.1"],function(e,t,o,n,r,i){function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(t,e){var o,n=Object.keys(t);return Object.getOwnPropertySymbols&&(o=Object.getOwnPropertySymbols(t),e&&(o=o.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,o)),n}function l(n){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?a(Object(r),!0).forEach(function(e){var t,o;t=n,o=r[e=e],e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(r,e))})}return n}function u(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,o){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=d(e)););return e}(e,t);if(n)return(n=Object.getOwnPropertyDescriptor(n,t)).get?n.get.call(arguments.length<3?e:o):n.value}).apply(this,arguments)}function h(e,t){return(h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function f(o){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=d(o),t=(e=n?(e=d(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(e&&("object"===p(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var v=o("datav:/npm/safely-merge/1.0.1");return e.exports=function(e){var p=e.L,a=e.map,t=e.Utils,o=e.Layer,n=e.GeoJson,y=e.GuiUtils,g=t._,e=s,t=o;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t);var r,i=f(s);function s(e){var t;if(this instanceof s)return(t=i.call(this)).addTo(a),t.options=v({},e),t.options.general.minZoom=e.general.zoomRange[0],t.options.general.maxZoom=e.general.zoomRange[1],t.options.visibility=!0,t.init(),t;throw new TypeError("Cannot call a class as a function")}return e=s,(t=[{key:"init",value:function(){this.popups={},this.mappingData=[],this.geojsonLayer=new n({label:{isShow:!1},zIndex:0}),this.addLayer(this.geojsonLayer)}},{key:"render",value:function(e){for(var t=[],o=(e&&e.length&&(t=e),{type:"FeatureCollection",features:[]}),n=[],r=0;r<t.length;r++){var i,p=t[r];p.geometry&&(i={type:"Feature",properties:{},geometry:p.geometry},delete p.geometry,p.data_index=r+1,n.push(p),i.properties=p,o.features.push(i))}this.mappingData=n;e=this.getGeojsonStyle(this.mappingData);this.geojsonLayer.setOptions(e),this.geojsonLayer.setData(o),this.onRender(!0)}},{key:"getGeojsonStyle",value:function(e){var e=this.getMappingStyle(e),t=this.options,o=t.graph,t=t.interaction;return{graph:o,label:{isShow:!1},interaction:t,style:{stroke:!0,strokeColor:o.strokeColor,weight:o.weight,lineJoin:"round",lineCap:"round",dashArray:o.dashArray},mappingStyle:e,hoverStyle:{stroke:!0,strokeColor:t.isHover.strokeColor,weight:t.isHover.weight,lineJoin:"round",lineCap:"round",dashArray:t.isHover.dashArray}}}},{key:"getMappingStyle",value:function(e){for(var t,o,n=this.options.graph,r=e,i=y.validateCustomStyle,p=g.get(this.options,"condition.condition"),a=g.get(y,"scale.color")({config:g.get(this.options,"graph.colorMapping"),data:r,field:"value"}),s=g.get(y,"scale.size")({config:g.get(this.options,"graph.sizeMapping"),data:r,field:"sizeField"}),l={},u=0;u<r.length;u++){var c,h,f={};if((h=i({config:p,data:c=r[u],ruleKey:"rules"}))&&h.length){for(t=h.length-1;0<=t&&(o=h[t]).graph.show;t--)if(o.graph.weight.show){f.dashArray=o.graph.dashArray.value;break}for(t=h.length-1;0<=t&&(o=h[t]).graph.show;t--)if(o.graph.weight.show){f.weight=o.graph.weight.value;break}for(t=h.length-1;0<=t&&(o=h[t]).graph.show;t--)if(o.graph.strokeColor.show){f.strokeColor=o.graph.strokeColor.value;break}}f.hasOwnProperty("dashArray")||(f.dashArray=n.dashArray),f.hasOwnProperty("weight")||(f.weight=s(c.sizeField)),f.hasOwnProperty("strokeColor")||(f.strokeColor=a(c.colorField)),l[c.data_index]=f}return l}},{key:"updateOptions",value:function(e){this.options=v(this.options,e),this.options.general.minZoom=e.general.zoomRange[0],this.options.general.maxZoom=e.general.zoomRange[1],this.infoPopup&&(this.infoPopup&&!this.options.popupStyle.isShow&&this.infoPopup.remove(),p.customPopup.updatePopupStyle(this.infoPopup,this.convertToRootPopupStyle(this.options.popupStyle)));e=this.getGeojsonStyle(this.mappingData);this.geojsonLayer.setOptions(e),this.onRender()}},{key:"onClick",value:function(e){var t,o=this.options,n=o.interaction,o=o.popupStyle;n.graph.show&&n.graph.clickZoom.show&&(t=e.featureBounds,a.isMapMoving=n.clickZoom,n=n.clickZoom.zoomPad-1,t=[[t[0][0]-(t[1][0]-t[0][0])*n/2,t[0][1]-(t[1][1]-t[0][1])*n/2],[t[1][0]+(t[1][0]-t[0][0])*n/2,t[1][1]+(t[1][1]-t[0][1])*n/2]],a.fitBounds(t,{animate:!0,duration:3,easeLinearity:3,noMoveStart:!0})),o.isShow&&"click"===o.eventType&&this._openPopup(e)}},{key:"onMouseOver",value:function(e){var t=this.options.popupStyle;t.isShow&&"mouseover"===t.eventType&&this._openPopup(e)}},{key:"convertToRootPopupStyle",value:function(e){var t=e.domStyle,o=t.padding,n=t.border,r=t.boxShadow,i=t.backgroundColor,p=t.closeBtn,t=t.tipBtn,a=e.textStyle,e=e.offset;return{background:l({color:i},r),padding:o,border:n,closeBtn:p,tipBtn:t,textStyle:a,offset:e}}},{key:"_openPopup",value:function(e){var t=e.latlng,e=e.feature,o=e.properties,n=o.popupType,r=this.popups[n];if(n&&r){var n=this.options,i=n.general,n=n.popupStyle.offset,e={L:p,map:a,latlng:t,feature:e,offset:n,bindPopup:r,minZoom:i.minZoom,maxZoom:i.maxZoom};p.customPopup.openPopup(e)}else{n=this.convertToRootPopupStyle(this.options.popupStyle);if(!g.isEmpty(o.info))return r=p.popup({}).setLatLng(t).setContent(o.info).openOn(a),this.infoPopup=r,void p.customPopup.updatePopupStyle(r,n);if(this.options.popupStyle.isEmptyShow)return i=p.popup({}).setLatLng(t).setContent("无数据").openOn(a),this.infoPopup=i,void p.customPopup.updatePopupStyle(i,n);this.infoPopup&&this.infoPopup.remove()}this.infoPopup=null}},{key:"bindGroup",value:function(e,t,o){var n=+t.clientWidth,r=+t.clientHeight,i=(t.style.transform="",t.style.position="",t.style.display="none",p.popup({maxWidth:1200,maxHeight:1200,isCustomPopup:!0}));this.popups[e]={popup:i,container:t,clientWidth:n,clientHeight:r,popupStyle:o}}},{key:"draw",value:function(e){var t=this.options.general;e.globalAlpha=.01*t.opacity,this.container&&e.drawImage(this.container,0,0,this.container.width,this.container.height)}},{key:"show",value:function(){this.onRender(!0),this.options.visibility=!0}},{key:"hide",value:function(){c(d(s.prototype),"hide",this).call(this),this.options.visibility=!1}},{key:"destroy",value:function(){this.options=null,delete this.options}}])&&u(e.prototype,t),r&&u(e,r),Object.defineProperty(e,"prototype",{writable:!1}),s},e.exports});;
Cube("datav:/com/datav-2dmap-line/3.0.15",["datav:/npm/eventemitter3/3.0.0","datav:/npm/safely-merge/1.0.1"],function(e,t,r,o,n,i){function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function l(e,t){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function u(r){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=y(r),t=(e=o?(e=y(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(e&&("object"===a(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var c=r("datav:/npm/eventemitter3/3.0.0"),p=r("datav:/npm/safely-merge/1.0.1"),f=r("datav:/com/datav-2dmap-line/3.0.15/src/lineLayer"),h=r("datav:/com/datav-2dmap-line/3.0.15/config").DEFAULT_OPTIONS,r=function(){var e=n,t=c;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t);var r,o=u(n);function n(e,t){var r;if(this instanceof n)return r=o.call(this),t=t.options,r.options=p(h,t),r.options.general.minZoom=t.general.zoomRange[0],r.options.general.maxZoom=t.general.zoomRange[1],r.options.visibility=!0,r;throw new TypeError("Cannot call a class as a function")}return e=n,(t=[{key:"addTo",value:function(e,t){this.options.id=t;t=f(e);return this.layer=new t(this.options),this}},{key:"render",value:function(e){this.layer&&this.layer.render&&this.layer.render(e)}},{key:"resize",value:function(e,t){this.layer&&this.layer.resize&&this.layer.resize(e,t)}},{key:"updateOptions",value:function(e){e=e.options;this.options=p(h,e),this.options.general.minZoom=e.general.zoomRange[0],this.options.general.maxZoom=e.general.zoomRange[1],this.layer&&this.layer.updateOptions&&this.layer.updateOptions(this.options)}},{key:"onClick",value:function(e){var t=e.feature;this.emit("click",t.properties),this.layer&&this.layer.onClick&&this.layer.onClick(e)}},{key:"onMouseOver",value:function(e){var t=e.feature;t&&t.properties&&this.emit("mouseover",t.properties),this.layer&&this.layer.onMouseOver&&this.layer.onMouseOver(e)}},{key:"bindGroup",value:function(e){var t=e.popupType||"",r=e.container||"<div></div>",e=e.popupStyle||{};this.layer&&this.layer.bindGroup&&this.layer.bindGroup(t,r,e)}},{key:"draw",value:function(e){this.layer&&this.layer.draw&&this.layer.draw(e)}},{key:"show",value:function(){this.options.visibility=!0,this.layer&&this.layer.show&&this.layer.show()}},{key:"hide",value:function(){this.options.visibility=!1,this.layer&&this.layer.hide&&this.layer.hide()}},{key:"contains",value:function(e){var t=this.options.interaction,r=t.graph,t=t.popup;return!(!r.show&&!t.show)&&this.layer.contains(e)}},{key:"onRender",value:function(e){this.layer&&this.layer.onRender&&this.layer.onRender(e)}},{key:"destroy",value:function(){this.layer&&this.layer.destroy&&this.layer.destroy(),this.layer=null,delete this.layer}}])&&s(e.prototype,t),r&&s(e,r),Object.defineProperty(e,"prototype",{writable:!1}),n}();return e.exports=r,e.exports});