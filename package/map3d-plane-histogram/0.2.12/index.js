// env=undefined => env=publish 
Cube("datav:/com/map3d-plane-histogram/0.2.12",["datav:/npm/eventemitter3/3.0.0","datav:/npm/safely-merge/1.0.1","datav:/npm/dmap/0.2.9","datav:/npm/dmap/0.2.9/layer/histogram_box"],function(a,b,c){function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&("object"===typeof b||"function"===typeof b)?b:a}function f(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var g=function(){function a(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=c("datav:/npm/eventemitter3/3.0.0"),i=c("datav:/npm/safely-merge/1.0.1"),j=c("datav:/npm/dmap/0.2.9"),l=j.THREE,k=c("datav:/npm/dmap/0.2.9/layer/histogram_box");k.prototype.remove=function(){var a=this.cubes,b=this;for(var d in a){var e=a[d],c=e.cube;b.three3D.remove(c),c&&c.dispose&&c.dispose(),c instanceof l.Mesh&&(c.material&&c.material.dispose&&c.material.dispose(),c.geometry&&c.geometry.dispose&&c.geometry.dispose()),e.cube=null,e.data=null,e.id=null,e.value=null}};var m=function(a){function b(a,c){d(this,b);var f=e(this,(b.__proto__||Object.getPrototypeOf(b)).call(this)),g={maxHeight:3e6,size:3e4,ratio:1.01,opacity:0.9,color:"#E80B59",blending:l.AdditiveBlending,visibility:!0,lat:function(a){return a.lat||0},lng:function(a){return a.lng||0},value:function(a){return a.value||0},faceColor:function(a,b){var c=a.value||0,d=b[1],e=b[0],f=d===e?1:d-e,g=(c-e)/f;return new l.Color().setHSL(g,1-0.3*g,0.3+0.6*Math.pow(g,8))}};return f.options=i(g,c),f}return f(b,a),g(b,[{key:"addTo",value:function(a){a._map&&(a=a._map),this._map=a;var b=this.layer=new k(this.getLayerOptions());b.addTo(this._map)}},{key:"getLayerOptions",value:function(){var a=Object.assign({},this.options);return a.size*=1e3,a.maxHeight*=1e4,a}},{key:"updateOptions",value:function(a){a&&(a=this.options=i(this.options,a)),this.layer.updateOptions(this.getLayerOptions())}},{key:"render",value:function(a){return a?void(this.data=a,this.layer&&this.options.visibility&&this.layer.render(a)):console.log("map3d_scatter \u6CA1\u6570\u636E..")}},{key:"show",value:function(){this.options.visibility=!0,this.layer&&this.options.visibility&&this.data&&this.layer.render(this.data)}},{key:"hide",value:function(){this.options.visibility=!1,this.remove()}},{key:"remove",value:function(){this.layer&&this.layer.remove()}}]),b}(h);return a.exports=m,a.exports});