// env=undefined => env=publish 
Cube("datav:/com/ml-pie-comparison/3.0.12/defaultConfig",[],function(a){return a.exports={chart:{pie:{decorateColor:"rgba(255,240,240,0.2)"},numericalLabel:{textStyle:{fontFamily:"Microsoft Yahei",fontWeight:"normal",fontSize:12,color:"rgba(255,255,255,0.8)"},real:!1,decimal:2},legend:{show:!0,textarea:{fontFamily:"Microsoft Yahei",fontWeight:"normal",fontSize:10,color:"rgba(255,255,255,0.5)"},layout:{margin:{horiInterval:8,vertiInterval:0},loc:"bottom-center"}}},axis:{radiusAxis:{radius:0.8,grid:{show:!1,color:"rgba(170,170,170,0.5)"}},angleAxis:{offset:"auto"}},series:{series:[{color:{value:"rgba(0,186,255,0.5)",type:"flat"}},{color:{value:"rgba(61,231,201,0.5)",type:"flat"}}]},others:{animation:{show:!0,setting:{animationEasing:"cubicInOut",animationAfterPreviousSeries:!1,animationAllFromZero:!0},enter:{animationDuration:1000},update:{animationDurationUpdate:300,animationUpdateFromPrevious:!0}}}},a.exports});;
Cube("datav:/com/ml-pie-comparison/3.0.12/pie",["datav:/com/maliang-utils/0.0.22","datav:/npm/bcore/0.0.22/event","datav:/npm/dchart-core/2.6.39/pie/pie","datav:/npm/jquery/2.1.4","datav:/npm/lodash/4.17.11"],function(a,b,c){function d(a){return j.isNumber(a)&&!j.isNaN(a)&&j.isFinite(a)}function e(a,b,c,e){var g=j.cloneDeep(a),h=Math.min(c,e);g.width=c,g.height=e;var i=a.chart,k=a.axis,l=a.series,m=a.others;g.label={},g.xaxis=null,g.yaxis=null,g.arc={},g.paxis={},g.arc.radius=h*k.radiusAxis.radius/2-1,g.arc.net=k.radiusAxis.grid.show,g.arc.netColor=k.radiusAxis.grid.color,g.colors=j.map(l.series,"color");var n=b[0].y/j.sumBy(b,"y")*Math.PI||0,o=d(j.toNumber(k.angleAxis.offset))?2*Math.PI*j.toNumber(k.angleAxis.offset/360):null;g.arc.startAngle=function(a){return j.isNumber(o)?a.startAngle+o:a.startAngle-n},g.arc.endAngle=function(a){return j.isNumber(o)?a.endAngle+o:a.endAngle-n};var p=i.numericalLabel,q=i.categoryLabel,r=p.textStyle,s=q.textStyle;g.paxis.label=function(a){var c=j.sumBy(b,"y"),d=a.y,e="<tspan x=\"0\" dy=\"1em\" style=\"font-size: "+s.fontSize+"px; font-weight:"+s.fontWeight+"; fill: "+s.color+"\">"+a.x+"</tspan>";return"<tspan dy=\""+(q.show?-3:3)+"\" x=\"0\" style=\"font-size: "+r.fontSize+"px; font-weight:"+r.fontWeight+"; fill: "+r.color+"\">"+(p.real&&d||(c?(100*(d/c)).toFixed(p.decimal):0)+"%")+"</tspan>"+(q.show&&e||"")};var t=m.animation,u=t.enter,v=t.update,w=t.setting;return Object.assign(g,f({},u)),Object.assign(g,f({},v)),Object.assign(g,f({},w)),g.animation=m.animation.show,g}var f=Object.assign||function(a){for(var b,c=1;c<arguments.length;c++)for(var d in b=arguments[c],b)Object.prototype.hasOwnProperty.call(b,d)&&(a[d]=b[d]);return a},g=c("datav:/npm/bcore/0.0.22/event"),h=c("datav:/npm/dchart-core/2.6.39/pie/pie"),i=c("datav:/npm/jquery/2.1.4"),j=c("datav:/npm/lodash/4.17.11"),k=c("datav:/com/maliang-utils/0.0.22"),l=Math.PI;return a.exports=g.extend(function(a,b){this.config={theme:{},chart:{background:"transparent"},legend:{},series:[{value:"1",color:"#2F8FBE"}]},this.container=i(a),this._width=this.container.width(),this._height=this.container.height(),this.init(b)},{init:function(a){var b=this;this.apis=a.apis;var c=this.mergeConfig(a);this.chart=new h(this.container[0],c.chart);var d=b.config.chart.pie.decorateColor;this.chart.afterRender=function(){var a=this.options,b=this.svg.select(".bg-inner-circle")[0][0]?this.svg.select(".bg-inner-circle"):this.svg.append("circle").attr({class:"bg-inner-circle",r:6}),c=this.svg.select(".bg-outer-circle")[0][0]?this.svg.select(".bg-outer-circle"):this.svg.append("circle").attr({class:"bg-outer-circle"}).style({fill:"none","stroke-width":"2px"});b.attr({cx:a.innerWidth/2,cy:a.innerHeight/2}).style("fill",d),c.attr({cx:a.innerWidth/2,cy:a.innerHeight/2,r:a.arc._radius}).style({stroke:d})},this.chart.updateAfterRender=function(){this.afterRender.call(this)}},isSafeNumber:function(a){return j.isNumber(a)&&!j.isNaN(a)&&j.isFinite(a)?a:null},render:function(a,b){var c=this.mergeConfig(b);a=this.data(a),a&&a.length&&(a&&this.chart.render(a,e(c,a,this._width,c.height)),this.updateStyle())},updateStyle:function(){var a=this.config,b=this.chart.el,c=a.chart.pie.decorateColor;b&&(b.selectAll(".serie-bg").style("stroke","none"),b.select(".con-svg").style("background","transparent"),b.selectAll(".bg-inner-circle").style("fill",c),b.selectAll(".bg-outer-circle").style("stroke",c),b.selectAll(".series-pies .serie").style("stroke","none"))},setColors:function(){},hasS:function(a){var b=0;return j.map(a,function(a){void 0!==a.s&&b++}),b===a.length||0!==b&&!1},data:function(a){return a&&(this.__data=j.clone(a)),this._data=this.hasS(this.__data)?k.threeD2Two(this.__data,"x","y","s",k.getSeriesValue(this.config.series.series,"value")):j.clone(this.__data),this._data},mergeConfig:function(a){return a?(this.config.theme=j.defaultsDeep(a.theme||{},this.config.theme),this.setColors(),a.series&&(this.config.series=a.series),this.config=j.defaultsDeep(a||{},this.config),this.config):this.config},resize:function(a,b){this._width=a,this.config.height=b,this.render()},clear:function(){this.chart&&this.chart.empty()},destroy:function(){this.chart&&this.chart.destroy(),this._data=this.__data=null}}),a.exports});;
Cube("datav:/com/ml-pie-comparison/3.0.12",["datav:/com/legend/0.1.5","datav:/npm/bcore/0.0.22/event","datav:/npm/jquery/2.1.4","datav:/npm/lodash/4.17.11","datav:/npm/lodash/4.17.11/cloneDeep"],function(a,b,c){var d=c("datav:/npm/bcore/0.0.22/event"),e=c("datav:/npm/jquery/2.1.4"),f=c("datav:/npm/lodash/4.17.11"),g=c("datav:/npm/lodash/4.17.11/cloneDeep"),h=c("datav:/com/ml-pie-comparison/3.0.12/pie"),i=c("datav:/com/legend/0.1.5"),j=c("datav:/com/ml-pie-comparison/3.0.12/defaultConfig");return a.exports=d.extend(function(a,b){this.config=g(j),this.container=e(a).css("padding","10px 0"),this.chart=null,this.legend=null,this.init(b)},{init:function(a){var b=a&&a.options||a;this.apis=b.apis;var c=this.mergeConfig(b),d=c.chart.legend,g=d.layout.loc.split("-")[0];this.chartDom=e("<div class=\"dchart-pie-basic\" style=\"width: 100%;\"></div>"),this.legendDom=e("<div class=\"dchart-legend\" style=\"left: 0;width: 100%;\"></div>"),"bottom"===g?(this.container.append(this.chartDom),this.container.append(this.legendDom)):(this.container.append(this.legendDom),this.container.append(this.chartDom)),this.legend=new i(this.legendDom[0],d),this.chartDom.height(this.container.height()-(d.show&&this.legendDom.height()||0)),this.chart=new h(this.chartDom[0],f.cloneDeep(c)),this.legendDom.css("display",d.show&&"block"||"none")},render:function(a,b){var c=b&&b.options||b,d=this.mergeConfig(c);if(a=this.data(a),a&&a.length){f.map(d.series.series,function(b,c){b.showName=a[c]?a[c].x:null});var e=d.chart.legend;this.legend.render(d.series.series,e);var g=this.container.height()-(e.show&&this.legendDom.height()||0);this.chartDom.height(g),this.config.height=g,a&&this.chart.render(a,d),this._cfg=d}},updateStyle:function(){},setColors:function(){},data:function(a){return a&&(this._data=f.clone(a),this._data.length&&this._data.forEach(function(a){a.y=f.toNumber(a.y)})),this._data},mergeConfig:function(a){return a?(this.config.theme=f.defaultsDeep(a.theme||{},this.config.theme),this.setColors(),a.series&&(this.config.series=a.series),this.config=f.defaultsDeep(a||{},this.config),this.config):this.config},resize:function(a,b){this.chart.resize(a,b-(this.config.chart.legend.show&&this.legendDom.outerHeight()||0)-20)},updateLegendLayout:function(a){var b=this.config.chart.legend;if(b.show!==a.show&&(this.legendDom.css("display",a.show&&"block"||"none"),this.config.chart.height=this.container.height()-(a.show&&this.legendDom.height()||0)),b.textarea.fontSize!==a.textarea.fontSize&&(this.legendDom.find(".legend-item").css("fontSize",a.textarea.fontSize),this.config.chart.height=this.container.height()-(a.show&&this.legendDom.height()||0)),JSON.stringify(b.layout.margin)!==JSON.stringify(a.layout.margin)){var c=a.layout.margin;this.legendDom.find(".legend-item").css("margin",c.vertiInterval+"px "+c.horiInterval+"px"),this.config.chart.height=this.container.height()-(a.show&&this.legendDom.height()||0)}var d=b.layout.loc.split("-")[0],e=a.layout.loc.split("-")[0];d!==e&&("top"===e?this.container[0].appendChild(this.chartDom[0]):"bottom"===e&&this.container[0].appendChild(this.legendDom[0])),this.render(null,{chart:{legend:a}})},clear:function(){this.chart&&this.chart.clear(),this.legend&&f.isFunction(this.legend.clear)&&this.legend.clear()},destroy:function(){this.chart&&this.chart.destroy(),this.chart=null,this.legend&&this.legend.destroy(),this.legend=null,this.chartDom=null,this.legendDom=null,this.container&&this.container.empty(),this._data=null},startAnimate:function(){if(!(this.chart&&this.chart.chart))return!1;if(this._cfg){this.chart.chart.clearAllAnimation();var a=this._cfg.others.animation,b=a.update,c=a.enter,d=b.animationUpdateFromPrevious;b.animationUpdateFromPrevious=!1;var e=b.animationDurationUpdate;b.animationDurationUpdate=c.animationDuration,this.chart.render(),b.animationDurationUpdate=e,b.animationUpdateFromPrevious=d}},clearAnimate:function(){this.chart&&this.chart.chart&&this.chart.chart.resumeToAnimationEnd()}}),a.exports});