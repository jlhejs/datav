// env=undefined => env=publish 
Cube("datav:/com/datavmap-2d-layer-image/1.1.9/image",["datav:/npm/bcore/0.0.21/event"],function(a,b,c){function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&("object"===typeof b||"function"===typeof b)?b:a}function f(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var g=function(){function a(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=null;return a.exports=function(a){var b=a.datavUtils,i=c("datav:/npm/bcore/0.0.21/event"),j={bbox:{bboxlbX:-180,bboxlbY:-60,bboxrtX:180,bboxrtY:60},opacity:1,bgImageUrl:"https://img.alicdn.com/tps/TB1guWTPVXXXXXCaXXXXXXXXXXX-3840-2160.jpg"};return h||(h=function(c){function h(a){d(this,h);var c=e(this,(h.__proto__||Object.getPrototypeOf(h)).call(this));return a=b.mergeOptions(j,a),c.options=b.mergeOptions(c.options,a),c.visibility=!0,c}return f(h,c),g(h,[{key:"addTo",value:function(a){a&&(this.map=a)}},{key:"render",value:function(){this.draw()}},{key:"draw",value:function(){this.remove();var b=this.options,c=b.opacity,d=b.bbox,e=d.bboxlbX,f=d.bboxlbY,g=d.bboxrtX,h=d.bboxrtY,i=[[f<h?f:h,e<g?e:g],[h>f?h:f,g>e?g:e]],j=b.bgImageUrl;this.imageOverLayer=a.imageOverlay(j,i,{pane:"fillPane"}).addTo(this.map),this.imageOverLayer.setOpacity(c),this.imageOverLayer.bringToBack()}},{key:"updateOptions",value:function(a){a&&(this.options=b.mergeOptions(this.options,a)),this.visibility&&this.render()}},{key:"show",value:function(){this.visibility=!0,this.draw()}},{key:"hide",value:function(){this.visibility=!1,this.remove()}},{key:"remove",value:function(){this.imageOverLayer&&this.map.removeLayer(this.imageOverLayer)}}]),h}(i))},a.exports});;
Cube("datav:/com/datavmap-2d-layer-image/1.1.9",["datav:/npm/bcore/0.0.21/event"],function(a,b,c){function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&("object"===typeof b||"function"===typeof b)?b:a}function f(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var g=function(){function a(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=c("datav:/npm/bcore/0.0.21/event"),i=c("datav:/com/datavmap-2d-layer-image/1.1.9/image"),j=null,k=function(a){function b(a,c){d(this,b);var f=e(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return f.container="string"===typeof a?document.querySelector(a):a,f.apis=c.apis,f.options=c,f.options.visibility=!1,f.map=null,f}return f(b,a),g(b,[{key:"addTo",value:function(a){this._map=a,j=a.L.datavUtils,this._updateCRS(),this.initCom()}},{key:"initCom",value:function(){var a=this._map,b=this.options=this.getOptions(),c=new i(a.L),d=this.layer=new c(b);d.addTo(a),d.updateOptions(b)}},{key:"updateOptions",value:function(a){this.options=j.mergeOptions(this.options,a);var b=this.getOptions();this.layer&this.layer.updateOptions(b),this.options.visibility?this.show():this.hide()}},{key:"_updateCRS",value:function(){var a,b=this.options,c=b.CRSType,d=this._map;"EPSG3857"===c?a="EPSG3857":"Simple"===c?a="Simple":void 0,d.options.crs=d.L.CRS[a],d.setView(d.getCenter(),d.getZoom())}},{key:"_defaultCRS",value:function(){var a=this._map;a.options.crs=a.L.CRS.EPSG3857}},{key:"getOptions",value:function(){var a=this.options,b=a.CRSType;return this._updateCRS(),a.bbox||(a.bbox={}),("EPSG3857"===b?a.bbox=a.options3857:"Simple"===b?a.bbox=a.optionsSimple:void 0,a)}},{key:"render",value:function(a){a&&a[0]&&a[0].url&&(this.options.bgImageUrl=a[0].url),this.updateOptions()}},{key:"show",value:function(){this.options.visibility=!0,this.layer&&this.layer.show&&this.layer.show()}},{key:"hide",value:function(){this.options.visibility=!1,this.layer&&this.layer.hide&&this.layer.hide()}},{key:"remove",value:function(){this._defaultCRS(),this.layer&&this.layer.remove&&this.layer.remove()}}]),b}(h);return a.exports=k,a.exports});