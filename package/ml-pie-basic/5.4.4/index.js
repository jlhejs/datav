// env=undefined => env=publish 
Cube("datav:/com/ml-pie-basic/5.4.4/customRuleStyle",["datav:/npm/lodash/4.17.11/get","datav:/npm/lodash/4.17.11/set","datav:/npm/alibabacloud-datav-tool-gui-utils/1.0.0"],function(t,e,o,r,l,a){function i(e,t){var o,r=Object.keys(e);return Object.getOwnPropertySymbols&&(o=Object.getOwnPropertySymbols(e),t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,o)),r}function s(r){for(var t=1;t<arguments.length;t++){var l=null!=arguments[t]?arguments[t]:{};t%2?i(Object(l),!0).forEach(function(t){var e,o;e=r,o=l[t=t],t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(l)):i(Object(l)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(l,t))})}return r}var u=o("datav:/npm/lodash/4.17.11/get"),d=o("datav:/npm/lodash/4.17.11/set"),p=o("datav:/com/ml-pie-basic/5.4.4/utils").transformGradientColor,n=o("datav:/npm/alibabacloud-datav-tool-gui-utils/1.0.0"),f=n.scale,b=n.validateCustomStyle,v=o("datav:/com/ml-pie-basic/5.4.4/utils").transLineDash,g="colorField",m=["fill"];return t.exports=function(){var t,o,r,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},l=e.props,a=e.guiConfig,e=e.data,a=(void 0===a?{}:a).options,i=a.chart,n=i.fill,i=i.line,c=a.condition.customStyle,a=a.legend.isShow;c=(l={props:void 0===l?{}:l,customStyle:c,fill:n,line:i,data:e,show:a}).props,t=l.customStyle,n=l.fill,o=l.line,i=l.data,l.show,l=u(f,"color.g2plot"),d(c,"colorField",g),r=l({config:n,data:i,field:g}),d(c,"color",r),d(c,"pieStyle",function(){var e={fill:r(arguments.length<=0?void 0:arguments[0]),lineDash:v(o),lineWidth:o.lineWidth,stroke:o.lineColor};return b({config:t,data:arguments.length<=0?void 0:arguments[0],ruleKey:"rules"}).forEach(function(o){var t=m.reduce(function(t,e){return o[e]&&o[e].show&&(t[e]=o[e]&&o[e].value),s(s({},t),p(t.fill))},{});Object.assign(e,t)}),e})},t.exports});;
Cube("datav:/com/ml-pie-basic/5.4.4/utils",["datav:/npm/lodash/4.17.11/toNumber","datav:/npm/lodash/4.17.11/map","datav:/npm/lodash/4.17.11/isUndefined","datav:/npm/lodash/4.17.11/forEach","datav:/npm/lodash/4.17.11/trim","datav:/npm/lodash/4.17.11/isNull","datav:/npm/lodash/4.17.11/isNumber","datav:/npm/lodash/4.17.11/isNaN","datav:/npm/lodash/4.17.11/unionBy","datav:/npm/d3-format/3.1.0"],function(a,t,n,o,L,e){function i(a){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(a)}function l(a){var t=a.x,n=a.y,o=a.r,a=a.type,L=o/2*Math.sqrt(3),e=o*Math.sin(1/3*Math.PI);return{line:[["M",t-3*o,n],["L",t+3*o,n]],lineEllipsis:[["M",t-3*o,n],["L",t-2*o,n],["M",t-o,n],["L",t,n],["M",t+o,n],["L",t+2*o,n],["M",t+3*o,n],["L",t+4*o,n]],smooth:[["M",t-o,n],["A",o/2,o/2,0,1,1,t,n],["A",o/2,o/2,0,1,0,t+o,n]],smoothEllipsis:[["M",150,100],["C",150,72.4,72.4,50,100,50]],step:[["M",t-o-1,n-2.5],["L",t,n-2.5],["L",t,n+2.5],["L",t+o+1,n+2.5]],stepEllipsis:[["M",t-o-1,n-2.5],["L",t-o+3,n-2.5],["M",t-o/2+2,n-2.5],["L",t,n-2.5],["L",t,n+2.5],["L",t+4,n+2.5],["M",t+o/2+3,n+2.5],["L",t+o+1,n+2.5]],circle:[["M",t,n+o],["A",o,o,0,0,0,t+o,n],["M",t,n+o],["A",o,o,0,1,1,t+o,n]],circleLine:[["M",t-3*o,n],["L",t-o,n],["M",t+o,n],["L",t+3*o,n],["M",t,n+o],["A",o,o,0,0,0,t+o,n],["M",t,n+o],["A",o,o,0,1,1,t+o,n]],circleEllipsis:[["M",t-3*o,n],["L",t-2*o,n],["M",t-o-o/2,n],["L",t-o-2,n],["M",t+o+2,n],["L",t+o+o/2,n],["M",t+3*o,n],["L",t+2*o,n],["M",t,n+o],["A",o,o,0,0,0,t+o,n],["M",t,n+o],["A",o,o,0,1,1,t+o,n]],square:[["M",t-o,n-o],["L",t+o,n-o],["L",t+o,n+o],["L",t-o,n+o],["Z"]],squareLine:[["M",t-3*o,n],["L",t-o,n],["M",t+o,n],["L",t+3*o,n],["M",t-o,n-o],["L",t+o,n-o],["L",t+o,n+o],["L",t-o,n+o],["Z"]],squareEllipsis:[["M",t-3*o,n],["L",t-2*o,n],["M",t-o-o/2,n],["L",t-o-2,n],["M",t+o+2,n],["L",t+o+o/2,n],["M",t+3*o,n],["L",t+2*o,n],["M",t-o,n-o],["L",t+o,n-o],["L",t+o,n+o],["L",t-o,n+o],["Z"]],hexagon:[["M",t,n-o-2],["L",t+L+1,n-o/2-1],["L",t+L+1,n+o/2+1],["L",t,n+o+1+1],["L",t-L-1,n+o/2+1],["L",t-L-1,n-o/2-1],["Z"]],hexagonLine:[["M",t-3*o,n],["L",t-o-(o<=3?1:0),n],["M",t+o+(o<=3?1:0),n],["L",t+3*o,n],["M",t,n-o-2],["L",t+L+1,n-o/2-1],["L",t+L+1,n+o/2+1],["L",t,n+o+1+1],["L",t-L-1,n+o/2+1],["L",t-L-1,n-o/2-1],["Z"]],hexagonEllipsis:[["M",t-3*o,n],["L",t-2*o,n],["M",t-o-o/2,n],["L",t-o-1,n],["M",t+o+1,n],["L",t+o+o/2,n],["M",t+3*o,n],["L",t+2*o,n],["M",t,n-o-2],["L",t+L+1,n-o/2-1],["L",t+L+1,n+o/2+1],["L",t,n+o+1+1],["L",t-L-1,n+o/2+1],["L",t-L-1,n-o/2-1],["Z"]],diamond:[["M",t-o-2,n],["L",t,n-o-2],["L",t+o+2,n],["L",t,n+o+2],["Z"]],diamondLine:[["M",t-3*o,n],["L",t-o-1,n],["M",t+o+1,n],["L",t+3*o,n],["M",t-o-2,n],["L",t,n-o-2],["L",t+o+2,n],["L",t,n+o+2],["Z"]],diamondEllipsis:[["M",t-3*o,n],["L",t-2*o,n],["M",t-o-o/2,n],["L",t-o-2,n],["M",t+o+2,n],["L",t+o+o/2,n],["M",t+3*o,n],["L",t+2*o,n],["M",t-o-2,n],["L",t,n-o-2],["L",t+o+2,n],["L",t,n+o+2],["Z"]],triangle:[["M",t-o,n+e],["L",t,n-e],["L",t+o,n+e],["z"]],triangleLine:[["M",t-3*o,n],["L",t-o+o/2,n],["M",t+o-o/2,n],["L",t+3*o,n],["M",t-o,n+e],["L",t,n-e],["L",t+o,n+e],["z"]],triangleEllipsis:[["M",t-3*o,n],["L",t-2*o,n],["M",t-o-o/2,n],["L",t-o/2,n],["M",t+o/2,n],["L",t+o+o/2,n],["M",t+3*o,n],["L",t+2*o,n],["M",t-o,n+e],["L",t,n-e],["L",t+o,n+e],["z"]],"triangle-down":[["M",t-o,n-e],["L",t+o,n-e],["L",t,n+e],["Z"]],triangleDownLine:[["M",t-3*o,n],["L",t-o+o/2,n],["M",t+o-o/2,n],["L",t+3*o,n],["M",t-o,n-e],["L",t+o,n-e],["L",t,n+e],["Z"]],triangleDownEllipsis:[["M",t-3*o,n],["L",t-2*o,n],["M",t-o-o/2,n],["L",t-o/2,n],["M",t+o/2,n],["L",t+o+o/2,n],["M",t+3*o,n],["L",t+2*o,n],["M",t-o,n-e],["L",t+o,n-e],["L",t,n+e],["Z"]],bowtie:[["M",t-o,n-e],["L",t+o,n+e],["L",t+o,n-e],["L",t-o,n+e],["Z"]],bowtieLine:[["M",t-3*o,n],["L",t-o,n],["M",t+o,n],["L",t+3*o,n],["M",t-o,n-e],["L",t+o,n+e],["L",t+o,n-e],["L",t-o,n+e],["Z"]],bowtieEllipsis:[["M",t-3*o,n],["L",t-2*o,n],["M",t-o-o/2,n],["L",t-o-2,n],["M",t+o+2,n],["L",t+o+o/2,n],["M",t+3*o,n],["L",t+2*o,n],["M",t-o,n-e],["L",t+o,n+e],["L",t+o,n-e],["L",t-o,n+e],["Z"]]}[a]}var r=n("datav:/npm/lodash/4.17.11/toNumber"),s=n("datav:/npm/lodash/4.17.11/map"),M=n("datav:/npm/lodash/4.17.11/isUndefined"),d=n("datav:/npm/lodash/4.17.11/forEach"),p=n("datav:/npm/lodash/4.17.11/trim"),m=n("datav:/npm/lodash/4.17.11/isNull"),c=n("datav:/npm/lodash/4.17.11/isNumber"),f=n("datav:/npm/lodash/4.17.11/isNaN"),u=(n("datav:/npm/lodash/4.17.11/unionBy"),"linear"),h=n("datav:/npm/d3-format/3.1.0").format;return a.exports={transLineDash:function(a){var t=a.lineStyle,n=a.dashedLength,o=a.dashedSpace,L=a.dottedLength,a=a.dottedSpace,e=[];return"solid"===t?e=[1,0]:"dashed"===t?e=[n,o]:"dotted"===t&&(e=[L,a]),e},transformGradientColor:function(a){var t,n,o;return"object"===i(a)?(n=a.type,t=a.value,"flat"===n?{fill:t}:(t=(n=a.value).angle,n=n.stops,o="",s(n,function(a){var t=a.offset,a=a.color;o+="".concat(t/100,":").concat(a," ")}),{fill:"l(".concat(t,") ").concat(p(o))})):{fill:a}},pathDFn:function(){var a=l(arguments.length<=0?void 0:arguments[0]),t="";return d(a,function(a){d(a,function(a){c(a)?t+=a+",":t+=a}),t+=" "}),t},transformSVGGradientColor:function(a){var t="",a=get(a,"fixed.value"),n=a.angle,a=a.stops,o="grad"+ +new Date,t="<defs><linearGradient id='".concat(o,"' gradientTransform='rotate(").concat(n,")'>");return s(a,function(a){t+='<stop offset="'.concat(a.offset,'" stop-color="').concat(a.color,'"/>')}),{gradientHtml:t+="</linearGradient></defs>",id:o}},transNumberFormatterTooltip:function(a){var t=a.v,n=a.type,o=a.format,L=a.prefix,a=a.suffix;return n===u&&"null"!==o?L+h(o)(t)+a:n===u&&"null"===o?L+r(t)+a:n===TIME_TYPE&&"null"!==o?L+moment(t).format(o)+a:L+t+a},isValid:function(a){return!M(a)&&!m(a)&&!f(a)}},a.exports});;
Cube("datav:/com/ml-pie-basic/5.4.4/transform",["datav:/npm/lodash/4.17.11/get","datav:/npm/lodash/4.17.11/map","datav:/npm/lodash/4.17.11/uniqBy","datav:/npm/lodash/4.17.11/isUndefined","datav:/npm/lodash/4.17.11/floor","datav:/npm/lodash/4.17.11/minBy","datav:/npm/lodash/4.17.11/maxBy","datav:/npm/lodash/4.17.11/ceil","datav:/npm/lodash/4.17.11/round","datav:/npm/lodash/4.17.11/filter","datav:/npm/@antv/g2plot/2.4.20/dist/g2plot.min.js"],function(t,e,n,i,o,a){function l(e,t){var n,i=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)),i}function Ot(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach(function(t){jt(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function jt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Rt=n("datav:/npm/lodash/4.17.11/get"),Mt=n("datav:/npm/lodash/4.17.11/map"),Pt=n("datav:/npm/lodash/4.17.11/uniqBy"),Tt=n("datav:/npm/lodash/4.17.11/isUndefined"),Bt=n("datav:/npm/lodash/4.17.11/floor"),Dt=n("datav:/npm/lodash/4.17.11/minBy"),Xt=n("datav:/npm/lodash/4.17.11/maxBy"),Yt=n("datav:/npm/lodash/4.17.11/ceil"),Nt=n("datav:/npm/lodash/4.17.11/round"),Ht=n("datav:/npm/lodash/4.17.11/filter"),Lt=n("datav:/npm/@antv/g2plot/2.4.20/dist/g2plot.min.js").measureTextWidth,Gt=n("datav:/com/ml-pie-basic/5.4.4/customRuleStyle"),n=n("datav:/com/ml-pie-basic/5.4.4/utils"),It=n.transLineDash,qt=n.transformGradientColor,Et=n.pathDFn,Ut=n.transformSVGGradientColor,Vt=n.transNumberFormatterTooltip;return t.exports={transOptionKey:function(X,Y,t){function N(t,e,n){var i=(n=Lt(e,n)).width,n=n.height,o=1,i=(t<i&&(o=Math.min(Math.sqrt(Math.abs(Math.pow(t/2,2)/(Math.pow(i/2,2)+Math.pow(n,2)))),1)),"width:".concat(t,"px;"));return'<div style="'.concat(i,";font-size:").concat(o,"em;line-height:").concat(o<1?1:"inherit",';">').concat(e,"</div>")}var e=Y.options,n=e.chart,i=n.margin,H=n.radius,o=n.radiusGroup,a=n.statistic,l=a.show,L=a.centerType,G=a.title,I=a.statisticFormat,r=a.statisticDesc,q=r.statPrefix,E=r.statSuffix,r=a.titleOffset,U=a.contentOffset,V=a.staTitleTextStyle,A=a.staContentTextStyle,K=a.imageSrc,c=a.imageStyle,a=a.imageOffset,m=n.fill,s=n.label,J=s.show,p=s.textStyle,d=s.stroke,f=s.spiderStyle,Q=s.labelContent,Z=s.valueFormat,h=s.describe,s=s.labelForm,$=s.labelContentShow,s=s.position,n=n.pattern,_=n.show,g=n.type,tt=n.patternFill,et=n.lineFill,u=n.patternStroke,nt=n.dotCfg,n=n.lineCfg,y=e.legend,it=y.isShow,v=y.layout,x=y.textStyle,b=y.cateLegend,ot=b.marker,w=b.markerSpace,at=b.maxItemWidth,b=b.flip,lt=b.show,S=b.textStyle,k=b.pageMarker,F=b.flipColor,rt=b.inactiveFill,ct=b.flipTextColor,b=b.maxRow,y=y.continuousLegend,C=y.handler,W=y.track,y=y.label,z=e.animation,st=z.isShow,O=z.animationEasing,z=z.duration,e=e.tooltip,pt=e.statisticActive,j=e.tooltipSet,dt=j.show,ft=j.position,R=j.titleTextStyle,M=j.contentTextStyle,mt=j.trigger,ht=j.titleSpace,gt=j.contentSpace,ut=j.suffix,P=j.axisPointer,yt=P.show,P=P.line,T=j.bgBox,vt=T.padding,xt=T.backgroundColor,T=T.border,B=j.series,j=e.active,e=j.show,bt=j.fillSet,wt=bt.show,bt=bt.fill,St=j.line,D=j.trigger,j=j.selectType,i=i.show?{padding:[i.top,i.right,i.bottom,i.left]}:{padding:"auto"},kt=f.show?{labelLine:{style:{lineWidth:f.lineWidth}}}:{labelLine:null},J=J?{label:Ot(Ot({type:s,offset:f.lineHeight,style:Ot(Ot({fill:p.color},p),{},{stroke:d.strokeColor,lineWidth:d.lineWidth})},kt),{},{content:function(t){var e;return"init"===$?(e=Rt(t,Q),"value"===Q?Vt({v:e,type:"linear",format:Z,prefix:h.prefix,suffix:h.suffix}):h.prefix+e+h.suffix):(e=t.percent,h.prefix+"".concat((100*e).toFixed(0),"%")+h.suffix)},animate:st&&{appear:{animation:"scale-in-x"===O||"scale-in-y"===O?"zoom-in":O,duration:z},update:{duration:z}}})}:{label:!1},s="top-left"===v||"top"===v||"top-right"===v||"bottom-left"===v||"bottom"===v||"bottom-right"===v?y.alignHorizon:y.alignVerizon,f=at.show?{maxItemWidth:at.width}:{maxItemWidth:null},p=w.openselfSpacing?{itemSpacing:w.itemSpacing}:null,d=w.openselfSpacing?{itemMarginBottom:w.itemMarginBottom}:null,kt=it?{legend:Ot(Ot(Ot({},p),d),{},{position:v,flipPage:lt,maxRow:b,pageNavigator:{marker:{style:{size:k.pageSize,fill:k.flipColor||F,inactiveFill:k.inactiveFill||rt}},text:{style:{fontSize:S.fontSize,fill:S.color||ct,fontWeight:S.fontWeight,fontFamily:S.fontFamily}}},itemHeight:16,marker:{style:{r:ot.size},spacing:Tt(w.openselfSpacing)||w.openselfSpacing?w.spacing:4,symbol:ot.shape},itemName:{style:{fill:x.color,fontFamily:x.fontFamily,fontSize:x.fontSize,fontWeight:x.fontWeight,border:0}},handler:{size:C.size,style:{fill:C.fill}},min:"auto"===C.min?Bt(Rt(Dt(t,"colorField"),"colorField"),2):parseInt(C.min),max:"auto"===C.max?Yt(Rt(Xt(t,"colorField"),"colorField"),2):parseInt(C.max),rail:{type:W.type,size:W.height,defaultLength:W.width,style:{fill:W.railColor}},label:{align:s,spacing:y.spacing,style:{fill:x.color,fontFamily:x.fontFamily,fontSize:x.fontSize,fontWeight:x.fontWeight,border:0}},slidable:!0,radio:{style:{fill:"rgba(0,0,0,0)",stroke:x.color}}},f)}:{legend:!1},at=yt?{showCrosshairs:!0,crosshairs:{type:"xy",line:{style:{lineDash:It(P),lineWidth:P.lineWidth,stroke:P.lineColor}}}}:{showCrosshairs:!1},Ft=[],p=(Mt(B,function(t){return Ft.push(t.columnName)}),Rt(m,"scale.type")),Ct=Et({x:9,y:9,r:5,type:it&&"ordinal"===p?ot.shape:"circle"}),Wt=Rt(Y,"options.tooltip.tooltipSet.mode"),d=dt?{tooltip:Ot(Ot({showTitle:!0,title:"type",fields:"simple"===Wt?null:Ft,showMarkers:!1,customContent:function(t,p){var e=Pt(p,"data").length,d=Nt(p.length/e),f="",e=Rt(p,["0","data","type"],"标题");return Mt(p,function(e,t){var n,i=e.name,o=(e.value,e.color),a=e.data,l="",r=gt,c=(Mt(B,function(t){var e=t.columnName,t=t.displayName;i===e&&(l=t||e)}),t===p.length-1&&(r=0),""),s=Rt(m,"fixed").type;Rt(m,"mapping")||"linearGradient"!==s||(n=(s=Ut(m)).gradientHtml,s=s.id,o="url(#".concat(s,")"),c=n),"simple"===Wt?(s=Rt(a,"type"),n=Rt(a,"value"),f+='\n                  <div\n                    style="\n                      display: flex;\n                      justify-content: left;\n                      align-items: center;\n                      font-size: '.concat(M.fontSize,"px;\n                      line-height: ").concat(M.fontSize,"px;\n                      color: ").concat(M.color,";\n                      font-weight: ").concat(M.fontWeight,";\n                      font-family: ").concat(M.fontFamily,';\n                    "\n                    >\n                    <div style="width: 18px;height: 18px; margin-right: 6px; overflow: hidden;">\n                      <svg>\n                        ').concat(c,'\n                        <path\n                          d="').concat(Ct,'"\n                          stroke="').concat(o,'"\n                          stroke-opacity="1"\n                          opacity="1"\n                          fill="').concat(o,'"\n                        ></path>\n                      </svg>\n                    </div>\n                    <span style="\n                      display: inline-block;\n                      vertical-align: middle;\n                    ">').concat(s,"： ").concat(n).concat(ut,"</span>\n                  </div>\n                ")):B&&0<B.length&&(a=Ht(B,function(t){return t.columnName===e.name}),s=Rt(a,[0,"suffix"]),f+='\n                    <div\n                      style="\n                        display: flex;\n                        justify-content: left;\n                        align-items: center;\n                        margin-bottom: '.concat(r,"px;\n                        font-size: ").concat(M.fontSize,"px;\n                        line-height: ").concat(M.fontSize,"px;\n                        color: ").concat(M.color,";\n                        font-weight: ").concat(M.fontWeight,";\n                        font-family: ").concat(M.fontFamily,';\n                      "\n                      >\n                      <div style="opacity: ').concat(t%d==0?1:0,';width: 18px;height: 18px; margin-right: 6px; overflow: hidden;">\n                        <svg>\n                          ').concat(c,'\n                          <path\n                            d="').concat(Ct,'"\n                            stroke="').concat(o,'"\n                            stroke-opacity="1"\n                            opacity="1"\n                            fill="').concat(o,'"\n                          ></path>\n                        </svg>\n                      </div>\n                      <span style="\n                        display: inline-block;\n                        vertical-align: middle;\n                      ">').concat(l,"： ").concat(Rt(e,"data.".concat(i))).concat(s,"</span>\n                    </div>\n                  "))}),'\n                <div\n                  style="\n                    display: '.concat("simple"===Wt?"none":"block",";\n                    font-size: ").concat(R.fontSize,"px;\n                    line-height: ").concat(R.fontSize,"px;\n                    color: ").concat(R.color,";\n                    font-weight: ").concat(R.fontWeight,";\n                    font-family: ").concat(R.fontFamily,";\n                    margin-bottom: ").concat(ht,'px;\n                  "\n                >').concat(e,"</div>\n                ").concat(f,"\n            ")},position:ft},at),{},{domStyles:{"g2-tooltip":{backgroundColor:xt,border:"".concat(T.borderWidth,"px ").concat(T.borderStyle," ").concat(T.borderColor),padding:"".concat(vt.paddingY,"px ").concat(vt.paddingX,"px"),borderRadius:"".concat(T.borderRadius,"px"),boxShadow:"none"}}})}:{tooltip:!1},v=st?{animation:{appear:{animation:O,duration:z},update:{duration:z}}}:{animation:!1},lt=wt?qt(bt):null,b=jt({},"click"===D?"selected":"active",!!e&&{style:Ot({lineWidth:St.lineWidth,lineDash:It(St),stroke:St.lineColor},lt)}),F="multi"===j,k=!Tt(o)&&0!==o.innerRadius&&l&&"text"===L?{statistic:{title:{offsetX:r.offsetX,offsetY:r.offsetY,style:Ot({},V),customHtml:function(t,e,n){var t=t.getBoundingClientRect(),i=t.width,t=t.height,i=Math.sqrt(Math.pow(i/2,2)+Math.pow(t/2,2)),t=n?n.type:G;return N(i,t,Ot({},V))}},content:{offsetX:U.offsetX,offsetY:U.offsetY,style:Ot({},A),customHtml:function(t,e,n,i){t=t.getBoundingClientRect().width,n=n?n.value:i.reduce(function(t,e){return t+e.value},0),i=Vt({v:n,type:"linear",format:I,prefix:q,suffix:E});return N(t,i,Ot({},A))}}}}:{statistic:null},rt=!Tt(o)&&0!==o.innerRadius&&l&&"image"===L?{annotations:[{type:"html",html:'<div>\n        <img\n        style="width:'.concat(c.width,"px;\n        height:").concat(c.height,"px;\n        opacity:").concat(c.opacity,";\n        border-radius:").concat(c.borderRadius,'px;\n        position:absolute;\n        left:50%;\n        top:50%;\n        transform:translate(-50%,-50%)"\n        src=').concat(K,">\n        </div>"),position:["".concat(a.positionX,"%"),"".concat(a.positionY,"%")],offsetX:a.offsetX,offsetY:a.offsetY}]}:{annotations:null},ct=Tt(o)?{radius:H/100}:{radius:o.outerRadius/100,innerRadius:o.innerRadius/100},zt=_?"line"===g?n:nt:null,S=_?{pattern:function(t,e){t.type;return{type:g,cfg:Ot({backgroundColor:e,fill:tt.fill,fillOpacity:1,strokeOpacity:1,stroke:"line"===g?et.stroke:u.show?u.stroke:"rgba(255,255,255,0)",lineWidth:"line"===g?et.lineWidth:u.show?u.lineWidth:0},zt)}}}:{},w=Ot(Ot(Ot(Ot(Ot(Ot(Ot(Ot(Ot({data:Mt(t,function(t){return Ot(Ot({},t),{},{type:String(t.type)})}),angleField:"value",autoFit:!0},i),ct),{},{supportCSSTransform:!0,rawFields:["type","value","colorField"]},J),kt),d),S),{},{state:Ot({default:{style:{lineWidth:2,fillOpacity:1,stroke:"yellow",fill:"green"}}},b),interactions:[{type:"element-selected",enable:"click"===D&&F},{type:"element-single-selected",enable:"click"===D&&!F},{type:"element-active",enable:"hover"===D&&F},{type:"element-single-active",enable:"hover"===D&&!F},{type:"tooltip",cfg:{start:[{trigger:"element:".concat(mt),action:"tooltip:show"}]}},!Tt(o)&&0!==o.innerRadius&&pt&&l&&"text"===L&&{type:"pie-statistic-active"}]},v),k),rt);return Gt({props:w,guiConfig:X,data:t}),w}},t.exports});;
Cube("datav:/com/ml-pie-basic/5.4.4",["datav:/npm/bcore/0.0.22/event","datav:/npm/lodash/4.17.11/get","datav:/npm/lodash/4.17.11/set","datav:/npm/lodash/4.17.11/cloneDeep","datav:/npm/lodash/4.17.11/filter","datav:/npm/lodash/4.17.11/every","datav:/npm/lodash/4.17.11/includes","datav:/npm/lodash/4.17.11/some","datav:/npm/lodash/4.17.11/map","datav:/npm/lodash/4.17.11/isArray","datav:/npm/lodash/4.17.11/defaultsDeep","datav:/npm/lodash/4.17.11/floor","datav:/npm/lodash/4.17.11/isUndefined","datav:/npm/lodash/4.17.11/isEmpty","datav:/npm/lodash/4.17.11/isEqual","datav:/npm/lodash/4.17.11/toNumber","datav:/npm/lodash/4.17.11/orderBy","datav:/npm/lodash/4.17.11/chunk","datav:/npm/@antv/g2plot/2.4.20/dist/g2plot.min.js"],function(t,e,i,o,n,a){function l(e,t){var i,o=Object.keys(e);return Object.getOwnPropertySymbols&&(i=Object.getOwnPropertySymbols(e),t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),o.push.apply(o,i)),o}function m(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?l(Object(i),!0).forEach(function(t){v(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):l(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}function v(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var s=i("datav:/npm/bcore/0.0.22/event"),y=i("datav:/npm/lodash/4.17.11/get"),r=i("datav:/npm/lodash/4.17.11/set"),c=i("datav:/npm/lodash/4.17.11/cloneDeep"),h=i("datav:/npm/lodash/4.17.11/filter"),p=i("datav:/npm/lodash/4.17.11/every"),d=i("datav:/npm/lodash/4.17.11/includes"),f=i("datav:/npm/lodash/4.17.11/some"),u=i("datav:/npm/lodash/4.17.11/map"),g=i("datav:/npm/lodash/4.17.11/isArray"),S=i("datav:/npm/lodash/4.17.11/defaultsDeep"),b=i("datav:/npm/lodash/4.17.11/floor"),C=i("datav:/npm/lodash/4.17.11/isUndefined"),x=i("datav:/npm/lodash/4.17.11/isEmpty"),w=i("datav:/npm/lodash/4.17.11/isEqual"),O=i("datav:/npm/lodash/4.17.11/toNumber"),k=i("datav:/npm/lodash/4.17.11/orderBy"),D=i("datav:/npm/lodash/4.17.11/chunk"),F=i("datav:/npm/@antv/g2plot/2.4.20/dist/g2plot.min.js"),j=F.Pie,F=F.G2,z=i("datav:/com/ml-pie-basic/5.4.4/transform").transOptionKey,i=i("datav:/com/ml-pie-basic/5.4.4/utils"),T=i.transformGradientColor,N=i.isValid;return F.registerInteraction("element-single-active",{start:[{trigger:"element:mouseenter",action:"element-active:active"}],end:[{trigger:"element:mouseleave",action:"element-active:reset"}]}),F.registerInteraction("element-active",{start:[{trigger:"element:mouseenter",action:"element-active:toggle"}]}),t.exports=s.extend(function(t,e){this.config={options:{chart:{statistic:{show:!0,centerType:"text",title:"总计",staTitleTextStyle:{fontSize:20,color:"#ddd",fontWeight:"bold",fontFamily:"Arial"},titleOffset:{offsetX:0,offsetY:-4},statisticFormat:"null",statisticDesc:{statPrefix:"￥ ",statSuffix:""},staContentTextStyle:{fontSize:20,color:"#ddd",fontWeight:"bold",fontFamily:"Arial"},contentOffset:{offsetX:0,offsetY:4}},fill:{scale:{custom:!1,domain:["分类一","分类二","深圳"],excepted:"yellow",range:["#20878e","#d6a974","#7b4d2b"],scheme:"cat-1",type:"ordinal"}},label:{valueFormat:"null",describe:{prefix:"",suffix:""}},isCombine:{show:!0,piecesCount:50,defineType:"其他"},pattern:{show:!1}},legend:{cateLegend:{maxItemWidth:{show:!1,width:100},flip:{flipColor:"#000",inactiveFill:"#000",flipTextColor:"rgb(144, 160, 174)",textStyle:{fontFamily:"Arial",fontWeight:"normal",fontSize:12},pageMarker:{pageSize:12},maxRow:1},markerSpace:{itemSpacing:null,itemMarginBottom:null}},continuousLegend:{label:{alignVerizon:"rail"}}},tooltip:{statisticActive:!1,tooltipSet:{suffix:"",series:[{columnName:"type",displayName:"类别"},{columnName:"value",displayName:"数量"}]},active:{fill:{default:{type:"linearGradient",value:{angle:90,stops:[{offset:0,color:"#00ff95"},{offset:100,color:"rgba(88, 142, 233, 0.5)"}]}}},fillSet:{show:!1,fill:{default:{type:"linearGradient",value:{angle:90,stops:[{offset:0,color:"#00ff95"},{offset:100,color:"rgba(88, 142, 233, 0.5)"}]}}}}}},condition:{customStyle:[{rules:{operator:"OR",enabled:!1,expressions:[{operator:"AND",expressions:[["colorField","eq",700]]}]},fill:{show:!0,value:"#ff0000",type:"flat"}}]}}},this.container=t,this.apis=e.apis,this._data=null,this.chart=null,this.guiConfig=null,this.init(e)},{init:function(t){this.mergeConfig(t)},initChart:function(t){this.chart=new j(this.container,t),this.chart.render()},render:function(t,e){var i,o=this,n=this.mergeConfig(e);(t=this.data(t,n))&&(i=(e=y(n,"options.chart.isCombine")).show,e=e.piecesCount,i&&e<t.length-1&&(t=this.combineData(t)),this.guiConfig=z(this.config,n,c(t)),this.chart&&this.chart.destroy(),this.initChart(this.guiConfig),this.chart.off(),n.options.tooltip&&n.options.tooltip.active&&n.options.tooltip.active.trigger&&n.options.tooltip.active.show&&(i=n.options.tooltip.active.trigger,this.chart.on("element:".concat("click"===i?i:"mouseenter"),function(){var t=h(u(o.chart.getStates(),function(t){return("selected"===t.state||"active"===t.state)&&t.data}),Boolean);o.emit("itemSelect","multi"===n.options.tooltip.active.selectType?t:t&&t[0])})),this.chart.on("contextmenu",function(t){var e=y(t,"data.data");o.emit("onContextMenu",e,t)}),this.chart.on("legend-item:click",function(t){var t=y(t,"target.cfg.delegateObject.item"),e=t.value,t=t.unchecked;o.emit("legendClick",{value:e,checked:!t}),o.emit("legendSelect",{value:e,checked:!t})}))},combineData:function(t){var e=y(this.config,"options.chart.isCombine"),i=e.piecesCount,e=e.defineType,t=c(t),t=k(t,["value"],["desc"]),t=D(t,i),i=t[0],t=t[1],o={type:e,value:0,colorField:y(t,[0,"colorField"])};return u(t,function(t){return o.value+=t.value}),i.push(o),i},resize:function(t,e){},setColors:function(){},data:function(t,e){t&&(this.__data=t);var i=y(this.config,"options.chart.fill.scale.type"),o=y(this.config,"options.chart.fill.mapping");return this._data=c(this.__data),g(this._data)&&this._data.filter(function(t){return N(t.type)&&N(t.value)}).map(function(t){return N(t.colorField)&&(t.colorField="ordinal"!==i&&o?O(t.colorField):""+t.colorField),t.value&&(t.value=O(t.value)),t})},mergeConfig:function(t){return t&&(0===Object.keys(this.config).length?this.config=t:(this.config.theme=S(t.theme||{},this.config.theme),this.setColors(),y(t,"options.chart.fill.scale.range")&&r(this.config,"options.chart.fill.scale.range",y(t,"options.chart.fill.scale.range")),y(t,"options.condition")&&r(this.config,"options.condition",y(t,"options.condition")),y(t,"options.tooltip.tooltipSet.series")&&(t.options.tooltip.tooltipSet.series=t.options.tooltip.tooltipSet.series.map(function(t){return t.columnName=t.columnName||"type",t.displayName=t.displayName||"类型",t.suffix=t.suffix||"",t}),r(this.config,"options.tooltip.tooltipSet.series",y(t,"options.tooltip.tooltipSet.series"))),this.config=S(t||{},this.config))),this.config},getColorableConfig:function(t){var e,i,o;return!t||x(t)?{}:(e=t.textColor,i=t.axisColor,o=t.palette,t=t.bgColor,o&&0<o.length&&o[b(o.length/2)],{options:{chart:{fill:{scale:{range:u(y(this.config,"options.chart.fill.scale.range"),function(t,e){return o[e]||o[e%o.length]})}},label:{textStyle:{color:e},stroke:{strokeColor:e}}},legend:{textStyle:{color:i},cateLegend:{flip:{show:!0,textStyle:{color:e},pageMarker:{flipColor:t,inactiveFill:t}}},continuousLegend:{track:{railColor:t},handler:{fill:i}}}}})},getThemableConfig:function(t,e){var i,o,n,a,l,s,r,c,h,p=this.config.options,d=p.chart.label.textStyle,f=p.tooltip,p=p.legend,e=e||{},u=e.color,g=e.font,e=e.complexity,u=this.getColorableConfig(u||t),t={},d=(g&&(i=function(t,e){return void 0===y(g,t)?{}:v({},e,y(g,t))},n="family",a="fontFamily",l="weight",s="fontWeight",r="color.primary",c="color.secondary",h="color",t={options:{chart:{label:{textStyle:m(m(m({fontSize:y(g,o="size",0)+d.fontSize},i(n,a)),i(l,s)),i(r,h))}},tooltip:{tooltipSet:{titleTextStyle:m(m(m({fontSize:y(g,o,0)+f.tooltipSet.titleTextStyle.fontSize},i(n,a)),i(l,s)),i(r,h)),contentTextStyle:m(m(m({fontSize:y(g,o,0)+f.tooltipSet.contentTextStyle.fontSize},i(n,a)),i(l,s)),i(r,h))}},legend:{textStyle:m(m(m({fontSize:y(g,o,0)+p.textStyle.fontSize},i(n,a)),i(l,s)),i(c,h)),cateLegend:{flip:{textStyle:m(m(m({fontSize:y(g,o,0)+p.cateLegend.flip.fontSize},i(n,a)),i(l,s)),i(c,h))}}}}}),{});return"L0"===e?d={options:{chart:{label:{show:!1}},tooltip:{tooltipSet:{show:!0},active:{show:!0}},legend:{isShow:!1}}}:"L1"===e?d={options:{chart:{label:{show:!1}},tooltip:{tooltipSet:{show:!0},active:{show:!0}},legend:{isShow:!0}}}:"L2"===e&&(d={options:{chart:{label:{show:!0}},tooltip:{tooltipSet:{show:!0},active:{show:!0}},legend:{isShow:!0}}}),S({},d,t,u)},handleNonstandardData:function(t){var i=["type","value","colorField"],t=c(t);return h(t,function(t){return p(t,function(t,e){return d(i,e)})})},isHighlight:function(t){var e=t.item,t=t.data;return f(t,function(t){return f([e],t)})},highlight:function(t){var e=t.data,t=t.style;if(Object.keys(e).length<=0)return!1;var i=this,o=y(this.config,"options.tooltip.active"),n=o.show,a=o.selectType,l=o.fillSet,s=l.show,l=l.fill,r=o.line,o="click"===o.trigger?"selected":"active",s=C(t)||x(t)?{fillStyle:s?T(l).fill:"",stroke:r.lineColor}:m({},t),l=v({},o,!!n&&{style:m({},s)}),c=(this.chart.update(m(m({},this.guiConfig),{},{state:m(m({},this.guiConfig.state),l)})),g(e)?e:[e]),c=w(this.prevOriginData,e)?this.prevFilterData:this.handleNonstandardData(c);c="single"===a?[c[0]]:c,this.chart.setState(o,function(t){return i.isHighlight({item:t,data:c})}),this.prevOriginData=e,this.prevFilterData=c},reset:function(){var t="click"===y(this.config,"options.tooltip.active").trigger?"selected":"active";this.chart&&this.chart.destroy(),this.initChart(this.guiConfig),this.chart.setState(t,function(){return!1}),this.render(this._data,this.config)},destroy:function(){this.chart&&this.chart.destroy(),this.chart=null,this._data=null,this.container&&(this.container.innerHTML="")}}),t.exports});