// env=undefined => env=publish 
Cube("datav:/com/@echarts/echarts-line-24time/0.0.19",["datav:/com/maliang-echarts-utils/2.1.2","datav:/npm/bcore/0.0.18/event","datav:/npm/jquery/2.1.4","datav:/npm/lodash/4.6.1","datav:/npm/echarts/4.1.0"],function(a,b,c){function d(a){var b=g.cloneDeep(a),c={series:[]},d=g.groupBy(b,"s"),e=new Date(2018,7,17);return c.series=g.map(cfg.series,function(a,b){var c=d[a.name||b+1];return a.name&&!c&&(c=d[b+1]),c?{data:g.map(c,function(a){return[e.Format("yyyy-MM-dd")+" "+a.x,a.y,a.s]})}:{data:null}}),c}var e=c("datav:/npm/bcore/0.0.18/event"),f=c("datav:/npm/jquery/2.1.4"),g=c("datav:/npm/lodash/4.6.1"),h=c("datav:/npm/echarts/4.1.0"),i=c("datav:/com/maliang-echarts-utils/2.1.2"),j={format1:function(a,b){var c=new Date(a),d=c.getHours();return d=0!==b&&0===d?24:c.Format("hh"),d},format2:function(a,b){var c=new Date(a),d=c.getHours();return d=0!==b&&0===d?24:c.Format("hh"),d+":00"},format3:function(a,b){var c=new Date(a),d=c.getHours();return d=0!==b&&0===d?24:c.Format("hh"),d+"\u65F6"}};return a.exports=e.extend(function(a,b){this.config={tooltip:{axisPointer:{label:{formatter:function(a){var b=new Date(a.value);return b.Format("hh:mm:ss")}}}},xAxis:{axisLabel:{showFormat:"format1"}}},this.container=f(a),this.apis=b.apis,this._data=null,this.chart=null,this.init(b)},{init:function(a){var b=this;this.mergeConfig(a),this.chart=h.init(this.container[0],null,{renderer:a.renderer}),this.chart.off(),this.chart.on("click",function(a){var c=b._data.filter(function(b){return b.s===a.data[2]&&b.x===a.data[0].split(" ")[1]});b.emit("click",c.length&&c[0])}),this.chart.on("legendselectchanged",function(a){var c=[];c=g.filter(g.keys(a.selected),function(b){return a.selected[b]}),b.emit("legend-select-changed",{selected:c,name:a.name})})},switchRenderer:function(a){this.chart.dispose(),this.chart=h.init(this.container[0],null,{renderer:a}),this.render()},highlight:function(a){a=g.merge(a||{},{type:"highlight"}),this.chart.dispatchAction(a)},downplay:function(a){a=g.merge(a||{},{type:"downplay"}),this.chart.dispatchAction(a)},showTip:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};a=g.merge(a,{type:"showTip"}),this.chart.dispatchAction(a)},hideTip:function(){this.chart.dispatchAction({type:"hideTip"})},legendAction:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},b=a.type,c=void 0===b?"legendToggleSelect":b,d=a.name;c&&-1!==["legendSelect","legendUnSelect","legendToggleSelect"].indexOf(c)&&this.chart.dispatchAction({type:c,name:d})},render:function(a,b){a=this.data(a),cfg=this.mergeConfig(b);var c=d(a,cfg),e=g.defaultsDeep(c,cfg);e.legend.data=e.series.map(function(a){return{name:a.name,icon:"rect"}}),this.chart.setOption(i.config2echartsOptions(e),!0)},resize:function(a,b){this.chart.resize({width:a,height:b})},data:function(a){return a&&(this._data=a),this._data},mergeConfig:function(a){return this.config=i.setGlobalColor(i.mergeConfig(this.config,a)),a&&a.xAxis&&a.xAxis.axisLabel&&(this.config.xAxis.axisLabel.formatter=j[a.xAxis.axisLabel.showFormat]),this.config},updateArray:function(a,b){this.config[a]&&b[a]&&b[a].length<this.config[a].length&&(this.config[a]=g.take(this.config[a],b[a].length)),this.config=g.defaultsDeep(b||{},this.config)},clear:function(){this.chart&&this.chart.clear&&this.chart.clear()},destroy:function(){this.chart&&this.chart.dispose&&this.chart.dispose()}}),Date.prototype.Format=function(a){var b={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};for(var c in /(y+)/.test(a)&&(a=a.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),b)new RegExp("("+c+")").test(a)&&(a=a.replace(RegExp.$1,1==RegExp.$1.length?b[c]:("00"+b[c]).substr((""+b[c]).length)));return a},a.exports});